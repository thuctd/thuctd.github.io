"use strict";(self.webpackChunkdlxl=self.webpackChunkdlxl||[]).push([[305],{80305:(sn,S,p)=>{p.r(S),p.d(S,{DlxlModule:()=>rn});var $=p(5923),G=p(48387),P=p(85913),z=p(34291),g=p(69808),x=p(15228),r=p(93075),R=p(15439),d=p.n(R),t=p(5e3),b=p(45230),Z=p(69798),N=p(99826),f=p(67322),D=p(77531),C=p(86856),B=p(74107),w=p(90508),I=p(47423),k=p(25245),T=p(30627);function V(i,l){if(1&i&&(t.TgZ(0,"mat-option",35),t._uU(1),t.qZA()),2&i){const e=l.$implicit;t.Q6J("value",e.GiaTri),t.xp6(1),t.hij("",e.NoiDung," ")}}let W=(()=>{class i{constructor(e,n,o,a){this.plus=e,this.fb=n,this.rtSv=o,this.route=a,this.main=this.fb.group({_id:[,[]],KyThanhToan:[,[r.kI.required]],Email:[,],MaKhachHang:[,[r.kI.required]],KhachHang:[,[r.kI.required]],DiaChi:[,[r.kI.required]],MaGCS:[,],ChuTaiKhoan:[,],SoTaiKhoan:[,],NganHang:[,],Nam:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],Thang:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],SanLuong:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],DonGia:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],TruocThue:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],Thue:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],TongTien:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],KyHieuHoaDon:[,[]],SoHoaDon:[,[]],NgayMuaHang:[,[]],NgayHoaDon:[,[]],ThueSuat:[,[r.kI.pattern("^[0-9]*$")]],TrangThaiThanhToan:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],TrangThaiHoSo:[,[r.kI.required]],DaGuiMail:[,[r.kI.pattern("^[0-9]*$")]],TenBangKe:[,[]]}),this.title="L\u1eadp b\u1ea3ng k\xea",this.global=!0,this.dbName="dien-luc",this.api="dmt-input",this.db=null,this.userId=this.plus.userId,this.usr=this.plus.usr,this.items=[],this.selectedItem=null,this.filter=[],this.chart=[],this.errors=[]}ngOnInit(){this.plus.setTiTle(this.title),this.plus.IDB_InitDB(this.dbName).subscribe(e=>this.db=e),this.getIDB()}getIDB(){const e=this.route.snapshot.paramMap.get("id");this.plus.httpGet(this.api+"/"+e).subscribe(n=>{const o=this.plus.Crypt_DecryptRest(n);this.main.patchValue(o),(null==o||null==o)&&this.plus.IDB_DB_GetAllByIndexKey(this.db,"dmt-input","MaKhachHang","=",e).subscribe(a=>{this.main.patchValue(a)})})}ngOnDestroy(){console.log("Destroy",this.api),this.plus.subs.unsubscribe(),this.rtSv.leaveRoom(this.api)}save(){if(this.main.invalid)return;const e=this.main.value;null==e._id?(delete e._id,this.plus.httpPost(this.api,e,this.global).subscribe(n=>{n.status&&(this.plus.clickBtn("closeModal"),this.plus.updateAPi.next(!0))})):this.plus.httpPut(this.api,e,this.global).subscribe(n=>{n.status&&(this.plus.updateAPi.next(!0),this.plus.clickBtn("closeModal"))})}onEdit(e){this.selectedItem=e;const n=this.plus.dateToHtmlObj(e,["NgayHoaDon"]);this.main.patchValue(n),this.plus.clickBtn("openModal")}onDelete(e){!confirm("B\u1ea1n mu\u1ed1n x\xf3a?")||(this.plus.load(),this.plus.httpDisable(this.api,e,this.global).then(o=>{this.plus.updateAPi.next(!0)}))}chooseOpt(e,n,o,a=!1){this.main.controls[n].setValue(e[o]),a&&this.main.controls[n+"ID"].setValue(e._id)}convertInputDay(e,n){const o=d()(e,"DD-MM-YYYY").toDate();this.main.controls[n].setValue(o)}closeModal(){this.plus.goBack()}search(e){this.filter=e}find(e){this.items=e}checkPer(e){return this.plus.checkPer(this.api,e)}reload(){return this.plus.reload(this.dbName+"/"+this.api)}reset(){this.plus.loaded(),this.filter=[],this.getIDB(),this.main.reset({})}changePage(e){this.filter=this.items.slice(e.pageIndex*e.pageSize,(e.pageIndex+1)*e.pageSize)}ondragover(){document.getElementById("dropZone").setAttribute("drop-active","true")}trackByFn(e,n){return n}resetDB(){this.plus.resetDB(this.db,this.api)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(b.T),t.Y36(r.qu),t.Y36(Z.i),t.Y36(N.gz))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-nlmt-input-detail"]],decls:128,vars:7,consts:[[1,"container"],[3,"formGroup"],[1,"row"],["type","text","readonly","","autocomplete","off","matInput","","formControlName","KhachHang"],["matSuffix",""],["type","text","readonly","","autocomplete","off","matInput","","formControlName","DiaChi"],["type","text","readonly","","autocomplete","off","matInput","","formControlName","TenBangKe"],[1,"col-6"],["hidden","","formControlName","_id"],["required","","type","text","autocomplete","off","matInput","","formControlName","KyThanhToan"],["type","text","readonly","","autocomplete","off","matInput","","formControlName","Email"],["type","text","readonly","","autocomplete","off","matInput","","formControlName","MaKhachHang"],["type","text","readonly","","autocomplete","off","matInput","","formControlName","MaGCS"],["type","text","autocomplete","off","matInput","","formControlName","ChuTaiKhoan"],["type","text","autocomplete","off","matInput","","formControlName","SoTaiKhoan"],["type","text","autocomplete","off","matInput","","formControlName","NganHang"],["type","text","autocomplete","off","matInput","","formControlName","Nam"],["type","text","autocomplete","off","matInput","","formControlName","Thang"],["type","text","autocomplete","off","matInput","","formControlName","NgayMuaHang"],["numberFormat","","type","text","autocomplete","off","matInput","","formControlName","SanLuong"],["type","text","autocomplete","off","matInput","","formControlName","DonGia"],["type","text","autocomplete","off","matInput","","formControlName","TruocThue"],["type","text","autocomplete","off","matInput","","formControlName","Thue"],["type","text","autocomplete","off","matInput","","formControlName","TongTien"],["type","text","autocomplete","off","matInput","","formControlName","KyHieuHoaDon"],["type","text","autocomplete","off","matInput","","formControlName","SoHoaDon"],["matInput","","formControlName","NgayHoaDon","placeholder","DD/MM/YYYY","autocomplete","off",3,"matDatepicker","blur","focus"],["NgayHoaDonInput",""],["matSuffix","",3,"for"],["NgayHoaDon",""],["hidden",""],["type","text","autocomplete","off","matInput","","formControlName","ThueSuat"],["required","","formControlName","TrangThaiHoSo"],[3,"value",4,"ngFor","ngForOf"],["id","closeModal","mat-raised-button","","color","primary","data-dismiss","modal",3,"click"],[3,"value"]],template:function(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"mat-form-field")(4,"mat-label"),t._uU(5,"Kh\xe1ch h\xe0ng"),t.qZA(),t._UZ(6,"input",3)(7,"span",4),t.qZA(),t.TgZ(8,"mat-form-field")(9,"mat-label"),t._uU(10,"\u0110\u1ecba ch\u1ec9"),t.qZA(),t._UZ(11,"input",5)(12,"span",4),t.qZA(),t.TgZ(13,"mat-form-field")(14,"mat-label"),t._uU(15,"T\xean b\u1ea3ng k\xea"),t.qZA(),t._UZ(16,"input",6)(17,"span",4),t.qZA(),t.TgZ(18,"div",7),t._UZ(19,"input",8),t.TgZ(20,"mat-form-field")(21,"mat-label"),t._uU(22,"K\u1ef3 thanh to\xe1n"),t.qZA(),t._UZ(23,"input",9)(24,"span",4),t.qZA(),t.TgZ(25,"mat-form-field")(26,"mat-label"),t._uU(27,"Email"),t.qZA(),t._UZ(28,"input",10)(29,"span",4),t.qZA(),t.TgZ(30,"mat-form-field")(31,"mat-label"),t._uU(32,"M\xe3 kh\xe1ch h\xe0ng"),t.qZA(),t._UZ(33,"input",11)(34,"span",4),t.qZA(),t.TgZ(35,"mat-form-field")(36,"mat-label"),t._uU(37,"M\xe3 G C S"),t.qZA(),t._UZ(38,"input",12)(39,"span",4),t.qZA(),t.TgZ(40,"mat-form-field")(41,"mat-label"),t._uU(42,"Ch\u1ee7 t\xe0i kho\u1ea3n"),t.qZA(),t._UZ(43,"input",13)(44,"span",4),t.qZA(),t.TgZ(45,"mat-form-field")(46,"mat-label"),t._uU(47,"S\u1ed1 t\xe0i kho\u1ea3n"),t.qZA(),t._UZ(48,"input",14)(49,"span",4),t.qZA(),t.TgZ(50,"mat-form-field")(51,"mat-label"),t._uU(52,"Ng\xe2n h\xe0ng"),t.qZA(),t._UZ(53,"input",15)(54,"span",4),t.qZA(),t.TgZ(55,"mat-form-field")(56,"mat-label"),t._uU(57,"N\u0103m"),t.qZA(),t._UZ(58,"input",16)(59,"span",4),t.qZA(),t.TgZ(60,"mat-form-field")(61,"mat-label"),t._uU(62,"Th\xe1ng"),t.qZA(),t._UZ(63,"input",17)(64,"span",4),t.qZA(),t.TgZ(65,"mat-form-field")(66,"mat-label"),t._uU(67,"Ng\xe0y mua h\xe0ng"),t.qZA(),t._UZ(68,"input",18)(69,"span",4),t.qZA()(),t.TgZ(70,"div",7)(71,"mat-form-field")(72,"mat-label"),t._uU(73,"S\u1ea3n l\u01b0\u1ee3ng"),t.qZA(),t._UZ(74,"input",19)(75,"span",4),t.qZA(),t.TgZ(76,"mat-form-field")(77,"mat-label"),t._uU(78,"\u0110\u01a1n gi\xe1"),t.qZA(),t._UZ(79,"input",20)(80,"span",4),t.qZA(),t.TgZ(81,"mat-form-field")(82,"mat-label"),t._uU(83,"Tr\u01b0\u1edbc thu\u1ebf"),t.qZA(),t._UZ(84,"input",21)(85,"span",4),t.qZA(),t.TgZ(86,"mat-form-field")(87,"mat-label"),t._uU(88,"Thu\u1ebf"),t.qZA(),t._UZ(89,"input",22)(90,"span",4),t.qZA(),t.TgZ(91,"mat-form-field")(92,"mat-label"),t._uU(93,"T\u1ed5ng ti\u1ec1n"),t.qZA(),t._UZ(94,"input",23)(95,"span",4),t.qZA(),t.TgZ(96,"mat-form-field")(97,"mat-label"),t._uU(98,"K\xfd hi\u1ec7u h\xf3a \u0111\u01a1n"),t.qZA(),t._UZ(99,"input",24)(100,"span",4),t.qZA(),t.TgZ(101,"mat-form-field")(102,"mat-label"),t._uU(103,"S\u1ed1 h\xf3a \u0111\u01a1n"),t.qZA(),t._UZ(104,"input",25)(105,"span",4),t.qZA(),t.TgZ(106,"mat-form-field")(107,"mat-label"),t._uU(108,"Ng\xe0y h\xf3a \u0111\u01a1n"),t.qZA(),t.TgZ(109,"input",26,27),t.NdJ("blur",function(){t.CHM(o);const c=t.MAs(110);return n.convertInputDay(c.value,"NgayHoaDon")})("focus",function(){return t.CHM(o),t.MAs(113).open()}),t.qZA(),t._UZ(111,"mat-datepicker-toggle",28)(112,"mat-datepicker",null,29),t.qZA(),t.TgZ(114,"mat-form-field",30)(115,"mat-label"),t._uU(116,"Thu\u1ebf su\u1ea5t"),t.qZA(),t._UZ(117,"input",31)(118,"span",4),t.qZA(),t.TgZ(119,"mat-form-field")(120,"mat-label"),t._uU(121,"Tr\u1ea1ng th\xe1i h\u1ed3 s\u01a1"),t.qZA(),t.TgZ(122,"mat-select",32),t.YNc(123,V,2,2,"mat-option",33),t.ALo(124,"catalog"),t.qZA()()()()(),t.TgZ(125,"button",34),t.NdJ("click",function(){return n.closeModal()}),t.TgZ(126,"mat-icon"),t._uU(127,"undo"),t.qZA()()()}if(2&e){const o=t.MAs(113);t.xp6(1),t.Q6J("formGroup",n.main),t.xp6(108),t.Q6J("matDatepicker",o),t.xp6(2),t.Q6J("for",o),t.xp6(12),t.Q6J("ngForOf",t.lcZ(124,5,"DMTTrangThaiHoSo")),t.xp6(2),t.Q6J("@slideIn",void 0)}},directives:[r._Y,r.JL,r.sg,f.KE,f.hX,D.Nt,r.Fj,r.JJ,r.u,f.R9,r.Q7,C.hl,C.nW,C.Mq,B.gD,g.sg,w.ey,I.lW,k.Hw],pipes:[T.pW],styles:[""],data:{animation:[x.Ym]}}),i})();var K=p(9157),X=p(86805),j=p(70930);function A(i,l){const e="object"==typeof l;return new Promise((n,o)=>{const a=new j.Hp({next:c=>{n(c),a.unsubscribe()},error:o,complete:()=>{e?n(l.defaultValue):o(new X.K)}});i.subscribe(a)})}var E=p(50590),tt=p(94327),et=p.n(tt),nt=p(40520),Y=function(i,l,e,n){return new(e||(e=Promise))(function(a,c){function m(u){try{s(n.next(u))}catch(_){c(_)}}function h(u){try{s(n.throw(u))}catch(_){c(_)}}function s(u){u.done?a(u.value):function o(a){return a instanceof e?a:new e(function(c){c(a)})}(u.value).then(m,h)}s((n=n.apply(i,l||[])).next())})};let F=(()=>{class i{constructor(e,n,o,a){this.fb=e,this.plus=n,this.rtSv=o,this.http=a,this.global=!0,this.payForm=this.fb.group({_id:[,[]],TenBangKe:[,[r.kI.required]],TrangThai:[,[r.kI.required]],LichSuCapNhat:[,[r.kI.required]],TongPhatLen:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],ThanhTienTruocThue:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],Thue:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],ThanhTienSauThue:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],DanhSach:[]})}statusMail(e){console.log("statusMail()"),this.plus.httpPut("dmt-input",{_id:e._id,DaGuiMail:1,dateModify:Date.now()},!0).subscribe(n=>{console.log(n)})}updateNameBill(e,n){return Y(this,void 0,void 0,function*(){const o=d()().format("x");console.log("updateNameBill()",+o);const a=e,m=Math.ceil(e.length/200),h=[];for(let s=0;s<a.length;s++)h.push(a[s]._id);for(let s=0;s<m;s++){const u={ids:h.slice(200*s,s+200),setData:{TenBangKe:n,dateModify:+o,TrangThaiHoSo:2},dateModify:+o};yield A(this.plus.httpPut("dmt-input/update",u,!0).pipe((0,E.P)()));const _=this.geneBodyPay(e,d()(+o,"x").toDate(),"G\u1eedi b\u1ea3ng k\xea");yield A(this.plus.httpPost("dmt-pay",_,!0).pipe((0,E.P)())),this.plus.reload("dien-luc/dmt-input")}})}changeStatusList(e,n){return Y(this,void 0,void 0,function*(){const o=d()().format("x");console.log("changeStatusList()",o);const a=e.DanhSach,m=Math.ceil(e.DanhSach.length/200),h=[];for(let s=0;s<a.length;s++)h.push(a[s]._id);for(let s=0;s<m;s++){const u={ids:h.slice(200*s,s+200),setData:{dateModify:+o,TrangThaiHoSo:n,NgayThanhToan:d()(o).format("M/YYYY")},dateModify:+o};yield A(this.plus.httpPut("dmt-input/update",u,!0).pipe((0,E.P)())),e.TrangThai=n,delete e.__v,yield A(this.plus.httpPut("dmt-pay",e,!0).pipe((0,E.P)())),this.plus.reload("dien-luc/dmt-pay")}})}updateQualified(e){const n=d()().format("x");console.log("updateQualified()",n),Math.ceil(e.length/200);const c=[];for(let h=0;h<e.length;h++)c.push(e[h]._id);this.plus.httpPut("dmt-input/update",{ids:c,setData:{dateModify:+n,TrangThaiHoSo:1},dateModify:+n},!0).subscribe(h=>{this.plus.reload("dien-luc/dmt-input")})}deleteList(e){const n=[];for(let o=0;o<e.length;o++)n.push(e[o]._id);this.plus.httpPost("dmt-input/multi",n,this.global).subscribe(o=>{this.plus.reload("dien-luc/dmt-input")})}download(e,n){let o=this.plus.getApiUrl("dmt-input/export/"+n);const a=this.plus.getHeader();a.responseType="blob",this.http.post(o,e,a).subscribe(c=>{var m=new Blob([c],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),h=n+"-"+Date.now()+".xlsx";et()(m,h)})}geneBodyPay(e,n,o){console.log("geneBodyPay()");const a={};a.TenBangKe=d()(n).format("YYMMDDHHmm"),a.KyThanhToan=e[0].Thang+"/"+e[0].Nam,a.LichSuCapNhat=[o+": "+d()().format("HH:mm-DD/MM/YYYY")],a.TrangThai=2,a.TongPhatLen=0,a.ThanhTienTruocThue=0,a.Thue=0,a.Nam=e[0].Nam,a.Thang=e[0].Thang,a.ThanhTienSauThue=0;for(let c=0;c<e.length;c++){const m=e[c];a.DanhSach=e,a.TongPhatLen+=m.SanLuong,a.ThanhTienTruocThue+=m.TruocThue,a.Thue+=m.Thue,a.ThanhTienSauThue+=m.TongTien}return a}geneBodyMail(e,n,o){return{from:this.plus.user.value.unit,status:0,email:e.Email,title:`Th\xf4ng b\xe1o chi ti\u1ec1n \u0111i\u1ec7n NLMTMN th\xe1ng ${+n.getMonth()+1} n\u0103m ${n.getFullYear()}`,company:e.KhachHang,index:o,message:`<p>K\xednh g\u1eedi kh\xe1ch h\xe0ng: ${e.KhachHang}.</p>\n          <p>\u0110i\u1ec7n l\u1ef1c Xu\xe2n L\u1ed9c k\xednh g\u1eedi \u0111\u1ebfn qu\xfd kh\xe1ch h\xe0ng n\u1ed9i dung thanh to\xe1n ti\u1ec1n \u0111i\u1ec7n m\u1eb7t tr\u1eddi tr\xean m\xe1i nh\xe0 v\u1edbi n\u1ed9i dung nh\u01b0 sau:</p>\n          <ul> M\xe3 kh\xe1ch h\xe0ng: ${e.MaKhachHang}.</ul>\n          <ul> T\xean kh\xe1ch h\xe0ng: ${e.KhachHang}.</ul>\n          <ul> \u0110\u1ecba ch\u1ec9: ${e.DiaChi}.</ul>\n          <ul> M\xe3 ghi ch\u1ec9 s\u1ed1: ${e.MaGCS}.</ul>\n          <ul> T\xean t\xe0i kho\u1ea3n: ${e.ChuTaiKhoan}.</ul>\n          <ul> S\u1ed1 t\xe0i kho\u1ea3n: ${e.SoTaiKhoan}.</ul>\n          <ul> Ng\xe2n h\xe0ng: ${e.NganHang}.</ul>\n          <ul> N\u0103m: ${n.getFullYear()}.</ul>\n          <ul> Th\xe1ng: ${+n.getMonth()+1}.</ul>\n          <ul> \u0110i\u1ec7n ph\xe1t l\xean l\u01b0\u1edbi: ${this.plus.numberWithCommas(e.SanLuong)} kWh.</ul>\n          <ul> \u0110\u01a1n gi\xe1: ${this.plus.numberWithCommas(e.DonGia)} VND/kWh.</ul>\n          <ul> T\u1ec9 l\u1ec7 Thu\u1ebf: ${e.TiLeThue} %.</ul>\n          <ul> Th\xe0nh ti\u1ec1n ch\u01b0a thu\u1ebf VAT: ${this.plus.numberWithCommas(e.TruocThue)} VND.</ul>\n          <ul> Thu\u1ebf VAT: ${this.plus.numberWithCommas(e.Thue)} VND.</ul>\n          <ul> T\u1ed5ng ti\u1ec1n: ${this.plus.numberWithCommas(e.TongTien)} VND.</ul>\n          <p> M\u1ecdi \xfd ki\u1ebfn ph\u1ea3n h\u1ed3i vui l\xf2ng li\xean h\u1ec7 \u0110i\u1ec7n l\u1ef1c Xu\xe2n L\u1ed9c qua s\u1ed1 \u0111i\u1ec7n tho\u1ea1i Mr. \u0110\u1ea1t - <a href="tel:0937232239">0937232239 </a> ho\u1eb7c Mrs. Ph\u01b0\u1edbc Anh - <a href="tel:0583223344" >0583223344 </a> \u0111\u1ec3 \u0111\u01b0\u1ee3c gi\u1ea3i \u0111\xe1p.</p>\n          <p> Ph\u1ea3n h\u1ed3i h\xf3a \u0111\u01a1n qu\xfd kh\xe1ch vui l\xf2ng g\u1eedi email v\u1ec1 c\u1ea3 02 \u0111\u1ecba ch\u1ec9: <a href="mailto:dienlucxuanloc.nlmt@gmail.com;tckt.dlxl.pcdn@gmail.com">dienlucxuanloc.nlmt@gmail.com</a> v\xe0 <a href="mailto:dienlucxuanloc.nlmt@gmail.com;tckt.dlxl.pcdn@gmail.com">tckt.dlxl.pcdn@gmail.com</a> </p>\n          Tr\xe2n tr\u1ecdng.`}}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(r.qu),t.LFG(b.T),t.LFG(Z.i),t.LFG(nt.eN))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var Q=p(31409),L=p(87238),q=p(25862);function ot(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){return t.CHM(e),t.oxw().approveList()}),t.TgZ(1,"mat-icon"),t._uU(2,"done_all"),t.qZA()()}}function at(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",26),t.NdJ("click",function(){return t.CHM(e),t.oxw().returnList()}),t.TgZ(1,"mat-icon"),t._uU(2,"replay_circle_filled"),t.qZA()()}}function lt(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",27),t.NdJ("click",function(){return t.CHM(e),t.oxw().save()}),t.TgZ(1,"mat-icon"),t._uU(2,"save"),t.qZA()()}}function rt(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",28),t.NdJ("click",function(){return t.CHM(e),t.oxw().paidList()}),t.TgZ(1,"mat-icon"),t._uU(2,"currency_exchange"),t.qZA()()}}function st(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"mat-icon",29),t.NdJ("click",function(){return t.CHM(e),t.oxw().searchText=""}),t._uU(1,"close"),t.qZA()}}function ct(i,l){1&i&&(t.TgZ(0,"th"),t._uU(1,"Ch\u1ee7 t\xe0i kho\u1ea3n"),t.qZA())}function ut(i,l){1&i&&(t.TgZ(0,"th"),t._uU(1,"S\u1ed1 t\xe0i kho\u1ea3n"),t.qZA())}function pt(i,l){1&i&&(t.TgZ(0,"th"),t._uU(1,"Ng\xe2n h\xe0ng"),t.qZA())}function mt(i,l){1&i&&(t.TgZ(0,"th"),t._uU(1,"Tr\u01b0\u1edbc thu\u1ebf"),t.qZA())}function ht(i,l){1&i&&(t.TgZ(0,"th"),t._uU(1,"Thu\u1ebf"),t.qZA())}function _t(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"td",30),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw().onEdit(o)}),t._uU(1),t.qZA()}if(2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.ChuTaiKhoan)}}function dt(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"td",30),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw().onEdit(o)}),t._uU(1),t.qZA()}if(2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.SoTaiKhoan)}}function gt(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"td",30),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw().onEdit(o)}),t._uU(1),t.qZA()}if(2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.NganHang)}}function ft(i,l){if(1&i&&(t.TgZ(0,"td",32),t._uU(1),t.ALo(2,"number"),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,e.TruocThue))}}function Tt(i,l){if(1&i&&(t.TgZ(0,"td",32),t._uU(1),t.ALo(2,"number"),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,e.Thue))}}function xt(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"mat-icon",40),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw().onDelete(o)}),t._uU(1,"delete"),t.qZA()}}function bt(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"td",30),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw().onEdit(a)}),t._uU(2),t.qZA(),t.TgZ(3,"td",30),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw().onEdit(a)}),t._uU(4),t.qZA(),t.YNc(5,_t,2,1,"td",31),t.YNc(6,dt,2,1,"td",31),t.YNc(7,gt,2,1,"td",31),t.TgZ(8,"td",30),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw().onEdit(a)}),t._uU(9),t.ALo(10,"number"),t.qZA(),t.TgZ(11,"td",32),t._uU(12),t.ALo(13,"number"),t.qZA(),t.YNc(14,ft,3,3,"td",33),t.YNc(15,Tt,3,3,"td",33),t.TgZ(16,"td",32),t._uU(17),t.ALo(18,"number"),t.qZA(),t.TgZ(19,"td",32)(20,"span",34),t.NdJ("blur",function(o){const c=t.CHM(e).$implicit;return t.oxw().changeLabel(o,c)}),t._uU(21),t.qZA()(),t.TgZ(22,"td",32)(23,"span",34),t.NdJ("blur",function(o){const c=t.CHM(e).$implicit;return t.oxw().changeSeri(o,c)}),t._uU(24),t.qZA()(),t.TgZ(25,"td",35)(26,"mat-form-field")(27,"input",36),t.NdJ("focus",function(){return t.CHM(e),t.MAs(30).open()})("dateChange",function(o){const c=t.CHM(e).$implicit;return t.oxw().changeDate(o,c)}),t.qZA(),t._UZ(28,"mat-datepicker-toggle",37)(29,"mat-datepicker",null,38),t.qZA()(),t.TgZ(31,"td"),t.YNc(32,xt,2,0,"mat-icon",39),t.qZA()()}if(2&i){const e=l.$implicit,n=t.MAs(30),o=t.oxw();t.xp6(2),t.Oqu(e.MaKhachHang),t.xp6(2),t.Oqu(e.KhachHang),t.xp6(1),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(2),t.Oqu(t.lcZ(10,18,e.SanLuong)),t.xp6(3),t.Oqu(t.lcZ(13,20,e.DonGia)),t.xp6(2),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(2),t.Oqu(t.lcZ(18,22,e.TongTien)),t.xp6(3),t.Q6J("contentEditable",!0),t.xp6(1),t.hij(" ",e.KyHieuHoaDon,""),t.xp6(2),t.Q6J("contentEditable",!0),t.xp6(1),t.hij(" ",e.SoHoaDon," "),t.xp6(3),t.Q6J("matDatepicker",n)("value",e.NgayHoaDon),t.xp6(1),t.Q6J("for",n),t.xp6(4),t.Q6J("ngIf",o.checkPer(4)&&e.TrangThai<2)}}function Zt(i,l){if(1&i&&(t.TgZ(0,"tr",41)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"lowercase"),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.qZA(),t.TgZ(16,"td"),t._uU(17),t.qZA(),t.TgZ(18,"td"),t._uU(19),t.qZA(),t.TgZ(20,"td"),t._uU(21),t.ALo(22,"numberPipe"),t.qZA(),t.TgZ(23,"td"),t._uU(24),t.ALo(25,"numberPipe"),t.qZA(),t.TgZ(26,"td"),t._uU(27),t.ALo(28,"numberPipe"),t.qZA(),t.TgZ(29,"td"),t._uU(30),t.ALo(31,"numberPipe"),t.qZA(),t.TgZ(32,"td")(33,"b"),t._uU(34),t.ALo(35,"numberPipe"),t.qZA()()()),2&i){const e=l.$implicit;t.xp6(2),t.Oqu(e.MaKhachHang),t.xp6(2),t.Oqu(e.KhachHang),t.xp6(2),t.Oqu(e.DiaChi),t.xp6(2),t.Oqu(e.MaGCS),t.xp6(2),t.Oqu(e.ChuTaiKhoan),t.xp6(2),t.Oqu(t.lcZ(13,14,e.SoTaiKhoan)),t.xp6(3),t.Oqu(e.NganHang),t.xp6(2),t.Oqu(e.Nam),t.xp6(2),t.Oqu(e.Thang),t.xp6(2),t.Oqu(t.lcZ(22,16,e.SanLuong)),t.xp6(3),t.Oqu(t.lcZ(25,18,e.DonGia)),t.xp6(3),t.Oqu(t.lcZ(28,20,e.TruocThue)),t.xp6(3),t.Oqu(t.lcZ(31,22,e.Thue)),t.xp6(4),t.hij(" ",t.lcZ(35,24,e.TongTien)," ")}}let Nt=(()=>{class i{constructor(e,n,o,a,c,m,h){this.plus=e,this.fb=n,this.rtSv=o,this.docxSv=a,this.route=c,this.nlmtSv=m,this.excelSv=h,this.main=this.fb.group({Email:[,[r.kI.required]],MaKhachHang:[,[r.kI.required]],KhachHang:[,[r.kI.required]],DiaChi:[,[r.kI.required]],MaGCS:[,[r.kI.required]],ChuTaiKhoan:[,[r.kI.required]],SoTaiKhoan:[,[r.kI.required]],NganHang:[,[r.kI.required]],Nam:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],Thang:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],SanLuong:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],DonGia:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],TruocThue:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],Thue:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],TongTien:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],KyHieuHoaDon:[,[r.kI.required,r.kI.minLength(3)]],SoHoaDon:[,[r.kI.required,r.kI.minLength(3)]],NgayHoaDon:[,[r.kI.required]],TrangThai:[,],DaGuiMail:[0]}),this.title="Chi ti\u1ebft b\u1ea3ng k\xea",this.global=!0,this.dbName="dien-luc",this.api="dmt-pay",this.db=null,this.userId=this.plus.userId,this.usr=this.plus.usr,this.selectedItem=null,this.filter=[],this.chart=[],this.errors=[],this.searchText="",this.schema=[{column:"K\u1ef3 thanh to\xe1n",type:String,value:s=>s.KyThanhToan},{column:"M\xe3 kh\xe1ch h\xe0ng",type:String,value:s=>s.MaKhachHang},{column:"Kh\xe1ch h\xe0ng",type:String,value:s=>s.KhachHang},{column:"\u0110\u1ecba ch\u1ec9",type:String,value:s=>s.DiaChi},{column:"M\xe3 G C S",type:String,value:s=>s.MaGCS},{column:"Ch\u1ee7 t\xe0i kho\u1ea3n",type:String,value:s=>s.ChuTaiKhoan},{column:"S\u1ed1 t\xe0i kho\u1ea3n",type:String,value:s=>s.SoTaiKhoan},{column:"Ng\xe2n h\xe0ng",type:String,value:s=>s.NganHang},{column:"N\u0103m",type:Number,value:s=>s.Nam},{column:"Th\xe1ng",type:Number,value:s=>s.Thang,format:"#,##0"},{column:"S\u1ea3n l\u01b0\u1ee3ng",type:Number,value:s=>s.SanLuong,format:"#,##0"},{column:"\u0110\u01a1n gi\xe1",type:Number,value:s=>s.DonGia,format:"#,##0"},{column:"Tr\u01b0\u1edbc thu\u1ebf",type:Number,value:s=>s.TruocThue,format:"#,##0"},{column:"Thu\u1ebf",type:Number,value:s=>s.Thue,format:"#,##0"},{column:"T\u1ed5ng ti\u1ec1n",type:Number,value:s=>s.TongTien,format:"#,##0"}]}ngOnInit(){this.plus.setTiTle(this.title),this.plus.IDB_InitDB(this.dbName).subscribe(e=>function(i,l,e,n){return new(e||(e=Promise))(function(a,c){function m(u){try{s(n.next(u))}catch(_){c(_)}}function h(u){try{s(n.throw(u))}catch(_){c(_)}}function s(u){u.done?a(u.value):function o(a){return a instanceof e?a:new e(function(c){c(a)})}(u.value).then(m,h)}s((n=n.apply(i,l||[])).next())})}(this,void 0,void 0,function*(){this.getIDB(),this.db=e,this.plus.updateRealtime(this.db,this.api,this.global),this.plus.IDB_DB_CleanTrash(e,this.api)}))}exportXlsx(){var e=document.getElementById("my-table-id");window.open("data:application/vnd.ms-excel,"+encodeURIComponent(e.outerHTML))}getIDB(){const e=this.route.snapshot.paramMap.get("id");this.plus.load(),this.plus.httpGet(this.api+"/"+e).subscribe(n=>{this.plus.loaded();let o=this.plus.Crypt_DecryptRest(n);this.items=o,this.isBill=this.items.DanhSach[0].CoHoaDon})}changeDate(e,n){const o=this.items.DanhSach.indexOf(n);this.items.DanhSach[o].NgayHoaDon=e.value}changeLabel(e,n){const o=this.items.DanhSach.indexOf(n);this.items.DanhSach[o].KyHieuHoaDon=e.target.innerText}changeSeri(e,n){const o=this.items.DanhSach.indexOf(n);this.items.DanhSach[o].SoHoaDon=e.target.innerText}ngOnDestroy(){console.log("Destroy",this.api),this.plus.subs.unsubscribe(),this.rtSv.leaveRoom(this.api)}save(){const e=this.items;delete e.__v,this.plus.httpPut(this.api,e,this.global).subscribe(n=>{n.status&&this.plus.updateAPi.next(!0)})}completeBill(){}exportWord(){this.items.DanhSach.map((e,n)=>{e.TT=n+1,e.MatHang="\u0110MTMN"}),this.nlmtSv.download(this.items,"PTC")}reportKD(){this.items.DanhSach.map((e,n)=>{e.TT=n+1,e.MatHang="\u0110MTMN"}),this.nlmtSv.download(this.items,1==this.isBill?"PKD":"PKDNoBill")}exportUNC(){this.items.BangChu=this.plus.numToVi(this.items.ThanhTienSauThue),this.nlmtSv.download(this.items,"UNC")}returnList(){const e=prompt("L\xed do tr\u1ea3 h\u1ed3 s\u01a1?");if(0==e.length)return this.plus.alertWarning("B\u1ea1n ph\u1ea3i nh\u1eadp l\xed do tr\u1ea3 h\u1ed3 s\u01a1");const n=this.items;n.LichSuCapNhat.push(`Tr\u1ea3 l\u1ea1i h\u1ed3 s\u01a1 v\u1edbi l\xed do ${e}: ${d()().format("DD/MM/YYYY HH:mm")}`),this.nlmtSv.changeStatusList(n,0)}approveList(){const e=this.items;e.LichSuCapNhat.push(`H\u1ed3 s\u01a1 \u0111\xe3 \u0111\u01b0\u1ee3c ch\u1ea5p nh\u1eadn: ${d()().format("DD/MM/YYYY HH:mm")}`),this.nlmtSv.changeStatusList(e,3)}paidList(){const e=this.items;e.LichSuCapNhat.push(`H\u1ed3 s\u01a1 \u0111\xe3 thanh to\xe1n ${d()().format("DD/MM/YYYY HH:mm")}`),this.nlmtSv.changeStatusList(e,4)}report(){}complete(){}onEdit(e){this.selectedItem=e;const n=this.plus.dateToHtmlObj(e,[""]);this.main.patchValue(n),this.plus.clickBtn("openModal")}onDelete(e){!confirm("B\u1ea1n mu\u1ed1n x\xf3a?")||(this.plus.load(),this.plus.httpDisable(this.api,e,this.global).then(o=>{this.reload()}))}search(e){this.filter=e}find(e){this.items=e}checkPer(e){return this.plus.checkPer(this.api,e)}reload(){return this.plus.reload(this.dbName+"/"+this.api)}goBack(){this.plus.goBack()}changePage(e){}trackByFn(e,n){return n}resetDB(){this.plus.resetDB(this.db,this.api)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(b.T),t.Y36(r.qu),t.Y36(Z.i),t.Y36(K.E),t.Y36(N.gz),t.Y36(F),t.Y36(Q.x))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-nlmt-detail"]],decls:102,vars:29,consts:[[1,"container-fluid"],["id","back-btn","mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","warn","matTooltip","Duy\u1ec7t",3,"click",4,"ngIf"],["mat-raised-button","","color","primary","matTooltip","Tr\u1ea3 l\u1ea1i",3,"click",4,"ngIf"],["mat-raised-button","","color","primary","matTooltip","B\u1ea3ng k\xea PTC ",3,"click"],["mat-raised-button","","color","primary","matTooltip","Xu\u1ea5t UNC ",3,"click"],["mat-raised-button","","color","primary","matTooltip","B\u1ea3ng k\xea PKD ",3,"click"],["mat-raised-button","","color","warn","matTooltip","L\u01b0u",3,"click",4,"ngIf"],["mat-raised-button","","color","warn","matTooltip","\u0110\xe3 thanh to\xe1n",3,"click",4,"ngIf"],[1,"row"],["matSuffix","","color","warn",3,"click",4,"ngIf"],["matInput","","id","search-api","placeholder","T\xecm ki\u1ebfm nhanh (F2)","value","value",3,"ngModel","ngModelChange"],[1,"tit","text-center"],[1,"table","table-hover"],[1,"thead-inverse"],[4,"Device"],["color","primary",3,"click"],[4,"ngFor","ngForOf"],["id","my-table-id","hidden","",1,"table","bordered"],["colspan","14"],[2,"text-align","center","color","blue","padding","3rem","vertical-align","middle"],[2,"border-style","solid"],["style"," border-style: dotted;",4,"ngFor","ngForOf"],["colspan","2"],["colspan","6",2,"text-align","left","color","blue","padding","3rem","vertical-align","middle"],["mat-raised-button","","color","warn","matTooltip","Duy\u1ec7t",3,"click"],["mat-raised-button","","color","primary","matTooltip","Tr\u1ea3 l\u1ea1i",3,"click"],["mat-raised-button","","color","warn","matTooltip","L\u01b0u",3,"click"],["mat-raised-button","","color","warn","matTooltip","\u0110\xe3 thanh to\xe1n",3,"click"],["matSuffix","","color","warn",3,"click"],[1,"align-middle",3,"click"],["class","align-middle",3,"click",4,"Device"],[1,"align-middle"],["class","align-middle",4,"Device"],[3,"contentEditable","blur"],[1,"align-text-top"],["matInput","",3,"matDatepicker","value","focus","dateChange"],["matSuffix","",3,"for"],["picker",""],["color","warn",3,"click",4,"ngIf"],["color","warn",3,"click"],[2,"border-style","dotted"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"button",1),t.NdJ("click",function(){return n.goBack()}),t.TgZ(2,"mat-icon"),t._uU(3,"undo"),t.qZA()(),t.YNc(4,ot,3,0,"button",2),t.YNc(5,at,3,0,"button",3),t.TgZ(6,"button",4),t.NdJ("click",function(){return n.exportWord()}),t.TgZ(7,"mat-icon"),t._uU(8,"cloud_download"),t.qZA()(),t.TgZ(9,"button",5),t.NdJ("click",function(){return n.exportUNC()}),t.TgZ(10,"mat-icon"),t._uU(11,"border_color"),t.qZA()(),t.TgZ(12,"button",6),t.NdJ("click",function(){return n.reportKD()}),t.TgZ(13,"mat-icon"),t._uU(14,"format_list_bulleted"),t.qZA()(),t.YNc(15,lt,3,0,"button",7),t.YNc(16,rt,3,0,"button",8),t.TgZ(17,"div",9)(18,"mat-form-field"),t.YNc(19,st,2,0,"mat-icon",10),t.TgZ(20,"input",11),t.NdJ("ngModelChange",function(a){return n.searchText=a}),t.qZA()(),t.TgZ(21,"h5",12),t._uU(22),t.ALo(23,"numberPipe"),t.qZA(),t.TgZ(24,"table",13)(25,"thead",14)(26,"tr")(27,"th"),t._uU(28,"M\xe3 kh\xe1ch h\xe0ng"),t.qZA(),t.TgZ(29,"th"),t._uU(30,"Kh\xe1ch h\xe0ng"),t.qZA(),t.YNc(31,ct,2,0,"th",15),t.YNc(32,ut,2,0,"th",15),t.YNc(33,pt,2,0,"th",15),t.TgZ(34,"th"),t._uU(35,"S\u1ea3n l\u01b0\u1ee3ng"),t.qZA(),t.TgZ(36,"th"),t._uU(37,"\u0110\u01a1n gi\xe1"),t.qZA(),t.YNc(38,mt,2,0,"th",15),t.YNc(39,ht,2,0,"th",15),t.TgZ(40,"th"),t._uU(41,"T\u1ed5ng ti\u1ec1n"),t.qZA(),t.TgZ(42,"th"),t._uU(43,"K\xfd hi\u1ec7u h\xf3a \u0111\u01a1n"),t.qZA(),t.TgZ(44,"th"),t._uU(45,"S\u1ed1 h\xf3a \u0111\u01a1n"),t.qZA(),t.TgZ(46,"th"),t._uU(47,"Ng\xe0y h\xf3a \u0111\u01a1n"),t.qZA(),t.TgZ(48,"th")(49,"mat-icon",16),t.NdJ("click",function(){return n.reload()}),t._uU(50,"cached"),t.qZA()()()(),t.TgZ(51,"tbody"),t.YNc(52,bt,33,24,"tr",17),t.ALo(53,"filter"),t.qZA()()()(),t.TgZ(54,"table",18)(55,"tr")(56,"td",19)(57,"h5",20),t._uU(58),t.qZA()()(),t.TgZ(59,"thead",21)(60,"tr")(61,"th"),t._uU(62,"M\xe3 kh\xe1ch h\xe0ng"),t.qZA(),t.TgZ(63,"th"),t._uU(64,"Kh\xe1ch h\xe0ng"),t.qZA(),t.TgZ(65,"th"),t._uU(66,"\u0110\u1ecba ch\u1ec9"),t.qZA(),t.TgZ(67,"th"),t._uU(68,"M\xe3 GCS"),t.qZA(),t.TgZ(69,"th"),t._uU(70,"Ch\u1ee7 t\xe0i kho\u1ea3n"),t.qZA(),t.TgZ(71,"th"),t._uU(72,"S\u1ed1 t\xe0i kho\u1ea3n"),t.qZA(),t.TgZ(73,"th"),t._uU(74,"Ng\xe2n h\xe0ng"),t.qZA(),t.TgZ(75,"th"),t._uU(76,"N\u0103m"),t.qZA(),t.TgZ(77,"th"),t._uU(78,"Th\xe1ng"),t.qZA(),t.TgZ(79,"th"),t._uU(80,"S\u1ea3n l\u01b0\u1ee3ng"),t.qZA(),t.TgZ(81,"th"),t._uU(82,"\u0110\u01a1n gi\xe1"),t.qZA(),t.TgZ(83,"th"),t._uU(84,"Tr\u01b0\u1edbc thu\u1ebf"),t.qZA(),t.TgZ(85,"th"),t._uU(86,"Thu\u1ebf"),t.qZA(),t.TgZ(87,"th"),t._uU(88,"T\u1ed5ng ti\u1ec1n"),t.qZA()()(),t.TgZ(89,"tbody"),t.YNc(90,Zt,36,26,"tr",22),t.qZA(),t.TgZ(91,"tfoot")(92,"tr"),t._UZ(93,"th",23),t.qZA(),t.TgZ(94,"tr")(95,"th",24),t._uU(96),t.ALo(97,"numberPipe"),t.qZA()(),t.TgZ(98,"tr")(99,"th",24),t._uU(100),t.ALo(101,"bangChu"),t.qZA()()()()),2&e&&(t.xp6(1),t.Q6J("@slideIn",void 0),t.xp6(3),t.Q6J("ngIf",(null==n.items?null:n.items.TrangThai)>1&&(null==n.items?null:n.items.TrangThai)<3&&n.checkPer(4)),t.xp6(1),t.Q6J("ngIf",(null==n.items?null:n.items.TrangThai)>1&&(null==n.items?null:n.items.TrangThai)<3),t.xp6(10),t.Q6J("ngIf",(null==n.items?null:n.items.TrangThai)>1),t.xp6(1),t.Q6J("ngIf",3==(null==n.items?null:n.items.TrangThai)),t.xp6(3),t.Q6J("ngIf",n.searchText.length>0),t.xp6(1),t.Q6J("ngModel",n.searchText),t.xp6(2),t.AsE("B\u1ea2NG K\xca THANH TO\xc1N TI\u1ec0N \u0110I\u1ec6N M\u1eb6T TR\u1edcI S\u1ed0 ",null==n.items?null:n.items.TenBangKe," | ",t.lcZ(23,20,null==n.items?null:n.items.ThanhTienSauThue)," "),t.xp6(2),t.Q6J("@slideIn",void 0),t.xp6(7),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(5),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(13),t.Q6J("ngForOf",t.xi3(53,22,null==n.items?null:n.items.DanhSach,n.searchText)),t.xp6(6),t.hij("B\u1ea2NG K\xca THANH TO\xc1N TI\u1ec0N \u0110I\u1ec6N M\u1eb6T TR\u1edcI S\u1ed0 ",null==n.items?null:n.items.TenBangKe," "),t.xp6(32),t.Q6J("ngForOf",null==n.items?null:n.items.DanhSach),t.xp6(6),t.hij("T\u1ed5ng c\u1ed9ng: ",t.lcZ(97,25,null==n.items?null:n.items.ThanhTienSauThue),"vnd."),t.xp6(4),t.hij("B\u1eb1ng ch\u1eef: ",t.lcZ(101,27,null==n.items?null:n.items.ThanhTienSauThue),""))},directives:[I.lW,k.Hw,g.O5,L.gM,f.KE,f.R9,D.Nt,r.Fj,r.JJ,r.On,q.HP,g.sg,C.hl,C.nW,C.Mq],pipes:[T._2,T.Cf,g.JJ,g.i8,T.ID],styles:["span[_ngcontent-%COMP%]{text-align:center;display:block;border-bottom:dotted 1px}mat-form-field[_ngcontent-%COMP%]{padding:0!important}.mat-form-field-infix[_ngcontent-%COMP%]{width:100px!important}"],data:{animation:[x.Ym]}}),i})();var H=p(68042),Ct=p(21019),y=p(86087),M=p(87654),v=p(97012),It=p(30358);function Dt(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"app-search-api",13),t.NdJ("data",function(o){return t.CHM(e),t.oxw().find(o)}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("api",e.api)}}function At(i,l){1&i&&(t.TgZ(0,"th"),t._uU(1,"Tr\u1ea1ng th\xe1i"),t.qZA())}function Et(i,l){1&i&&(t.TgZ(0,"th"),t._uU(1,"L\u1ecbch s\u1eed c\u1eadp nh\u1eadt"),t.qZA())}function qt(i,l){1&i&&(t.TgZ(0,"th"),t._uU(1,"Th\xe0nh ti\u1ec1n sau thu\u1ebf"),t.qZA())}function yt(i,l){if(1&i&&(t.TgZ(0,"td",19),t._uU(1),t.ALo(2,"enum"),t.qZA()),2&i){const e=t.oxw().$implicit;t.s9C("routerLink",e._id),t.xp6(1),t.Oqu(t.xi3(2,2,e.TrangThai,"DMTTrangThaiHoSo"))}}function vt(i,l){if(1&i&&(t.TgZ(0,"td",19),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.s9C("routerLink",e._id),t.xp6(1),t.Oqu(e.LichSuCapNhat)}}function Ht(i,l){if(1&i&&(t.TgZ(0,"td",21),t._uU(1),t.ALo(2,"numberPipe"),t.qZA()),2&i){const e=t.oxw().$implicit;t.s9C("routerLink",e._id),t.xp6(1),t.Oqu(t.lcZ(2,2,e.ThanhTienSauThue))}}function Mt(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"mat-icon",24),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw(2).onDelete(o)}),t._uU(1,"delete"),t.qZA()}}function Ut(i,l){if(1&i&&(t.TgZ(0,"tr")(1,"td",19),t._uU(2),t.qZA(),t.YNc(3,yt,3,5,"td",20),t.YNc(4,vt,2,2,"td",20),t.TgZ(5,"td",21),t._uU(6),t.ALo(7,"numberPipe"),t.qZA(),t.YNc(8,Ht,3,4,"td",22),t.TgZ(9,"td"),t.YNc(10,Mt,2,0,"mat-icon",23),t.qZA()()),2&i){const e=l.$implicit,n=t.oxw(2);t.xp6(1),t.s9C("routerLink",e._id),t.xp6(1),t.Oqu(e.TenBangKe),t.xp6(1),t.Q6J("Device",2),t.xp6(1),t.Q6J("Device",2),t.xp6(1),t.s9C("routerLink",e._id),t.xp6(1),t.Oqu(t.lcZ(7,8,e.TongPhatLen)),t.xp6(2),t.Q6J("Device",2),t.xp6(2),t.Q6J("ngIf",n.checkPer(4)&&e.TrangThai<1)}}function Jt(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"table",14)(1,"thead",15)(2,"tr")(3,"th"),t._uU(4,"T\xean b\u1ea3ng k\xea"),t.qZA(),t.YNc(5,At,2,0,"th",16),t.YNc(6,Et,2,0,"th",16),t.TgZ(7,"th"),t._uU(8,"T\u1ed5ng ph\xe1t l\xean"),t.qZA(),t.YNc(9,qt,2,0,"th",16),t.TgZ(10,"th")(11,"mat-icon",17),t.NdJ("click",function(){return t.CHM(e),t.oxw().reload()}),t._uU(12,"cached"),t.qZA()()()(),t.TgZ(13,"tbody"),t.YNc(14,Ut,11,10,"tr",18),t.qZA()()}if(2&i){const e=t.oxw();t.Q6J("@slideIn",void 0),t.xp6(5),t.Q6J("Device",2),t.xp6(1),t.Q6J("Device",2),t.xp6(3),t.Q6J("Device",2),t.xp6(5),t.Q6J("ngForOf",e.filter.length>0?e.filter:e.items.slice(0,50))("ngForTrackBy",e.trackByFn)}}function St(i,l){if(1&i&&t._UZ(0,"app-import-database",25),2&i){const e=t.oxw();t.Q6J("api",e.api)("global",e.global)("form",e.main)}}function Bt(i,l){if(1&i&&t._UZ(0,"app-export-ecxel",26),2&i){const e=t.oxw();t.Q6J("dataJson",e.items)}}function wt(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",27),t.NdJ("click",function(){return t.CHM(e),t.oxw().resetDB()}),t._uU(1,"X\xf3a to\xe0n b\u1ed9 d\u1eef li\u1ec7u"),t.qZA()}}const Kt=function(){return[5,10,25,100]};let Yt=(()=>{class i{constructor(e,n,o){this.plus=e,this.fb=n,this.rtSv=o,this.main=this.fb.group({keyWord:[,[]],_id:[,[]],TenBangKe:[,[r.kI.required]],TrangThai:[,[r.kI.required]],LichSuCapNhat:[,[r.kI.required]],TongPhatLen:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],ThanhTienTruocThue:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],Thue:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],ThanhTienSauThue:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],DanhSach:[,[r.kI.required]]}),this.title="L\u1eadp b\u1ea3ng k\xea",this.global=!0,this.dbName="dien-luc",this.api="dmt-pay",this.db=null,this.userId=this.plus.userId,this.usr=this.plus.usr,this.items=[],this.selectedItem=null,this.filter=[],this.itemsPay=[],this.errors=[],this.startDay=new Date}ngOnInit(){this.plus.setTiTle(this.title),this.plus.IDB_InitDB(this.dbName).subscribe(e=>function(i,l,e,n){return new(e||(e=Promise))(function(a,c){function m(u){try{s(n.next(u))}catch(_){c(_)}}function h(u){try{s(n.throw(u))}catch(_){c(_)}}function s(u){u.done?a(u.value):function o(a){return a instanceof e?a:new e(function(c){c(a)})}(u.value).then(m,h)}s((n=n.apply(i,l||[])).next())})}(this,void 0,void 0,function*(){this.db=e,this.plus.updateRealtime(this.db,this.api,this.global),this.getMonth(this.startDay),this.plus.IDB_DB_CleanTrash(e,this.api),this.plus.updateAPi.subscribe(n=>{n&&this.getIDB()})}))}getIDB(){console.log("getIDB() "),this.filter=[],this.items=[],this.plus.IDB_DB_GetAllByIndexKey(this.db,this.api,"TrangThai","<",4).subscribe(e=>{this.items=e}),this.plus.IDB_DB_GetAllByIndexKey(this.db,this.api,"Nam","=",this.year).subscribe(e=>{const n=[];for(let o=0;o<e.length;o++){const a=e[o];4==a.TrangThai&&n.push(a)}this.chart=this.plus.generateChart(n,"KyThanhToan","ThanhTienSauThue")})}ngOnDestroy(){console.log("Destroy",this.api),this.plus.subs.unsubscribe(),this.rtSv.leaveRoom(this.api)}getMonth(e){this.startDay=e,this.month=d()(e).month()+1,this.year=d()(e).year(),console.log(`GetMOnth:  ${this.year}${this.month}`),this.getIDB()}onDelete(e){!confirm("B\u1ea1n mu\u1ed1n x\xf3a?")||(this.plus.load(),this.plus.httpDisable(this.api,e,this.global).then(o=>{this.reload()}))}chooseOpt(e,n,o,a=!1){this.main.controls[n].setValue(e[o]),a&&this.main.controls[n+"ID"].setValue(e._id)}closeModal(){this.main.reset()}search(e){this.filter=e}find(e){this.items=e}checkPer(e){return this.plus.checkPer(this.api,e)}patchForm(){this.main.reset({_id:" "})}reload(){return this.plus.reload(this.dbName+"/"+this.api)}goBack(){this.plus.goBack()}reset(){this.plus.loaded(),this.filter=[],this.getIDB(),this.main.reset({})}changePage(e){this.filter=this.items.slice(e.pageIndex*e.pageSize,(e.pageIndex+1)*e.pageSize)}ondragover(){document.getElementById("dropZone").setAttribute("drop-active","true")}trackByFn(e,n){return n}resetDB(){this.plus.resetDB(this.db,this.api)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(b.T),t.Y36(r.qu),t.Y36(Z.i))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-nlmt-list"]],decls:17,vars:15,consts:[[1,"container"],["id","add-btn","color","accent","mat-raised-button","","routerLink","/dien-luc/dmt-input"],["id","back-btn","mat-raised-button","","color","primary",3,"click"],[3,"api","data",4,"ngIf"],[1,"py-3"],[3,"startDay","month"],[1,"row"],["class","table table-hover",4,"ngIf"],[3,"length","pageSize","pageSizeOptions","page"],[3,"api","global","form",4,"ngIf"],[3,"dataJson",4,"ngIf"],[3,"id","label","arr","type"],["mat-button","","color","warn",3,"click",4,"ngIf"],[3,"api","data"],[1,"table","table-hover"],[1,"thead-inverse"],[4,"Device"],["color","primary",3,"click"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"routerLink"],[3,"routerLink",4,"Device"],[1,"text-right",3,"routerLink"],["class","text-right",3,"routerLink",4,"Device"],["color","warn",3,"click",4,"ngIf"],["color","warn",3,"click"],[3,"api","global","form"],[3,"dataJson"],["mat-button","","color","warn",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"button",1)(2,"mat-icon"),t._uU(3,"control_point"),t.qZA()(),t.TgZ(4,"button",2),t.NdJ("click",function(){return n.goBack()}),t.TgZ(5,"mat-icon"),t._uU(6,"undo"),t.qZA()(),t.YNc(7,Dt,1,1,"app-search-api",3),t.TgZ(8,"section",4)(9,"app-month-year",5),t.NdJ("month",function(a){return n.getMonth(a)}),t.qZA()(),t.TgZ(10,"div",6),t.YNc(11,Jt,15,6,"table",7),t.TgZ(12,"mat-paginator",8),t.NdJ("page",function(a){return n.changePage(a)}),t.qZA()(),t.YNc(13,St,1,3,"app-import-database",9),t.YNc(14,Bt,1,1,"app-export-ecxel",10),t._UZ(15,"app-chart",11),t.qZA(),t.YNc(16,wt,2,0,"button",12)),2&e&&(t.xp6(4),t.Q6J("@slideIn",void 0),t.xp6(3),t.Q6J("ngIf",n.checkPer(10)),t.xp6(2),t.Q6J("startDay",n.startDay),t.xp6(2),t.Q6J("ngIf",n.items.length+n.filter.length>0),t.xp6(1),t.Q6J("length",n.items.length)("pageSize",50)("pageSizeOptions",t.DdM(14,Kt)),t.xp6(1),t.Q6J("ngIf",n.checkPer(4)),t.xp6(1),t.Q6J("ngIf",n.checkPer(4)),t.xp6(1),t.Q6J("id","thu-chi")("label","Bi\u1ec3u \u0111\u1ed3 thanh to\xe1n theo th\xe1ng")("arr",n.chart)("type","bar"),t.xp6(1),t.Q6J("ngIf",n.checkPer(6)))},directives:[I.lW,N.rH,k.Hw,g.O5,H.W,Ct.k,q.HP,g.sg,y.NW,M.y,v.t,It.x],pipes:[T.zZ,T._2],styles:[""],data:{animation:[x.Ym]}}),i})(),Ft=(()=>{class i{constructor(){}generate(e){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var U=p(46936),Qt=p(77446),Lt=p(51511),O=function(i,l,e,n){return new(e||(e=Promise))(function(a,c){function m(u){try{s(n.next(u))}catch(_){c(_)}}function h(u){try{s(n.throw(u))}catch(_){c(_)}}function s(u){u.done?a(u.value):function o(a){return a instanceof e?a:new e(function(c){c(a)})}(u.value).then(m,h)}s((n=n.apply(i,l||[])).next())})};function Ot(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",29),t.NdJ("click",function(){return t.CHM(e),t.oxw().reload()}),t.TgZ(1,"mat-icon"),t._uU(2,"undo"),t.qZA()()}2&i&&t.Q6J("@slideIn",void 0)}function $t(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",30),t.NdJ("click",function(){return t.CHM(e),t.oxw().saveList()}),t._uU(1," L\u01b0u "),t.qZA()}2&i&&t.Q6J("@slideX",void 0)}function Gt(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",31),t.NdJ("click",function(){return t.CHM(e),t.oxw().sendMail()}),t.TgZ(1,"mat-icon"),t._uU(2,"email"),t.qZA()()}2&i&&t.Q6J("@slideX",void 0)}function Pt(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",32),t.NdJ("click",function(){return t.CHM(e),t.oxw().updateQualified()}),t.TgZ(1,"mat-icon"),t._uU(2,"thumb_up"),t.qZA()()}2&i&&t.Q6J("@slideX",void 0)}function zt(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",33),t.NdJ("click",function(){return t.CHM(e),t.oxw().complete()}),t.TgZ(1,"mat-icon"),t._uU(2,"send"),t.qZA()()}2&i&&t.Q6J("@slideX",void 0)}function Rt(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",34),t.NdJ("click",function(){return t.CHM(e),t.oxw().reporUnqualified()}),t.TgZ(1,"mat-icon"),t._uU(2,"receipt"),t.qZA()()}2&i&&t.Q6J("@slideX",void 0)}function Vt(i,l){1&i&&(t.TgZ(0,"h5",35),t._uU(1,"L\u1ed7i d\u1eef li\u1ec7u"),t.qZA())}function Wt(i,l){if(1&i&&(t.TgZ(0,"h5",36),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij("DANH S\xc1CH THANH TO\xc1N TI\u1ec0N \u0110I\u1ec6N M\u1eb6T TR\u1edcI ",e.bangKe.length," KH")}}function Xt(i,l){1&i&&(t.TgZ(0,"th"),t._uU(1,"L\u1ed7i"),t.qZA())}function jt(i,l){if(1&i&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.err)}}function te(i,l){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",39)(4,"a",40),t._uU(5),t.qZA()(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td",9),t._uU(11),t.ALo(12,"numberPipe"),t.qZA(),t.TgZ(13,"td",9),t._uU(14),t.ALo(15,"numberPipe"),t.qZA(),t.YNc(16,jt,2,1,"td",41),t.qZA()),2&i){const e=l.$implicit,n=l.index,o=t.oxw(2);t.xp6(2),t.Oqu(n+1),t.xp6(2),t.s9C("routerLink",e._id),t.xp6(1),t.Oqu(e.MaKhachHang),t.xp6(2),t.Oqu(e.Email),t.xp6(2),t.Oqu(e.KhachHang),t.xp6(2),t.Oqu(t.lcZ(12,8,e.SanLuong)),t.xp6(3),t.Oqu(t.lcZ(15,10,e.TongTien)),t.xp6(2),t.Q6J("ngIf",2==o.step)}}function ee(i,l){if(1&i&&(t.TgZ(0,"table",37)(1,"thead")(2,"tr")(3,"th"),t._uU(4,"TT"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"M\xe3 Kh\xe1ch h\xe0ng"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Email"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Kh\xe1ch h\xe0ng"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"S\u1ea3n l\u01b0\u1ee3ng"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"T\u1ed5ng ti\u1ec1n"),t.qZA(),t.YNc(15,Xt,2,0,"th",14),t.qZA()(),t.TgZ(16,"tbody"),t.YNc(17,te,17,12,"tr",38),t.qZA()()),2&i){const e=t.oxw();t.xp6(15),t.Q6J("ngIf",2==e.step),t.xp6(2),t.Q6J("ngForOf",e.errors.length>0?e.errors:e.bangKe)}}function ne(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"mat-icon",45),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).searchText=""}),t._uU(1,"close"),t.qZA()}}function ie(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"mat-form-field"),t.YNc(1,ne,2,0,"mat-icon",43),t.TgZ(2,"input",44),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().searchText=o}),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.searchText.length>0),t.xp6(1),t.Q6J("ngModel",e.searchText)}}function oe(i,l){1&i&&(t.TgZ(0,"th"),t._uU(1,"G\u1eedi mail"),t.qZA())}function ae(i,l){1&i&&(t.TgZ(0,"th"),t._uU(1,"B\u1ea3ng k\xea"),t.qZA())}function le(i,l){1&i&&(t.TgZ(0,"th"),t._uU(1,"Tr\u1ea1ng th\xe1i h\u1ed3 s\u01a1"),t.qZA())}const re=function(i){return{"bg-success text-center":i}};function se(i,l){if(1&i&&(t.TgZ(0,"td",53),t._uU(1),t.ALo(2,"enum"),t.qZA()),2&i){const e=t.oxw().$implicit;t.Q6J("ngClass",t.VKq(5,re,1==e.DaGuiMail)),t.xp6(1),t.Oqu(t.xi3(2,2,e.DaGuiMail,"TrangThaiEmail"))}}function ce(i,l){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.KyThanhToan)}}function ue(i,l){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.TenBangKe)}}function pe(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"mat-icon",56),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw(2).onDelete(o)}),t._uU(1," delete"),t.qZA()}}const me=function(i){return{"text-info":i}},he=function(i,l,e,n,o){return{"bg-warning text-center":i,"bg-info text-center":l,"bg-secondary text-center":e,"bg-primary text-center":n,"bg-success text-center":o}};function _e(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"td")(2,"mat-checkbox",52),t.NdJ("change",function(o){const c=t.CHM(e).$implicit;return t.oxw(2).checkItem(o,c)}),t.qZA()(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td")(6,"a",40),t._uU(7),t.qZA()(),t.TgZ(8,"td",53),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.ALo(12,"number"),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.ALo(15,"number"),t.qZA(),t.YNc(16,se,3,7,"td",54),t.YNc(17,ce,2,1,"td",49),t.YNc(18,ue,2,1,"td",49),t.TgZ(19,"td",53),t._uU(20),t.ALo(21,"enum"),t.qZA(),t.TgZ(22,"td"),t.YNc(23,pe,2,0,"mat-icon",55),t.qZA()()}if(2&i){const e=l.$implicit,n=l.index,o=t.oxw(2);t.xp6(2),t.Q6J("hidden",e.TrangThaiHoSo>1)("checked",o.selectedItems.indexOf(e)>-1),t.xp6(2),t.Oqu(n+1),t.xp6(2),t.s9C("routerLink",e._id),t.xp6(1),t.Oqu(e.MaKhachHang),t.xp6(1),t.Q6J("ngClass",t.VKq(22,me,0==e.CoHoaDon)),t.xp6(1),t.Oqu(e.KhachHang),t.xp6(2),t.Oqu(t.lcZ(12,15,e.SanLuong)),t.xp6(3),t.Oqu(t.lcZ(15,17,e.TongTien)),t.xp6(2),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(1),t.Q6J("ngClass",t.qbA(24,he,0==e.TrangThaiHoSo,1==e.TrangThaiHoSo,2==e.TrangThaiHoSo,3==e.TrangThaiHoSo,4==e.TrangThaiHoSo)),t.xp6(1),t.Oqu(t.xi3(21,19,e.TrangThaiHoSo,"DMTTrangThaiHoSo")),t.xp6(3),t.Q6J("ngIf",o.checkPer(2)&&e.TrangThaiHoSo<2||o.checkPer(7))}}function de(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"table",46)(1,"thead",47)(2,"tr")(3,"th")(4,"mat-checkbox",48),t.NdJ("change",function(o){return t.CHM(e),t.oxw().checkAll(o)}),t.qZA()(),t.TgZ(5,"th"),t._uU(6,"TT"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"M\xe3 kh\xe1ch h\xe0ng"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Kh\xe1ch h\xe0ng"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"S\u1ea3n l\u01b0\u1ee3ng"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"T\u1ed5ng ti\u1ec1n"),t.qZA(),t.YNc(15,oe,2,0,"th",49),t.TgZ(16,"th"),t._uU(17,"K\u1ef3 thanh to\xe1n"),t.qZA(),t.YNc(18,ae,2,0,"th",49),t.YNc(19,le,2,0,"th",49),t.TgZ(20,"th")(21,"mat-icon",50),t.NdJ("click",function(){return t.CHM(e),t.oxw().reload()}),t._uU(22,"cached"),t.qZA()()()(),t.TgZ(23,"tbody"),t.YNc(24,_e,24,30,"tr",51),t.ALo(25,"filter"),t.qZA()()}if(2&i){const e=t.oxw();t.Q6J("@slideIn",void 0),t.xp6(4),t.Q6J("checked",e.all),t.xp6(11),t.Q6J("Device",3),t.xp6(3),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(5),t.Q6J("ngForOf",t.xi3(25,7,e.filter.length>0?e.filter:e.items,e.searchText))("ngForTrackBy",e.trackByFn)}}const ge=function(){return[20,50,100,500]};function fe(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"mat-paginator",57),t.NdJ("page",function(o){return t.CHM(e),t.oxw().changePage(o)}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("length",e.items.length)("pageSize",500)("pageSizeOptions",t.DdM(3,ge))}}function Te(i,l){if(1&i&&t._UZ(0,"app-import-database",58),2&i){const e=t.oxw();t.Q6J("api",e.api)("global",e.global)("form",e.bangKeForm)}}function xe(i,l){if(1&i&&t._UZ(0,"app-export-ecxel",59),2&i){const e=t.oxw();t.Q6J("dataJson",e.items)}}function be(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",60),t.NdJ("click",function(){return t.CHM(e),t.oxw().resetDB()}),t._uU(1,"X\xf3a to\xe0n b\u1ed9 d\u1eef li\u1ec7u"),t.qZA()}}function Ze(i,l){1&i&&t._UZ(0,"section",61)}function Ne(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"app-drop-files",62),t.NdJ("files",function(o){return t.CHM(e),t.oxw().onDropFile(o)})("ondragover",function(){return t.CHM(e),t.oxw().ondragover()}),t.qZA()}2&i&&t.Q6J("label","")}let Ce=(()=>{class i{constructor(e,n,o,a,c,m,h){this.plus=e,this.fb=n,this.rtSv=o,this.excelSv=a,this.docxSv=c,this.nlmtSv=m,this.xlsxTem=h,this.importForm=this.fb.group({keyWord:[,[]],_id:[,[]],TONG_TIEN:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],MA_DVIQLY:[,[]],TKHOAN_KHANG:[,[]],MA_NHANG:[,[]],TEN_NHANG:[,[]],MA_SOGCS:[,[r.kI.required]],TYLE_THUE:[,[]],DIEN_TTHU:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],SO_TIEN:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],DCHI_KHANG:[,[]],MA_KHANG:[,[r.kI.required,r.kI.minLength(10)]],TIEN_GTGT:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],TEN_KHANG:[,[r.kI.required]],NGAY_GCS:[,[]],DON_GIA:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]]}),this.bangKeForm=this.fb.group({Email:[],MaKhachHang:[,[r.kI.required]],KhachHang:[,[r.kI.required]],DiaChi:[,[r.kI.required]],MaGCS:[,],ChuTaiKhoan:[],SoTaiKhoan:[],NganHang:[,[r.kI.required]],Nam:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],Thang:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],SanLuong:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],DonGia:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],TruocThue:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],Thue:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],TongTien:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],KyHieuHoaDon:[,[]],SoHoaDon:[,[]],CCCD:[,[]],NgayHoaDon:[,[]],TrangThai:[,],DaGuiMail:[0],NgayMuaHang:[,[]]}),this.searchText="",this.title="L\u1eadp b\u1ea3ng k\xea",this.global=!0,this.dbName="dien-luc",this.api="dmt-input",this.db=null,this.userId=this.plus.userId,this.usr=this.plus.usr,this.items=[],this.selectedItem=null,this.selectedItems=[],this.filter=[],this.chart=[],this.errors=[],this.dataInXls={},this.wordFile=null,this.startDay=new Date,this.bangKe=[],this.readFileDone=!1,this.step=0,this.TongPhatLen=0,this.ThanhTienTruocThue=0,this.Thue=0,this.ThanhTienSauThue=0,this.itemsReport=[],this.itemsReportNoBill=[],this.all=!1}ngOnInit(){this.plus.setTiTle(this.title),this.plus.IDB_InitDB(this.dbName).subscribe(e=>O(this,void 0,void 0,function*(){this.db=e,this.plus.updateRealtime(this.db,this.api,this.global),this.plus.IDB_DB_CleanTrash(e,this.api),this.plus.updateAPi.subscribe(n=>{n&&this.getIDB()})}))}getIDB(){this.filter=[],this.items=[],this.selectedItems=[],this.plus.IDB_DB_GetAllByIndexKey(this.db,this.api,"TrangThaiHoSo","<",4).subscribe(e=>{this.items=e})}xlsx(){this.xlsxTem.generate("t1")}ngOnDestroy(){console.log("Destroy",this.api),this.plus.subs.unsubscribe(),this.rtSv.leaveRoom(this.api)}saveList(){const e=this.bangKe;console.log(e),this.plus.httpPost(this.api+"/import",e,this.global).subscribe(n=>{console.log(n),this.reload()})}convertToList(){console.log("convertToList()");const e=this.dataInXls.data,n=Date.now();for(let o=0;o<e.length;o++){const a=e[o];if(this.importForm.patchValue(a),this.importForm.invalid)this.plus.alertError("Ki\u1ec3m tra l\u1ea1i d\u1eef li\u1ec7u file import");else{const c={MaKhachHang:a.MA_KHANG,MaGCS:a.MA_SOGCS,Nam:+d()(a.NGAY_GCS,"DD/MM/YYYY").format("YYYY"),Thang:+d()(a.NGAY_GCS,"DD/MM/YYYY").format("MM"),SanLuong:+a.DIEN_TTHU,DonGia:+a.DON_GIA,TruocThue:+a.SO_TIEN,NgayMuaHang:a.NGAY_GCS,TiLeThue:+a.TYLE_THUE,Thue:+a.TIEN_GTGT,TongTien:+a.TONG_TIEN,KyThanhToan:d()(a.NGAY_GCS,"DD/MM/YYYY").format("MM/YYYY"),DaGuiMail:0,TrangThaiThanhToan:0,dateModify:n+o};this.plus.IDB_DB_GetAllByIndexKey(this.db,"dmt-khach-hang","MaKhachHang","=",a.MA_KHANG).subscribe(m=>{const h=m[0];if(0==m.length)return this.plus.alertMatSnackBar(`B\u1ea1n ch\u01b0a c\xf3 d\u1eef li\u1ec7u kh\xe1ch h\xe0ng ${a.MA_KHANG}`,5e3);console.log(h,c);const s=Object.assign(h,c);if(delete s.__v,delete s._id,s.TrangThaiHoSo=0==s.CoHoaDon?1:-1,this.bangKeForm.patchValue(s),this.bangKeForm.invalid){console.log("bangKeForm.invalid");const u=this.plus.getErrValidateForm(this.bangKeForm);s.err=u,this.errors.push(s),this.step=2}else{console.log(s);let u=!1;for(let _=0;_<this.items.length;_++){const J=this.items[_];J.MaKhachHang==s.MaKhachHang&&J.Nam==s.Nam&&J.Thang==s.Thang&&(u=!0)}u?confirm(`${s.MaKhachHang} - ${s.KhachHang} \u0111\xe3 t\u1ed3n t\u1ea1i!\n B\u1ea1n c\xf3 mu\u1ed1n th\xeam v\xe0o danh s\xe1ch?`)&&this.bangKe.push(s):this.bangKe.push(s)}})}}this.step=this.errors.length>0?2:3}onDropFile(e){console.log("onDropFile()"),this.reset();for(let n=0;n<e.length;n++)if("application/vnd.openxmlformats-officedocument.wordprocessingml.document"==e[n].type){const o=new FileReader;o.readAsArrayBuffer(e[n]),o.onloadend=()=>this.wordFile=o.result}else"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"==e[n].type?this.excelSv.toJsonArray(e[n]).then(o=>{this.dataInXls=o,this.convertToList()}):this.plus.alertError("File kh\xf4ng h\u1ee3p l\u1ec7")}sendMail(){return O(this,void 0,void 0,function*(){console.info("sendMail()");const e=this.itemsReport.concat(this.itemsReportNoBill);for(let n=0;n<e.length;n++){const o=e[n],a=this.items.indexOf(o),c=this.items[a];if(0==o.DaGuiMail&&o.Email.length>5){let m=this.nlmtSv.geneBodyMail(c,this.startDay,1);console.log(m),this.plus.load(),this.plus.httpPost("mail/dien-mat-troi",m).subscribe(h=>{const s=h.index;console.log("Mail sent: ",s,h.email),s>=0&&h.email?(this.plus.loaded(),this.items[a].DaGuiMail=1,this.nlmtSv.statusMail(c)):(this.items[a].DaGuiMail=0,this.plus.alertToasrt(h))}),yield this.plus.sleep(5e3)}}this.reload()})}reporUnqualified(){let e=[],n=[];for(let o=0;o<this.items.length;o++){const a=this.items[o];0==a.TrangThaiThanhToan&&(1==a.TrangThaiHoSo&&n.push(a),a.TrangThaiHoSo<1&&e.push(a))}if(e.length>0){const o=this.nlmtSv.geneBodyPay(e,this.startDay);o.DanhSach.map((a,c)=>a.TT=c+1),this.nlmtSv.download(o,"ChuaDuDieuKien")}if(n.length>0){const o=this.nlmtSv.geneBodyPay(n,this.startDay);o.DanhSach.map((a,c)=>a.TT=c+1),this.nlmtSv.download(o,"DuDieuKien")}}updateQualified(){this.nlmtSv.updateQualified(this.selectedItems)}complete(){if(this.itemsReport.length>0){const e=d()(this.startDay).format("YYMMDDHHmm");this.nlmtSv.updateNameBill(this.itemsReport,e)}if(this.itemsReportNoBill.length>0){const e=d()(this.startDay).format("YYMMDDHHmm");this.nlmtSv.updateNameBill(this.itemsReportNoBill,e)}}showUnpaid(){this.items=this.items.filter(e=>e.TrangThaiHoSo<1)}checkItem(e,n){const o=this.itemsReport.indexOf(n),a=this.itemsReportNoBill.indexOf(n),c=this.selectedItems.indexOf(n);e.checked?(this.isHasBill(n),n.TrangThaiHoSo=1):(this.all=!1,n.TrangThaiHoSo=-1,o>0?this.itemsReport.splice(o,1):this.itemsReportNoBill.splice(a,1),this.selectedItems.splice(c,1))}checkAll(e){if(e.checked){this.all=!0;for(let n=0;n<this.items.length;n++){const o=this.items[n];o.TrangThaiHoSo<2&&(this.items[n].TrangThaiHoSo=1,this.isHasBill(o))}}else this.all=!1,this.itemsReport=[],this.itemsReportNoBill=[],this.selectedItems=[]}isHasBill(e){0==e.CoHoaDon?this.itemsReportNoBill.push(e):this.itemsReport.push(e),this.selectedItems.push(e)}ondragover(){document.getElementById("dropZone").setAttribute("drop-active","true")}getMonth(e){this.startDay=e,this.itemsReport=[],this.month=d()(e).month()+1,this.year=d()(e).year(),console.log(`GetMOnth:  ${this.year}${this.month}`),this.getIDB()}onEdit(e){}onDelete(e){if(confirm("B\u1ea1n mu\u1ed1n x\xf3a?")){if(1==e.TrangThaiHoSo)return this.plus.alertWarning("B\u1ea1n kh\xf4ng th\u1ec3 x\xf3a khi \u0111\xe3 g\u1eedi b\u1ea3ng k\xea");this.plus.load(),this.plus.httpDisable(this.api,e,this.global).then(o=>{this.reload()})}}search(e){this.items=e}find(e){this.items=e}checkPer(e){return this.plus.checkPer(this.api,e)}reload(){return this.plus.reload(this.dbName+"/"+this.api)}reset(){console.log("reset()"),this.plus.loaded(),this.filter=[],this.errors=[],this.selectedItems=[],this.plus.clickBtn("closeImportButton")}changePage(e){this.filter=this.items.slice(e.pageIndex*e.pageSize,(e.pageIndex+1)*e.pageSize)}trackByFn(e,n){return n}resetDB(){this.plus.resetDB(this.db,this.api),this.reload()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(b.T),t.Y36(r.qu),t.Y36(Z.i),t.Y36(Q.x),t.Y36(K.E),t.Y36(F),t.Y36(Ft))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-nlmt-input"]],decls:33,vars:19,consts:[[1,"container-fluid"],["id","back-btn","mat-raised-button","","color","primary",3,"click",4,"ngIf"],[1,"row"],["color","accent","mat-raised-button","","data-toggle","modal","data-target","#modalImport"],["mat-raised-button","","color","warn",3,"click",4,"ngIf"],["mat-raised-button","","color","warn","matTooltip","G\u1eedi mail",3,"click",4,"ngIf"],["mat-raised-button","","color","primary","matTooltip","KH \u0111\u1ee7 \u0110K",3,"click",4,"ngIf"],["mat-raised-button","","color","warn","matTooltip","G\u1eedi b\u1ea3ng k\xea",3,"click",4,"ngIf"],["mat-raised-button","","matTooltip","B\u1ea3ng k\xea t\u1ed3n",3,"click",4,"ngIf"],[1,"text-right"],["class","tit bg-warning",4,"ngIf"],["class","tit",4,"ngIf"],["class","table",4,"ngIf"],[3,"db","api","filter"],[4,"ngIf"],["class","table table-hover",4,"ngIf"],[3,"length","pageSize","pageSizeOptions","page",4,"ngIf"],[3,"api","global","form",4,"ngIf"],[3,"dataJson",4,"ngIf"],["mat-button","","color","warn",3,"click",4,"ngIf"],["id","modalImport","tabindex","-1","role","dialog","aria-labelledby","modelTitleId","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content"],["type","button","id","closeImportButton","data-dismiss","modal","aria-label","Close",1,"close","text-danger"],["aria-hidden","true"],[1,"modal-body"],["class","py-3",4,"ngIf"],[1,"drop"],[3,"label","files","ondragover",4,"ngIf"],["id","back-btn","mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","warn","matTooltip","G\u1eedi mail",3,"click"],["mat-raised-button","","color","primary","matTooltip","KH \u0111\u1ee7 \u0110K",3,"click"],["mat-raised-button","","color","warn","matTooltip","G\u1eedi b\u1ea3ng k\xea",3,"click"],["mat-raised-button","","matTooltip","B\u1ea3ng k\xea t\u1ed3n",3,"click"],[1,"tit","bg-warning"],[1,"tit"],[1,"table"],[4,"ngFor","ngForOf"],["scope","row"],[3,"routerLink"],["class","bg-danger",4,"ngIf"],[1,"bg-danger"],["matSuffix","","color","warn",3,"click",4,"ngIf"],["matInput","","id","search-api","placeholder","T\xecm ki\u1ebfm nhanh (F2)","value","value",3,"ngModel","ngModelChange"],["matSuffix","","color","warn",3,"click"],[1,"table","table-hover"],[1,"thead-inverse"],["color","warn",3,"checked","change"],[4,"Device"],["color","primary",3,"click"],[4,"ngFor","ngForOf","ngForTrackBy"],["color","primary",3,"hidden","checked","change"],[3,"ngClass"],[3,"ngClass",4,"Device"],["color","warn",3,"click",4,"ngIf"],["color","warn",3,"click"],[3,"length","pageSize","pageSizeOptions","page"],[3,"api","global","form"],[3,"dataJson"],["mat-button","","color","warn",3,"click"],[1,"py-3"],[3,"label","files","ondragover"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.YNc(1,Ot,3,1,"button",1),t.TgZ(2,"div",2)(3,"button",3)(4,"mat-icon"),t._uU(5,"control_point"),t.qZA()(),t.YNc(6,$t,2,1,"button",4),t.YNc(7,Gt,3,1,"button",5),t.YNc(8,Pt,3,1,"button",6),t.YNc(9,zt,3,1,"button",7),t.YNc(10,Rt,3,1,"button",8),t._UZ(11,"span",9),t.qZA(),t.YNc(12,Vt,2,0,"h5",10),t.YNc(13,Wt,2,1,"h5",11),t.YNc(14,ee,18,2,"table",12),t.TgZ(15,"app-search-table",13),t.NdJ("filter",function(a){return n.search(a)}),t.qZA(),t.TgZ(16,"div",2),t.YNc(17,ie,3,2,"mat-form-field",14),t.YNc(18,de,26,10,"table",15),t.YNc(19,fe,1,4,"mat-paginator",16),t.qZA(),t.YNc(20,Te,1,3,"app-import-database",17),t.YNc(21,xe,1,1,"app-export-ecxel",18),t.YNc(22,be,2,0,"button",19),t.qZA(),t.TgZ(23,"div",20)(24,"div",21)(25,"div",22)(26,"button",23)(27,"span",24),t._uU(28,"\xd7"),t.qZA()(),t.TgZ(29,"div",25),t.YNc(30,Ze,1,0,"section",26),t.TgZ(31,"div",27),t.YNc(32,Ne,1,1,"app-drop-files",28),t.qZA()()()()()),2&e&&(t.xp6(1),t.Q6J("ngIf",n.step>1),t.xp6(5),t.Q6J("ngIf",n.bangKe.length>0&&0==n.errors.length),t.xp6(1),t.Q6J("ngIf",n.selectedItems.length>0),t.xp6(1),t.Q6J("ngIf",n.items.length>0),t.xp6(1),t.Q6J("ngIf",n.selectedItems.length>0),t.xp6(1),t.Q6J("ngIf",n.items.length>0),t.xp6(2),t.Q6J("ngIf",2==n.step),t.xp6(1),t.Q6J("ngIf",1==n.step),t.xp6(1),t.Q6J("ngIf",n.step>1),t.xp6(1),t.Q6J("db",n.db)("api",n.api),t.xp6(2),t.Q6J("ngIf",n.items.length+n.filter.length>0&&0==n.errors.length),t.xp6(1),t.Q6J("ngIf",n.items.length+n.filter.length>0&&0==n.errors.length),t.xp6(1),t.Q6J("ngIf",n.items.length+n.filter.length>0),t.xp6(1),t.Q6J("ngIf",n.checkPer(4)),t.xp6(1),t.Q6J("ngIf",n.checkPer(4)),t.xp6(1),t.Q6J("ngIf",n.checkPer(6)),t.xp6(8),t.Q6J("ngIf",0==n.step),t.xp6(2),t.Q6J("ngIf",0==n.bangKe.length||!n.wordFile))},directives:[g.O5,I.lW,k.Hw,L.gM,g.sg,N.yS,U.D,f.KE,f.R9,D.Nt,r.Fj,r.JJ,r.On,Qt.oG,q.HP,g.mk,y.NW,M.y,v.t,Lt.k],pipes:[T._2,T.Cf,g.JJ,T.zZ],styles:[""],data:{animation:[x.Ym,x.Mq]}}),i})();function ke(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",10),t.NdJ("click",function(){return t.CHM(e),t.oxw().reload()}),t.TgZ(1,"mat-icon"),t._uU(2,"undo"),t.qZA()()}2&i&&t.Q6J("@slideIn",void 0)}function De(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"app-search-api",11),t.NdJ("data",function(o){return t.CHM(e),t.oxw().find(o)}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("api",e.api)}}function Ae(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"mat-icon",18),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw(2).onDelete(o)}),t._uU(1,"delete"),t.qZA()}}function Ee(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"td",16),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw(2).onEdit(a)}),t._uU(2),t.qZA(),t.TgZ(3,"td",16),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw(2).onEdit(a)}),t._uU(4),t.qZA(),t.TgZ(5,"td",16),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw(2).onEdit(a)}),t._uU(6),t.ALo(7,"date"),t.qZA(),t.TgZ(8,"td",16),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw(2).onEdit(a)}),t._uU(9),t.qZA(),t.TgZ(10,"td"),t.YNc(11,Ae,2,0,"mat-icon",17),t.qZA()()}if(2&i){const e=l.$implicit,n=t.oxw(2);t.xp6(2),t.Oqu(e.TaiKhoan),t.xp6(2),t.Oqu(e.NoiDung),t.xp6(2),t.Oqu(t.xi3(7,5,e.ThoiGian,"dd/MM/YYYY HH:mm")),t.xp6(3),t.Oqu(e.MaKhachHang),t.xp6(2),t.Q6J("ngIf",n.checkPer(4))}}function qe(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"table",12)(1,"thead",13)(2,"tr")(3,"th"),t._uU(4,"T\xe0i kho\u1ea3n"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"N\u1ed9i dung thay \u0111\u1ed5i"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Th\u1eddi gian"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"M\xe3 kh\xe1ch h\xe0ng"),t.qZA(),t.TgZ(11,"th")(12,"mat-icon",14),t.NdJ("click",function(){return t.CHM(e),t.oxw().reload()}),t._uU(13,"cached"),t.qZA()()()(),t.TgZ(14,"tbody"),t.YNc(15,Ee,12,8,"tr",15),t.qZA()()}if(2&i){const e=t.oxw();t.Q6J("@slideIn",void 0),t.xp6(15),t.Q6J("ngForOf",e.filter.length>0?e.filter:e.items.slice(0,10))("ngForTrackBy",e.trackByFn)}}function ye(i,l){if(1&i&&t._UZ(0,"app-export-ecxel",19),2&i){const e=t.oxw();t.Q6J("dataJson",e.items)}}function ve(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",20),t.NdJ("click",function(){return t.CHM(e),t.oxw().resetDB()}),t._uU(1,"X\xf3a to\xe0n b\u1ed9 d\u1eef li\u1ec7u"),t.qZA()}}const He=function(){return[5,10,25,100]};let Me=(()=>{class i{constructor(e,n,o){this.plus=e,this.fb=n,this.rtSv=o,this.title="L\u1ecbch s\u1eed c\u1eadp nh\u1eadt",this.dbName="dien-luc",this.api="dmt-history",this.db=null,this.items=[],this.selectedItem=null,this.filter=[],this.chart=[],this.main=this.fb.group({keyWord:[,[]],_id:[,[]],TaiKhoan:[,[r.kI.required]],NoiDung:[,[r.kI.required]],ThoiGian:[,[r.kI.required]],MaKhachHang:[,[r.kI.required]]})}ngOnInit(){this.plus.setTiTle(this.title),this.plus.IDB_InitDB(this.dbName).subscribe(e=>function(i,l,e,n){return new(e||(e=Promise))(function(a,c){function m(u){try{s(n.next(u))}catch(_){c(_)}}function h(u){try{s(n.throw(u))}catch(_){c(_)}}function s(u){u.done?a(u.value):function o(a){return a instanceof e?a:new e(function(c){c(a)})}(u.value).then(m,h)}s((n=n.apply(i,l||[])).next())})}(this,void 0,void 0,function*(){this.db=e,this.getIDB(),this.plus.updateGlobalLocal(e,this.api),this.plus.updateAPi.subscribe(n=>{n&&this.getIDB()})}))}getIDB(){console.log("getIDB"),this.filter=[],this.plus.IDB_DB_GetAll(this.db,this.api).subscribe(e=>{this.items=e,this.plus.updateAPi.next(!1)})}ngOnDestroy(){console.log("Destroy",this.api),this.plus.subs.unsubscribe(),this.rtSv.leaveRoom(this.api)}save(){if(this.main.invalid)return;const e=this.main.value,n=this.plus.datetoNumObj(this.main.value,["ThoiGian"]);console.log(n),null==e._id?(delete e._id,this.plus.httpPost(this.api,n).subscribe(o=>{o.status&&this.plus.clickBtn("closeModal")})):this.plus.httpPut(this.api,n).subscribe(o=>{o.status&&this.plus.clickBtn("closeModal")})}onEdit(e){this.selectedItem=e;const n=this.plus.dateToHtmlObj(e,["ThoiGian"]);this.main.patchValue(n),this.plus.clickBtn("openModal")}onDelete(e){!confirm("B\u1ea1n mu\u1ed1n x\xf3a?")||(this.plus.load(),this.plus.httpDisable(this.api,e).then(o=>{console.log(o)}))}chooseOpt(e,n,o,a=!1){this.main.controls[n].setValue(e[o]),a&&this.main.controls[n+"ID"].setValue(e._id)}closeModal(){this.main.reset()}search(e){this.filter=e}find(e){this.items=e}checkPer(e){return this.plus.checkPer(this.api,e)}patchForm(){this.main.reset({_id:" "})}reload(){return this.plus.reload(this.dbName+"/"+this.api)}reset(){this.plus.loaded(),this.filter=[],this.getIDB(),this.main.reset({})}changePage(e){this.filter=this.items.slice(e.pageIndex*e.pageSize,(e.pageIndex+1)*e.pageSize)}trackByFn(e,n){return n}resetDB(){this.plus.resetDB(this.db,this.api)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(b.T),t.Y36(r.qu),t.Y36(Z.i))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-nlmt-history"]],decls:12,vars:11,consts:[[1,"container"],["id","add-btn","color","accent","mat-raised-button","","data-toggle","modal","data-target","#modelId",3,"click"],["id","back-btn","mat-raised-button","","color","primary",3,"click",4,"ngIf"],[3,"api","data",4,"ngIf"],[3,"db","api","filter"],[1,"row"],["class","table table-hover",4,"ngIf"],[3,"length","pageSize","pageSizeOptions","page"],[3,"dataJson",4,"ngIf"],["mat-button","","color","warn",3,"click",4,"ngIf"],["id","back-btn","mat-raised-button","","color","primary",3,"click"],[3,"api","data"],[1,"table","table-hover"],[1,"thead-inverse"],["color","primary",3,"click"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"click"],["color","warn",3,"click",4,"ngIf"],["color","warn",3,"click"],[3,"dataJson"],["mat-button","","color","warn",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"button",1),t.NdJ("click",function(){return n.reset()}),t.TgZ(2,"mat-icon"),t._uU(3,"control_point"),t.qZA()(),t.YNc(4,ke,3,1,"button",2),t.YNc(5,De,1,1,"app-search-api",3),t.TgZ(6,"app-search-table",4),t.NdJ("filter",function(a){return n.search(a)}),t.qZA(),t.TgZ(7,"div",5),t.YNc(8,qe,16,3,"table",6),t.TgZ(9,"mat-paginator",7),t.NdJ("page",function(a){return n.changePage(a)}),t.qZA()(),t.YNc(10,ye,1,1,"app-export-ecxel",8),t.qZA(),t.YNc(11,ve,2,0,"button",9)),2&e&&(t.xp6(4),t.Q6J("ngIf",n.filter.length>0),t.xp6(1),t.Q6J("ngIf",n.checkPer(10)),t.xp6(1),t.Q6J("db",n.db)("api",n.api),t.xp6(2),t.Q6J("ngIf",n.items.length+n.filter.length>0),t.xp6(1),t.Q6J("length",n.items.length)("pageSize",10)("pageSizeOptions",t.DdM(10,He)),t.xp6(1),t.Q6J("ngIf",n.checkPer(4)),t.xp6(1),t.Q6J("ngIf",n.checkPer(5)))},directives:[I.lW,k.Hw,g.O5,H.W,U.D,g.sg,y.NW,v.t],pipes:[g.uU],styles:[""],data:{animation:[x.Ym]}}),i})();function Je(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",34),t.NdJ("click",function(){return t.CHM(e),t.oxw().reload()}),t.TgZ(1,"mat-icon"),t._uU(2,"undo"),t.qZA()()}2&i&&t.Q6J("@slideIn",void 0)}function Se(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"app-search-api",35),t.NdJ("data",function(o){return t.CHM(e),t.oxw().find(o)}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("api",e.api)}}function Be(i,l){1&i&&(t.TgZ(0,"th"),t._uU(1,"\u0110\u1ecba ch\u1ec9"),t.qZA())}function we(i,l){1&i&&(t.TgZ(0,"th"),t._uU(1,"M\xe3 G C S"),t.qZA())}function Ke(i,l){1&i&&(t.TgZ(0,"th"),t._uU(1,"Ch\u1ee7 t\xe0i kho\u1ea3n"),t.qZA())}function Ye(i,l){1&i&&(t.TgZ(0,"th"),t._uU(1,"S\u1ed1 t\xe0i kho\u1ea3n"),t.qZA())}function Fe(i,l){1&i&&(t.TgZ(0,"th"),t._uU(1,"Ng\xe2n h\xe0ng"),t.qZA())}function Qe(i,l){1&i&&(t.TgZ(0,"th"),t._uU(1,"Email"),t.qZA())}function Le(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"td",41),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw(2).onEdit(o)}),t._uU(1),t.qZA()}if(2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.DiaChi)}}function Oe(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"td",41),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw(2).onEdit(o)}),t._uU(1),t.qZA()}if(2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.MaGCS)}}function $e(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"td",41),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw(2).onEdit(o)}),t._uU(1),t.qZA()}if(2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.ChuTaiKhoan)}}function Ge(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"td",41),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw(2).onEdit(o)}),t._uU(1),t.qZA()}if(2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.SoTaiKhoan)}}function Pe(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"td",41),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw(2).onEdit(o)}),t._uU(1),t.qZA()}if(2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.NganHang)}}function ze(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"td",41),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw(2).onEdit(o)}),t._uU(1),t.qZA()}if(2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.Email)}}function Re(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"mat-icon",44),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw(2).onDelete(o)}),t._uU(1,"delete"),t.qZA()}}function Ve(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"td",41),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw(2).onEdit(a)}),t._uU(2),t.qZA(),t.TgZ(3,"td",41),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw(2).onEdit(a)}),t._uU(4),t.qZA(),t.YNc(5,Le,2,1,"td",42),t.YNc(6,Oe,2,1,"td",42),t.YNc(7,$e,2,1,"td",42),t.YNc(8,Ge,2,1,"td",42),t.YNc(9,Pe,2,1,"td",42),t.YNc(10,ze,2,1,"td",42),t.TgZ(11,"td"),t.YNc(12,Re,2,0,"mat-icon",43),t.qZA()()}if(2&i){const e=l.$implicit,n=t.oxw(2);t.xp6(2),t.Oqu(e.MaKhachHang),t.xp6(2),t.Oqu(e.KhachHang),t.xp6(1),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",2),t.xp6(2),t.Q6J("ngIf",n.checkPer(4))}}function We(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"table",36)(1,"thead",37)(2,"tr")(3,"th"),t._uU(4,"M\xe3 kh\xe1ch h\xe0ng"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Kh\xe1ch h\xe0ng"),t.qZA(),t.YNc(7,Be,2,0,"th",38),t.YNc(8,we,2,0,"th",38),t.YNc(9,Ke,2,0,"th",38),t.YNc(10,Ye,2,0,"th",38),t.YNc(11,Fe,2,0,"th",38),t.YNc(12,Qe,2,0,"th",38),t.TgZ(13,"th")(14,"mat-icon",39),t.NdJ("click",function(){return t.CHM(e),t.oxw().reload()}),t._uU(15,"cached"),t.qZA()()()(),t.TgZ(16,"tbody"),t.YNc(17,Ve,13,9,"tr",40),t.qZA()()}if(2&i){const e=t.oxw();t.Q6J("@slideIn",void 0),t.xp6(7),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(5),t.Q6J("ngForOf",e.filter.length>0?e.filter:e.items.slice(0,10))("ngForTrackBy",e.trackByFn)}}function Xe(i,l){if(1&i&&t._UZ(0,"app-import-database",45),2&i){const e=t.oxw();t.Q6J("api",e.api)("global",e.global)("form",e.main)}}function je(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",46),t.NdJ("click",function(){return t.CHM(e),t.oxw().resetDB()}),t._uU(1,"X\xf3a to\xe0n b\u1ed9 d\u1eef li\u1ec7u"),t.qZA()}}function tn(i,l){if(1&i&&(t.TgZ(0,"mat-option",47),t._uU(1),t.qZA()),2&i){const e=l.$implicit;t.Q6J("value",e.GiaTri),t.xp6(1),t.hij("",e.NoiDung," ")}}function en(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",48),t.NdJ("click",function(){return t.CHM(e),t.oxw().save()}),t.TgZ(1,"mat-icon"),t._uU(2,"save"),t.qZA()()}2&i&&t.Q6J("@slideIn",void 0)}const nn=function(){return[5,10,25,100]},on=[{path:"",component:(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-dlxl"]],decls:2,vars:0,template:function(e,n){1&e&&(t.TgZ(0,"p"),t._uU(1,"dlxl works!"),t.qZA())},styles:[""]}),i})()},{path:"dmt-khach-hang",component:(()=>{class i{constructor(e,n,o){this.plus=e,this.fb=n,this.rtSv=o,this.main=this.fb.group({_id:[,[]],MaKhachHang:[,[r.kI.required,r.kI.minLength(5)]],KhachHang:[,[r.kI.required,r.kI.minLength(5)]],DiaChi:[,[r.kI.required,r.kI.minLength(5)]],MaGCS:[""],ChuTaiKhoan:[""],SoTaiKhoan:[""],NganHang:[""],Email:["",[r.kI.email]],CoHoaDon:[,[r.kI.required]],CCCD:[""]}),this.title="Kh\xe1ch h\xe0ng",this.dbName="dien-luc",this.global=!0,this.api="dmt-khach-hang",this.db=null,this.userId=this.plus.userId,this.usr=this.plus.usr,this.items=[],this.selectedItem=null,this.filter=[],this.chart=[]}ngOnInit(){this.plus.setTiTle(this.title),this.plus.IDB_InitDB(this.dbName).subscribe(e=>function(i,l,e,n){return new(e||(e=Promise))(function(a,c){function m(u){try{s(n.next(u))}catch(_){c(_)}}function h(u){try{s(n.throw(u))}catch(_){c(_)}}function s(u){u.done?a(u.value):function o(a){return a instanceof e?a:new e(function(c){c(a)})}(u.value).then(m,h)}s((n=n.apply(i,l||[])).next())})}(this,void 0,void 0,function*(){this.db=e,this.plus.updateRealtime(this.db,this.api,this.global),this.plus.IDB_DB_CleanTrash(e,this.api),this.plus.updateAPi.subscribe(n=>{n&&this.getIDB()})}))}getIDB(){this.filter=[],this.plus.IDB_DB_GetAll(this.db,this.api).subscribe(e=>{this.items=e,console.log(this.items)})}ngOnDestroy(){console.log("Destroy",this.api),this.plus.subs.unsubscribe(),this.rtSv.leaveRoom(this.api)}save(){if(this.main.invalid)return;const e=this.main.value;if(null==e._id)delete e._id,this.plus.httpPost(this.api,e,this.global).subscribe(n=>{n.status&&(this.plus.clickBtn("closeModal"),this.reload())});else{const n=this.plus.objVs(this.selectedItem,e);if(0===Object.keys(n).length)return this.plus.alertMatSnackBar("Kh\xf4ng c\xf3 n\u1ed9i dung n\xe0o thay \u0111\u1ed5i");this.plus.httpPut(this.api,e,this.global).subscribe(o=>{o.status&&(this.plus.clickBtn("closeModal"),this.addHistory(n),this.reload())})}}addHistory(e){const n=[];for(const a in e)n.push(this.selectedItem[a]+" => "+e[a]);const o={TaiKhoan:this.plus.user.value.fullName,NoiDung:n.join(", "),ThoiGian:Date.now(),MaKhachHang:this.selectedItem.MaKhachHang};0!=n.length&&this.plus.httpPost("dmt-history",o,!0).subscribe(a=>{})}onEdit(e){this.selectedItem=e,this.main.patchValue(e),this.plus.clickBtn("openModal")}onDelete(e){!confirm("B\u1ea1n mu\u1ed1n x\xf3a?")||(this.plus.load(),this.plus.httpDisable(this.api,e,!0).then(o=>{console.log(o)}))}chooseOpt(e,n,o,a=!1){this.main.controls[n].setValue(e[o]),a&&this.main.controls[n+"ID"].setValue(e._id)}closeModal(){this.main.reset()}search(e){this.filter=e}find(e){this.items=e}checkPer(e){return this.plus.checkPer(this.api,e)}reload(){return this.plus.reload(this.dbName+"/"+this.api)}reset(){this.plus.loaded(),this.filter=[],this.getIDB(),this.main.reset({})}changePage(e){this.filter=this.items.slice(e.pageIndex*e.pageSize,(e.pageIndex+1)*e.pageSize)}trackByFn(e,n){return n}resetDB(){this.plus.resetDB(this.db,this.api)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(b.T),t.Y36(r.qu),t.Y36(Z.i))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-nlmt-kh"]],decls:77,vars:18,consts:[[1,"container"],["id","add-btn","color","accent","mat-raised-button","","data-toggle","modal","data-target","#modelId",3,"click"],["id","back-btn","mat-raised-button","","color","primary",3,"click",4,"ngIf"],[3,"api","data",4,"ngIf"],[3,"db","api","filter"],[1,"row"],["class","table table-hover",4,"ngIf"],[3,"length","pageSize","pageSizeOptions","page"],[3,"api","global","form",4,"ngIf"],["mat-button","","color","warn",3,"click",4,"ngIf"],[3,"dataJson"],["id","openModal","type","button","data-toggle","modal","data-target","#modelId",1,"d-none"],["id","modelId","data-backdrop","static","tabindex","-1","role","dialog","aria-labelledby","modelTitleId","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-body"],[1,"container-fluid"],[3,"formGroup"],["hidden","","formControlName","_id"],["required","","type","text","autocomplete","off","matInput","","formControlName","MaKhachHang"],["matSuffix",""],["required","","type","text","autocomplete","off","matInput","","formControlName","KhachHang"],["required","","type","text","autocomplete","off","matInput","","formControlName","DiaChi"],["type","text","autocomplete","off","matInput","","formControlName","MaGCS"],["type","text","autocomplete","off","matInput","","formControlName","ChuTaiKhoan"],["type","text","autocomplete","off","matInput","","formControlName","SoTaiKhoan"],["type","text","autocomplete","off","matInput","","formControlName","NganHang"],["type","text","autocomplete","off","matInput","","formControlName","Email"],["formControlName","CoHoaDon"],[3,"value",4,"ngFor","ngForOf"],["type","text","autocomplete","off","matInput","","formControlName","CCCD"],[1,"modal-footer"],["id","closeModal","mat-raised-button","","color","primary","data-dismiss","modal",3,"click"],["mat-raised-button","","color","warn",3,"click",4,"ngIf"],["id","back-btn","mat-raised-button","","color","primary",3,"click"],[3,"api","data"],[1,"table","table-hover"],[1,"thead-inverse"],[4,"Device"],["color","primary",3,"click"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"click"],[3,"click",4,"Device"],["color","warn",3,"click",4,"ngIf"],["color","warn",3,"click"],[3,"api","global","form"],["mat-button","","color","warn",3,"click"],[3,"value"],["mat-raised-button","","color","warn",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"button",1),t.NdJ("click",function(){return n.reset()}),t.TgZ(2,"mat-icon"),t._uU(3,"control_point"),t.qZA()(),t.YNc(4,Je,3,1,"button",2),t.YNc(5,Se,1,1,"app-search-api",3),t.TgZ(6,"app-search-table",4),t.NdJ("filter",function(a){return n.search(a)}),t.qZA(),t.TgZ(7,"div",5),t.YNc(8,We,18,9,"table",6),t.TgZ(9,"mat-paginator",7),t.NdJ("page",function(a){return n.changePage(a)}),t.qZA()(),t.YNc(10,Xe,1,3,"app-import-database",8),t.qZA(),t.YNc(11,je,2,0,"button",9),t._UZ(12,"app-export-ecxel",10)(13,"button",11),t.TgZ(14,"div",12)(15,"div",13)(16,"div",14)(17,"div",15)(18,"div",16)(19,"form",17),t._UZ(20,"input",18),t.TgZ(21,"mat-form-field")(22,"mat-label"),t._uU(23,"M\xe3 kh\xe1ch h\xe0ng"),t.qZA(),t._UZ(24,"input",19)(25,"span",20),t.qZA(),t.TgZ(26,"mat-form-field")(27,"mat-label"),t._uU(28,"Kh\xe1ch h\xe0ng"),t.qZA(),t._UZ(29,"input",21)(30,"span",20),t.qZA(),t.TgZ(31,"mat-form-field")(32,"mat-label"),t._uU(33,"\u0110\u1ecba ch\u1ec9"),t.qZA(),t._UZ(34,"input",22)(35,"span",20),t.qZA(),t.TgZ(36,"mat-form-field")(37,"mat-label"),t._uU(38,"M\xe3 Ghi ch\u1ec9 s\u1ed1"),t.qZA(),t._UZ(39,"input",23)(40,"span",20),t.qZA(),t.TgZ(41,"mat-form-field")(42,"mat-label"),t._uU(43,"Ch\u1ee7 t\xe0i kho\u1ea3n"),t.qZA(),t._UZ(44,"input",24)(45,"span",20),t.qZA(),t.TgZ(46,"mat-form-field")(47,"mat-label"),t._uU(48,"S\u1ed1 t\xe0i kho\u1ea3n"),t.qZA(),t._UZ(49,"input",25)(50,"span",20),t.qZA(),t.TgZ(51,"mat-form-field")(52,"mat-label"),t._uU(53,"Ng\xe2n h\xe0ng"),t.qZA(),t._UZ(54,"input",26)(55,"span",20),t.qZA(),t.TgZ(56,"mat-form-field")(57,"mat-label"),t._uU(58,"Email"),t.qZA(),t._UZ(59,"input",27)(60,"span",20),t.qZA(),t.TgZ(61,"mat-form-field")(62,"mat-label"),t._uU(63,"C\xf3 h\xf3a \u0111\u01a1n"),t.qZA(),t.TgZ(64,"mat-select",28),t.YNc(65,tn,2,2,"mat-option",29),t.ALo(66,"catalog"),t.qZA()(),t.TgZ(67,"mat-form-field")(68,"mat-label"),t._uU(69,"CCCD"),t.qZA(),t._UZ(70,"input",30)(71,"span",20),t.qZA()()()(),t.TgZ(72,"div",31)(73,"button",32),t.NdJ("click",function(){return n.closeModal()}),t.TgZ(74,"mat-icon"),t._uU(75,"close"),t.qZA()(),t.YNc(76,en,3,1,"button",33),t.qZA()()()()),2&e&&(t.xp6(4),t.Q6J("ngIf",n.filter.length>0),t.xp6(1),t.Q6J("ngIf",n.checkPer(10)),t.xp6(1),t.Q6J("db",n.db)("api",n.api),t.xp6(2),t.Q6J("ngIf",n.items.length+n.filter.length>0),t.xp6(1),t.Q6J("length",n.items.length)("pageSize",10)("pageSizeOptions",t.DdM(17,nn)),t.xp6(1),t.Q6J("ngIf",n.checkPer(4)),t.xp6(1),t.Q6J("ngIf",n.checkPer(5)),t.xp6(1),t.Q6J("dataJson",n.items),t.xp6(7),t.Q6J("formGroup",n.main),t.xp6(46),t.Q6J("ngForOf",t.lcZ(66,15,"CoHoaDon")),t.xp6(8),t.Q6J("@slideIn",void 0),t.xp6(3),t.Q6J("ngIf",n.checkPer(2)&&n.main.valid))},directives:[I.lW,k.Hw,g.O5,H.W,U.D,q.HP,g.sg,y.NW,M.y,v.t,r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,f.KE,f.hX,D.Nt,r.Q7,f.R9,B.gD,w.ey],pipes:[T.pW],styles:[""],data:{animation:[x.Ym]}}),i})()},{path:"dmt-history",component:Me},{path:"dmt-input",component:Ce},{path:"dmt-input/:id",component:W},{path:"dmt-pay",component:Yt},{path:"dmt-pay/:id",component:Nt}];let an=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[N.Bz.forChild(on)],N.Bz]}),i})();var ln=p(83886);let rn=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[g.ez,an,z.ShareModule,P.m,G.D,$.X,ln.N]]}),i})()}}]);