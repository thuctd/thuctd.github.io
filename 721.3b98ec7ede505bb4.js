"use strict";(self.webpackChunkdlxl=self.webpackChunkdlxl||[]).push([[721],{21721:(A,f,r)=>{r.r(f),r.d(f,{QLVHModule:()=>rt});var d=r(89173),b=r(41019),Z=r(79531),c=r(85913),T=r(51372),s=r(85767),u=r(69808),t=r(5e3),p=r(45230),m=r(99826);function h(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td")(2,"a",5),t._uU(3),t.qZA()(),t.TgZ(4,"td")(5,"span",6),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw(2).copyInput(l.MaTram)}),t._uU(6),t.qZA()(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA()()}if(2&n){const e=i.$implicit;t.xp6(2),t.MGl("routerLink","/qlvh/tba/capnhat/",e.MaTram,""),t.xp6(1),t.Oqu(e.MaTram),t.xp6(2),t.s9C("id",e.MaTram),t.xp6(1),t.Oqu(e.MaPk),t.xp6(2),t.Oqu(e.TenTram),t.xp6(2),t.Oqu(e.CongSuat),t.xp6(2),t.Oqu(e.ViTri),t.xp6(2),t.Oqu(e.TonTai)}}function x(n,i){if(1&n&&(t.TgZ(0,"div",1)(1,"table",3)(2,"thead")(3,"tr")(4,"th"),t._uU(5,"M\xe3 tr\u1ea1m"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"M\xe3 PK"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"T\xean tr\u1ea1m"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"C\xf4ng su\u1ea5t"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"V\u1ecb tr\xed"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"T\u1ed3n t\u1ea1i"),t.qZA(),t._UZ(16,"th"),t.qZA()(),t.TgZ(17,"tbody"),t.YNc(18,h,15,8,"tr",4),t.qZA()()()),2&n){const e=t.oxw();t.xp6(18),t.Q6J("ngForOf",e.data)}}let E=(()=>{class n{constructor(e){this.plus=e,this.api="tba",this.data=[]}ngOnInit(){this.report1()}copyInput(e){return this.plus.copyInputMessage(e)}report1(){this.plus.load(),this.plus.httpGet(this.api+"/tontai/tba").subscribe(e=>{this.data=this.plus.Crypt_DecryptRest(e),this.plus.loaded()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.T))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-tba-ton-tai"]],decls:3,vars:1,consts:[[1,"container"],[1,"row"],["class","row",4,"ngIf"],[1,"table","bordered","table-hover"],[4,"ngFor","ngForOf"],[3,"routerLink"],[3,"id","click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"div",1),t.YNc(2,x,19,1,"div",2),t.qZA()),2&e&&(t.xp6(2),t.Q6J("ngIf",o.data.length))},directives:[u.O5,u.sg,m.yS],styles:[""]}),n})();var C=r(15228),y=r(47423),v=r(68042),O=r(31361);function q(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",12),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit;return t.oxw().delete(a._id)}),t._uU(1,"X\xf3a"),t.qZA()}}function I(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td")(2,"a",9),t._uU(3),t.qZA()(),t.TgZ(4,"td")(5,"span",10),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw().copyInput(l.MaTram)}),t._uU(6),t.qZA()(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t.YNc(16,q,2,0,"button",11),t.qZA()()}if(2&n){const e=i.$implicit,o=t.oxw();t.xp6(2),t.MGl("routerLink","capnhat/",e.MaTram,""),t.xp6(1),t.Oqu(e.MaTram),t.xp6(2),t.s9C("id",e.MaTram),t.xp6(1),t.Oqu(e.MaPk),t.xp6(2),t.Oqu(e.TenTram),t.xp6(2),t.Oqu(e.CongSuat),t.xp6(2),t.Oqu(e.ViTri),t.xp6(2),t.hij("",e.IdmMccb,"A"),t.xp6(2),t.Q6J("ngIf",o.checkPer(4))}}const N=function(){return[]};let B=(()=>{class n{constructor(e){this.plus=e,this.dbName="qlvh",this.api="tba",this.db=null,this.global=!0,this.items=[],this.loadMoreBtn=!1}ngOnDestroy(){console.log("Destroy ",this.api)}ngOnInit(){this.plus.IDB_InitDB(this.dbName).subscribe(e=>{this.db=e},e=>this.plus.alertError())}get(){this.plus.IDB_DB_GetAll(this.db,this.api).subscribe(e=>{this.plus.load(),e.length>0?(this.plus.loaded(),this.items=e,this.update()):this.plus.httpGet(this.api).subscribe(o=>{this.plus.loaded(),o.length>0&&(this.items=o,this.plus.IDB_DB_Add(this.db,this.api,o))},o=>this.plus.alertError())})}getData(e=this.db,o=this.api){let a;this.plus.IDB_DB_GetAll(e,o).subscribe(l=>{this.plus.Crypt_Encrypt(this.plus.Arr_MaxValue(l)),this.items=this.plus.sortArr(l,"Ngay"),a=this.plus.Arr_MaxValue(l)})}delete(e){this.plus.httpDelete(this.api,e,this.global).subscribe(o=>{this.plus.alertToasrt(o)})}checkPer(e){return this.plus.checkPer(this.api,e)}find(e){this.plus.loaded(),this.items=e,this.plus.IDB_DB_Add(this.db,this.api,e)}loadMore(e){null!=e&&(this.plus.IDB_DB_Add(this.db,this.api,e),console.log(e),e.forEach(o=>{this.items.push(o)}))}copyInput(e){return this.plus.copyInputMessage(e)}update(){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.T))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-danh-sach-tba"]],decls:28,vars:5,consts:[[1,"container"],[1,"example-button-row"],["mat-raised-button","","color","primary","routerLink","them"],["routerLink","ton-tai"],[3,"api","data"],[1,"row"],[1,"table","bordered","table-hover"],[4,"ngFor","ngForOf"],[3,"api","dataLength","data"],[3,"routerLink"],[3,"id","click"],["mat-raised-button","","color","warn",3,"click",4,"ngIf"],["mat-raised-button","","color","warn",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"section")(2,"div",1)(3,"button",2),t._uU(4,"Th\xeam m\u1edbi"),t.qZA()(),t.TgZ(5,"a",3),t._uU(6,"Th\u1ed1ng k\xea t\u1ed3n t\u1ea1i TBA"),t.qZA()(),t.TgZ(7,"app-search-api",4),t.NdJ("data",function(l){return o.find(l)}),t.qZA(),t.TgZ(8,"div",5)(9,"table",6)(10,"thead")(11,"tr")(12,"th"),t._uU(13,"M\xe3 tr\u1ea1m"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"M\xe3 PK"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"T\xean tr\u1ea1m"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"C\xf4ng su\u1ea5t"),t.qZA(),t.TgZ(20,"th"),t._uU(21,"V\u1ecb tr\xed"),t.qZA(),t.TgZ(22,"th"),t._uU(23,"Idm MCCB"),t.qZA(),t._UZ(24,"th"),t.qZA()(),t.TgZ(25,"tbody"),t.YNc(26,I,17,9,"tr",7),t.qZA()()(),t.TgZ(27,"app-loadmore",8),t.NdJ("data",function(l){return o.loadMore(l)}),t.qZA()()),2&e&&(t.xp6(7),t.Q6J("api",o.api),t.xp6(19),t.Q6J("ngForOf",o.items?o.items.slice(0,20):t.DdM(4,N)),t.xp6(1),t.Q6J("api",o.api)("dataLength",o.items.length))},directives:[y.lW,m.rH,m.yS,v.W,u.sg,u.O5,O.w],styles:["section[_ngcontent-%COMP%]{display:table}.example-label[_ngcontent-%COMP%]{display:table-cell;font-size:14px;margin-left:8px;min-width:120px}.example-button-row[_ngcontent-%COMP%]{display:table-cell;width:490px}.example-button-row[_ngcontent-%COMP%]   .mat-button-base[_ngcontent-%COMP%]{margin:8px 8px 8px 0}.example-flex-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap}.example-button-container[_ngcontent-%COMP%]{display:flex;justify-content:center;width:120px}"],data:{animation:[C.Ym]}}),n})();var _=r(93075),S=r(40520);let P=(()=>{class n{constructor(e,o){this.plus=e,this.httpClient=o,this.link=new t.vpe}ngOnInit(){}onSelect(e){this.plus.load();const o=e.target.files[0],a=new FormData;if(a.append("image",o),o.size>31457280)return this.plus.alertToasrt({war:"Dung l\u01b0\u1ee3ng file qu\xe1 50Mb"}),void this.plus.loaded();this.httpClient.post("https://api.imgbb.com/1/upload?key=c12c9929f85f23a78cdda184209f8710",a).subscribe(l=>{this.link.emit(l.data),this.plus.loaded()},l=>{this.plus.loaded(),this.plus.alertToasrt({err:"L\u1ed7i upload file! \nVui l\xf2ng th\u1eed l\u1ea1i!"})})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.T),t.Y36(S.eN))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-upload-img-bb"]],outputs:{link:"link"},decls:4,vars:0,consts:[["for","file-import",1,"custom-file-upload","text-primary","mx-5"],["aria-hidden","true",1,"fa","fa-file-image-o"],["hidden","","id","file-import","type","file","multiple","false",3,"change"]],template:function(e,o){1&e&&(t.TgZ(0,"label",0),t._uU(1," Ch\u1ecdn file \u1ea3nh "),t._UZ(2,"i",1),t.qZA(),t.TgZ(3,"input",2),t.NdJ("change",function(l){return o.onSelect(l)}),t.qZA())},styles:[""]}),n})();var M=r(80574);function J(n,i){1&n&&(t.TgZ(0,"label",5),t._uU(1," Ch\u1ecdn file "),t._UZ(2,"i",6),t.qZA())}function k(n,i){if(1&n&&(t.TgZ(0,"td",11),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.err||"","")}}function L(n,i){if(1&n&&(t.TgZ(0,"tr"),t.YNc(1,k,2,1,"td",10),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.Q6J("ngIf",e.err)}}function F(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"table",7)(1,"h4"),t._uU(2,"L\u1ed7i d\u1eef li\u1ec7u file import"),t.qZA(),t.TgZ(3,"tbody"),t.YNc(4,L,2,1,"tr",8),t.qZA(),t.TgZ(5,"button",9),t.NdJ("click",function(){return t.CHM(e),t.oxw().reload()}),t._uU(6,"L\xe0m l\u1ea1i"),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(4),t.Q6J("ngForOf",e.errorData.length>0?e.errorData:e.dataJson)}}let H=(()=>{class n{constructor(e){this.plus=e,this.xls=new t.vpe,this.dataImport=[],this.dataJson=[],this.errorData=[]}ngOnInit(){}readXlsx(e){this.plus.load(),this.dataJson=[],this.dataImport=[];let o=e.target;const a=new FileReader;a.onload=l=>{const D=M.ij(l.target.result,{type:"binary"});this.dataImport=M.P6.sheet_to_json(D.Sheets[D.SheetNames[0]],{header:1}),this.selectedFile(this.dataImport)},a.readAsBinaryString(o.files[0]),o=null,this.plus.loaded()}selectedFile(e){console.log(e);for(let o=1;o<e.length;o++){const a={};if(e[0].forEach((g,D)=>{a[`${g}`]=e[o][D]}),null==a)return;this.form.patchValue(this.plus.Obj_clean(a));const l=a;this.form.valid?(l.dateModify=Date.now()+o,l.keyWord=this.plus.generateKeyWord(l),this.dataJson.push(l)):(l.err=`T\u1ea1i h\xe0ng ${o}: ${this.plus.getErrValidateForm(this.form)}`,this.errorData.push(a))}this.errorData.length>0||this.xls.emit(this.dataJson),this.plus.loaded()}reload(){this.plus.reload(this.dbName+"/"+this.api)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.T))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-import-excel"]],inputs:{form:"form",api:"api",dbName:"dbName"},outputs:{xls:"xls"},decls:8,vars:3,consts:[[1,"list"],["for","file-import","class","custom-file-upload text-primary mx-5",4,"ngIf"],["hidden","","id","file-import","type","file","multiple","false",3,"change"],["target","_blank",1,"badge","badge-warning",3,"href"],["class","table table-inverse table-responsive",4,"ngIf"],["for","file-import",1,"custom-file-upload","text-primary","mx-5"],["aria-hidden","true",1,"fa","fa-file-excel-o","fa-2x","text-success"],[1,"table","table-inverse","table-responsive"],[4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",1,"text-center","mx-3",3,"click"],["class","text-danger",4,"ngIf"],[1,"text-danger"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"hr"),t.YNc(2,J,3,0,"label",1),t.TgZ(3,"input",2),t.NdJ("change",function(l){return o.readXlsx(l)}),t.qZA(),t._UZ(4,"hr"),t.TgZ(5,"a",3),t._uU(6,"File import m\u1eabu"),t.qZA()(),t.YNc(7,F,7,1,"table",4)),2&e&&(t.xp6(2),t.Q6J("ngIf",0==o.dataJson.length&&0==o.errorData.length),t.xp6(3),t.MGl("href","https://github.com/thuctd/FileStore/raw/master/templates/",o.api,".xlsx",t.LSH),t.xp6(2),t.Q6J("ngIf",o.errorData.length>0))},directives:[u.O5,u.sg,y.lW],styles:[""]}),n})();var Q=r(41258);let w=(()=>{class n{constructor(){this.position=new t.vpe}ngOnInit(){}getLocation(){navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{e&&this.position.emit(e)},e=>console.log(e)):alert("Tr\xecnh duy\u1ec7t c\u1ee7a b\u1ea1n kh\xf4ng h\u1ed7 tr\u1ee3 l\u1ea5y v\u1ecb tr\xed!")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-toa-do"]],outputs:{position:"position"},decls:4,vars:0,consts:[[1,"row"],[1,"text-center"],["type","button",1,"btn","btn-outline-primary",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"button",2),t.NdJ("click",function(){return o.getLocation()}),t._uU(3,"L\u1ea5y t\u1ecda \u0111\u1ed9"),t.qZA()()())},styles:[""]}),n})();function Y(n,i){if(1&n&&(t.TgZ(0,"div",43)(1,"a",44),t._UZ(2,"img",45),t.qZA(),t.TgZ(3,"a",44),t._uU(4," Link d\u1ef1 ph\xf2ng"),t.qZA()()),2&n){const e=t.oxw();t.xp6(1),t.s9C("href",e.SoDoHaTheGit,t.LSH),t.xp6(1),t.s9C("src",e.SoDoHaTheGit,t.LSH),t.s9C("srcset",e.SoDoHaTheGit,t.LSH),t.xp6(1),t.s9C("href",e.SoDoHaThe,t.LSH)}}function V(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"app-upload-img-bb",49),t.NdJ("link",function(a){return t.CHM(e),t.oxw(2).uploadImg(a)}),t.qZA()}}function K(n,i){if(1&n&&(t.TgZ(0,"div",46),t._UZ(1,"hr"),t.TgZ(2,"label",47),t._uU(3,"Ch\u1ecdn file s\u01a1 \u0111\u1ed3 h\u1ea1 th\u1ebf"),t.qZA(),t.YNc(4,V,1,0,"app-upload-img-bb",48),t._UZ(5,"hr"),t.qZA()),2&n){const e=t.oxw();t.xp6(4),t.Q6J("ngIf",e.checkPer(2))}}function R(n,i){if(1&n&&(t.TgZ(0,"div",50)(1,"h6")(2,"i"),t._uU(3),t.qZA()()()),2&n){const e=t.oxw();t.xp6(3),t.Oqu(e.lastEdit)}}function j(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",51),t.NdJ("click",function(){return t.CHM(e),t.oxw().save()}),t._uU(1,"L\u01b0u"),t.qZA()}}function W(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",52),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return a.readonly=!a.readonly}),t._uU(1,"S\u1eeda"),t.qZA()}}function X(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",53),t.NdJ("click",function(){return t.CHM(e),t.oxw().import()}),t._uU(1,"import"),t.qZA()}}function G(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",54),t.NdJ("click",function(){return t.CHM(e),t.oxw().deleteDB()}),t._uU(1,"deleteDB"),t.qZA()}}function $(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",55)(1,"app-import-excel",56),t.NdJ("xls",function(a){return t.CHM(e),t.oxw().onSelectFile(a)}),t.qZA(),t.TgZ(2,"app-parse-excel-clipboard",57),t.NdJ("excel",function(a){return t.CHM(e),t.oxw().onPaste(a)}),t.qZA()()}}function z(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td",58),t._uU(2),t.ALo(3,"number"),t.qZA(),t.TgZ(4,"td",58),t._uU(5),t.ALo(6,"number"),t.qZA(),t.TgZ(7,"td",58),t._uU(8),t.ALo(9,"number"),t.qZA(),t.TgZ(10,"td")(11,"a",44),t._uU(12,"location"),t.qZA()(),t.TgZ(13,"td")(14,"button",59),t.NdJ("click",function(){const l=t.CHM(e).index;return t.oxw().delLocation(l)}),t._uU(15,"X\xf3a"),t.qZA()()()}if(2&n){const e=i.$implicit;t.xp6(2),t.Oqu(t.lcZ(3,5,e.coords.latitude)),t.xp6(3),t.Oqu(t.lcZ(6,7,e.coords.longitude)),t.xp6(3),t.hij("",t.lcZ(9,9,e.coords.accuracy/2)," m"),t.xp6(3),t.hYB("href","https://www.google.com/maps?q=",e.coords.latitude,",",e.coords.longitude,"",t.LSH)}}let U=(()=>{class n{constructor(e,o,a){this.plus=e,this.fb=o,this.route=a,this.dbName="qlvh",this.db=null,this.api="tba",this.collection="tba",this.importData=[],this.global=!0,this.errorData=[],this.lastEdit="",this.SoDoHaThe="",this.MaTram="",this.SoDoHaTheGit=`https://github.com/thuctd/FileStore/raw/master/TBA/${this.MaTram}.jpg`,this.locations=[],this.table="",this.readonly=!0,this.main=this.fb.group({MaTram:[,[_.kI.required]],TenTram:[,[_.kI.required]],CongSuat:[,[_.kI.required]],DienAp:[,[_.kI.required]],ViTri:[,[]],SoPha:[,[]],SoMba:[,[]],HieuMccb:[,[]],IdmMccb:[,[]],NacMccb:[,[]],CapSuatXuong:[,[]],CapSuatLen:[,[]],MaPk:[,[]],Tuyen:[,[_.kI.required]],PhaDauNoi:[,[]],SoHuu:[,[]],NgayLapDat:[,[]],ToQuanLy:[,[]],ViTriTuBu:[,[]],SoDoHaThe:[,[]],GhiChu:[,[]],NhatKyThiCong:[,[]],TonTai:[,[]]})}ngOnInit(){this.init_IDB()}init_IDB(){this.plus.IDB_InitDB(this.dbName).subscribe(e=>{this.db=e,this.getById()})}getById(){this.plus.load();const e=this.route.snapshot.paramMap.get("id");this.MaTram=e,e?this.plus.httpGet(this.api+"/MaTram/"+e).subscribe(o=>{let a=this.plus.Crypt_DecryptRest(o);this.main.patchValue(a),console.log(a),a.userId&&(this.lastEdit=`C\u1eadp nh\u1eadt l\u1ea7n cu\u1ed1i:  ${this.plus.date_UTCto(a.dateModify,"LT DD/MM/YYYY")} b\u1edfi ${a.userId.fullName} `),this.plus.IDB_DB_Add(this.db,this.collection,a),a.NgayLapDat=this.plus.date_UTCto(a.NgayLapDat,"YYYY-MM-DD"),a.SoDoHaThe&&(this.SoDoHaThe=JSON.parse(a.SoDoHaThe).link),this.main.patchValue(a),this.plus.loaded()},o=>{this.plus.alertError("D\u1eef li\u1ec7u \u0111\u01b0\u1ee3c l\u01b0u s\u1ebd hi\u1ec3n th\u1ecb n\u1ebfu c\xf3"),this.plus.IDB_DB_GetByKey(this.db,this.collection,+e).subscribe(a=>{console.log(a),this.main.patchValue(a),this.plus.loaded()}),this.plus.loaded()}):this.plus.loaded()}save(){const e=this.route.snapshot.paramMap.get("id");let o=this.main.value;o.NgayLapDat=this.plus.dateFormat(o.NgayLapDat,"x","YYYY-MM-DD"),o.dateModify=Date.now(),+e>0?this.plus.httpPut(this.api,o).subscribe(a=>{this.plus.alertToasrt(a),this.plus.IDB_DB_Add(this.db,this.api,o)}):this.plus.httpPost(this.api,o).subscribe(a=>{this.plus.alertToasrt(a),this.plus.IDB_DB_Add(this.db,this.api,o),console.log(a)})}checkPer(e){return this.plus.checkPer(this.api,e)}import(){const e=this.importData.map(l=>{let g=l;return g.keyWord=this.plus.removeAccents(JSON.stringify(l)),g});let o=JSON.stringify(e),a={data:this.plus.Crypt_Encrypt(o)};this.plus.httpPost(this.api+"/import",a).subscribe(l=>{this.plus.alertToasrt(l),console.log(l)})}onPaste(e){const o=e[1];console.log(o);let a={_id:+o[0],MaTram:o[0],TenTram:o[1],Tuyen:o[2],SoPha:o[3],CongSuat:+o[4],DienAp:o[5],SoMba:+o[6],SoHuu:o[7],ViTri:o[8]||"",HieuMccb:o[9]||"",IdmMccb:+o[10],NacMccb:+o[11]||1,CapSuatXuong:o[12]||"",CapSuatLen:o[13]||"",MaPk:o[14],PhaDauNoi:o[15]||"",NgayLapDat:this.plus.dateFormat(o[16],"YYYY-MM-DD","DD/MM/YYYY"),ToQuanLy:o[17]||"",GhiChu:o[18]||"",NhatKyThiCong:o[19]||"",TonTai:o[20]||""};console.log(a),this.main.patchValue(a)}onSelectFile(e){const o=e.slice(2);console.log(o),o.forEach((a,l)=>{let g={_id:+a[0],MaTram:a[0],TenTram:a[1],Tuyen:a[2],SoPha:a[3],CongSuat:+a[4],DienAp:a[5],SoMba:+a[6],SoHuu:a[7],ViTri:a[8]||"",HieuMccb:a[9]||"",IdmMccb:+a[10],NacMccb:+a[11]||1,CapSuatXuong:a[12]||"",CapSuatLen:a[13]||"",MaPk:a[14],PhaDauNoi:a[15]||"",NgayLapDat:this.plus.datexlsToUnix(a[16]),ToQuanLy:a[17]||"",GhiChu:a[18]||"",NhatKyThiCong:a[19]||"",TonTai:a[20]||""};this.main.patchValue(g),this.main.valid?this.importData.push(g):this.errorData.push(g)})}goBack(){this.plus.goBack()}getlocation(e){console.log(e),this.locations.push(e)}deleteDB(){this.plus.httpDelete(this.api,"/find/all",this.global).subscribe(e=>{console.log(e)})}delLocation(e){this.locations.splice(e,1)}uploadImg(e){console.log(e);let o={link:e.url,del:e.delete_url};this.SoDoHaThe=o.link,this.main.controls.SoDoHaThe.setValue(JSON.stringify(o))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.T),t.Y36(_.qu),t.Y36(m.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-edit-tba"]],decls:132,vars:30,consts:[[1,"container"],[1,"text-center","text-primary","bg-white"],[3,"formGroup"],[1,"form-row"],[1,"form-group","col-md-6"],[1,"input-group","mb-3"],[1,"input-group-prepend"],[1,"input-group-text"],["type","number","formControlName","MaTram",1,"form-control",3,"readOnly"],["type","text","formControlName","TenTram",1,"form-control",3,"readOnly"],["type","number","list","congsuat","formControlName","CongSuat",1,"form-control",3,"readOnly"],["type","text","formControlName","ViTri",1,"form-control",3,"readOnly"],["type","text","formControlName","HieuMccb",1,"form-control",3,"readOnly"],["type","number","formControlName","IdmMccb",1,"form-control",3,"readOnly"],["type","number","formControlName","NacMccb",1,"form-control",3,"readOnly"],["type","text","formControlName","CapSuatXuong",1,"form-control",3,"readOnly"],["type","text","formControlName","CapSuatLen",1,"form-control",3,"readOnly"],["type","text","formControlName","MaPk",1,"form-control",3,"readOnly"],["list","tuyen","type","text","formControlName","Tuyen",1,"form-control",3,"readOnly"],["type","number","formControlName","SoMba",1,"form-control",3,"readOnly"],["list","pha","type","text","formControlName","PhaDauNoi",1,"form-control",3,"readOnly"],["type","text","list","sohuu","formControlName","SoHuu",1,"form-control",3,"readOnly"],["type","date","formControlName","NgayLapDat",1,"form-control",3,"readOnly"],["type","text","formControlName","ToQuanLy",1,"form-control",3,"readOnly"],["type","text","formControlName","GhiChu",1,"form-control",3,"readOnly"],["type","text","formControlName","TonTai",1,"form-control",3,"readOnly"],["type","text","formControlName","NhatKyThiCong",1,"form-control",3,"readOnly"],["class","card","style","width: 18rem;",4,"ngIf"],["class","sd",4,"ngIf"],["class","update",4,"ngIf"],[1,"text-center","example-button-row"],["style","margin: 8px 8px 8px 0;","mat-raised-button","","color","warn",3,"click",4,"ngIf"],["style","margin: 8px 8px 8px 0;","mat-raised-button","","color","accent",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",2,"margin","8px 8px 8px 0",3,"click"],["class","btn btn-outline-danger mx-3",3,"click",4,"ngIf"],["class","btn btn-outline-info mx-3",3,"click",4,"ngIf"],["class","import",4,"ngIf"],[1,"table","table-striped","table-inverse","table-responsive"],[1,"thead-inverse"],[4,"ngFor","ngForOf"],[1,"text-center"],[3,"position"],[1,"table",3,"innerHTML"],[1,"card",2,"width","18rem"],["target","_blank",3,"href"],["alt","S\u01a1 \u0111\u1ed3 h\u1ea1 th\u1ebf",1,"card-img-top",3,"src","srcset"],[1,"sd"],["f",""],[3,"link",4,"ngIf"],[3,"link"],[1,"update"],["mat-raised-button","","color","warn",2,"margin","8px 8px 8px 0",3,"click"],["mat-raised-button","","color","accent",2,"margin","8px 8px 8px 0",3,"click"],[1,"btn","btn-outline-danger","mx-3",3,"click"],[1,"btn","btn-outline-info","mx-3",3,"click"],[1,"import"],[3,"xls"],[3,"excel"],["scope","row"],["type","button",1,"btn","btn-outline-danger",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"h3",1),t._uU(2," Th\xf4ng tin tr\u1ea1m bi\u1ebfn \xe1p"),t.qZA(),t.TgZ(3,"form",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"span",7),t._uU(9,"M\xe3 tr\u1ea1m"),t.qZA()(),t._UZ(10,"input",8),t.qZA(),t.TgZ(11,"div",5)(12,"div",6)(13,"span",7),t._uU(14,"T\xean tr\u1ea1m"),t.qZA()(),t._UZ(15,"input",9),t.qZA(),t.TgZ(16,"div",5)(17,"div",6)(18,"span",7),t._uU(19,"C\xf4ng su\u1ea5t"),t.qZA()(),t._UZ(20,"input",10),t.qZA(),t.TgZ(21,"div",5)(22,"div",6)(23,"span",7),t._uU(24,"V\u1ecb tr\xed"),t.qZA()(),t._UZ(25,"input",11),t.qZA(),t.TgZ(26,"div",5)(27,"div",6)(28,"span",7),t._uU(29,"Hi\u1ec7u MCCB"),t.qZA()(),t._UZ(30,"input",12),t.qZA(),t.TgZ(31,"div",5)(32,"div",6)(33,"span",7),t._uU(34,"Idm MCCB"),t.qZA()(),t._UZ(35,"input",13),t.qZA(),t.TgZ(36,"div",5)(37,"div",6)(38,"span",7),t._uU(39,"N\u1ea5c MCCB"),t.qZA()(),t._UZ(40,"input",14),t.qZA(),t.TgZ(41,"div",5)(42,"div",6)(43,"span",7),t._uU(44,"C\xe1p su\u1ea5t xu\u1ed1ng"),t.qZA()(),t._UZ(45,"input",15),t.qZA(),t.TgZ(46,"div",5)(47,"div",6)(48,"span",7),t._uU(49,"C\xe1p su\u1ea5t l\xean"),t.qZA()(),t._UZ(50,"input",16),t.qZA()(),t.TgZ(51,"div",4)(52,"div",5)(53,"div",6)(54,"span",7),t._uU(55,"M\xe3 PK"),t.qZA()(),t._UZ(56,"input",17),t.qZA(),t.TgZ(57,"div",5)(58,"div",6)(59,"span",7),t._uU(60,"Tuy\u1ebfn"),t.qZA()(),t._UZ(61,"input",18),t.qZA(),t.TgZ(62,"div",5)(63,"div",6)(64,"span",7),t._uU(65,"S\u1ed1 MBA"),t.qZA()(),t._UZ(66,"input",19),t.qZA(),t.TgZ(67,"div",5)(68,"div",6)(69,"span",7),t._uU(70,"Pha \u0111\u1ea5u n\u1ed1i"),t.qZA()(),t._UZ(71,"input",20),t.qZA(),t.TgZ(72,"div",5)(73,"div",6)(74,"span",7),t._uU(75,"S\u1edf h\u1eefu"),t.qZA()(),t._UZ(76,"input",21),t.qZA(),t.TgZ(77,"div",5)(78,"div",6)(79,"span",7),t._uU(80,"Ng\xe0y v\u1eadn h\xe0nh"),t.qZA()(),t._UZ(81,"input",22),t.qZA(),t.TgZ(82,"div",5)(83,"div",6)(84,"span",7),t._uU(85,"T\u1ed5 qu\u1ea3n l\xfd"),t.qZA()(),t._UZ(86,"input",23),t.qZA(),t.TgZ(87,"div",5)(88,"div",6)(89,"span",7),t._uU(90,"Ghi ch\xfa"),t.qZA()(),t._UZ(91,"input",24),t.qZA(),t.TgZ(92,"div",5)(93,"div",6)(94,"span",7),t._uU(95,"T\u1ed3n t\u1ea1i"),t.qZA()(),t._UZ(96,"input",25),t.qZA()(),t.TgZ(97,"div",5)(98,"div",6)(99,"span",7),t._uU(100,"Nh\u1eadt k\xfd thi c\xf4ng"),t.qZA()(),t._UZ(101,"input",26),t.qZA(),t.YNc(102,Y,5,4,"div",27),t.qZA(),t.YNc(103,K,6,1,"div",28),t.qZA(),t.YNc(104,R,4,1,"div",29),t.TgZ(105,"div",30),t.YNc(106,j,2,0,"button",31),t.YNc(107,W,2,0,"button",32),t.TgZ(108,"button",33),t.NdJ("click",function(){return o.goBack()}),t._uU(109,"Quay l\u1ea1i"),t.qZA(),t.YNc(110,X,2,0,"button",34),t.YNc(111,G,2,0,"button",35),t.qZA()(),t.YNc(112,$,3,0,"div",36),t.TgZ(113,"div",0)(114,"table",37)(115,"thead",38)(116,"tr")(117,"th"),t._uU(118,"v\u0129 \u0111\u1ed9"),t.qZA(),t.TgZ(119,"th"),t._uU(120,"Kinh \u0111\u1ed9"),t.qZA(),t.TgZ(121,"th"),t._uU(122,"Sai s\u1ed1"),t.qZA(),t.TgZ(123,"th"),t._uU(124,"Link"),t.qZA(),t.TgZ(125,"th"),t._uU(126,"X\xf3a"),t.qZA()()(),t.TgZ(127,"tbody"),t.YNc(128,z,16,11,"tr",39),t.qZA()(),t.TgZ(129,"div",40)(130,"app-toa-do",41),t.NdJ("position",function(l){return o.getlocation(l)}),t.qZA()()(),t._UZ(131,"div",42)),2&e&&(t.xp6(3),t.Q6J("formGroup",o.main),t.xp6(7),t.Q6J("readOnly",!o.checkPer(7)),t.xp6(5),t.Q6J("readOnly",!o.checkPer(7)),t.xp6(5),t.Q6J("readOnly",o.readonly),t.xp6(5),t.Q6J("readOnly",o.readonly),t.xp6(5),t.Q6J("readOnly",o.readonly),t.xp6(5),t.Q6J("readOnly",o.readonly),t.xp6(5),t.Q6J("readOnly",o.readonly),t.xp6(5),t.Q6J("readOnly",o.readonly),t.xp6(5),t.Q6J("readOnly",o.readonly),t.xp6(6),t.Q6J("readOnly",o.readonly),t.xp6(5),t.Q6J("readOnly",o.readonly),t.xp6(5),t.Q6J("readOnly",o.readonly),t.xp6(5),t.Q6J("readOnly",o.readonly),t.xp6(5),t.Q6J("readOnly",o.readonly),t.xp6(5),t.Q6J("readOnly",o.readonly),t.xp6(5),t.Q6J("readOnly",o.readonly),t.xp6(5),t.Q6J("readOnly",o.readonly),t.xp6(5),t.Q6J("readOnly",o.readonly),t.xp6(5),t.Q6J("readOnly",o.readonly),t.xp6(1),t.Q6J("ngIf",o.SoDoHaThe),t.xp6(1),t.Q6J("ngIf",!o.readonly),t.xp6(1),t.Q6J("ngIf",o.lastEdit.length>0),t.xp6(2),t.Q6J("ngIf",o.checkPer(2)&&o.main.valid),t.xp6(1),t.Q6J("ngIf",o.checkPer(2)),t.xp6(3),t.Q6J("ngIf",o.checkPer(4)),t.xp6(1),t.Q6J("ngIf",o.checkPer(7)),t.xp6(1),t.Q6J("ngIf",o.checkPer(4)),t.xp6(16),t.Q6J("ngForOf",o.locations),t.xp6(3),t.Q6J("innerHTML",o.table,t.oJD))},directives:[_._Y,_.JL,_.sg,_.wV,_.Fj,_.JJ,_.u,u.O5,P,y.lW,H,Q.K,u.sg,w],pipes:[u.JJ],styles:[".example-card[_ngcontent-%COMP%]{max-width:400px}"]}),n})();function tt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td")(2,"a",5),t._uU(3),t.qZA()(),t.TgZ(4,"td")(5,"span",6),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw(2).copyInput(l.MaTram)}),t._uU(6),t.qZA()(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA()()}if(2&n){const e=i.$implicit;t.xp6(2),t.MGl("routerLink","tba/capnhat/",e.MaTram,""),t.xp6(1),t.Oqu(e.MaTram),t.xp6(2),t.s9C("id",e.MaTram),t.xp6(1),t.Oqu(e.MaPk),t.xp6(2),t.Oqu(e.TenTram),t.xp6(2),t.Oqu(e.CongSuat),t.xp6(2),t.Oqu(e.ViTri),t.xp6(2),t.hij("",e.IdmMccb,"A"),t.xp6(2),t.Oqu(e.Tuyen)}}function et(n,i){if(1&n&&(t.TgZ(0,"div",0)(1,"table",3)(2,"thead")(3,"tr")(4,"th"),t._uU(5,"M\xe3 tr\u1ea1m"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"M\xe3 PK"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"T\xean tr\u1ea1m"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"C\xf4ng su\u1ea5t"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"V\u1ecb tr\xed"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Idm MCCB"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Tuy\u1ebfn"),t.qZA(),t._UZ(18,"th"),t.qZA()(),t.TgZ(19,"tbody"),t.YNc(20,tt,17,9,"tr",4),t.qZA()()()),2&n){const e=t.oxw();t.xp6(20),t.Q6J("ngForOf",e.data)}}const ot=[{path:"",component:(()=>{class n{constructor(e,o){this.plus=e,this.fb=o,this.db=null,this.dbName="qlvh",this.api="tba",this.data=[],this.main=this.fb.group({PhaDauNoi:[],CongSuat:[],HieuMccb:[],IdmMccb:[],SoHuu:[]})}ngOnInit(){this.plus.IDB_InitDB(this.dbName).subscribe(e=>this.db=e)}submit(){this.plus.load();const e=this.plus.Obj_clean(this.main.value);console.log(e),this.plus.httpPost("tba/report",e).subscribe(o=>{this.plus.loaded();const a=this.plus.Crypt_DecryptRest(o);console.log(a),Array.isArray(a)?this.data=a:this.plus.alertToasrt(a)})}getHtml(e){console.log(e)}copyInput(e){return this.plus.copyInputMessage(e)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.T),t.Y36(_.qu))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-qlvh"]],decls:4,vars:1,consts:[[1,"container"],[1,"text-center","text-primary","my-3"],["class","container",4,"ngIf"],[1,"table","bordered","table-hover"],[4,"ngFor","ngForOf"],[3,"routerLink"],[3,"id","click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"h4",1),t._uU(2,"Th\u1ed1ng k\xea TBA "),t.qZA(),t.YNc(3,et,21,1,"div",2),t.qZA()),2&e&&(t.xp6(3),t.Q6J("ngIf",o.data.length>0))},directives:[u.O5,u.sg,m.yS],styles:[""]}),n})()},{path:"tba/them",component:U},{path:"tba/capnhat/:id",component:U},{path:"tba",component:B},{path:"tba/ton-tai",component:E}];let nt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[m.Bz.forChild(ot)],m.Bz]}),n})();var at=r(48387);let it=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[u.ez]]}),n})(),rt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[u.ez,_.u5,nt,_.UX,T.qX,at.D,s.u,it,c.m,Z.a,b.k,d.o]]}),n})()},85767:(A,f,r)=>{r.d(f,{u:()=>T});var d=r(69808),b=r(39181),Z=r(93075),c=r(5e3);let T=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=c.oAB({type:s}),s.\u0275inj=c.cJS({imports:[[d.ez,b.d,Z.u5,Z.UX]]}),s})()},48387:(A,f,r)=>{r.d(f,{D:()=>s});var d=r(51372),b=r(69808),Z=r(93075),c=r(5923),T=r(5e3);let s=(()=>{class u{}return u.\u0275fac=function(p){return new(p||u)},u.\u0275mod=T.oAB({type:u}),u.\u0275inj=T.cJS({imports:[[b.ez,Z.u5,d.qX,c.X]]}),u})()},41258:(A,f,r)=>{r.d(f,{K:()=>Z});var d=r(5e3),b=r(45230);let Z=(()=>{class c{constructor(s){this.plus=s,this.excel=new d.vpe,this.output=[],this.table=""}ngOnInit(){}parseExcel(s){let u=s.target.value.trim(),t=[],p=[];const m=u.split("\n");for(let h=0;h<m.length;h++)t[h]=m[h].split("\t");return t.forEach(h=>{let E={};h.forEach((C,y)=>{E[y]=C}),p.push(E)}),this.output=p,this.table=this.exportTbale(p),localStorage.setItem("parser",JSON.stringify(p)),this.excel.emit(p),p}parseExcel2(s){let u=s.target.value.trim(),t=[],p=[];const m=u.split("\n");for(let h=0;h<m.length;h++)t[h]=m[h].split("\t");return t.forEach(h=>{const x=t[0];let E={};h.forEach((C,y)=>{E[this.plus.generateKey(x[y])]=C}),p.push(E)}),this.output=p,this.table=this.exportTbale(p),localStorage.setItem("parser",JSON.stringify(p)),this.excel.emit(p),p}exportTbale(s){let u="<th>STT</th>",t="";for(let m in s[0])s[0].hasOwnProperty(m)&&(u+="<th>"+this.plus.generateKey(s[0][m])+"</th>");return s.forEach((m,h)=>{t+=`<tr><td>${h+1}</td>`;for(const x in m)m.hasOwnProperty(x)&&(t+="<td>"+m[x]+"</td>");t+="</tr>"}),`\n    <table class="table table-bordered table-hover ">\n      <thead>\n        <tr class="text-center">\n         ${u}\n        </tr>\n      <thead>\n      <tbody style = "border: 1px solid black;">\n         ${t}\n      <tbody>\n    <table>\n    `}reset(s){return s.target.value=""}save(){const s=JSON.stringify(this.output);localStorage.setItem("parser",s)}}return c.\u0275fac=function(s){return new(s||c)(d.Y36(b.T))},c.\u0275cmp=d.Xpm({type:c,selectors:[["app-parse-excel-clipboard"]],outputs:{excel:"excel"},decls:7,vars:0,consts:[[1,"container"],[1,"form-group"],[1,"text-center","text-white","p-3","my-3","bg-info","rounded-pill","justify-content-center"],["placeholder","D\xe1n n\u1ed9i dung v\xe0o \u0111\xe2y","rows","2",1,"form-control",3,"click","change"],["input1",""]],template:function(s,u){1&s&&(d.TgZ(0,"div",0)(1,"div",1)(2,"h5",2),d._uU(3,"Chuy\u1ec3n \u0111\u1ed5i d\u1eef li\u1ec7u t\u1eeb clipboard Excel"),d.qZA(),d.TgZ(4,"textarea",3,4),d.NdJ("click",function(p){return u.reset(p)})("change",function(p){return u.parseExcel(p)}),d._uU(6,"  "),d.qZA()()())},styles:[""]}),c})()},85913:(A,f,r)=>{r.d(f,{m:()=>T});var d=r(51372),b=r(93075),Z=r(69808),c=r(5e3);let T=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=c.oAB({type:s}),s.\u0275inj=c.cJS({imports:[[Z.ez,b.UX,d.qX]]}),s})()},89173:(A,f,r)=>{r.d(f,{o:()=>Z});var d=r(69808),b=r(5e3);let Z=(()=>{class c{}return c.\u0275fac=function(s){return new(s||c)},c.\u0275mod=b.oAB({type:c}),c.\u0275inj=b.cJS({imports:[[d.ez]]}),c})()}}]);