"use strict";(self.webpackChunk_4la=self.webpackChunk_4la||[]).push([[681],{16011:function(t,n,o){Object.defineProperty(n,"__esModule",{value:!0});var i=o(68273),e=o(32434);n.empty={closed:!0,next:function(t){},error:function(t){if(i.config.useDeprecatedSynchronousErrorHandling)throw t;e.hostReportError(t)},complete:function(){}}},67241:function(t,n,o){var i,e=this&&this.__extends||(i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])})(t,n)},function(t,n){function o(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)});Object.defineProperty(n,"__esModule",{value:!0});var a=o(67382),r=o(16011),s=o(43984),c=o(81476),u=o(68273),h=o(32434),l=function(t){function n(o,i,e){var a=t.call(this)||this;switch(a.syncErrorValue=null,a.syncErrorThrown=!1,a.syncErrorThrowable=!1,a.isStopped=!1,arguments.length){case 0:a.destination=r.empty;break;case 1:if(!o){a.destination=r.empty;break}if("object"==typeof o){o instanceof n?(a.syncErrorThrowable=o.syncErrorThrowable,a.destination=o,o.add(a)):(a.syncErrorThrowable=!0,a.destination=new g(a,o));break}default:a.syncErrorThrowable=!0,a.destination=new g(a,o,i,e)}return a}return e(n,t),n.prototype[c.rxSubscriber]=function(){return this},n.create=function(t,o,i){var e=new n(t,o,i);return e.syncErrorThrowable=!1,e},n.prototype.next=function(t){this.isStopped||this._next(t)},n.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},n.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},n.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},n.prototype._next=function(t){this.destination.next(t)},n.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},n.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},n.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},n}(s.Subscription);n.Subscriber=l;var g=function(t){function n(n,o,i,e){var s=t.call(this)||this;s._parentSubscriber=n;var c,u=s;return a.isFunction(o)?c=o:o&&(c=o.next,i=o.error,e=o.complete,o!==r.empty&&(u=Object.create(o),a.isFunction(u.unsubscribe)&&s.add(u.unsubscribe.bind(u)),u.unsubscribe=s.unsubscribe.bind(s))),s._context=u,s._next=c,s._error=i,s._complete=e,s}return e(n,t),n.prototype.next=function(t){if(!this.isStopped&&this._next){var n=this._parentSubscriber;u.config.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable?this.__tryOrSetError(n,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},n.prototype.error=function(t){if(!this.isStopped){var n=this._parentSubscriber,o=u.config.useDeprecatedSynchronousErrorHandling;if(this._error)o&&n.syncErrorThrowable?(this.__tryOrSetError(n,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(n.syncErrorThrowable)o?(n.syncErrorValue=t,n.syncErrorThrown=!0):h.hostReportError(t),this.unsubscribe();else{if(this.unsubscribe(),o)throw t;h.hostReportError(t)}}},n.prototype.complete=function(){var t=this;if(!this.isStopped){var n=this._parentSubscriber;if(this._complete){var o=function(){return t._complete.call(t._context)};u.config.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable?(this.__tryOrSetError(n,o),this.unsubscribe()):(this.__tryOrUnsub(o),this.unsubscribe())}else this.unsubscribe()}},n.prototype.__tryOrUnsub=function(t,n){try{t.call(this._context,n)}catch(o){if(this.unsubscribe(),u.config.useDeprecatedSynchronousErrorHandling)throw o;h.hostReportError(o)}},n.prototype.__tryOrSetError=function(t,n,o){if(!u.config.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{n.call(this._context,o)}catch(i){return u.config.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=i,t.syncErrorThrown=!0,!0):(h.hostReportError(i),!0)}return!1},n.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},n}(l);n.SafeSubscriber=g},43984:function(t,n,o){Object.defineProperty(n,"__esModule",{value:!0});var i=o(40993),e=o(54720),a=o(67382),r=o(18574),s=function(){function t(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var n;if(!this.closed){var o=this,s=o._parentOrParents,u=o._ctorUnsubscribe,h=o._unsubscribe,l=o._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,s instanceof t)s.remove(this);else if(null!==s)for(var g=0;g<s.length;++g)s[g].remove(this);if(a.isFunction(h)){u&&(this._unsubscribe=void 0);try{h.call(this)}catch(f){n=f instanceof r.UnsubscriptionError?c(f.errors):[f]}}if(i.isArray(l)){g=-1;for(var d=l.length;++g<d;){var p=l[g];if(e.isObject(p))try{p.unsubscribe()}catch(m){n=n||[],m instanceof r.UnsubscriptionError?n=n.concat(c(m.errors)):n.push(m)}}}if(n)throw new r.UnsubscriptionError(n)}},t.prototype.add=function(n){var o=n;if(!n)return t.EMPTY;switch(typeof n){case"function":o=new t(n);case"object":if(o===this||o.closed||"function"!=typeof o.unsubscribe)return o;if(this.closed)return o.unsubscribe(),o;if(!(o instanceof t)){var i=o;(o=new t)._subscriptions=[i]}break;default:throw new Error("unrecognized teardown "+n+" added to Subscription.")}var e=o._parentOrParents;if(null===e)o._parentOrParents=this;else if(e instanceof t){if(e===this)return o;o._parentOrParents=[e,this]}else{if(-1!==e.indexOf(this))return o;e.push(this)}var a=this._subscriptions;return null===a?this._subscriptions=[o]:a.push(o),o},t.prototype.remove=function(t){var n=this._subscriptions;if(n){var o=n.indexOf(t);-1!==o&&n.splice(o,1)}},t.EMPTY=((n=new t).closed=!0,n),t;var n}();function c(t){return t.reduce(function(t,n){return t.concat(n instanceof r.UnsubscriptionError?n.errors:n)},[])}n.Subscription=s},68273:function(t,n){Object.defineProperty(n,"__esModule",{value:!0});var o=!1;n.config={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){var n=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+n.stack)}else o&&console.log("RxJS: Back to a better error behavior. Thank you. <3");o=t},get useDeprecatedSynchronousErrorHandling(){return o}}},81476:function(t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.rxSubscriber="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),n.$$rxSubscriber=n.rxSubscriber},18574:function(t,n){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(t,n){return n+1+") "+t.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}();n.UnsubscriptionError=o},32434:function(t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.hostReportError=function(t){setTimeout(function(){throw t},0)}},40993:function(t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isArray=Array.isArray||function(t){return t&&"number"==typeof t.length}},67382:function(t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isFunction=function(t){return"function"==typeof t}},54720:function(t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isObject=function(t){return null!==t&&"object"==typeof t}},63956:function(t,n,o){o.r(n),o.d(n,{BanHangModule:function(){return on}});var i=o(83886),e=o(87841),a=o(11596),r=o(39609),s=o(48387),c=o(12057),u=o(16738),h=o.n(u),l=o(74788),g=o(88638),d=o(2895),p=o(18849),f=o(37472),m=o(16314);let Z=(()=>{class t{constructor(t){this.plus=t,this.db=null,this.title="B\xe1o c\xe1o b\xe1n h\xe0ng",this.dbName="ban-hang",this.items=[],this.DoanhThu=0,this.LoiNhuan=0,this.DoanhThuThang=[],this.LoiNhuanThang=[],this.BanChay=[],this.BanNgoiNhieu=[]}ngOnDestroy(){console.log("Destroy bao-cao"),this.plus.subs.unsubscribe()}ngOnInit(){this.plus.setTiTle(this.title),this.plus.IDB_InitDB(this.dbName).subscribe(t=>{this.plus.updateUserLocal(t,"an-uong"),this.db=t,this.plus.updateAPi.subscribe(t=>{this.getNhanDon()})})}getNhanDon(){this.plus.subs.add(this.plus.IDB_DB_GetAll(this.db,"an-uong").subscribe(t=>{null==t&&(t=[]),this.items=t,this.doanhThuNgay(1)}))}doanhThuNgay(t){const n=this.items,o=Date.now()-24*t*60*60*1e3,i=[];let e=[],a=[];for(let c=0;c<n.length;c++)if(n[c].dateModify>o&&n[c].LoiNhuan>0&&1==n[c].DaThanhToan){const t={LoiNhuan:1e3*n[c].LoiNhuan,ThanhTien:n[c].ThanhTien,Ngay:h()(n[c].dateModify).format("DD/MM")};i.push(t),n[c].DonMua.forEach(t=>{e.push({TenHangHoa:t.TenHangHoa,TongCong:t.TongCong})}),a.push({TenBan:n[c].TenBan,SoKH:n[c].SoKH})}this.DoanhThuThang=this.plus.generateChart(i,"Ngay","ThanhTien"),this.LoiNhuanThang=this.plus.generateChart(i,"Ngay","LoiNhuan"),this.DoanhThu=this.plus.sumByKey(i,"ThanhTien"),this.LoiNhuan=this.plus.sumByKey(i,"LoiNhuan");const r=this.plus.sortArr(e,"TongCong"),s=this.plus.generateChart(r,"TenHangHoa","TongCong");this.BanChay=this.plus.generateChart(s.slice(0,5),"x","y"),this.BanNgoiNhieu=this.plus.generateChart(a,"TenBan","SoKH")}}return t.\u0275fac=function(n){return new(n||t)(l.Y36(g.T))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-bao-cao"]],decls:37,vars:24,consts:[[1,"container"],[1,"tit"],[1,"row","text-center"],["mat-raised-button","","color","warn"],[1,"row"],[3,"day"],[1,"row","my-3"],[1,"col-md-6"],[3,"id","arr","type"],[1,"col-md-4"],[1,"col-md-8"]],template:function(t,n){1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"h5",1),l._uU(2,"B\xc1O C\xc1O B\xc1N H\xc0NG"),l.qZA(),l.TgZ(3,"div",2),l.TgZ(4,"button",3),l._uU(5),l.ALo(6,"commas"),l.qZA(),l.TgZ(7,"button",3),l._uU(8),l.ALo(9,"commas"),l.qZA(),l.qZA(),l.TgZ(10,"div",4),l.TgZ(11,"app-chip",5),l.NdJ("day",function(t){return n.doanhThuNgay(t)}),l.qZA(),l.qZA(),l.TgZ(12,"div",6),l.TgZ(13,"div",7),l.TgZ(14,"h6",1),l._uU(15,"B\u1ea3ng Doanh thu"),l.qZA(),l._UZ(16,"app-chart",8),l.qZA(),l.TgZ(17,"div",7),l.TgZ(18,"h6",1),l._uU(19,"B\u1ea3ng L\u1ee3i nhu\u1eadn"),l.qZA(),l._UZ(20,"app-chart",8),l.qZA(),l.qZA(),l._UZ(21,"hr"),l.TgZ(22,"h6",1),l._uU(23,"Top b\xe1n ch\u1ea1y"),l.qZA(),l.TgZ(24,"div",6),l.TgZ(25,"div",9),l._UZ(26,"app-chart",8),l.qZA(),l.TgZ(27,"div",10),l._UZ(28,"app-chart",8),l.qZA(),l.qZA(),l._UZ(29,"hr"),l.TgZ(30,"h6",1),l._uU(31,"Top B\xe0n kh\xe1ch ch\u1ecdn"),l.qZA(),l.TgZ(32,"div",6),l.TgZ(33,"div",9),l._UZ(34,"app-chart",8),l.qZA(),l.TgZ(35,"div",10),l._UZ(36,"app-chart",8),l.qZA(),l.qZA(),l.qZA()),2&t&&(l.xp6(5),l.hij(" Doanh thu: ",l.lcZ(6,20,n.DoanhThu),""),l.xp6(3),l.hij(" L\u1ee3i nhu\u1eadn: ",l.lcZ(9,22,n.LoiNhuan),""),l.xp6(8),l.Q6J("id","doanhthuthang")("arr",n.DoanhThuThang)("type","line"),l.xp6(4),l.Q6J("id","LoinhuanThan")("arr",n.LoiNhuanThang)("type","bar"),l.xp6(6),l.Q6J("id","BanChay")("arr",n.BanChay)("type","doughnut"),l.xp6(2),l.Q6J("id","BanChayBar")("arr",n.BanChay)("type","bar"),l.xp6(6),l.Q6J("id","BanNgoiNhieu")("arr",n.BanNgoiNhieu)("type","doughnut"),l.xp6(2),l.Q6J("id","BanNgoiNhieuBar")("arr",n.BanNgoiNhieu)("type","bar"))},directives:[d.lW,p.Y,f.x],pipes:[m.W],styles:["mat-chip[_ngcontent-%COMP%]{max-width:200px}"]}),t})();var T=o(28831),b=o(24751),A=o(49356);function x(t,n){1&t&&(l.TgZ(0,"h4",4),l._uU(1,"\u0110\xe3 ho\xe0n th\xe0nh "),l.qZA())}function _(t,n){if(1&t){const t=l.EpF();l.TgZ(0,"button",15),l.NdJ("click",function(){l.CHM(t);const n=l.oxw().index,o=l.oxw().$implicit;return l.oxw().onComplete(o,n)}),l.TgZ(1,"mat-icon"),l._uU(2,"done"),l.qZA(),l.qZA()}}function q(t,n){if(1&t&&(l.TgZ(0,"div",9),l.TgZ(1,"b",10),l._uU(2),l.TgZ(3,"b",11),l._uU(4),l.qZA(),l.qZA(),l.TgZ(5,"i",12),l._uU(6),l.qZA(),l._UZ(7,"br"),l.TgZ(8,"i",13),l._uU(9),l.ALo(10,"fromNow"),l.qZA(),l.YNc(11,_,3,0,"button",14),l.qZA()),2&t){const t=n.$implicit,o=l.oxw(2);l.Q6J("@slideIn",void 0),l.xp6(2),l.hij("",t.TenHangHoa,": "),l.xp6(2),l.AsE(" ",t.TongCong," ",t.DVT," "),l.xp6(2),l.Oqu(t.GhiChu),l.xp6(3),l.Oqu(l.lcZ(10,7,t.GioVao)),l.xp6(2),l.Q6J("ngIf",o.checkPer(2)&&0==t.DaLam)}}function y(t,n){if(1&t){const t=l.EpF();l.TgZ(0,"div"),l.TgZ(1,"div",5),l.TgZ(2,"h4",6),l._uU(3),l.qZA(),l.YNc(4,q,12,9,"div",7),l.TgZ(5,"button",8),l.NdJ("click",function(){const n=l.CHM(t).$implicit;return l.oxw().onCompleteAll(n)}),l.TgZ(6,"mat-icon"),l._uU(7,"done_all"),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&t){const t=n.$implicit;l.xp6(3),l.Oqu(t.TenBan),l.xp6(1),l.Q6J("ngForOf",t.DonMua)}}let D=(()=>{class t{constructor(t,n){this.plus=t,this.fb=n,this.dbName="ban-hang",this.db=null,this.api="an-uong",this.items=[],this.tittle="Pha ch\u1ebf",this.DonMua=[],this.groups=[],this.main=this.fb.group({_id:[,[]],idHangHoa:[,[b.kI.required]],TrangThai:[0,[b.kI.required]]})}ngOnDestroy(){this.plus.subs.unsubscribe(),console.log("Destroy pha-che")}ngOnInit(){this.plus.setTiTle(this.tittle),this.plus.IDB_InitDB(this.dbName).subscribe(t=>{this.db=t,this.plus.updateUserLocal(t,this.api),this.plus.updateAPi.subscribe(n=>{this.getIDB(t)})})}getIDB(t){this.groups=[],this.plus.IDB_DB_GetAll(t,this.api).subscribe(t=>{let n=[];for(let o=0;o<t.length;o++)if(0==t[o].DaThanhToan){const i=t[o].DonMua.filter(t=>(0==t.DaLam&&(this.addNewItem(t),this.groups.push(t),this.plus.notify_send("C\xf3 kh\xe1ch v\xe0o!"),this.plus.playUpdate()),0==t.DaLam));i.length>0&&(t[o].DonMua=i,n.push(t[o]))}this.items=n,console.log(this.groups),this.groupItems()})}groupItems(){const t=this.plus.obj_GroupByKey(this.groups,"TenHangHoa");console.log(t)}addNewItem(t){const n=this.DonMua.find(n=>n._id==t._id);if(window.navigator.vibrate(200),n){const o=this.DonMua.findIndex(t=>t._id==n._id);this.DonMua[o].TongCong+=t.TongCong}else t.TongCong=1,t.GioVao=Date.now(),t.DaLam=!1,this.DonMua.push(t)}onComplete(t,n){console.log(t,n);const o=t;delete o.__v,o.DonMua[n].DaLam=!0,console.log(o),this.plus.httpPut(this.api,o).subscribe(t=>{console.log(t),this.getIDB(this.db)})}onCompleteAll(t){const n=t;delete n.__v;for(let o=0;o<n.DonMua.length;o++)n.DonMua[o].DaLam=!0;console.log(n),this.plus.httpPut(this.api,n).subscribe(t=>{console.log(t),this.plus.IDB_DB_Add(this.db,this.api,n),this.getIDB(this.db)})}reload(){this.plus.reload("ban-hang/pha-che")}checkPer(t){return this.plus.checkPer(this.api,t)}}return t.\u0275fac=function(n){return new(n||t)(l.Y36(g.T),l.Y36(b.qu))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-pha-che"]],decls:4,vars:2,consts:[[1,"container"],["class","text-center text-primary",4,"ngIf"],[1,"card-group"],[4,"ngFor","ngForOf"],[1,"text-center","text-primary"],[1,"card","text-center","mx-3","mb-3"],[1,"card-title","bg-success"],["class","card-body text-left",4,"ngFor","ngForOf"],["mat-raised-button","","color","accent",3,"click"],[1,"card-body","text-left"],[1,"font-blue"],[1,"text-danger","mx-3"],[1,"font-red","font-note"],[1,"mx-3"],["hidden","","mat-raised-button","","color","accent",3,"click",4,"ngIf"],["hidden","","mat-raised-button","","color","accent",3,"click"]],template:function(t,n){1&t&&(l.TgZ(0,"div",0),l.YNc(1,x,2,0,"h4",1),l.TgZ(2,"div",2),l.YNc(3,y,8,2,"div",3),l.qZA(),l.qZA()),2&t&&(l.xp6(1),l.Q6J("ngIf",0==n.items.length),l.xp6(2),l.Q6J("ngForOf",n.items))},directives:[c.O5,c.sg,d.lW,A.Hw],pipes:[m.dw],styles:[".card[_ngcontent-%COMP%]{border-radius:1rem}.card-title[_ngcontent-%COMP%]{border-radius:1rem}"],data:{animation:[T.Ym]}}),t})();var v=o(1156),C=o(33982),B=o(23202),w=o(40859),M=o(48743),N=o(46833),U=o(46113);function I(t,n){if(1&t&&(l.TgZ(0,"button",32),l._uU(1),l.qZA()),2&t){const t=l.oxw();l.xp6(1),l.hij("B\xe0n hi\u1ec7n t\u1ea1i: ",t.BanDuocChon.TenBan,"")}}function H(t,n){if(1&t){const t=l.EpF();l.TgZ(0,"div"),l.TgZ(1,"button",33),l.NdJ("click",function(){return l.CHM(t),l.oxw().LuuTam()}),l._uU(2),l.qZA(),l.TgZ(3,"button",33),l.NdJ("click",function(){return l.CHM(t),l.oxw().LuuCho()}),l._uU(4,"L\u01b0u"),l.qZA(),l.TgZ(5,"button",34),l.NdJ("click",function(){return l.CHM(t),l.oxw().thanhToan()}),l._uU(6),l.ALo(7,"commas"),l.qZA(),l.qZA()}if(2&t){const t=l.oxw();l.xp6(2),l.Oqu(t.xemMon?"Th\xeam ghi ch\xfa":"Ch\u1ecdn th\xeam m\xf3n"),l.xp6(4),l.AsE("",t.total," m\xf3n: ",l.lcZ(7,3,t.ThanhTien),"")}}function k(t,n){if(1&t){const t=l.EpF();l.TgZ(0,"mat-chip",40),l.NdJ("click",function(){const n=l.CHM(t).index;return l.oxw(2).chonBan(n)}),l._uU(1),l.qZA()}if(2&t){const t=n.$implicit;l.xp6(1),l.hij("Khu ",t.NoiDung,"")}}function O(t,n){if(1&t&&(l.TgZ(0,"button",50),l._uU(1),l.ALo(2,"commas"),l.qZA()),2&t){const t=l.oxw(2).$implicit;l.xp6(1),l.Oqu(l.lcZ(2,1,t.ThanhTien))}}function J(t,n){if(1&t&&(l.TgZ(0,"span",51),l._uU(1),l.ALo(2,"fromNow"),l.qZA()),2&t){const t=l.oxw(2).$implicit;l.xp6(1),l.hij(" ",l.lcZ(2,1,t.GioVao),"")}}const P=function(t){return{"border border-danger":t}};function L(t,n){if(1&t){const t=l.EpF();l.TgZ(0,"div",45),l.NdJ("click",function(){l.CHM(t);const n=l.oxw().index;return l.oxw(3).chonBan(n)}),l.TgZ(1,"h4",46),l._uU(2),l.qZA(),l.YNc(3,O,3,3,"button",47),l.YNc(4,J,3,3,"span",48),l._UZ(5,"div",49),l.qZA()}if(2&t){const t=l.oxw().$implicit;l.Q6J("ngClass",l.VKq(4,P,t.ThanhTien>0)),l.xp6(2),l.Oqu(t.TenBan),l.xp6(1),l.Q6J("ngIf",t.ThanhTien>0),l.xp6(1),l.Q6J("ngIf",t.GioVao>0)}}function S(t,n){if(1&t&&(l.TgZ(0,"div",43),l.YNc(1,L,6,6,"div",44),l.qZA()),2&t){const t=n.$implicit,o=l.oxw().$implicit;l.xp6(1),l.Q6J("ngIf",t.NhomBan==o.NoiDung)}}function E(t,n){if(1&t&&(l.TgZ(0,"mat-tab",41),l.TgZ(1,"div",27),l.YNc(2,S,2,1,"div",42),l.qZA(),l.qZA()),2&t){const t=n.$implicit,o=l.oxw(2);l.s9C("label",t.NoiDung),l.xp6(2),l.Q6J("ngForOf",o.ChiaBan)}}function F(t,n){if(1&t&&(l.TgZ(0,"div",35),l.TgZ(1,"div",36),l.TgZ(2,"mat-chip-list"),l.YNc(3,k,2,1,"mat-chip",37),l.qZA(),l.qZA(),l.TgZ(4,"mat-tab-group",38),l.YNc(5,E,3,2,"mat-tab",39),l.qZA(),l.qZA()),2&t){const t=l.oxw();l.xp6(3),l.Q6J("ngForOf",t.TabBan),l.xp6(1),l.Q6J("@slideIn",void 0),l.xp6(1),l.Q6J("ngForOf",t.TabBan)}}function G(t,n){if(1&t){const t=l.EpF();l.TgZ(0,"div",40),l.NdJ("click",function(){const n=l.CHM(t).$implicit;return l.oxw(4).addNewItem(n)}),l.TgZ(1,"div",56),l.TgZ(2,"h4",57),l._uU(3),l.qZA(),l.qZA(),l.qZA()}if(2&t){const t=n.$implicit;l.xp6(1),l.Udp("border-bottom-color",t.HinhAnh),l.xp6(2),l.hij("",t.TenHangHoa," ")}}function Q(t,n){if(1&t&&(l.TgZ(0,"mat-tab",41),l.TgZ(1,"div",55),l.YNc(2,G,4,3,"div",37),l.ALo(3,"filterByKV"),l.qZA(),l.qZA()),2&t){const t=n.$implicit,o=l.oxw(3);l.s9C("label",t.NoiDung),l.xp6(1),l.Q6J("@slideX",void 0),l.xp6(1),l.Q6J("ngForOf",l.Dn7(3,3,o.items,"NhomHang",t.NoiDung))}}function Y(t,n){if(1&t&&(l.TgZ(0,"div",54),l.TgZ(1,"mat-tab-group",38),l.YNc(2,Q,4,7,"mat-tab",39),l.qZA(),l.qZA()),2&t){const t=l.oxw(2);l.xp6(1),l.Q6J("@slideIn",void 0),l.xp6(1),l.Q6J("ngForOf",t.NhomHang)}}function V(t,n){if(1&t){const t=l.EpF();l.TgZ(0,"span",67),l.NdJ("click",function(){l.CHM(t);const n=l.oxw().index;return l.oxw(3).delItem(n)}),l._UZ(1,"i",68),l.qZA()}}function j(t,n){if(1&t&&(l.TgZ(0,"i",69),l._uU(1),l.qZA()),2&t){const t=l.oxw().$implicit;l.xp6(1),l.Oqu(t.GhiChu.length>30?t.GhiChu.slice(0,25)+"...":t.GhiChu)}}function K(t,n){if(1&t){const t=l.EpF();l.TgZ(0,"i",70),l.NdJ("click",function(){l.CHM(t);const n=l.oxw().index;return l.oxw(3).openModal(n)}),l.qZA()}}function $(t,n){if(1&t){const t=l.EpF();l.TgZ(0,"mat-icon",71),l.NdJ("click",function(){l.CHM(t);const n=l.oxw().index;return l.oxw(3).removeItem(n)}),l._uU(1,"arrow_left"),l.qZA()}}function R(t,n){if(1&t){const t=l.EpF();l.TgZ(0,"mat-icon",72),l.NdJ("click",function(){l.CHM(t);const n=l.oxw(),o=n.$implicit,i=n.index;return l.oxw(3).addItem(o,i)}),l._uU(1,"arrow_right"),l.qZA()}}function z(t,n){if(1&t&&(l.TgZ(0,"tr"),l.TgZ(1,"td"),l._uU(2),l.YNc(3,V,2,0,"span",60),l.qZA(),l.TgZ(4,"td"),l.TgZ(5,"b",61),l._uU(6),l.qZA(),l._UZ(7,"br"),l._uU(8),l.ALo(9,"commas"),l.YNc(10,j,2,1,"i",62),l.YNc(11,K,1,0,"i",63),l.qZA(),l.TgZ(12,"td"),l.TgZ(13,"mat-form-field"),l.YNc(14,$,2,0,"mat-icon",64),l._UZ(15,"input",65),l.ALo(16,"number"),l.YNc(17,R,2,0,"mat-icon",66),l.qZA(),l.qZA(),l.TgZ(18,"td"),l._uU(19),l.ALo(20,"commas"),l.qZA(),l.qZA()),2&t){const t=n.$implicit,o=n.index;l.xp6(2),l.hij("",o+1," "),l.xp6(1),l.Q6J("ngIf",0==t.DaLam),l.xp6(3),l.hij(" ",t.TenHangHoa,""),l.xp6(2),l.AsE(" ",l.lcZ(9,11,1e3*t.GiaBan)," ",t.KhuyenMai>0?"(Gi\u1ea3m "+t.KhuyenMai+"%)":""," "),l.xp6(2),l.Q6J("ngIf",0==t.DaLam),l.xp6(1),l.Q6J("ngIf",0==t.DaLam),l.xp6(3),l.Q6J("ngIf",0==t.DaLam),l.xp6(1),l.s9C("value",l.lcZ(16,13,t.TongCong)),l.xp6(2),l.Q6J("ngIf",0==t.DaLam),l.xp6(2),l.Oqu(l.lcZ(20,15,t.TongCong*(t.GiaBan-t.GiaBan*t.KhuyenMai/100)*1e3))}}function W(t,n){if(1&t){const t=l.EpF();l.TgZ(0,"div",1),l.TgZ(1,"table",58),l.TgZ(2,"thead",18),l.TgZ(3,"tr"),l.TgZ(4,"th"),l._uU(5,"TT "),l.qZA(),l.TgZ(6,"th"),l._uU(7,"H\u1ea1ng m\u1ee5c"),l.qZA(),l.TgZ(8,"th"),l._uU(9,"S\u1ed1 l\u01b0\u1ee3ng"),l.qZA(),l.TgZ(10,"th"),l._uU(11,"Th\xe0nh ti\u1ec1n"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(12,"tbody"),l.YNc(13,z,21,17,"tr",28),l.TgZ(14,"tr",35),l.TgZ(15,"td",59),l.TgZ(16,"h5"),l._uU(17),l.ALo(18,"commas"),l.qZA(),l.TgZ(19,"h6"),l.TgZ(20,"i"),l._uU(21),l.ALo(22,"titlecase"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(23,"td"),l.TgZ(24,"button",34),l.NdJ("click",function(){return l.CHM(t),l.oxw(2).thanhToan()}),l._uU(25),l.ALo(26,"commas"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&t){const t=l.oxw(2);l.xp6(13),l.Q6J("ngForOf",t.BanDuocChon.DonMua),l.xp6(4),l.AsE("T\u1ed5ng c\u1ed9ng: ",l.lcZ(18,5,t.ThanhTien)," / ",t.total," m\xf3n"),l.xp6(4),l.Oqu(l.lcZ(22,7,t.bangchu)),l.xp6(4),l.hij("Thanh to\xe1n ",l.lcZ(26,9,t.ThanhTien),"")}}function X(t,n){if(1&t&&(l.TgZ(0,"div",36),l.YNc(1,Y,3,2,"div",52),l.YNc(2,W,27,11,"div",53),l.qZA()),2&t){const t=l.oxw();l.xp6(1),l.Q6J("ngIf",t.xemMon),l.xp6(1),l.Q6J("ngIf",!t.xemMon)}}function tt(t,n){if(1&t&&(l.TgZ(0,"tr"),l.TgZ(1,"td"),l._uU(2),l.qZA(),l.TgZ(3,"td"),l._uU(4),l._UZ(5,"br"),l._uU(6),l.ALo(7,"commas"),l.qZA(),l.TgZ(8,"td",35),l._uU(9),l.qZA(),l.TgZ(10,"td",75),l._uU(11),l.ALo(12,"commas"),l.qZA(),l.qZA()),2&t){const t=n.$implicit,o=n.index;l.xp6(2),l.hij("",o+1," "),l.xp6(2),l.hij(" ",t.TenHangHoa," "),l.xp6(2),l.AsE(" ",l.lcZ(7,6,1e3*t.GiaBan)," ",t.KhuyenMai>0?"(Gi\u1ea3m "+t.KhuyenMai+"%)":""," "),l.xp6(3),l.Oqu(t.TongCong),l.xp6(2),l.Oqu(l.lcZ(12,8,t.TongCong*(t.GiaBan-t.GiaBan*t.KhuyenMai/100)*1e3))}}function nt(t,n){if(1&t&&(l.TgZ(0,"tbody"),l.YNc(1,tt,13,10,"tr",28),l.TgZ(2,"tr"),l.TgZ(3,"td",73),l.TgZ(4,"h5"),l._uU(5,"T\u1ed5ng c\u1ed9ng:"),l.qZA(),l.qZA(),l.TgZ(6,"td"),l.TgZ(7,"h5"),l._uU(8),l.qZA(),l.qZA(),l.TgZ(9,"td",35),l.TgZ(10,"h5"),l._uU(11),l.ALo(12,"commas"),l.qZA(),l.TgZ(13,"h6"),l.TgZ(14,"i"),l._uU(15),l.ALo(16,"titlecase"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(17,"td",74),l.TgZ(18,"h6"),l._uU(19,"Xin c\u1ea3m \u01a1n qu\xfd kh\xe1ch"),l.qZA(),l.TgZ(20,"h6"),l._uU(21,"S\u1ea3n ph\u1ea9m c\u1ee7a 4la.vn"),l.qZA(),l.qZA(),l.qZA()),2&t){const t=l.oxw();l.xp6(1),l.Q6J("ngForOf",t.BanDuocChon.DonMua),l.xp6(7),l.hij("",t.total," m\xf3n"),l.xp6(3),l.hij(" ",l.lcZ(12,4,t.ThanhTien),""),l.xp6(4),l.Oqu(l.lcZ(16,6,t.bangchu))}}function ot(t,n){if(1&t){const t=l.EpF();l.TgZ(0,"div"),l.TgZ(1,"span",76),l.NdJ("click",function(){const n=l.CHM(t).$implicit;return l.oxw().note.push(n.NoiDung)}),l._uU(2),l.qZA(),l.qZA()}if(2&t){const t=n.$implicit;l.xp6(2),l.Oqu(t.NoiDung)}}function it(t,n){if(1&t){const t=l.EpF();l.TgZ(0,"div"),l.TgZ(1,"span",77),l.NdJ("click",function(){const n=l.CHM(t).$implicit;return l.oxw().note.push(n.NoiDung)}),l._uU(2),l.qZA(),l.qZA()}if(2&t){const t=n.$implicit;l.xp6(2),l.Oqu(t.NoiDung)}}let et=(()=>{class t{constructor(t,n,o){this.plus=t,this.route=n,this.fb=o,this.db=null,this.title="H\xe0ng h\xf3a",this.dbName="ban-hang",this.api="an-uong",this.tabs=[],this.items=[],this.DonMua=[],this.total=0,this.ThanhTien=0,this.donHang=[],this.bangchu="",this.filter=[],this.note=[],this.user=this.plus.user.getValue(),this.printTime=Date.now(),this.NhomHang=this.plus.user.getValue().NhomHang,this.TabBan=this.plus.sortArr(this.plus.user.getValue().NhomBan,"ThuTu",1),this.ChiaBan=[],this.ban=0,this.now=Date.now(),this.xemBan=!0,this.xemMon=!1,this.donHangFB=this.fb.group({TenBan:[,[b.kI.required]],NhomBan:[,[b.kI.required]],ThanhTien:[,[b.kI.required]],LoiNhuan:[,[b.kI.required]],SoKH:[,[b.kI.required]],GioVao:[,[b.kI.required]],DaThanhToan:[,[b.kI.required]],DonMua:this.fb.array([this.fb.group({idHangHoa:[,[b.kI.required]],DVT:[,[b.kI.required]],GiaBan:[,[b.kI.required]],GiaVon:[,[b.kI.required]],KhuyenMai:[,[b.kI.required]],TenHangHoa:[,[b.kI.required]],TongCong:[,[b.kI.required]],DaLam:[,[]],GioVao:[,[b.kI.required]],GhiChu:[]})])})}ngOnDestroy(){if(console.log("Destroy an-uong"),this.note.length>0&&confirm("B\u1ea1n c\xf3 mu\u1ed1n l\u01b0u ghi ch\xfa?"))return this.LuuCho();this.plus.subs.unsubscribe()}ngOnInit(){this.chiaBan(),this.plus.setTiTle(this.title),this.plus.IDB_InitDB(this.dbName).subscribe(t=>{this.db=t,this.getHangHoa(),this.plus.updateUserLocal(t,this.api),this.getDonHangLocal(),this.plus.updateAPi.subscribe(t=>{t&&(console.log("updateAPi",t),this.chiaBan(),this.getDonHangLocal())})}),this.DonMua=[]}thanhToan(){const t=confirm("B\u1ea1n c\xf3 mu\u1ed1n in h\xf3a \u0111\u01a1n ko?"),n=this.BanDuocChon;if(delete n.__v,n.DaThanhToan=!0,0==n.ThanhTien&&(this.BanDuocChon=Object.assign(this.BanDuocChon,{DonMua:this.DonMua.map(t=>({idHangHoa:t._id,TenHangHoa:t.TenHangHoa,GiaBan:t.GiaBan,GiaVon:t.GiaVon,KhuyenMai:t.KhuyenMai,DVT:t.DVT,TongCong:t.TongCong,DaLam:t.DaLam})),LoiNhuan:this.DonMua.map(t=>t.GiaBan-t.GiaVon-t.GiaBan*t.KhuyenMai/100).reduce((t,n)=>t+n),ThanhTien:this.ThanhTien,GioVao:Date.now(),SoKH:this.total,DaThanhToan:!0}),this.donHangFB.patchValue(this.BanDuocChon),this.donHangFB.invalid)){const t=this.plus.getErrValidateForm(this.donHangFB);console.log(t)}void 0!==n._id?(delete n.__v,this.plus.httpPut("an-uong",n).subscribe(t=>{const o=this.plus.Crypt_DecryptRest(t);console.log(o),this.plus.IDB_DB_Add(this.db,this.api,n),this.plus.FBS_PostByUser("hang-hoa",o.dateModify).then(()=>{this.back()})})):this.plus.httpPost("an-uong",n).subscribe(t=>{this.back()}),t?(this.PrintDiv("HoaDon"),console.log(0,n)):console.log(1,n)}getDonHangLocal(){this.plus.subs.add(this.plus.IDB_DB_GetAll(this.db,this.api,"TenBan",1).pipe((0,v.map)(t=>t?t.filter(t=>0==t.DaThanhToan):[])).subscribe(t=>{null==t&&(t=[]),this.donHang=t,this.ChiaBan=t.concat(this.ChiaBan.filter(({TenBan:n})=>!t.find(t=>t.TenBan==n))),this.ChiaBan=this.plus.sortArr(this.ChiaBan,"TenBan",1)}))}LuuTam(){this.xemMon=!this.xemMon,this.ChiaBan[this.ban]=Object.assign(this.ChiaBan[this.ban],{DonMua:this.DonMua.map(t=>({idHangHoa:t._id,TenHangHoa:t.TenHangHoa,GiaBan:t.GiaBan,GiaVon:t.GiaVon,KhuyenMai:t.KhuyenMai,DVT:t.DVT,TongCong:t.TongCong,DaLam:t.DaLam,GioVao:t.GioVao,GhiChu:t.GhiChu})),LoiNhuan:this.DonMua.map(t=>t.GiaBan-t.GiaVon-t.GiaBan*t.KhuyenMai/100).reduce((t,n)=>t+n),ThanhTien:this.ThanhTien,GioVao:Date.now(),SoKH:this.total,DaThanhToan:!1})}LuuCho(){this.LuuTam(),this.xemMon=!1,this.xemBan=!0,this.total=0,this.DonMua=[];const t=this.ChiaBan[this.ban];if(this.donHangFB.patchValue(t),this.donHangFB.valid)console.log(t._id),void 0!==t._id?(delete t.__v,this.plus.httpPut("an-uong",t).subscribe(t=>{console.log(t)})):this.plus.httpPost("an-uong",t).subscribe(t=>{console.log(t)});else{const t=this.plus.getErrValidateForm(this.donHangFB);console.log(t)}}chiaBan(){this.plus.load(),this.ChiaBan=[],this.TabBan.forEach(t=>{this.ChiaBan.push({TenBan:t.NoiDung+"- Mang v\u1ec1",NhomBan:t.NoiDung,DonMua:[],ThanhTien:0,GioVao:0,SoKH:0,DaThanhToan:!1});for(let n=1;n<t.SoLuong+1;n++)this.ChiaBan.push({TenBan:t.NoiDung+"-"+n,NhomBan:t.NoiDung,DonMua:[],ThanhTien:0,GioVao:0,SoKH:0,DaThanhToan:!1})}),this.plus.loaded()}chonBan(t){this.BanDuocChon=this.ChiaBan[t],console.log(this.BanDuocChon),this.bangchu=this.plus.numToVi(this.BanDuocChon.ThanhTien),this.xemBan=!1,this.ban=t;const n=this.ChiaBan[t];console.log(n),n.ThanhTien>0?(this.DonMua=n.DonMua,this.xemMon=!1):this.xemMon=!0,this.getTongCong()}getHangHoa(){this.plus.subs.add(this.plus.IDB_DB_GetAll(this.db,"hang-hoa").subscribe(t=>{try{this.items=t}catch(n){this.items=[],this.plus.alertWarning("B\u1ea1n ch\u01b0a c\xf3 h\xe0ng h\xf3a trong kho!!!")}0==t.length&&this.plus.alertWarning("B\u1ea1n ch\u01b0a c\xf3 h\xe0ng h\xf3a trong kho!"),console.log("getHangHoa: "+t.length)}))}addNewItem(t){const n=this.DonMua.find(n=>n._id==t._id);if(window.navigator.vibrate(100),!n)return t.TongCong=1,t.GioVao=Date.now(),t.DaLam=!1,t.GhiChu=this.note.join(" "),this.DonMua.push(t),this.getTongCong();{const t=this.DonMua.findIndex(t=>t._id==n._id);this.DonMua[t].TongCong+=1}this.getTongCong()}removeItem(t){this.BanDuocChon.DonMua[t].TongCong>0&&(this.BanDuocChon.DonMua[t].TongCong-=1),this.getTongCong()}addItem(t,n){this.BanDuocChon.DonMua[n].TongCong+=1,this.getTongCong()}delItem(t){this.BanDuocChon.DonMua.splice(t,1),this.getTongCong()}getTongCong(){this.total=this.plus.sumByKey(this.DonMua,"TongCong"),this.getThanhTien()}getThanhTien(){let t=0;return this.DonMua.forEach(n=>{t+=(n.GiaBan-n.GiaBan*n.KhuyenMai/100)*n.TongCong*1e3}),this.ThanhTien=t}openModal(t){this.plus.clickBtn("ghichubtn"),this.indexDonMua=t}addNote(){this.BanDuocChon.DonMua[this.indexDonMua].GhiChu=this.note.join(", "),this.note=[]}updateList(t,n,o){const i=+o.target.textContent;if(console.log(i),"Enter"===o.key&&o.preventDefault(),"number"!=typeof i)return this.plus.alertError("Sai \u0111\u1ecbnh d\u1ea1ng"),this.DonMua[t][n]=0;this.DonMua[t][n]=+i,this.getTongCong()}PrintDiv(t){let n=window.document.getElementById(t);var o=window.open("","PRINT");o.document.write(document.documentElement.innerHTML),setTimeout(()=>{o.document.body.innerHTML=n.outerHTML,o.document.close(),o.focus(),o.print(),o.close()},1e3)}back(){this.plus.reload("ban-hang/an-uong")}}return t.\u0275fac=function(n){return new(n||t)(l.Y36(g.T),l.Y36(C.gz),l.Y36(b.qu))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-an-uong"]],decls:65,vars:18,consts:[[1,"row","text-center"],[1,"col"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","warn","class","float-rigth",4,"ngIf"],[4,"ngIf"],["class","text-center",4,"ngIf"],["class","row",4,"ngIf"],["id","modelId","tabindex","-1","role","dialog","aria-labelledby","modelTitleId","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body","hoadon"],["id","HoaDon",1,"div"],[1,"text-left"],[1,"table","table-hover"],[1,"thead-inverse"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],["type","button",1,"btn","btn-primary"],["id","ghichubtn","mat-raised-button","","color","accent","data-toggle","modal","data-target","#notes",1,"d-none"],["id","notes","tabindex","-1","role","dialog","aria-labelledby","modelTitleId","aria-hidden","true",1,"modal","fade"],["notes",""],["role","document",1,"modal-dialog","modal-sm"],[1,"modal-body"],[1,"card-group"],[4,"ngFor","ngForOf"],["type","text","placeholder","Ghi ch\xfa kh\xe1c",1,"form-control",3,"blur"],["ghichuKhac",""],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"click"],["mat-raised-button","","color","warn",1,"float-rigth"],["mat-raised-button","","color","accent",3,"click"],["mat-raised-button","","color","warn",3,"click"],[1,"text-center"],[1,"row"],[3,"click",4,"ngFor","ngForOf"],["dynamicHeight",""],[3,"label",4,"ngFor","ngForOf"],[3,"click"],[3,"label"],["class","div",4,"ngFor","ngForOf"],[1,"div"],["class","card hangHoa",3,"ngClass","click",4,"ngIf"],[1,"card","hangHoa",3,"ngClass","click"],[1,"text-center","pt-3"],["class","badge badge-warning",4,"ngIf"],["class","badge badge-light",4,"ngIf"],[1,"card-body","py-3","px-2"],[1,"badge","badge-warning"],[1,"badge","badge-light"],["class","list",4,"ngIf"],["class","col",4,"ngIf"],[1,"list"],["id","item",1,"card-group"],[1,"card","hangHoa"],[1,"text-center","py-3"],["id","myDiv",1,"table","table-hover"],["colspan","3"],["class","badge badge-danger mx-2 ",3,"click",4,"ngIf"],[1,"font-blue"],["class"," font-note",4,"ngIf"],["class","fa fa-pencil text-success",3,"click",4,"ngIf"],["matPrefix","",3,"click",4,"ngIf"],["readonly","","required","","type","text","autocomplete","off","matInput","",2,"text-align","center",3,"value"],["matSuffix","",3,"click",4,"ngIf"],[1,"badge","badge-danger","mx-2",3,"click"],["aria-hidden","true",1,"fa","fa-trash"],[1,"font-note"],[1,"fa","fa-pencil","text-success",3,"click"],["matPrefix","",3,"click"],["matSuffix","",3,"click"],["colspan","2",1,"text-center"],["colspan","4",1,"text-center"],[1,"text-rigth"],[1,"badge","badge-primary","py-2","mx-2","my-2",3,"click"],[1,"badge","badge-warning","py-2","mx-2","my-2",3,"click"]],template:function(t,n){if(1&t){const t=l.EpF();l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"button",2),l.NdJ("click",function(){return n.back()}),l._uU(3,"Ch\u1ecdn b\xe0n"),l.qZA(),l.YNc(4,I,2,1,"button",3),l.qZA(),l.TgZ(5,"div",1),l.YNc(6,H,8,5,"div",4),l.qZA(),l.qZA(),l.YNc(7,F,6,3,"div",5),l.YNc(8,X,3,2,"div",6),l.TgZ(9,"div",7),l.TgZ(10,"div",8),l.TgZ(11,"div",9),l.TgZ(12,"div",10),l.TgZ(13,"h5",11),l._uU(14,"Modal title"),l.qZA(),l.TgZ(15,"button",12),l.TgZ(16,"span",13),l._uU(17,"\xd7"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(18,"div",14),l.TgZ(19,"div",15),l.TgZ(20,"div",16),l.TgZ(21,"h6"),l._uU(22),l.qZA(),l.TgZ(23,"h6"),l._uU(24),l.qZA(),l.TgZ(25,"h6"),l._uU(26),l.ALo(27,"date"),l.qZA(),l.qZA(),l.TgZ(28,"table",17),l.TgZ(29,"thead",18),l.TgZ(30,"tr"),l.TgZ(31,"th"),l._uU(32,"TT"),l.qZA(),l.TgZ(33,"th"),l._uU(34,"H\u1ea1ng m\u1ee5c"),l.qZA(),l.TgZ(35,"th"),l._uU(36,"S\u1ed1 l\u01b0\u1ee3ng"),l.qZA(),l.TgZ(37,"th"),l._uU(38,"Th\xe0nh ti\u1ec1n"),l.qZA(),l.qZA(),l.qZA(),l.YNc(39,nt,22,8,"tbody",4),l.qZA(),l.qZA(),l.qZA(),l.TgZ(40,"div",19),l.TgZ(41,"button",20),l._uU(42,"Close"),l.qZA(),l.TgZ(43,"button",21),l._uU(44,"Save"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l._UZ(45,"button",22),l.TgZ(46,"div",23,24),l.TgZ(48,"div",25),l.TgZ(49,"div",9),l.TgZ(50,"div",10),l.TgZ(51,"h6",11),l._uU(52,"Ghi ch\xfa"),l.qZA(),l.qZA(),l.TgZ(53,"div",26),l._uU(54),l.TgZ(55,"div",27),l.YNc(56,ot,3,1,"div",28),l.ALo(57,"catalog"),l.YNc(58,it,3,1,"div",28),l.ALo(59,"catalog"),l.qZA(),l.qZA(),l.TgZ(60,"input",29,30),l.NdJ("blur",function(){l.CHM(t);const o=l.MAs(61);return n.note.push(o.value)}),l.qZA(),l.TgZ(62,"div",19),l.TgZ(63,"button",31),l.NdJ("click",function(){return n.addNote()}),l._uU(64," Ok "),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()}2&t&&(l.xp6(4),l.Q6J("ngIf",n.BanDuocChon),l.xp6(2),l.Q6J("ngIf",n.total>0),l.xp6(1),l.Q6J("ngIf",n.xemBan),l.xp6(1),l.Q6J("ngIf",!n.xemBan),l.xp6(14),l.Oqu(n.user.title),l.xp6(2),l.Oqu(n.user.phoneNumber),l.xp6(2),l.hij("Gi\u1edd in: ",l.xi3(27,11,n.printTime,"HH:MM dd/MM/yyyy"),""),l.xp6(13),l.Q6J("ngIf",n.BanDuocChon),l.xp6(15),l.hij(" ",n.note.join(", ")," "),l.xp6(2),l.Q6J("ngForOf",l.lcZ(57,14,"SoLy")),l.xp6(2),l.Q6J("ngForOf",l.lcZ(59,16,"GhiChuMon")))},directives:[d.lW,c.O5,c.sg,B.qn,w.SP,B.HS,w.uX,c.mk,M.oO,N.KE,U.Nt,A.Hw,N.qo,N.R9],pipes:[c.uU,m.pW,m.W,m.dw,m.H$,c.rS,c.JJ],styles:[".hangHoa[_ngcontent-%COMP%]{height:10rem;width:10rem;border-radius:1rem;margin:.2rem;border-bottom-width:3rem;border-color:#90ee90;color:#00f;float:left;display:flex;align-items:center;justify-content:center}@media screen,print{.container[_ngcontent-%COMP%]{background-color:#999;position:relative;border:solid 1px black;width:500px;height:500px}}@media screen{.hideForPrint[_ngcontent-%COMP%]{position:absolute;width:100px;height:200px;top:100px;left:50px;border:dashed 5px #cccccc;z-index:98;background-color:#fff}}@media print{.hideForPrint[_ngcontent-%COMP%], .hideForPrint2[_ngcontent-%COMP%]{display:none}.noPrint[_ngcontent-%COMP%]{display:none}}.hangHoa[_ngcontent-%COMP%]:active{transform:scale(1.1);opacity:50%;background-color:tomato}.hoadon[_ngcontent-%COMP%]{width:200px}mat-icon[_ngcontent-%COMP%]{transform:scale(2);color:tomato}mat-icon[_ngcontent-%COMP%]:active{transform:scale(2.2);color:red}  .mat-tab-label{min-height:5px!important;margin:3px!important;padding-left:10px!important;padding-right:10px!important}"],data:{animation:[T.Ym,T.Mq]}}),t})();var at=o(46936),rt=o(23487),st=o(97012),ct=o(61260),ut=o(15265),ht=o(73624),lt=o(55352),gt=o(17935);function dt(t,n){if(1&t){const t=l.EpF();l.TgZ(0,"button",35),l.NdJ("click",function(){return l.CHM(t),l.oxw().reload()}),l.TgZ(1,"mat-icon"),l._uU(2,"undo"),l.qZA(),l.qZA()}2&t&&l.Q6J("@slideIn",void 0)}function pt(t,n){1&t&&(l.TgZ(0,"th"),l._uU(1,"M\xe3 v\u1ea1ch"),l.qZA())}function ft(t,n){1&t&&(l.TgZ(0,"th"),l._uU(1,"Khuy\u1ebfn m\xe3i"),l.qZA())}function mt(t,n){1&t&&(l.TgZ(0,"th"),l._uU(1,"Gi\xe1 v\u1ed1n"),l.qZA())}function Zt(t,n){1&t&&(l.TgZ(0,"th"),l._uU(1,"Quy \u0111\u1ed5i \u0111\u01a1n v\u1ecb"),l.qZA())}function Tt(t,n){1&t&&(l.TgZ(0,"th"),l._uU(1,"H\xecnh \u1ea3nh"),l.qZA())}function bt(t,n){if(1&t){const t=l.EpF();l.TgZ(0,"td",42),l.NdJ("click",function(){l.CHM(t);const n=l.oxw().$implicit;return l.oxw(2).onEdit(n)}),l._uU(1),l.qZA()}if(2&t){const t=l.oxw().$implicit;l.xp6(1),l.Oqu(t.Barcode)}}function At(t,n){if(1&t&&(l.TgZ(0,"td"),l._uU(1),l.qZA()),2&t){const t=l.oxw().$implicit;l.xp6(1),l.Oqu(t.KhuyenMai)}}function xt(t,n){if(1&t&&(l.TgZ(0,"td"),l._uU(1),l.qZA()),2&t){const t=l.oxw().$implicit;l.xp6(1),l.Oqu(t.GiaVon)}}function _t(t,n){if(1&t&&(l.TgZ(0,"td"),l._uU(1),l.qZA()),2&t){const t=l.oxw().$implicit;l.xp6(1),l.Oqu(t.QuyDoi)}}function qt(t,n){if(1&t&&(l.TgZ(0,"td"),l._uU(1),l.qZA()),2&t){const t=l.oxw().$implicit;l.xp6(1),l.Oqu(t.HinhAnh)}}function yt(t,n){if(1&t){const t=l.EpF();l.TgZ(0,"mat-icon",45),l.NdJ("click",function(){l.CHM(t);const n=l.oxw().$implicit;return l.oxw(2).onDelete(n)}),l._uU(1,"delete"),l.qZA()}}function Dt(t,n){if(1&t){const t=l.EpF();l.TgZ(0,"tr"),l.YNc(1,bt,2,1,"td",41),l.TgZ(2,"td",42),l.NdJ("click",function(){const n=l.CHM(t).$implicit;return l.oxw(2).onEdit(n)}),l._uU(3),l.qZA(),l.TgZ(4,"td",42),l.NdJ("click",function(){const n=l.CHM(t).$implicit;return l.oxw(2).onEdit(n)}),l._uU(5),l.qZA(),l.TgZ(6,"td",42),l.NdJ("click",function(){const n=l.CHM(t).$implicit;return l.oxw(2).onEdit(n)}),l._uU(7),l.qZA(),l.TgZ(8,"td",42),l.NdJ("click",function(){const n=l.CHM(t).$implicit;return l.oxw(2).onEdit(n)}),l._uU(9),l.qZA(),l.YNc(10,At,2,1,"td",38),l.TgZ(11,"td"),l._uU(12),l.qZA(),l.TgZ(13,"td"),l.TgZ(14,"mat-slide-toggle",43),l.NdJ("change",function(){const n=l.CHM(t).$implicit;return l.oxw(2).updateStatus(n)}),l.qZA(),l.qZA(),l.YNc(15,xt,2,1,"td",38),l.YNc(16,_t,2,1,"td",38),l.YNc(17,qt,2,1,"td",38),l.TgZ(18,"td"),l.YNc(19,yt,2,0,"mat-icon",44),l.qZA(),l.qZA()}if(2&t){const t=n.$implicit,o=l.oxw(2);l.xp6(1),l.Q6J("ngIf",o.device),l.xp6(2),l.Oqu(t.NhomHang),l.xp6(2),l.Oqu(t.TenHangHoa),l.xp6(2),l.Oqu(t.TonKho),l.xp6(2),l.Oqu(t.GiaBan),l.xp6(1),l.Q6J("ngIf",o.device),l.xp6(2),l.Oqu(t.DVT),l.xp6(2),l.Q6J("checked",t.TrangThai),l.xp6(1),l.Q6J("ngIf",o.device),l.xp6(1),l.Q6J("ngIf",o.device),l.xp6(1),l.Q6J("ngIf",o.device),l.xp6(2),l.Q6J("ngIf",o.checkPer(4))}}function vt(t,n){if(1&t){const t=l.EpF();l.TgZ(0,"table",36),l.TgZ(1,"thead",37),l.TgZ(2,"tr"),l.YNc(3,pt,2,0,"th",38),l.TgZ(4,"th"),l._uU(5,"Nh\xf3m h\xe0ng"),l.qZA(),l.TgZ(6,"th"),l._uU(7,"T\xean"),l.qZA(),l.TgZ(8,"th"),l._uU(9,"T\u1ed3n kho"),l.qZA(),l.TgZ(10,"th"),l._uU(11,"Gi\xe1n B\xe1n"),l.qZA(),l.YNc(12,ft,2,0,"th",38),l.TgZ(13,"th"),l._uU(14,"\u0110\u01a1n v\u1ecb t\xednh"),l.qZA(),l.TgZ(15,"th"),l._uU(16,"Cho b\xe1n"),l.qZA(),l.YNc(17,mt,2,0,"th",38),l.YNc(18,Zt,2,0,"th",38),l.YNc(19,Tt,2,0,"th",38),l.TgZ(20,"th"),l.TgZ(21,"mat-icon",39),l.NdJ("click",function(){return l.CHM(t),l.oxw().reload()}),l._uU(22,"cached"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(23,"tbody"),l.YNc(24,Dt,20,12,"tr",40),l.qZA(),l.qZA()}if(2&t){const t=l.oxw();l.Q6J("@slideIn",void 0),l.xp6(3),l.Q6J("ngIf",t.device),l.xp6(9),l.Q6J("ngIf",t.device),l.xp6(5),l.Q6J("ngIf",t.device),l.xp6(1),l.Q6J("ngIf",t.device),l.xp6(1),l.Q6J("ngIf",t.device),l.xp6(5),l.Q6J("ngForOf",t.filter.length>0?t.filter:t.items.slice(0,10))}}function Ct(t,n){if(1&t&&l._UZ(0,"app-import-database",46),2&t){const t=l.oxw();l.Q6J("api",t.api)("form",t.main)("global",!1)}}function Bt(t,n){if(1&t&&(l.TgZ(0,"mat-option",47),l._uU(1),l.qZA()),2&t){const t=n.$implicit;l.s9C("value",t.NoiDung),l.xp6(1),l.hij("",t.NoiDung," ")}}function wt(t,n){if(1&t&&(l.TgZ(0,"mat-option",47),l._uU(1),l.qZA()),2&t){const t=n.$implicit;l.s9C("value",t.NoiDung),l.xp6(1),l.hij("",t.NoiDung," ")}}function Mt(t,n){if(1&t){const t=l.EpF();l.TgZ(0,"button",48),l.NdJ("click",function(){return l.CHM(t),l.oxw().save()}),l.TgZ(1,"mat-icon"),l._uU(2,"save"),l.qZA(),l.qZA()}2&t&&l.Q6J("@slideIn",void 0)}const Nt=function(){return[5,10,25,100]};let Ut=(()=>{class t{constructor(t,n){this.plus=t,this.fb=n,this.chart=[],this.nhomHang=this.plus.sortArr(this.plus.user.getValue().NhomHang,"ThuTu",1),this.main=this.fb.group({_id:[,[]],Barcode:[,[]],NhomHang:[,[b.kI.required]],TenHangHoa:[,[b.kI.required]],TonKho:[0,[]],GiaBan:[0,[b.kI.required]],KhuyenMai:[0],DVT:[,[b.kI.required]],TrangThai:[!0],GiaVon:[0,[b.kI.required]],QuyDoi:[,[]],HinhAnh:[,[]]}),this.device=window.innerWidth>1200,this.title="H\xe0ng h\xf3a",this.dbName="ban-hang",this.api="hang-hoa",this.db=null,this.items=[],this.selectedItem=null,this.filter=[],this.itemsAuto=[]}ngOnInit(){this.plus.setTiTle(this.title),this.plus.IDB_InitDB(this.dbName).subscribe(t=>function(t,n,o,i){return new(o||(o=Promise))(function(e,a){function r(t){try{c(i.next(t))}catch(n){a(n)}}function s(t){try{c(i.throw(t))}catch(n){a(n)}}function c(t){t.done?e(t.value):function(t){return t instanceof o?t:new o(function(n){n(t)})}(t.value).then(r,s)}c((i=i.apply(t,n||[])).next())})}(this,void 0,void 0,function*(){this.db=t,this.getIDB(),this.plus.updateUserLocal(t,this.api),this.plus.updateAPi.subscribe(t=>{t&&this.getIDB()})}))}getIDB(){console.log("getIDB"),this.filter=[],this.plus.IDB_DB_GetAll(this.db,this.api).subscribe(t=>{this.items=t,this.plus.updateAPi.next(!1)})}ngOnDestroy(){console.log("Destroy",this.api),this.plus.subs.unsubscribe()}save(){if(this.main.invalid)return;const t=this.main.value;null==t._id?(delete t._id,this.plus.httpPost(this.api,t).subscribe(t=>{t.status&&this.plus.clickBtn("closeModal")})):this.plus.httpPut(this.api,t).subscribe(t=>{t.status&&this.plus.clickBtn("closeModal")})}onEdit(t){this.selectedItem=t;const n=this.plus.dateToHtmlObj(t,[""]);this.main.patchValue(n),this.plus.clickBtn("openModal")}onDelete(t){!confirm("B\u1ea1n mu\u1ed1n x\xf3a?")||(this.plus.load(),this.plus.httpDisable(this.api,t).then(t=>{console.log(t)}))}getAuto(t,n){!this.db||n.length<2||(this.itemsAuto=[],this.plus.IDB_DB_Search(this.db,t,n,4).subscribe(t=>{this.itemsAuto=t}))}getBarcode(t){this.main.patchValue({Barcode:t})}chooseOpt(t,n,o,i=!1){this.main.controls[n].setValue(t[o]),i&&this.main.controls[n+"ID"].setValue(t._id)}updateStatus(t){t.TrangThai=!t.TrangThai,delete t.__v,this.plus.httpPost(this.api+"/updateStatus",t).subscribe(t=>{})}closeModal(){this.main.reset()}search(t){this.filter=t}find(t){this.items=t}checkPer(t){return this.plus.checkPer(this.api,t)}patchForm(){}reload(){return this.plus.reload(this.dbName+"/"+this.api)}reset(){this.plus.loaded(),this.filter=[],this.getIDB(),this.main.reset({TonKho:0,TrangThai:!0,KhuyenMai:0,QuyDoi:1,HinhAnh:"#ffffff"})}changePage(t){this.filter=this.items.slice(t.pageIndex*t.pageSize,(t.pageIndex+1)*t.pageSize)}}return t.\u0275fac=function(n){return new(n||t)(l.Y36(g.T),l.Y36(b.qu))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-hang-hoa"]],decls:81,vars:18,consts:[[1,"container"],["id","add-btn","color","accent","mat-raised-button","","data-toggle","modal","data-target","#modelId",3,"click"],["id","back-btn","mat-raised-button","","color","primary",3,"click",4,"ngIf"],[3,"db","api","filter"],[1,"row"],["class","table table-hover",4,"ngIf"],[3,"length","pageSize","pageSizeOptions","page"],[3,"api","form","global",4,"ngIf"],[3,"dataJson"],["id","openModal","type","button","data-toggle","modal","data-target","#modelId",1,"d-none"],["id","modelId","data-backdrop","static","tabindex","-1","role","dialog","aria-labelledby","modelTitleId","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-body"],[1,"container-fluid"],[3,"formGroup"],["hidden","","formControlName","_id"],["required","","matInput","","formControlName","TenHangHoa"],[1,"col-6"],["required","","formControlName","NhomHang"],[3,"value",4,"ngFor","ngForOf"],["required","","formControlName","DVT"],["type","number","autocomplete","off","matInput","","formControlName","GiaVon",2,"float","right"],["matSuffix",""],["type","number","autocomplete","off","matInput","","formControlName","TonKho",2,"float","right"],["required","","type","number","autocomplete","off","matInput","","formControlName","GiaBan",2,"float","right"],["type","number","autocomplete","off","matInput","","formControlName","KhuyenMai",2,"float","right"],["type","text","autocomplete","off","matInput","","formControlName","QuyDoi"],["type","color","matInput","","formControlName","HinhAnh"],["type","text","autocomplete","off","matInput","","formControlName","Barcode"],[3,"barcodeResult"],["matPrefix","","formControlName","TrangThai","color","primary",1,"mx-2"],[1,"modal-footer"],["id","closeModal","mat-raised-button","","color","primary","data-dismiss","modal",3,"click"],["mat-raised-button","","color","warn",3,"click",4,"ngIf"],["id","back-btn","mat-raised-button","","color","primary",3,"click"],[1,"table","table-hover"],[1,"thead-inverse"],[4,"ngIf"],["color","primary",3,"click"],[4,"ngFor","ngForOf"],[3,"click",4,"ngIf"],[3,"click"],["matPrefix","","color","primary",1,"mx-2",3,"checked","change"],["color","warn",3,"click",4,"ngIf"],["color","warn",3,"click"],[3,"api","form","global"],[3,"value"],["mat-raised-button","","color","warn",3,"click"]],template:function(t,n){1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"button",1),l.NdJ("click",function(){return n.reset()}),l.TgZ(2,"mat-icon"),l._uU(3,"control_point"),l.qZA(),l.qZA(),l.YNc(4,dt,3,1,"button",2),l.TgZ(5,"app-search-table",3),l.NdJ("filter",function(t){return n.search(t)}),l.qZA(),l.TgZ(6,"div",4),l.YNc(7,vt,25,7,"table",5),l.qZA(),l.TgZ(8,"mat-paginator",6),l.NdJ("page",function(t){return n.changePage(t)}),l.qZA(),l.YNc(9,Ct,1,3,"app-import-database",7),l._UZ(10,"app-export-ecxel",8),l.qZA(),l._UZ(11,"button",9),l.TgZ(12,"div",10),l.TgZ(13,"div",11),l.TgZ(14,"div",12),l.TgZ(15,"div",13),l.TgZ(16,"div",14),l.TgZ(17,"form",15),l._UZ(18,"input",16),l.TgZ(19,"mat-form-field"),l.TgZ(20,"mat-label"),l._uU(21,"T\xean"),l.qZA(),l._UZ(22,"textarea",17),l.qZA(),l.TgZ(23,"div",4),l.TgZ(24,"div",18),l.TgZ(25,"mat-form-field"),l.TgZ(26,"mat-label"),l._uU(27,"Nh\xf3m h\xe0ng"),l.qZA(),l.TgZ(28,"mat-select",19),l.YNc(29,Bt,2,2,"mat-option",20),l.qZA(),l.qZA(),l.TgZ(30,"mat-form-field"),l.TgZ(31,"mat-label"),l._uU(32,"\u0110\u01a1n v\u1ecb t\xednh"),l.qZA(),l.TgZ(33,"mat-select",21),l.YNc(34,wt,2,2,"mat-option",20),l.ALo(35,"catalog"),l.qZA(),l.qZA(),l.TgZ(36,"mat-form-field"),l.TgZ(37,"mat-label"),l._uU(38,"Gi\xe1 v\u1ed1n"),l.qZA(),l._UZ(39,"input",22),l.TgZ(40,"span",23),l._uU(41,".000"),l.qZA(),l.qZA(),l.TgZ(42,"mat-form-field"),l.TgZ(43,"mat-label"),l._uU(44,"T\u1ed3n kho"),l.qZA(),l._UZ(45,"input",24),l._UZ(46,"span",23),l.qZA(),l.TgZ(47,"mat-form-field"),l.TgZ(48,"mat-label"),l._uU(49,"Gi\xe1n B\xe1n"),l.qZA(),l._UZ(50,"input",25),l._UZ(51,"span",23),l.qZA(),l.qZA(),l.TgZ(52,"div",18),l.TgZ(53,"mat-form-field"),l.TgZ(54,"mat-label"),l._uU(55,"Khuy\u1ebfn m\xe3i"),l.qZA(),l._UZ(56,"input",26),l.TgZ(57,"span",23),l._uU(58,"%"),l.qZA(),l.qZA(),l.TgZ(59,"mat-form-field"),l.TgZ(60,"mat-label"),l._uU(61,"Quy \u0111\u1ed5i \u0111\u01a1n v\u1ecb"),l.qZA(),l._UZ(62,"input",27),l._UZ(63,"span",23),l.qZA(),l.TgZ(64,"mat-form-field"),l.TgZ(65,"mat-label"),l._uU(66,"M\xe0u \u0111\u1ea1i di\u1ec7n"),l.qZA(),l._UZ(67,"input",28),l.qZA(),l.TgZ(68,"mat-form-field"),l.TgZ(69,"mat-label"),l._uU(70,"M\xe3 v\u1ea1ch"),l.qZA(),l._UZ(71,"input",29),l.qZA(),l.TgZ(72,"app-barcode-scanner",30),l.NdJ("barcodeResult",function(t){return n.getBarcode(t)}),l.qZA(),l._UZ(73,"hr"),l.TgZ(74,"mat-slide-toggle",31),l._uU(75),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(76,"div",32),l.TgZ(77,"button",33),l.NdJ("click",function(){return n.closeModal()}),l.TgZ(78,"mat-icon"),l._uU(79,"close"),l.qZA(),l.qZA(),l.YNc(80,Mt,3,1,"button",34),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&t&&(l.xp6(4),l.Q6J("ngIf",n.filter.length>0),l.xp6(1),l.Q6J("db",n.db)("api",n.api),l.xp6(2),l.Q6J("ngIf",n.items.length+n.filter.length>0),l.xp6(1),l.Q6J("length",n.items.length)("pageSize",10)("pageSizeOptions",l.DdM(17,Nt)),l.xp6(1),l.Q6J("ngIf",n.checkPer(4)),l.xp6(1),l.Q6J("dataJson",n.items),l.xp6(7),l.Q6J("formGroup",n.main),l.xp6(12),l.Q6J("ngForOf",n.nhomHang),l.xp6(5),l.Q6J("ngForOf",l.lcZ(35,15,"DVT")),l.xp6(41),l.hij(" ",n.main.controls.TrangThai.value?"C\xf2n h\xe0ng":"H\u1ebft h\xe0ng",""),l.xp6(2),l.Q6J("@slideIn",void 0),l.xp6(3),l.Q6J("ngIf",n.checkPer(2)&&n.main.valid))},directives:[d.lW,A.Hw,c.O5,at.D,rt.NW,st.t,b._Y,b.JL,b.sg,b.Fj,b.JJ,b.u,N.KE,N.hX,U.Nt,b.Q7,ct.gD,c.sg,b.wV,N.R9,ut.O,ht.Rr,N.qo,lt.y,gt.ey],pipes:[m.pW],styles:[""],data:{animation:[T.Ym,T.Mq]}}),t})();function It(t,n){if(1&t){const t=l.EpF();l.TgZ(0,"div",2),l.TgZ(1,"button",3),l.NdJ("click",function(){return l.CHM(t),l.oxw().resetNhanDon()}),l._uU(2,"nhan-don"),l.qZA(),l.TgZ(3,"button",3),l.NdJ("click",function(){return l.CHM(t),l.oxw().resetHangHoa()}),l._uU(4,"hang-hoa"),l.qZA(),l.qZA()}}let Ht=(()=>{class t{constructor(t){this.plus=t,this.db=null,this.dbName="ban-hang",this.isAdmin=this.plus.isAdmin()}ngOnInit(){this.plus.IDB_InitDB(this.dbName).subscribe(t=>{this.db=t})}resetNhanDon(){const t="an-uong";!confirm("Reset DB"+t)||this.plus.httpDelete(t,"del").subscribe(n=>{console.log("Clear DB"),this.plus.FBS_PostByUser(t,0).then(n=>{console.log("Clear FBS"),console.log(n),this.plus.IDB_DB_ClearCollection(this.db,t).subscribe(t=>{console.log("Clear IDB")})})})}resetHangHoa(){const t="hang-hoa";!confirm("Reset DB"+t)||this.plus.httpDelete(t,"del").subscribe(n=>{console.log("Clear DB"),this.plus.FBS_PostByUser(t,0).then(n=>{console.log("Clear FBS"),console.log(n),this.plus.IDB_DB_ClearCollection(this.db,t).subscribe(t=>{console.log("Clear IDB")})})})}checkPer(t,n){return this.plus.checkPer(t,n)}onDetect(t){console.log(t)}}return t.\u0275fac=function(n){return new(n||t)(l.Y36(g.T))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-ban-hang"]],decls:2,vars:1,consts:[[1,"container"],["class","row",4,"ngIf"],[1,"row"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(t,n){1&t&&(l.TgZ(0,"div",0),l.YNc(1,It,5,0,"div",1),l.qZA()),2&t&&(l.xp6(1),l.Q6J("ngIf",n.checkPer("hang-hoa",7)))},directives:[c.O5],styles:[""]}),t})();var kt=o(83550),Ot=o(50296);function Jt(t,n){if(1&t&&(l.TgZ(0,"b"),l._uU(1),l.qZA()),2&t){const t=l.oxw().$implicit;l.xp6(1),l.lnq(" ",t.TenHangHoa," [",t.GiaBan,"k/",t.DVT,"]")}}function Pt(t,n){if(1&t){const t=l.EpF();l.TgZ(0,"mat-option",34),l.NdJ("click",function(){const n=l.CHM(t).$implicit;return l.oxw().addNewItem(n)})("keyup.enter",function(){const n=l.CHM(t).$implicit;return l.oxw().addNewItem(n)})("onSelectionChange",function(){const n=l.CHM(t).$implicit;return l.oxw().addNewItem(n)}),l.YNc(1,Jt,2,3,"b",8),l.qZA()}if(2&t){const t=n.$implicit;l.xp6(1),l.Q6J("ngIf",t.TrangThai)}}function Lt(t,n){1&t&&(l.TgZ(0,"mat-option"),l._uU(1," Kh\xf4ng c\xf2n k\u1ebft qu\u1ea3 ph\xf9 h\u1ee3p! "),l.qZA())}function St(t,n){if(1&t&&(l.TgZ(0,"b",35),l._uU(1),l.ALo(2,"commas"),l.qZA()),2&t){const t=l.oxw();l.xp6(1),l.hij("Ti\u1ec1n th\u1eeba: ",l.lcZ(2,1,1e3*+t.khachDua-t.ThanhTien),"")}}function Et(t,n){if(1&t){const t=l.EpF();l.TgZ(0,"tr"),l.TgZ(1,"td",36),l._uU(2),l.qZA(),l.TgZ(3,"td",37),l._uU(4),l._UZ(5,"br"),l.TgZ(6,"b",38),l.NdJ("blur",function(n){const o=l.CHM(t).index;return l.oxw().updateGiaBan(o,"GiaBan",n)})("keydown.enter",function(n){const o=l.CHM(t).index;return l.oxw().updateGiaBan(o,"GiaBan",n)})("keydown.enter",function(n){const o=l.CHM(t).index;return l.oxw().updateList(o,"GiaBan",n)})("blur",function(n){const o=l.CHM(t).index;return l.oxw().updateList(o,"GiaBan",n)}),l._uU(7),l.ALo(8,"number"),l.qZA(),l._uU(9),l.qZA(),l.TgZ(10,"td",17),l.TgZ(11,"mat-icon",39),l.NdJ("click",function(){const n=l.CHM(t).index;return l.oxw().removeItem(n)}),l._uU(12,"arrow_left"),l.qZA(),l.TgZ(13,"b",40),l.NdJ("keydown.enter",function(n){const o=l.CHM(t).index;return l.oxw().updateList(o,"TongCong",n)})("blur",function(n){const o=l.CHM(t).index;return l.oxw().updateList(o,"TongCong",n)}),l._uU(14),l.ALo(15,"number"),l.qZA(),l.TgZ(16,"mat-icon",41),l.NdJ("click",function(){const n=l.CHM(t),o=n.$implicit,i=n.index;return l.oxw().addItem(o,i)}),l._uU(17,"arrow_right"),l.qZA(),l.qZA(),l.TgZ(18,"td",42),l.TgZ(19,"b"),l._uU(20),l.ALo(21,"commas"),l.qZA(),l.TgZ(22,"span",43),l.NdJ("click",function(){const n=l.CHM(t).index;return l.oxw().delItem(n)}),l.TgZ(23,"mat-icon",44),l._uU(24,"delete"),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&t){const t=n.$implicit,o=n.index;l.xp6(2),l.Oqu(o+1),l.xp6(2),l.Oqu(t.TenHangHoa),l.xp6(3),l.Oqu(l.lcZ(8,6,t.GiaBan)),l.xp6(2),l.hij("k/",t.DVT," "),l.xp6(5),l.hij(" ",l.lcZ(15,8,t.TongCong)," "),l.xp6(6),l.Oqu(l.lcZ(21,10,t.TongCong*t.GiaBan*1e3))}}function Ft(t,n){if(1&t&&(l.TgZ(0,"tr"),l.TgZ(1,"td"),l._uU(2),l.qZA(),l.TgZ(3,"td"),l._uU(4),l._UZ(5,"br"),l._uU(6),l.ALo(7,"commas"),l.qZA(),l.TgZ(8,"td",46),l._uU(9),l.qZA(),l.TgZ(10,"td",48),l._uU(11),l.ALo(12,"commas"),l.qZA(),l.qZA()),2&t){const t=n.$implicit,o=n.index;l.xp6(2),l.hij("",o+1," "),l.xp6(2),l.hij("",t.TenHangHoa," "),l.xp6(2),l.hij(" ",l.lcZ(7,5,1e3*t.GiaBan)," "),l.xp6(3),l.Oqu(t.TongCong),l.xp6(2),l.Oqu(l.lcZ(12,7,t.TongCong*t.GiaBan*1e3))}}function Gt(t,n){if(1&t&&(l.TgZ(0,"tbody"),l.YNc(1,Ft,13,9,"tr",19),l.TgZ(2,"tr"),l.TgZ(3,"td",45),l.TgZ(4,"h5"),l._uU(5,"T\u1ed5ng c\u1ed9ng:"),l.qZA(),l.qZA(),l.TgZ(6,"td"),l.TgZ(7,"h5"),l._uU(8),l.qZA(),l.qZA(),l.TgZ(9,"td",46),l.TgZ(10,"h5"),l._uU(11),l.ALo(12,"commas"),l.qZA(),l.TgZ(13,"h6"),l.TgZ(14,"i"),l._uU(15),l.ALo(16,"titlecase"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(17,"td",47),l.TgZ(18,"h6"),l._uU(19,"Xin c\u1ea3m \u01a1n qu\xfd kh\xe1ch"),l.qZA(),l.TgZ(20,"h6"),l._uU(21,"S\u1ea3n ph\u1ea9m c\u1ee7a 4la.vn"),l.qZA(),l.qZA(),l.qZA()),2&t){const t=l.oxw();l.xp6(1),l.Q6J("ngForOf",t.DonMua),l.xp6(7),l.hij("",t.total," m\xf3n"),l.xp6(3),l.hij(" ",l.lcZ(12,4,t.ThanhTien),""),l.xp6(4),l.Oqu(l.lcZ(16,6,t.bangchu))}}const Qt=function(t){return{loading:t}};let Yt=(()=>{class t{constructor(t,n,o){this.plus=t,this.route=n,this.fb=o,this.subs=(new kt.y).subscribe(),this.db=null,this.title="B\xe1n h\xe0ng t\u1ea1p h\xf3a",this.dbName="ban-hang",this.api="tap-hoa",this.tabs=[],this.items=[],this.DonMua=[],this.total=0,this.ThanhTien=0,this.donHang=[],this.bangchu="",this.filter=[],this.audio=new Audio,this.nhapThuCong=!1,this.xemHoaDon=!0,this.user=this.plus.user.getValue(),this.printTime=Date.now(),this.NhomHang=this.plus.user.getValue().NhomHang,this.TabBan=this.plus.sortArr(this.plus.user.getValue().NhomBan,"ThuTu",1),this.ChiaBan=[],this.ban=0,this.width=window.innerWidth,this.count=0,this.now=Date.now(),this.xemBan=!0,this.xemMon=!1,this.donHangFB=this.fb.group({ThanhTien:[,[b.kI.required]],LoiNhuan:[,[b.kI.required]],SoKH:[,[b.kI.required]],GioVao:[,[b.kI.required]],DaThanhToan:[,[b.kI.required]],DonMua:this.fb.array([this.fb.group({idHangHoa:[,[b.kI.required]],DVT:[,[b.kI.required]],GiaBan:[,[b.kI.required]],GiaVon:[,[b.kI.required]],KhuyenMai:[,[b.kI.required]],TenHangHoa:[,[b.kI.required]],TongCong:[,[b.kI.required]]})])}),this.searchForm=this.fb.group({input:[,[b.kI.minLength(3),b.kI.maxLength(50)]]})}ngOnDestroy(){console.log("Destroy an-uong"),this.plus.subs.unsubscribe()}test(t){console.log(+t.replace(/\D/g,"")),this.khachDua=+t}ngOnInit(){this.plus.setTiTle(this.title),this.getBillLocal(),this.plus.IDB_InitDB(this.dbName).subscribe(t=>{this.db=t,document.getElementById("search-api").focus(),this.plus.updateUserLocal(t,"hang-hoa")}),this.search(),this.audio.src="assets/audio/beep.mp3",this.audio.load()}getBillLocal(){const t=JSON.parse(localStorage.getItem("tapHoaBill"));console.log("getBillLocal",t),null==t?this.DonMua=[]:(this.DonMua=t,this.getTongCong())}search(){this.subs.add(this.searchForm.valueChanges.subscribe(t=>{const n=this.plus.removeAccents(t.input);n.trim().length<2||this.plus.IDB_DB_GetByBarCode(this.db,"hang-hoa",n).subscribe(t=>{t?(this.searchForm.reset(),t.TrangThai?this.addNewItem(t):this.plus.alertMatSnackBar("T\u1ea1m h\u1ebft h\xe0ng")):(this.filter=[],this.plus.IDB_DB_Search(this.db,"hang-hoa",n,5).subscribe(t=>{this.filter=t}))})}))}thanhToan(){const t=confirm("In h\xf3a \u0111\u01a1n?");let n=Object.assign({DonMua:this.DonMua.map(t=>({idHangHoa:t._id,TenHangHoa:t.TenHangHoa,GiaBan:t.GiaBan,GiaVon:t.GiaVon,KhuyenMai:t.KhuyenMai,DVT:t.DVT,TongCong:t.TongCong})),LoiNhuan:this.DonMua.map(t=>t.GiaBan-t.GiaVon-t.GiaBan*t.KhuyenMai/100).reduce((t,n)=>t+n),ThanhTien:this.ThanhTien,GioVao:Date.now(),SoKH:this.total,DaThanhToan:!0});if(this.donHangFB.patchValue(n),this.donHangFB.invalid){const t=this.plus.getErrValidateForm(this.donHangFB);console.log(t,this.donHangFB.status)}else this.plus.httpPost("thanh-toan/new",n).subscribe(t=>{const n=this.plus.Crypt_DecryptRest(t);this.plus.FBS_PostByUser("hang-hoa",n.dateModify),this.DonMua=[],this.reload()});localStorage.removeItem("tapHoaBill"),t?(this.PrintDiv("HoaDon"),console.log(0,n)):console.log(1,n)}addNewItem(t){this.filter=[],this.playAudio(),this.xemHoaDon=!0,window.navigator.vibrate(100);const n=this.DonMua.find(n=>n._id==t._id);if(!n)return t.TongCong=1,this.DonMua.unshift(t),this.getTongCong();{const t=this.DonMua.findIndex(t=>t._id==n._id);this.DonMua[t].TongCong+=1}this.getTongCong(),this.filter=[],this.searchForm.controls.input.setValue("")}removeItem(t){this.playAudio(),this.DonMua[t].TongCong>0&&(this.DonMua[t].TongCong-=1),this.getTongCong()}addItem(t,n){this.playAudio(),this.DonMua[n].TongCong+=1,this.getTongCong()}delItem(t){this.DonMua.splice(t,1),this.getTongCong()}getTongCong(){this.total=this.plus.sumByKey(this.DonMua,"TongCong"),this.getThanhTien()}getThanhTien(){let t=0;return this.DonMua.forEach(n=>{t+=n.GiaBan*n.TongCong*1e3}),this.bangchu=this.plus.numToVi(t),localStorage.setItem("tapHoaBill",JSON.stringify(this.DonMua)),this.ThanhTien=t}PrintDiv(t){this.plus.load();let n=window.document.getElementById(t);var o=window.open("","PRINT");o.document.write(document.documentElement.innerHTML),setTimeout(()=>{o.document.body.innerHTML=n.outerHTML,o.document.close(),o.focus(),o.print(),o.close()},1e3),this.plus.loaded()}getBarcode(t){this.searchForm.controls.input.setValue(t)}find(t){this.filter=t}getByBarcode(t){}reload(){this.plus.reload("ban-hang/tap-hoa")}updateList(t,n,o){const i=+o.target.textContent;if(console.log(i),"Enter"===o.key&&o.preventDefault(),"number"!=typeof i)return this.plus.alertError("Sai \u0111\u1ecbnh d\u1ea1ng"),this.DonMua[t][n]=0;this.DonMua[t][n]=+i,this.getTongCong()}updateGiaBan(t,n,o){if(this.DonMua[t][n]==+o.target.textContent)return;const i=this.DonMua[t].TongCong,e=this.DonMua[t];delete e.__v,delete e.TongCong,e.GiaBan=+o.target.textContent,this.plus.httpPut("hang-hoa",e).subscribe(n=>{document.getElementById("search-api").focus(),console.log(this.DonMua[t])}),this.DonMua[t][n]=+o.target.textContent,this.DonMua[t].TongCong=+i,this.getTongCong()}updateKhachDua(t){const n=+t.target.textContent;console.log(n,typeof n),"Enter"===t.key&&t.preventDefault(),("number"!=typeof n||Number.isNaN(n))&&this.plus.alertError("B\u1ea1n ph\u1ea3i nh\u1eadp s\u1ed1 ti\u1ec1n"),this.khachDua=+n}playAudio(){this.audio.play()}}return t.\u0275fac=function(n){return new(n||t)(l.Y36(g.T),l.Y36(C.gz),l.Y36(b.qu))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-tap-hoa"]],decls:69,vars:22,consts:[[1,"container-fluid"],[1,"row",2,"padding-top","10px"],[1,"col-lg-6"],[1,"form-group",3,"formGroup"],["type","text","id","search-api","autocomplete","off","formControlName","input","placeholder","T\xecm ki\u1ebfm (F2)",1,"form-control",3,"readonly","matAutocomplete","ngClass"],["autoActiveFirstOption",""],["auto","matAutocomplete"],[3,"click","keyup.enter","onSelectionChange",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"barcodeResult"],["id","thanh-toan","mat-raised-button","","color","warn",1,"float-rigth",3,"disabled","click"],["contentEditable","true",1,"font-blue","inputSpan",3,"keydown.enter","blur"],["style","padding-left: 15px; color: blue;",4,"ngIf"],[1,"row"],[1,"table","table-hover"],["width","10%"],["width","35%"],["width","30%"],["width","25%",2,"text-align","center"],[4,"ngFor","ngForOf"],["id","modelId","tabindex","-1","role","dialog","aria-labelledby","modelTitleId","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body","hoadon"],["id","HoaDon",1,"div"],[1,"text-left"],[1,"thead-inverse"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],["type","button",1,"btn","btn-primary"],[3,"click","keyup.enter","onSelectionChange"],[2,"padding-left","15px","color","blue"],["width","10%",2,"padding-left","5px"],["width","35%",2,"font-size","16px"],["contenteditable","true",1,"px-2","font-blue",3,"blur","keydown.enter"],["matPrefix","",1,"ar",3,"click"],["contenteditable","true",1,"font-blue",3,"keydown.enter","blur"],["matSuffix","",1,"ar",3,"click"],["width","25%",1,"text-right"],[2,"margin-left","20px",3,"click"],["color","warn"],["colspan","2",1,"text-center"],[1,"text-center"],["colspan","4",1,"text-center"],[1,"text-rigth"]],template:function(t,n){if(1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l.TgZ(3,"div",3),l._UZ(4,"input",4),l.TgZ(5,"mat-autocomplete",5,6),l.YNc(7,Pt,2,1,"mat-option",7),l.YNc(8,Lt,2,0,"mat-option",8),l.qZA(),l.qZA(),l.qZA(),l.TgZ(9,"div",2),l.TgZ(10,"app-barcode-scanner",9),l.NdJ("barcodeResult",function(t){return n.getBarcode(t)}),l.qZA(),l.TgZ(11,"button",10),l.NdJ("click",function(){return n.thanhToan()}),l._uU(12),l.ALo(13,"commas"),l.qZA(),l.TgZ(14,"b"),l._uU(15,"Kh\xe1ch \u0111\u01b0a: "),l.TgZ(16,"span",11),l.NdJ("keydown.enter",function(t){return n.updateKhachDua(t)})("blur",function(t){return n.updateKhachDua(t)}),l.qZA(),l._uU(17,".000\u0111"),l.qZA(),l.YNc(18,St,3,3,"b",12),l.qZA(),l.qZA(),l.TgZ(19,"div",13),l.TgZ(20,"table",14),l.TgZ(21,"thead"),l.TgZ(22,"tr"),l.TgZ(23,"th",15),l._uU(24,"TT "),l.qZA(),l.TgZ(25,"th",16),l._uU(26,"H\u1ea1ng m\u1ee5c"),l.qZA(),l.TgZ(27,"th",17),l._uU(28,"S\u1ed1 l\u01b0\u1ee3ng"),l.qZA(),l.TgZ(29,"th",18),l._uU(30,"Th\xe0nh ti\u1ec1n"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(31,"tbody"),l.YNc(32,Et,25,12,"tr",19),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(33,"div",20),l.TgZ(34,"div",21),l.TgZ(35,"div",22),l.TgZ(36,"div",23),l.TgZ(37,"h5",24),l._uU(38,"Modal title"),l.qZA(),l.TgZ(39,"button",25),l.TgZ(40,"span",26),l._uU(41,"\xd7"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(42,"div",27),l.TgZ(43,"div",28),l.TgZ(44,"div",29),l.TgZ(45,"h6"),l._uU(46),l.qZA(),l.TgZ(47,"h6"),l._uU(48),l.qZA(),l.TgZ(49,"h6"),l._uU(50),l.ALo(51,"date"),l.qZA(),l.qZA(),l.TgZ(52,"table",14),l.TgZ(53,"thead",30),l.TgZ(54,"tr"),l.TgZ(55,"th"),l._uU(56,"TT"),l.qZA(),l.TgZ(57,"th"),l._uU(58,"H\u1ea1ng m\u1ee5c"),l.qZA(),l.TgZ(59,"th"),l._uU(60,"S\u1ed1 l\u01b0\u1ee3ng"),l.qZA(),l.TgZ(61,"th"),l._uU(62,"Th\xe0nh ti\u1ec1n"),l.qZA(),l.qZA(),l.qZA(),l.YNc(63,Gt,22,8,"tbody",8),l.qZA(),l.qZA(),l.qZA(),l.TgZ(64,"div",31),l.TgZ(65,"button",32),l._uU(66,"Close"),l.qZA(),l.TgZ(67,"button",33),l._uU(68,"Save"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&t){const t=l.MAs(6);l.xp6(3),l.Q6J("formGroup",n.searchForm),l.xp6(1),l.Q6J("readonly",!1)("matAutocomplete",t)("ngClass",l.VKq(20,Qt,n.filter.length>1&&n.filter.length<5)),l.xp6(3),l.Q6J("ngForOf",n.filter),l.xp6(1),l.Q6J("ngIf",0==n.filter.length&&n.searchForm.value.input),l.xp6(3),l.Q6J("disabled",0==n.ThanhTien),l.xp6(1),l.AsE(" ",n.DonMua.length," | ",l.lcZ(13,15,n.ThanhTien)," "),l.xp6(6),l.Q6J("ngIf",n.khachDua>0&&1e3*n.khachDua>n.ThanhTien),l.xp6(14),l.Q6J("ngForOf",n.DonMua),l.xp6(14),l.Oqu(n.user.title),l.xp6(2),l.Oqu(n.user.phoneNumber),l.xp6(2),l.hij("Gi\u1edd in:",l.xi3(51,17,n.printTime,"hh:mm dd/MM/yyyy"),""),l.xp6(13),l.Q6J("ngIf",n.DonMua)}},directives:[b.JL,b.sg,b.Fj,Ot.ZL,b.JJ,b.u,c.mk,M.oO,Ot.XC,c.sg,c.O5,ut.O,d.lW,gt.ey,A.Hw,N.qo,N.R9],pipes:[m.W,c.uU,c.JJ,c.rS],styles:[".hangHoa[_ngcontent-%COMP%]{height:8rem;width:8rem;border-radius:1rem;margin:.2rem;border-bottom-width:1rem;border-color:#90ee90;color:#00f;float:left;display:flex;align-items:center;justify-content:center}.hangHoa[_ngcontent-%COMP%]:active{transform:scale(1.1);opacity:50%}.hoadon[_ngcontent-%COMP%]{width:200px}.font-mat[_ngcontent-%COMP%]{color:#fff;font-size:medium}.font-blue[_ngcontent-%COMP%]{font-size:16px;padding-left:10px;padding-right:10px}.arrow-bt[_ngcontent-%COMP%]{font-size:larger;color:#00f;font-weight:700;padding:.5rem}.arrow-bt[_ngcontent-%COMP%]:hover{border:brown;border-radius:.5rem;background-color:#0ff}.example-form-field[_ngcontent-%COMP%]{max-width:8rem}.row[_ngcontent-%COMP%]{margin-left:5px!important;margin-right:5px!important}td[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{padding:0;vertical-align:middle}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding-bottom:0!important}.ar[_ngcontent-%COMP%]{transform:scale(1.5);color:tomato}.ar[_ngcontent-%COMP%]:active{transform:scale(2.2);color:#00f}.inputSpan[_ngcontent-%COMP%]{border-bottom:solid;border-color:#00f;padding-left:10px;text-align:right}.inputSpan[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:focus{border:rgb(255,0,0)}"],data:{animation:[T.Ym]}}),t})(),Vt=(()=>{class t{constructor(t){this.plus=t}canActivate(){return this.plus.checkPer("hang-hoa")}}return t.\u0275fac=function(n){return new(n||t)(l.LFG(g.T))},t.\u0275prov=l.Yz7({token:t,factory:t.\u0275fac}),t})(),jt=(()=>{class t{constructor(t){this.plus=t}canActivate(){return this.plus.checkPer("an-uong")}}return t.\u0275fac=function(n){return new(n||t)(l.LFG(g.T))},t.\u0275prov=l.Yz7({token:t,factory:t.\u0275fac}),t})(),Kt=(()=>{class t{constructor(t){this.plus=t}canActivate(){return this.plus.checkPer("pha-che")}}return t.\u0275fac=function(n){return new(n||t)(l.LFG(g.T))},t.\u0275prov=l.Yz7({token:t,factory:t.\u0275fac}),t})(),$t=(()=>{class t{constructor(t){this.plus=t}canActivate(){return this.plus.checkPer("tap-hoa")}}return t.\u0275fac=function(n){return new(n||t)(l.LFG(g.T))},t.\u0275prov=l.Yz7({token:t,factory:t.\u0275fac}),t})(),Rt=(()=>{class t{constructor(t){this.plus=t}canActivate(){return this.plus.checkPer("bao-cao")}}return t.\u0275fac=function(n){return new(n||t)(l.LFG(g.T))},t.\u0275prov=l.Yz7({token:t,factory:t.\u0275fac}),t})();const zt=[{path:"",component:Ht},{path:"hang-hoa",component:Ut,canActivate:[Vt]},{path:"an-uong/:ten-ban",component:et,canActivate:[jt]},{path:"an-uong",component:et,canActivate:[jt]},{path:"pha-che",component:D,canActivate:[Kt]},{path:"tap-hoa",component:Yt,canActivate:[$t]},{path:"bao-cao",component:Z,canActivate:[Rt]}];let Wt=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({providers:[Vt,jt,Kt,$t,Rt],imports:[[C.Bz.forChild(zt)],C.Bz]}),t})();var Xt=o(85913),tn=o(24561),nn=o(60929);let on=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({providers:[nn.F],imports:[[c.ez,e.ShareModule,r.qX,Wt,s.D,Xt.m,nn.F,tn.k,a.k,i.N]]}),t})()},64762:function(t,n,o){function i(t,n,o,i){return new(o||(o=Promise))(function(e,a){function r(t){try{c(i.next(t))}catch(n){a(n)}}function s(t){try{c(i.throw(t))}catch(n){a(n)}}function c(t){t.done?e(t.value):function(t){return t instanceof o?t:new o(function(n){n(t)})}(t.value).then(r,s)}c((i=i.apply(t,n||[])).next())})}o.d(n,{mG:function(){return i}})}}]);