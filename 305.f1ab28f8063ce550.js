"use strict";(self.webpackChunkdlxl=self.webpackChunkdlxl||[]).push([[305],{80305:(_n,Y,p)=>{p.r(Y),p.d(Y,{DlxlModule:()=>hn});var G=p(5923),R=p(48387),X=p(85913),z=p(34291),g=p(69808),b=p(15228),r=p(93075),W=p(15439),d=p.n(W),t=p(5e3),x=p(45230),Z=p(69798),N=p(99826),f=p(67322),A=p(77531),C=p(86856),M=p(74107),H=p(90508),I=p(47423),k=p(25245),T=p(30627);function V(i,l){if(1&i&&(t.TgZ(0,"mat-option",35),t._uU(1),t.qZA()),2&i){const e=l.$implicit;t.Q6J("value",e.GiaTri),t.xp6(1),t.hij("",e.NoiDung," ")}}let j=(()=>{class i{constructor(e,n,o,a){this.plus=e,this.fb=n,this.rtSv=o,this.route=a,this.main=this.fb.group({_id:[,[]],KyThanhToan:[,[r.kI.required]],Email:[,],MaKhachHang:[,[r.kI.required]],KhachHang:[,[r.kI.required]],DiaChi:[,[r.kI.required]],MaGCS:[,],ChuTaiKhoan:[,],SoTaiKhoan:[,],NganHang:[,],Nam:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],Thang:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],SanLuong:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],DonGia:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],TruocThue:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],Thue:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],TongTien:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],KyHieuHoaDon:[,[]],SoHoaDon:[,[]],NgayMuaHang:[,[]],NgayHoaDon:[,[]],ThueSuat:[,[r.kI.pattern("^[0-9]*$")]],TrangThaiThanhToan:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],TrangThaiHoSo:[,[r.kI.required]],DaGuiMail:[,[r.kI.pattern("^[0-9]*$")]],TenBangKe:[,[]]}),this.title="L\u1eadp b\u1ea3ng k\xea",this.global=!0,this.dbName="dien-luc",this.api="dmt-input",this.db=null,this.userId=this.plus.userId,this.usr=this.plus.usr,this.items=[],this.selectedItem=null,this.filter=[],this.chart=[],this.errors=[]}ngOnInit(){this.plus.setTiTle(this.title),this.plus.IDB_InitDB(this.dbName).subscribe(e=>this.db=e),this.getIDB()}getIDB(){const e=this.route.snapshot.paramMap.get("id");this.plus.httpGet(this.api+"/"+e).subscribe(n=>{const o=this.plus.Crypt_DecryptRest(n);this.main.patchValue(o),(null==o||null==o)&&this.plus.IDB_DB_GetAllByIndexKey(this.db,"dmt-input","MaKhachHang","=",e).subscribe(a=>{this.main.patchValue(a)})})}ngOnDestroy(){console.log("Destroy",this.api),this.plus.subs.unsubscribe(),this.rtSv.leaveRoom(this.api)}save(){if(this.main.invalid)return;const e=this.main.value;null==e._id?(delete e._id,this.plus.httpPost(this.api,e,this.global).subscribe(n=>{n.status&&(this.plus.clickBtn("closeModal"),this.plus.updateAPi.next(!0))})):this.plus.httpPut(this.api,e,this.global).subscribe(n=>{n.status&&(this.plus.updateAPi.next(!0),this.plus.clickBtn("closeModal"))})}onEdit(e){this.selectedItem=e;const n=this.plus.dateToHtmlObj(e,["NgayHoaDon"]);this.main.patchValue(n),this.plus.clickBtn("openModal")}onDelete(e){!confirm("B\u1ea1n mu\u1ed1n x\xf3a?")||(this.plus.load(),this.plus.httpDisable(this.api,e,this.global).then(o=>{this.plus.updateAPi.next(!0)}))}chooseOpt(e,n,o,a=!1){this.main.controls[n].setValue(e[o]),a&&this.main.controls[n+"ID"].setValue(e._id)}convertInputDay(e,n){const o=d()(e,"DD-MM-YYYY").toDate();this.main.controls[n].setValue(o)}closeModal(){this.plus.goBack()}search(e){this.filter=e}find(e){this.items=e}checkPer(e){return this.plus.checkPer(this.api,e)}reload(){return this.plus.reload(this.dbName+"/"+this.api)}reset(){this.plus.loaded(),this.filter=[],this.getIDB(),this.main.reset({})}changePage(e){this.filter=this.items.slice(e.pageIndex*e.pageSize,(e.pageIndex+1)*e.pageSize)}ondragover(){document.getElementById("dropZone").setAttribute("drop-active","true")}trackByFn(e,n){return n}resetDB(){this.plus.resetDB(this.db,this.api)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(x.T),t.Y36(r.qu),t.Y36(Z.i),t.Y36(N.gz))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-nlmt-input-detail"]],decls:128,vars:7,consts:[[1,"container"],[3,"formGroup"],[1,"row"],["type","text","readonly","","autocomplete","off","matInput","","formControlName","KhachHang"],["matSuffix",""],["type","text","readonly","","autocomplete","off","matInput","","formControlName","DiaChi"],["type","text","readonly","","autocomplete","off","matInput","","formControlName","TenBangKe"],[1,"col-6"],["hidden","","formControlName","_id"],["required","","type","text","autocomplete","off","matInput","","formControlName","KyThanhToan"],["type","text","readonly","","autocomplete","off","matInput","","formControlName","Email"],["type","text","readonly","","autocomplete","off","matInput","","formControlName","MaKhachHang"],["type","text","readonly","","autocomplete","off","matInput","","formControlName","MaGCS"],["type","text","autocomplete","off","matInput","","formControlName","ChuTaiKhoan"],["type","text","autocomplete","off","matInput","","formControlName","SoTaiKhoan"],["type","text","autocomplete","off","matInput","","formControlName","NganHang"],["type","text","autocomplete","off","matInput","","formControlName","Nam"],["type","text","autocomplete","off","matInput","","formControlName","Thang"],["type","text","autocomplete","off","matInput","","formControlName","NgayMuaHang"],["numberFormat","","type","text","autocomplete","off","matInput","","formControlName","SanLuong"],["type","text","autocomplete","off","matInput","","formControlName","DonGia"],["type","text","autocomplete","off","matInput","","formControlName","TruocThue"],["type","text","autocomplete","off","matInput","","formControlName","Thue"],["type","text","autocomplete","off","matInput","","formControlName","TongTien"],["type","text","autocomplete","off","matInput","","formControlName","KyHieuHoaDon"],["type","text","autocomplete","off","matInput","","formControlName","SoHoaDon"],["matInput","","formControlName","NgayHoaDon","placeholder","DD/MM/YYYY","autocomplete","off",3,"matDatepicker","blur","focus"],["NgayHoaDonInput",""],["matSuffix","",3,"for"],["NgayHoaDon",""],["hidden",""],["type","text","autocomplete","off","matInput","","formControlName","ThueSuat"],["required","","formControlName","TrangThaiHoSo"],[3,"value",4,"ngFor","ngForOf"],["id","closeModal","mat-raised-button","","color","primary","data-dismiss","modal",3,"click"],[3,"value"]],template:function(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"mat-form-field")(4,"mat-label"),t._uU(5,"Kh\xe1ch h\xe0ng"),t.qZA(),t._UZ(6,"input",3)(7,"span",4),t.qZA(),t.TgZ(8,"mat-form-field")(9,"mat-label"),t._uU(10,"\u0110\u1ecba ch\u1ec9"),t.qZA(),t._UZ(11,"input",5)(12,"span",4),t.qZA(),t.TgZ(13,"mat-form-field")(14,"mat-label"),t._uU(15,"T\xean b\u1ea3ng k\xea"),t.qZA(),t._UZ(16,"input",6)(17,"span",4),t.qZA(),t.TgZ(18,"div",7),t._UZ(19,"input",8),t.TgZ(20,"mat-form-field")(21,"mat-label"),t._uU(22,"K\u1ef3 thanh to\xe1n"),t.qZA(),t._UZ(23,"input",9)(24,"span",4),t.qZA(),t.TgZ(25,"mat-form-field")(26,"mat-label"),t._uU(27,"Email"),t.qZA(),t._UZ(28,"input",10)(29,"span",4),t.qZA(),t.TgZ(30,"mat-form-field")(31,"mat-label"),t._uU(32,"M\xe3 kh\xe1ch h\xe0ng"),t.qZA(),t._UZ(33,"input",11)(34,"span",4),t.qZA(),t.TgZ(35,"mat-form-field")(36,"mat-label"),t._uU(37,"M\xe3 G C S"),t.qZA(),t._UZ(38,"input",12)(39,"span",4),t.qZA(),t.TgZ(40,"mat-form-field")(41,"mat-label"),t._uU(42,"Ch\u1ee7 t\xe0i kho\u1ea3n"),t.qZA(),t._UZ(43,"input",13)(44,"span",4),t.qZA(),t.TgZ(45,"mat-form-field")(46,"mat-label"),t._uU(47,"S\u1ed1 t\xe0i kho\u1ea3n"),t.qZA(),t._UZ(48,"input",14)(49,"span",4),t.qZA(),t.TgZ(50,"mat-form-field")(51,"mat-label"),t._uU(52,"Ng\xe2n h\xe0ng"),t.qZA(),t._UZ(53,"input",15)(54,"span",4),t.qZA(),t.TgZ(55,"mat-form-field")(56,"mat-label"),t._uU(57,"N\u0103m"),t.qZA(),t._UZ(58,"input",16)(59,"span",4),t.qZA(),t.TgZ(60,"mat-form-field")(61,"mat-label"),t._uU(62,"Th\xe1ng"),t.qZA(),t._UZ(63,"input",17)(64,"span",4),t.qZA(),t.TgZ(65,"mat-form-field")(66,"mat-label"),t._uU(67,"Ng\xe0y mua h\xe0ng"),t.qZA(),t._UZ(68,"input",18)(69,"span",4),t.qZA()(),t.TgZ(70,"div",7)(71,"mat-form-field")(72,"mat-label"),t._uU(73,"S\u1ea3n l\u01b0\u1ee3ng"),t.qZA(),t._UZ(74,"input",19)(75,"span",4),t.qZA(),t.TgZ(76,"mat-form-field")(77,"mat-label"),t._uU(78,"\u0110\u01a1n gi\xe1"),t.qZA(),t._UZ(79,"input",20)(80,"span",4),t.qZA(),t.TgZ(81,"mat-form-field")(82,"mat-label"),t._uU(83,"Tr\u01b0\u1edbc thu\u1ebf"),t.qZA(),t._UZ(84,"input",21)(85,"span",4),t.qZA(),t.TgZ(86,"mat-form-field")(87,"mat-label"),t._uU(88,"Thu\u1ebf"),t.qZA(),t._UZ(89,"input",22)(90,"span",4),t.qZA(),t.TgZ(91,"mat-form-field")(92,"mat-label"),t._uU(93,"T\u1ed5ng ti\u1ec1n"),t.qZA(),t._UZ(94,"input",23)(95,"span",4),t.qZA(),t.TgZ(96,"mat-form-field")(97,"mat-label"),t._uU(98,"K\xfd hi\u1ec7u h\xf3a \u0111\u01a1n"),t.qZA(),t._UZ(99,"input",24)(100,"span",4),t.qZA(),t.TgZ(101,"mat-form-field")(102,"mat-label"),t._uU(103,"S\u1ed1 h\xf3a \u0111\u01a1n"),t.qZA(),t._UZ(104,"input",25)(105,"span",4),t.qZA(),t.TgZ(106,"mat-form-field")(107,"mat-label"),t._uU(108,"Ng\xe0y h\xf3a \u0111\u01a1n"),t.qZA(),t.TgZ(109,"input",26,27),t.NdJ("blur",function(){t.CHM(o);const s=t.MAs(110);return n.convertInputDay(s.value,"NgayHoaDon")})("focus",function(){return t.CHM(o),t.MAs(113).open()}),t.qZA(),t._UZ(111,"mat-datepicker-toggle",28)(112,"mat-datepicker",null,29),t.qZA(),t.TgZ(114,"mat-form-field",30)(115,"mat-label"),t._uU(116,"Thu\u1ebf su\u1ea5t"),t.qZA(),t._UZ(117,"input",31)(118,"span",4),t.qZA(),t.TgZ(119,"mat-form-field")(120,"mat-label"),t._uU(121,"Tr\u1ea1ng th\xe1i h\u1ed3 s\u01a1"),t.qZA(),t.TgZ(122,"mat-select",32),t.YNc(123,V,2,2,"mat-option",33),t.ALo(124,"catalog"),t.qZA()()()()(),t.TgZ(125,"button",34),t.NdJ("click",function(){return n.closeModal()}),t.TgZ(126,"mat-icon"),t._uU(127,"undo"),t.qZA()()()}if(2&e){const o=t.MAs(113);t.xp6(1),t.Q6J("formGroup",n.main),t.xp6(108),t.Q6J("matDatepicker",o),t.xp6(2),t.Q6J("for",o),t.xp6(12),t.Q6J("ngForOf",t.lcZ(124,5,"DMTTrangThaiHoSo")),t.xp6(2),t.Q6J("@slideIn",void 0)}},directives:[r._Y,r.JL,r.sg,f.KE,f.hX,A.Nt,r.Fj,r.JJ,r.u,f.R9,r.Q7,C.hl,C.nW,C.Mq,M.gD,g.sg,H.ey,I.lW,k.Hw],pipes:[T.pW],styles:[""],data:{animation:[b.Ym]}}),i})();var K=p(9157),tt=p(86805),et=p(70930);function D(i,l){const e="object"==typeof l;return new Promise((n,o)=>{const a=new et.Hp({next:s=>{n(s),a.unsubscribe()},error:o,complete:()=>{e?n(l.defaultValue):o(new tt.K)}});i.subscribe(a)})}var E=p(50590),nt=p(94327),it=p.n(nt),ot=p(40520),F=function(i,l,e,n){return new(e||(e=Promise))(function(a,s){function m(c){try{u(n.next(c))}catch(_){s(_)}}function h(c){try{u(n.throw(c))}catch(_){s(_)}}function u(c){c.done?a(c.value):function o(a){return a instanceof e?a:new e(function(s){s(a)})}(c.value).then(m,h)}u((n=n.apply(i,l||[])).next())})};let Q=(()=>{class i{constructor(e,n,o,a){this.fb=e,this.plus=n,this.rtSv=o,this.http=a,this.global=!0,this.payForm=this.fb.group({_id:[,[]],TenBangKe:[,[r.kI.required]],TrangThai:[,[r.kI.required]],LichSuCapNhat:[,[r.kI.required]],TongPhatLen:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],ThanhTienTruocThue:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],Thue:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],ThanhTienSauThue:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],DanhSach:[]})}statusMail(e){console.log("statusMail()"),this.plus.httpPut("dmt-input",{_id:e._id,DaGuiMail:1,dateModify:Date.now()},!0).subscribe(n=>{console.log(n)})}updateNameBill(e,n){return F(this,void 0,void 0,function*(){const o=d()().format("x");console.log("updateNameBill()",+o);const a=e,m=Math.ceil(e.length/200),h=[];for(let u=0;u<a.length;u++)h.push(a[u]._id);for(let u=0;u<m;u++){const c={ids:h.slice(200*u,u+200),setData:{TenBangKe:n,dateModify:+o,TrangThaiHoSo:2},dateModify:+o};yield D(this.plus.httpPut("dmt-input/update",c,!0).pipe((0,E.P)()));const _=this.geneBodyPay(e,d()(+o,"x").toDate(),"G\u1eedi b\u1ea3ng k\xea");yield D(this.plus.httpPost("dmt-pay",_,!0).pipe((0,E.P)())),this.plus.reload("dien-luc/dmt-input")}})}changeStatusList(e,n){return F(this,void 0,void 0,function*(){const o=d()().format("x");console.log("changeStatusList()",o);const a=e.DanhSach,m=Math.ceil(e.DanhSach.length/200),h=[];for(let u=0;u<a.length;u++)h.push(a[u]._id);for(let u=0;u<m;u++){const c={ids:h.slice(200*u,u+200),setData:{dateModify:+o,TrangThaiHoSo:n,NgayThanhToan:d()(o).format("M/YYYY")},dateModify:+o};yield D(this.plus.httpPut("dmt-input/update",c,!0).pipe((0,E.P)())),e.TrangThai=n,delete e.__v,yield D(this.plus.httpPut("dmt-pay",e,!0).pipe((0,E.P)())),this.plus.reload("dien-luc/dmt-pay")}})}updateQualified(e){const n=d()().format("x");console.log("updateQualified()",n),Math.ceil(e.length/200);const s=[];for(let h=0;h<e.length;h++)s.push(e[h]._id);this.plus.httpPut("dmt-input/update",{ids:s,setData:{dateModify:+n,TrangThaiHoSo:1},dateModify:+n},!0).subscribe(h=>{this.plus.reload("dien-luc/dmt-input")})}deleteList(e){const n=[];for(let o=0;o<e.length;o++)n.push(e[o]._id);this.plus.httpPost("dmt-input/multi",n,this.global).subscribe(o=>{this.plus.reload("dien-luc/dmt-input")})}download(e,n){this.plus.load();let o=this.plus.getApiUrl("dmt-input/export/"+n);const a=this.plus.getHeader();a.responseType="blob",this.http.post(o,e,a).subscribe(s=>{var m=new Blob([s],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),h=n+"-"+Date.now()+".xlsx";it()(m,h),this.plus.loaded()})}geneBodyPay(e,n,o){console.log("geneBodyPay()");const a={};a.TenBangKe=d()(n).format("YYMMDDHHmm"),a.KyThanhToan=e[0].Thang+"/"+e[0].Nam,a.LichSuCapNhat=[o+": "+d()().format("HH:mm-DD/MM/YYYY")],a.TrangThai=2,a.TongPhatLen=0,a.ThanhTienTruocThue=0,a.Thue=0,a.Nam=e[0].Nam,a.Thang=e[0].Thang,a.ThanhTienSauThue=0;for(let s=0;s<e.length;s++){const m=e[s];a.DanhSach=e,a.TongPhatLen+=m.SanLuong,a.ThanhTienTruocThue+=m.TruocThue,a.Thue+=m.Thue,a.ThanhTienSauThue+=m.TongTien}return a}geneBodyMail(e,n,o){return{from:this.plus.user.value.unit,status:0,email:e.Email,title:`Th\xf4ng b\xe1o chi ti\u1ec1n \u0111i\u1ec7n NLMTMN th\xe1ng ${e.Thang} n\u0103m ${e.Nam}`,company:e.KhachHang,index:o,message:`<p>K\xednh g\u1eedi kh\xe1ch h\xe0ng: ${e.KhachHang}.</p>\n          <p>\u0110i\u1ec7n l\u1ef1c Xu\xe2n L\u1ed9c k\xednh g\u1eedi \u0111\u1ebfn qu\xfd kh\xe1ch h\xe0ng n\u1ed9i dung thanh to\xe1n ti\u1ec1n \u0111i\u1ec7n m\u1eb7t tr\u1eddi tr\xean m\xe1i nh\xe0 v\u1edbi n\u1ed9i dung nh\u01b0 sau:</p>\n          <ul> M\xe3 kh\xe1ch h\xe0ng: ${e.MaKhachHang}.</ul>\n          <ul> T\xean kh\xe1ch h\xe0ng: ${e.KhachHang}.</ul>\n          <ul> \u0110\u1ecba ch\u1ec9: ${e.DiaChi}.</ul>\n          <ul> M\xe3 ghi ch\u1ec9 s\u1ed1: ${e.MaGCS}.</ul>\n          <ul> T\xean t\xe0i kho\u1ea3n: ${e.ChuTaiKhoan}.</ul>\n          <ul> S\u1ed1 t\xe0i kho\u1ea3n: ${e.SoTaiKhoan}.</ul>\n          <ul> Ng\xe2n h\xe0ng: ${e.NganHang}.</ul>\n          <ul> N\u0103m: ${e.Nam}.</ul>\n          <ul> Th\xe1ng: ${e.Thang}.</ul>\n          <ul> \u0110i\u1ec7n ph\xe1t l\xean l\u01b0\u1edbi: ${this.plus.numberWithCommas(e.SanLuong)} kWh.</ul>\n          <ul> \u0110\u01a1n gi\xe1: ${this.plus.numberWithCommas(e.DonGia)} VND/kWh.</ul>\n          <ul> T\u1ec9 l\u1ec7 Thu\u1ebf: ${e.TiLeThue} %.</ul>\n          <ul> Th\xe0nh ti\u1ec1n ch\u01b0a thu\u1ebf VAT: ${this.plus.numberWithCommas(e.TruocThue)} VND.</ul>\n          <ul> Thu\u1ebf VAT: ${this.plus.numberWithCommas(e.Thue)} VND.</ul>\n          <ul> T\u1ed5ng ti\u1ec1n: ${this.plus.numberWithCommas(e.TongTien)} VND.</ul>\n          <p> M\u1ecdi \xfd ki\u1ebfn ph\u1ea3n h\u1ed3i vui l\xf2ng li\xean h\u1ec7 \u0110i\u1ec7n l\u1ef1c Xu\xe2n L\u1ed9c qua s\u1ed1 \u0111i\u1ec7n tho\u1ea1i Mr. \u0110\u1ea1t - <a href="tel:0937232239">0937232239 </a> ho\u1eb7c Mrs. Ph\u01b0\u1edbc Anh - <a href="tel:0583223344" >0583223344 </a> \u0111\u1ec3 \u0111\u01b0\u1ee3c gi\u1ea3i \u0111\xe1p.</p>\n          <p> Ph\u1ea3n h\u1ed3i h\xf3a \u0111\u01a1n qu\xfd kh\xe1ch vui l\xf2ng g\u1eedi email v\u1ec1 c\u1ea3 02 \u0111\u1ecba ch\u1ec9: <a href="mailto:dienlucxuanloc.nlmt@gmail.com;tckt.dlxl.pcdn@gmail.com">dienlucxuanloc.nlmt@gmail.com</a> v\xe0 <a href="mailto:dienlucxuanloc.nlmt@gmail.com;tckt.dlxl.pcdn@gmail.com">tckt.dlxl.pcdn@gmail.com</a> </p>\n          Tr\xe2n tr\u1ecdng.`}}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(r.qu),t.LFG(x.T),t.LFG(Z.i),t.LFG(ot.eN))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var L=p(31409),O=p(87238),q=p(25862);function lt(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){return t.CHM(e),t.oxw().approveList()}),t.TgZ(1,"mat-icon"),t._uU(2,"done_all"),t.qZA()()}}function rt(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",26),t.NdJ("click",function(){return t.CHM(e),t.oxw().returnList()}),t.TgZ(1,"mat-icon"),t._uU(2,"replay_circle_filled"),t.qZA()()}}function st(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",27),t.NdJ("click",function(){return t.CHM(e),t.oxw().save()}),t.TgZ(1,"mat-icon"),t._uU(2,"save"),t.qZA()()}}function ct(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",28),t.NdJ("click",function(){return t.CHM(e),t.oxw().paidList()}),t.TgZ(1,"mat-icon"),t._uU(2,"currency_exchange"),t.qZA()()}}function ut(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"mat-icon",29),t.NdJ("click",function(){return t.CHM(e),t.oxw().searchText=""}),t._uU(1,"close"),t.qZA()}}function pt(i,l){1&i&&(t.TgZ(0,"th"),t._uU(1,"Ch\u1ee7 t\xe0i kho\u1ea3n"),t.qZA())}function mt(i,l){1&i&&(t.TgZ(0,"th"),t._uU(1,"S\u1ed1 t\xe0i kho\u1ea3n"),t.qZA())}function ht(i,l){1&i&&(t.TgZ(0,"th"),t._uU(1,"Ng\xe2n h\xe0ng"),t.qZA())}function _t(i,l){1&i&&(t.TgZ(0,"th"),t._uU(1,"Tr\u01b0\u1edbc thu\u1ebf"),t.qZA())}function dt(i,l){1&i&&(t.TgZ(0,"th"),t._uU(1,"Thu\u1ebf"),t.qZA())}function gt(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"td",30),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw().onEdit(o)}),t._uU(1),t.qZA()}if(2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.ChuTaiKhoan)}}function ft(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"td",30),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw().onEdit(o)}),t._uU(1),t.qZA()}if(2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.SoTaiKhoan)}}function Tt(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"td",30),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw().onEdit(o)}),t._uU(1),t.qZA()}if(2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.NganHang)}}function bt(i,l){if(1&i&&(t.TgZ(0,"td",32),t._uU(1),t.ALo(2,"number"),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,e.TruocThue))}}function xt(i,l){if(1&i&&(t.TgZ(0,"td",32),t._uU(1),t.ALo(2,"number"),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,e.Thue))}}function Zt(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"mat-icon",40),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw().onDelete(o)}),t._uU(1,"delete"),t.qZA()}}function Nt(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"td",30),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw().onEdit(a)}),t._uU(2),t.qZA(),t.TgZ(3,"td",30),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw().onEdit(a)}),t._uU(4),t.qZA(),t.YNc(5,gt,2,1,"td",31),t.YNc(6,ft,2,1,"td",31),t.YNc(7,Tt,2,1,"td",31),t.TgZ(8,"td",30),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw().onEdit(a)}),t._uU(9),t.ALo(10,"number"),t.qZA(),t.TgZ(11,"td",32),t._uU(12),t.ALo(13,"number"),t.qZA(),t.YNc(14,bt,3,3,"td",33),t.YNc(15,xt,3,3,"td",33),t.TgZ(16,"td",32),t._uU(17),t.ALo(18,"number"),t.qZA(),t.TgZ(19,"td",32)(20,"span",34),t.NdJ("blur",function(o){const s=t.CHM(e).$implicit;return t.oxw().changeLabel(o,s)}),t._uU(21),t.qZA()(),t.TgZ(22,"td",32)(23,"span",34),t.NdJ("blur",function(o){const s=t.CHM(e).$implicit;return t.oxw().changeSeri(o,s)}),t._uU(24),t.qZA()(),t.TgZ(25,"td",35)(26,"mat-form-field")(27,"input",36),t.NdJ("focus",function(){return t.CHM(e),t.MAs(30).open()})("dateChange",function(o){const s=t.CHM(e).$implicit;return t.oxw().changeDate(o,s)}),t.qZA(),t._UZ(28,"mat-datepicker-toggle",37)(29,"mat-datepicker",null,38),t.qZA()(),t.TgZ(31,"td"),t.YNc(32,Zt,2,0,"mat-icon",39),t.qZA()()}if(2&i){const e=l.$implicit,n=t.MAs(30),o=t.oxw();t.xp6(2),t.Oqu(e.MaKhachHang),t.xp6(2),t.Oqu(e.KhachHang),t.xp6(1),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(2),t.Oqu(t.lcZ(10,18,e.SanLuong)),t.xp6(3),t.Oqu(t.lcZ(13,20,e.DonGia)),t.xp6(2),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(2),t.Oqu(t.lcZ(18,22,e.TongTien)),t.xp6(3),t.Q6J("contentEditable",!0),t.xp6(1),t.hij(" ",e.KyHieuHoaDon,""),t.xp6(2),t.Q6J("contentEditable",!0),t.xp6(1),t.hij(" ",e.SoHoaDon," "),t.xp6(3),t.Q6J("matDatepicker",n)("value",e.NgayHoaDon),t.xp6(1),t.Q6J("for",n),t.xp6(4),t.Q6J("ngIf",o.checkPer(4)&&e.TrangThai<2)}}function Ct(i,l){if(1&i&&(t.TgZ(0,"tr",41)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"lowercase"),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.qZA(),t.TgZ(16,"td"),t._uU(17),t.qZA(),t.TgZ(18,"td"),t._uU(19),t.qZA(),t.TgZ(20,"td"),t._uU(21),t.ALo(22,"numberPipe"),t.qZA(),t.TgZ(23,"td"),t._uU(24),t.ALo(25,"numberPipe"),t.qZA(),t.TgZ(26,"td"),t._uU(27),t.ALo(28,"numberPipe"),t.qZA(),t.TgZ(29,"td"),t._uU(30),t.ALo(31,"numberPipe"),t.qZA(),t.TgZ(32,"td")(33,"b"),t._uU(34),t.ALo(35,"numberPipe"),t.qZA()()()),2&i){const e=l.$implicit;t.xp6(2),t.Oqu(e.MaKhachHang),t.xp6(2),t.Oqu(e.KhachHang),t.xp6(2),t.Oqu(e.DiaChi),t.xp6(2),t.Oqu(e.MaGCS),t.xp6(2),t.Oqu(e.ChuTaiKhoan),t.xp6(2),t.Oqu(t.lcZ(13,14,e.SoTaiKhoan)),t.xp6(3),t.Oqu(e.NganHang),t.xp6(2),t.Oqu(e.Nam),t.xp6(2),t.Oqu(e.Thang),t.xp6(2),t.Oqu(t.lcZ(22,16,e.SanLuong)),t.xp6(3),t.Oqu(t.lcZ(25,18,e.DonGia)),t.xp6(3),t.Oqu(t.lcZ(28,20,e.TruocThue)),t.xp6(3),t.Oqu(t.lcZ(31,22,e.Thue)),t.xp6(4),t.hij(" ",t.lcZ(35,24,e.TongTien)," ")}}let It=(()=>{class i{constructor(e,n,o,a,s,m,h){this.plus=e,this.fb=n,this.rtSv=o,this.docxSv=a,this.route=s,this.nlmtSv=m,this.excelSv=h,this.main=this.fb.group({Email:[,[r.kI.required]],MaKhachHang:[,[r.kI.required]],KhachHang:[,[r.kI.required]],DiaChi:[,[r.kI.required]],MaGCS:[,[r.kI.required]],ChuTaiKhoan:[,[r.kI.required]],SoTaiKhoan:[,[r.kI.required]],NganHang:[,[r.kI.required]],Nam:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],Thang:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],SanLuong:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],DonGia:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],TruocThue:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],Thue:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],TongTien:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],KyHieuHoaDon:[,[r.kI.required,r.kI.minLength(3)]],SoHoaDon:[,[r.kI.required,r.kI.minLength(3)]],NgayHoaDon:[,[r.kI.required]],TrangThai:[,],DaGuiMail:[0]}),this.title="Chi ti\u1ebft b\u1ea3ng k\xea",this.global=!0,this.dbName="dien-luc",this.api="dmt-pay",this.db=null,this.userId=this.plus.userId,this.usr=this.plus.usr,this.selectedItem=null,this.filter=[],this.chart=[],this.errors=[],this.searchText=""}ngOnInit(){this.plus.setTiTle(this.title),this.plus.IDB_InitDB(this.dbName).subscribe(e=>function(i,l,e,n){return new(e||(e=Promise))(function(a,s){function m(c){try{u(n.next(c))}catch(_){s(_)}}function h(c){try{u(n.throw(c))}catch(_){s(_)}}function u(c){c.done?a(c.value):function o(a){return a instanceof e?a:new e(function(s){s(a)})}(c.value).then(m,h)}u((n=n.apply(i,l||[])).next())})}(this,void 0,void 0,function*(){this.getIDB(),this.db=e,this.plus.updateRealtime(this.db,this.api,this.global),this.plus.IDB_DB_CleanTrash(e,this.api)}))}exportXlsx(){var e=document.getElementById("my-table-id");window.open("data:application/vnd.ms-excel,"+encodeURIComponent(e.outerHTML))}getIDB(){const e=this.route.snapshot.paramMap.get("id");this.plus.load(),this.plus.httpGet(this.api+"/"+e).subscribe(n=>{this.plus.loaded();let o=this.plus.Crypt_DecryptRest(n);this.items=o,this.isBill=this.items.DanhSach[0].CoHoaDon})}changeDate(e,n){const o=this.items.DanhSach.indexOf(n);this.items.DanhSach[o].NgayHoaDon=e.value}changeLabel(e,n){const o=this.items.DanhSach.indexOf(n);this.items.DanhSach[o].KyHieuHoaDon=e.target.innerText}changeSeri(e,n){const o=this.items.DanhSach.indexOf(n);this.items.DanhSach[o].SoHoaDon=e.target.innerText}ngOnDestroy(){console.log("Destroy",this.api),this.plus.subs.unsubscribe(),this.rtSv.leaveRoom(this.api)}save(){const e=this.items;delete e.__v,this.plus.httpPut(this.api,e,this.global).subscribe(n=>{n.status&&this.plus.updateAPi.next(!0)})}completeBill(){}exportWord(){this.items.DanhSach.map((e,n)=>{e.TT=n+1,e.MatHang="\u0110MTMN"}),this.nlmtSv.download(this.items,"PTC")}reportKD(){this.items.DanhSach.map((e,n)=>{e.TT=n+1,e.MatHang="\u0110MTMN"}),this.nlmtSv.download(this.items,"PKD"),1==this.isBill||this.nlmtSv.download(this.items,"PKD-MuaHang")}exportUNC(){this.items.BangChu=this.plus.numToVi(this.items.ThanhTienSauThue),this.nlmtSv.download(this.items,"UNC")}returnList(){const e=prompt("L\xed do tr\u1ea3 h\u1ed3 s\u01a1?");if(0==e.length)return this.plus.alertWarning("B\u1ea1n ph\u1ea3i nh\u1eadp l\xed do tr\u1ea3 h\u1ed3 s\u01a1");const n=this.items;n.LichSuCapNhat.push(`Tr\u1ea3 l\u1ea1i h\u1ed3 s\u01a1 v\u1edbi l\xed do ${e}: ${d()().format("DD/MM/YYYY HH:mm")}`),this.nlmtSv.changeStatusList(n,0)}approveList(){const e=this.items;e.LichSuCapNhat.push(`H\u1ed3 s\u01a1 \u0111\xe3 \u0111\u01b0\u1ee3c ch\u1ea5p nh\u1eadn: ${d()().format("DD/MM/YYYY HH:mm")}`),this.nlmtSv.changeStatusList(e,3)}paidList(){const e=this.items;e.LichSuCapNhat.push(`H\u1ed3 s\u01a1 \u0111\xe3 thanh to\xe1n ${d()().format("DD/MM/YYYY HH:mm")}`),this.nlmtSv.changeStatusList(e,4)}report(){}complete(){}onEdit(e){this.selectedItem=e;const n=this.plus.dateToHtmlObj(e,[""]);this.main.patchValue(n),this.plus.clickBtn("openModal")}onDelete(e){!confirm("B\u1ea1n mu\u1ed1n x\xf3a?")||(this.plus.load(),this.plus.httpDisable(this.api,e,this.global).then(o=>{this.reload()}))}search(e){this.filter=e}find(e){this.items=e}checkPer(e,n=this.api){return this.plus.checkPer(n,e)}reload(){return this.plus.reload(this.dbName+"/"+this.api)}goBack(){this.plus.goBack()}changePage(e){}trackByFn(e,n){return n}resetDB(){this.plus.resetDB(this.db,this.api)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(x.T),t.Y36(r.qu),t.Y36(Z.i),t.Y36(K.E),t.Y36(N.gz),t.Y36(Q),t.Y36(L.x))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-nlmt-detail"]],decls:102,vars:29,consts:[[1,"container-fluid"],["id","back-btn","mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","warn","matTooltip","Duy\u1ec7t",3,"click",4,"ngIf"],["mat-raised-button","","color","primary","matTooltip","Tr\u1ea3 l\u1ea1i",3,"click",4,"ngIf"],["mat-raised-button","","color","primary","matTooltip","B\u1ea3ng k\xea PTC ",3,"click"],["mat-raised-button","","color","primary","matTooltip","Xu\u1ea5t UNC ",3,"click"],["mat-raised-button","","color","primary","matTooltip","B\u1ea3ng k\xea PKD ",3,"click"],["mat-raised-button","","color","warn","matTooltip","L\u01b0u",3,"click",4,"ngIf"],["mat-raised-button","","color","warn","matTooltip","\u0110\xe3 thanh to\xe1n",3,"click",4,"ngIf"],[1,"row"],["matSuffix","","color","warn",3,"click",4,"ngIf"],["matInput","","id","search-api","placeholder","T\xecm ki\u1ebfm nhanh (F2)","value","value",3,"ngModel","ngModelChange"],[1,"tit","text-center"],[1,"table","table-hover"],[1,"thead-inverse"],[4,"Device"],["color","primary",3,"click"],[4,"ngFor","ngForOf"],["id","my-table-id","hidden","",1,"table","bordered"],["colspan","14"],[2,"text-align","center","color","blue","padding","3rem","vertical-align","middle"],[2,"border-style","solid"],["style"," border-style: dotted;",4,"ngFor","ngForOf"],["colspan","2"],["colspan","6",2,"text-align","left","color","blue","padding","3rem","vertical-align","middle"],["mat-raised-button","","color","warn","matTooltip","Duy\u1ec7t",3,"click"],["mat-raised-button","","color","primary","matTooltip","Tr\u1ea3 l\u1ea1i",3,"click"],["mat-raised-button","","color","warn","matTooltip","L\u01b0u",3,"click"],["mat-raised-button","","color","warn","matTooltip","\u0110\xe3 thanh to\xe1n",3,"click"],["matSuffix","","color","warn",3,"click"],[1,"align-middle",3,"click"],["class","align-middle",3,"click",4,"Device"],[1,"align-middle"],["class","align-middle",4,"Device"],[3,"contentEditable","blur"],[1,"align-text-top"],["matInput","",3,"matDatepicker","value","focus","dateChange"],["matSuffix","",3,"for"],["picker",""],["color","warn",3,"click",4,"ngIf"],["color","warn",3,"click"],[2,"border-style","dotted"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"button",1),t.NdJ("click",function(){return n.goBack()}),t.TgZ(2,"mat-icon"),t._uU(3,"undo"),t.qZA()(),t.YNc(4,lt,3,0,"button",2),t.YNc(5,rt,3,0,"button",3),t.TgZ(6,"button",4),t.NdJ("click",function(){return n.exportWord()}),t.TgZ(7,"mat-icon"),t._uU(8,"cloud_download"),t.qZA()(),t.TgZ(9,"button",5),t.NdJ("click",function(){return n.exportUNC()}),t.TgZ(10,"mat-icon"),t._uU(11,"border_color"),t.qZA()(),t.TgZ(12,"button",6),t.NdJ("click",function(){return n.reportKD()}),t.TgZ(13,"mat-icon"),t._uU(14,"format_list_bulleted"),t.qZA()(),t.YNc(15,st,3,0,"button",7),t.YNc(16,ct,3,0,"button",8),t.TgZ(17,"div",9)(18,"mat-form-field"),t.YNc(19,ut,2,0,"mat-icon",10),t.TgZ(20,"input",11),t.NdJ("ngModelChange",function(a){return n.searchText=a}),t.qZA()(),t.TgZ(21,"h5",12),t._uU(22),t.ALo(23,"numberPipe"),t.qZA(),t.TgZ(24,"table",13)(25,"thead",14)(26,"tr")(27,"th"),t._uU(28,"M\xe3 kh\xe1ch h\xe0ng"),t.qZA(),t.TgZ(29,"th"),t._uU(30,"Kh\xe1ch h\xe0ng"),t.qZA(),t.YNc(31,pt,2,0,"th",15),t.YNc(32,mt,2,0,"th",15),t.YNc(33,ht,2,0,"th",15),t.TgZ(34,"th"),t._uU(35,"S\u1ea3n l\u01b0\u1ee3ng"),t.qZA(),t.TgZ(36,"th"),t._uU(37,"\u0110\u01a1n gi\xe1"),t.qZA(),t.YNc(38,_t,2,0,"th",15),t.YNc(39,dt,2,0,"th",15),t.TgZ(40,"th"),t._uU(41,"T\u1ed5ng ti\u1ec1n"),t.qZA(),t.TgZ(42,"th"),t._uU(43,"K\xfd hi\u1ec7u h\xf3a \u0111\u01a1n"),t.qZA(),t.TgZ(44,"th"),t._uU(45,"S\u1ed1 h\xf3a \u0111\u01a1n"),t.qZA(),t.TgZ(46,"th"),t._uU(47,"Ng\xe0y h\xf3a \u0111\u01a1n"),t.qZA(),t.TgZ(48,"th")(49,"mat-icon",16),t.NdJ("click",function(){return n.reload()}),t._uU(50,"cached"),t.qZA()()()(),t.TgZ(51,"tbody"),t.YNc(52,Nt,33,24,"tr",17),t.ALo(53,"filter"),t.qZA()()()(),t.TgZ(54,"table",18)(55,"tr")(56,"td",19)(57,"h5",20),t._uU(58),t.qZA()()(),t.TgZ(59,"thead",21)(60,"tr")(61,"th"),t._uU(62,"M\xe3 kh\xe1ch h\xe0ng"),t.qZA(),t.TgZ(63,"th"),t._uU(64,"Kh\xe1ch h\xe0ng"),t.qZA(),t.TgZ(65,"th"),t._uU(66,"\u0110\u1ecba ch\u1ec9"),t.qZA(),t.TgZ(67,"th"),t._uU(68,"M\xe3 GCS"),t.qZA(),t.TgZ(69,"th"),t._uU(70,"Ch\u1ee7 t\xe0i kho\u1ea3n"),t.qZA(),t.TgZ(71,"th"),t._uU(72,"S\u1ed1 t\xe0i kho\u1ea3n"),t.qZA(),t.TgZ(73,"th"),t._uU(74,"Ng\xe2n h\xe0ng"),t.qZA(),t.TgZ(75,"th"),t._uU(76,"N\u0103m"),t.qZA(),t.TgZ(77,"th"),t._uU(78,"Th\xe1ng"),t.qZA(),t.TgZ(79,"th"),t._uU(80,"S\u1ea3n l\u01b0\u1ee3ng"),t.qZA(),t.TgZ(81,"th"),t._uU(82,"\u0110\u01a1n gi\xe1"),t.qZA(),t.TgZ(83,"th"),t._uU(84,"Tr\u01b0\u1edbc thu\u1ebf"),t.qZA(),t.TgZ(85,"th"),t._uU(86,"Thu\u1ebf"),t.qZA(),t.TgZ(87,"th"),t._uU(88,"T\u1ed5ng ti\u1ec1n"),t.qZA()()(),t.TgZ(89,"tbody"),t.YNc(90,Ct,36,26,"tr",22),t.qZA(),t.TgZ(91,"tfoot")(92,"tr"),t._UZ(93,"th",23),t.qZA(),t.TgZ(94,"tr")(95,"th",24),t._uU(96),t.ALo(97,"numberPipe"),t.qZA()(),t.TgZ(98,"tr")(99,"th",24),t._uU(100),t.ALo(101,"bangChu"),t.qZA()()()()),2&e&&(t.xp6(1),t.Q6J("@slideIn",void 0),t.xp6(3),t.Q6J("ngIf",(null==n.items?null:n.items.TrangThai)>1&&(null==n.items?null:n.items.TrangThai)<3&&n.checkPer(4,"dmt-accept")),t.xp6(1),t.Q6J("ngIf",(null==n.items?null:n.items.TrangThai)>1&&(null==n.items?null:n.items.TrangThai)<3),t.xp6(10),t.Q6J("ngIf",(null==n.items?null:n.items.TrangThai)>1),t.xp6(1),t.Q6J("ngIf",3==(null==n.items?null:n.items.TrangThai)),t.xp6(3),t.Q6J("ngIf",n.searchText.length>0),t.xp6(1),t.Q6J("ngModel",n.searchText),t.xp6(2),t.AsE("B\u1ea2NG K\xca THANH TO\xc1N TI\u1ec0N \u0110I\u1ec6N M\u1eb6T TR\u1edcI S\u1ed0 ",null==n.items?null:n.items.TenBangKe," | ",t.lcZ(23,20,null==n.items?null:n.items.ThanhTienSauThue)," "),t.xp6(2),t.Q6J("@slideIn",void 0),t.xp6(7),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(5),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(13),t.Q6J("ngForOf",t.xi3(53,22,null==n.items?null:n.items.DanhSach,n.searchText)),t.xp6(6),t.hij("B\u1ea2NG K\xca THANH TO\xc1N TI\u1ec0N \u0110I\u1ec6N M\u1eb6T TR\u1edcI S\u1ed0 ",null==n.items?null:n.items.TenBangKe," "),t.xp6(32),t.Q6J("ngForOf",null==n.items?null:n.items.DanhSach),t.xp6(6),t.hij("T\u1ed5ng c\u1ed9ng: ",t.lcZ(97,25,null==n.items?null:n.items.ThanhTienSauThue),"vnd."),t.xp6(4),t.hij("B\u1eb1ng ch\u1eef: ",t.lcZ(101,27,null==n.items?null:n.items.ThanhTienSauThue),""))},directives:[I.lW,k.Hw,g.O5,O.gM,f.KE,f.R9,A.Nt,r.Fj,r.JJ,r.On,q.HP,g.sg,C.hl,C.nW,C.Mq],pipes:[T._2,T.Cf,g.JJ,g.i8,T.ID],styles:["span[_ngcontent-%COMP%]{text-align:center;display:block;border-bottom:dotted 1px}mat-form-field[_ngcontent-%COMP%]{padding:0!important}.mat-form-field-infix[_ngcontent-%COMP%]{width:100px!important}"],data:{animation:[b.Ym]}}),i})();var J=p(68042),$=p(21019),y=p(86087),S=p(87654),v=p(97012),kt=p(30358);function Dt(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"app-search-api",13),t.NdJ("data",function(o){return t.CHM(e),t.oxw().find(o)}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("api",e.api)}}function Et(i,l){1&i&&(t.TgZ(0,"th"),t._uU(1,"Tr\u1ea1ng th\xe1i"),t.qZA())}function qt(i,l){1&i&&(t.TgZ(0,"th"),t._uU(1,"L\u1ecbch s\u1eed c\u1eadp nh\u1eadt"),t.qZA())}function yt(i,l){1&i&&(t.TgZ(0,"th"),t._uU(1,"Th\xe0nh ti\u1ec1n sau thu\u1ebf"),t.qZA())}const vt=function(i,l,e,n,o){return{"bg-warning text-center":i,"bg-info text-center":l,"bg-secondary text-center":e,"bg-primary text-center":n,"bg-success text-center":o}};function Ut(i,l){if(1&i&&(t.TgZ(0,"td",25),t._uU(1),t.ALo(2,"enum"),t.ALo(3,"enum"),t.qZA()),2&i){const e=t.oxw().$implicit;t.s9C("routerLink",e._id),t.Q6J("ngClass",t.qbA(10,vt,0==e.TrangThai,1==e.TrangThai,2==e.TrangThai,3==e.TrangThai,4==e.TrangThai)),t.xp6(1),t.AsE("",t.xi3(2,4,e.TrangThai,"DMTTrangThaiHoSo"),">",t.xi3(3,7,e.TrangThai,"DMTTrangThaiHoSo"),"")}}function Mt(i,l){if(1&i&&(t.TgZ(0,"td",19),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.s9C("routerLink",e._id),t.xp6(1),t.Oqu(e.LichSuCapNhat)}}function Ht(i,l){if(1&i&&(t.TgZ(0,"td",22),t._uU(1),t.ALo(2,"numberPipe"),t.qZA()),2&i){const e=t.oxw().$implicit;t.s9C("routerLink",e._id),t.xp6(1),t.Oqu(t.lcZ(2,2,e.ThanhTienSauThue))}}function Jt(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"mat-icon",26),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw(2).onDelete(o)}),t._uU(1,"delete"),t.qZA()}}function St(i,l){if(1&i&&(t.TgZ(0,"tr")(1,"td",19),t._uU(2),t.qZA(),t.YNc(3,Ut,4,16,"td",20),t.YNc(4,Mt,2,2,"td",21),t.TgZ(5,"td",22),t._uU(6),t.ALo(7,"numberPipe"),t.qZA(),t.YNc(8,Ht,3,4,"td",23),t.TgZ(9,"td"),t.YNc(10,Jt,2,0,"mat-icon",24),t.qZA()()),2&i){const e=l.$implicit,n=t.oxw(2);t.xp6(1),t.s9C("routerLink",e._id),t.xp6(1),t.Oqu(e.TenBangKe),t.xp6(1),t.Q6J("Device",2),t.xp6(1),t.Q6J("Device",2),t.xp6(1),t.s9C("routerLink",e._id),t.xp6(1),t.Oqu(t.lcZ(7,8,e.TongPhatLen)),t.xp6(2),t.Q6J("Device",2),t.xp6(2),t.Q6J("ngIf",n.checkPer(4)&&e.TrangThai<1)}}function Bt(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"table",14)(1,"thead",15)(2,"tr")(3,"th"),t._uU(4,"T\xean b\u1ea3ng k\xea"),t.qZA(),t.YNc(5,Et,2,0,"th",16),t.YNc(6,qt,2,0,"th",16),t.TgZ(7,"th"),t._uU(8,"T\u1ed5ng ph\xe1t l\xean"),t.qZA(),t.YNc(9,yt,2,0,"th",16),t.TgZ(10,"th")(11,"mat-icon",17),t.NdJ("click",function(){return t.CHM(e),t.oxw().reload()}),t._uU(12,"cached"),t.qZA()()()(),t.TgZ(13,"tbody"),t.YNc(14,St,11,10,"tr",18),t.qZA()()}if(2&i){const e=t.oxw();t.Q6J("@slideIn",void 0),t.xp6(5),t.Q6J("Device",2),t.xp6(1),t.Q6J("Device",2),t.xp6(3),t.Q6J("Device",2),t.xp6(5),t.Q6J("ngForOf",e.filter.length>0?e.filter:e.items.slice(0,50))("ngForTrackBy",e.trackByFn)}}function wt(i,l){if(1&i&&t._UZ(0,"app-import-database",27),2&i){const e=t.oxw();t.Q6J("api",e.api)("global",e.global)("form",e.main)}}function Yt(i,l){if(1&i&&t._UZ(0,"app-export-ecxel",28),2&i){const e=t.oxw();t.Q6J("dataJson",e.items)}}function Kt(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",29),t.NdJ("click",function(){return t.CHM(e),t.oxw().resetDB()}),t._uU(1,"X\xf3a to\xe0n b\u1ed9 d\u1eef li\u1ec7u"),t.qZA()}}const Ft=function(){return[5,10,25,100]};let Qt=(()=>{class i{constructor(e,n,o){this.plus=e,this.fb=n,this.rtSv=o,this.main=this.fb.group({keyWord:[,[]],_id:[,[]],TenBangKe:[,[r.kI.required]],TrangThai:[,[r.kI.required]],LichSuCapNhat:[,[r.kI.required]],TongPhatLen:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],ThanhTienTruocThue:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],Thue:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],ThanhTienSauThue:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],DanhSach:[,[r.kI.required]]}),this.title="L\u1eadp b\u1ea3ng k\xea",this.global=!0,this.dbName="dien-luc",this.api="dmt-pay",this.db=null,this.userId=this.plus.userId,this.usr=this.plus.usr,this.items=[],this.selectedItem=null,this.filter=[],this.itemsPay=[],this.errors=[],this.startDay=new Date}ngOnInit(){this.plus.setTiTle(this.title),this.plus.IDB_InitDB(this.dbName).subscribe(e=>function(i,l,e,n){return new(e||(e=Promise))(function(a,s){function m(c){try{u(n.next(c))}catch(_){s(_)}}function h(c){try{u(n.throw(c))}catch(_){s(_)}}function u(c){c.done?a(c.value):function o(a){return a instanceof e?a:new e(function(s){s(a)})}(c.value).then(m,h)}u((n=n.apply(i,l||[])).next())})}(this,void 0,void 0,function*(){this.db=e,this.plus.updateRealtime(this.db,this.api,this.global),this.getMonth(this.startDay),this.plus.IDB_DB_CleanTrash(e,this.api),this.plus.updateAPi.subscribe(n=>{n&&this.getIDB()})}))}getIDB(){console.log("getIDB() "),this.filter=[],this.items=[],this.plus.IDB_DB_GetAllByIndexKey(this.db,this.api,"TrangThai","<",4).subscribe(e=>{this.items=e}),this.plus.IDB_DB_GetAllByIndexKey(this.db,this.api,"Nam","=",this.year).subscribe(e=>{const n=[];for(let o=0;o<e.length;o++){const a=e[o];4==a.TrangThai&&n.push(a)}this.chart=this.plus.generateChart(n,"KyThanhToan","ThanhTienSauThue")})}ngOnDestroy(){console.log("Destroy",this.api),this.plus.subs.unsubscribe(),this.rtSv.leaveRoom(this.api)}getMonth(e){this.startDay=e,this.month=d()(e).month()+1,this.year=d()(e).year(),console.log(`GetMOnth:  ${this.year}${this.month}`),this.getIDB()}onDelete(e){!confirm("B\u1ea1n mu\u1ed1n x\xf3a?")||(this.plus.load(),this.plus.httpDisable(this.api,e,this.global).then(o=>{this.reload()}))}chooseOpt(e,n,o,a=!1){this.main.controls[n].setValue(e[o]),a&&this.main.controls[n+"ID"].setValue(e._id)}closeModal(){this.main.reset()}search(e){this.filter=e}find(e){this.items=e}checkPer(e){return this.plus.checkPer(this.api,e)}patchForm(){this.main.reset({_id:" "})}reload(){return this.plus.reload(this.dbName+"/"+this.api)}goBack(){this.plus.goBack()}reset(){this.plus.loaded(),this.filter=[],this.getIDB(),this.main.reset({})}changePage(e){this.filter=this.items.slice(e.pageIndex*e.pageSize,(e.pageIndex+1)*e.pageSize)}ondragover(){document.getElementById("dropZone").setAttribute("drop-active","true")}trackByFn(e,n){return n}resetDB(){this.plus.resetDB(this.db,this.api)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(x.T),t.Y36(r.qu),t.Y36(Z.i))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-nlmt-list"]],decls:17,vars:15,consts:[[1,"container"],["id","add-btn","color","accent","mat-raised-button","","routerLink","/dien-luc/dmt-input"],["id","back-btn","mat-raised-button","","color","primary",3,"click"],[3,"api","data",4,"ngIf"],[1,"py-3"],[3,"startDay","month"],[1,"row"],["class","table table-hover",4,"ngIf"],[3,"length","pageSize","pageSizeOptions","page"],[3,"api","global","form",4,"ngIf"],[3,"dataJson",4,"ngIf"],[3,"id","label","arr","type"],["mat-button","","color","warn",3,"click",4,"ngIf"],[3,"api","data"],[1,"table","table-hover"],[1,"thead-inverse"],[4,"Device"],["color","primary",3,"click"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"routerLink"],[3,"routerLink","ngClass",4,"Device"],[3,"routerLink",4,"Device"],[1,"text-right",3,"routerLink"],["class","text-right",3,"routerLink",4,"Device"],["color","warn",3,"click",4,"ngIf"],[3,"routerLink","ngClass"],["color","warn",3,"click"],[3,"api","global","form"],[3,"dataJson"],["mat-button","","color","warn",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"button",1)(2,"mat-icon"),t._uU(3,"control_point"),t.qZA()(),t.TgZ(4,"button",2),t.NdJ("click",function(){return n.goBack()}),t.TgZ(5,"mat-icon"),t._uU(6,"undo"),t.qZA()(),t.YNc(7,Dt,1,1,"app-search-api",3),t.TgZ(8,"section",4)(9,"app-month-year",5),t.NdJ("month",function(a){return n.getMonth(a)}),t.qZA()(),t.TgZ(10,"div",6),t.YNc(11,Bt,15,6,"table",7),t.TgZ(12,"mat-paginator",8),t.NdJ("page",function(a){return n.changePage(a)}),t.qZA()(),t.YNc(13,wt,1,3,"app-import-database",9),t.YNc(14,Yt,1,1,"app-export-ecxel",10),t._UZ(15,"app-chart",11),t.qZA(),t.YNc(16,Kt,2,0,"button",12)),2&e&&(t.xp6(4),t.Q6J("@slideIn",void 0),t.xp6(3),t.Q6J("ngIf",n.checkPer(10)),t.xp6(2),t.Q6J("startDay",n.startDay),t.xp6(2),t.Q6J("ngIf",n.items.length+n.filter.length>0),t.xp6(1),t.Q6J("length",n.items.length)("pageSize",50)("pageSizeOptions",t.DdM(14,Ft)),t.xp6(1),t.Q6J("ngIf",n.checkPer(4)),t.xp6(1),t.Q6J("ngIf",n.checkPer(4)),t.xp6(1),t.Q6J("id","thu-chi")("label","Bi\u1ec3u \u0111\u1ed3 thanh to\xe1n theo th\xe1ng")("arr",n.chart)("type","bar"),t.xp6(1),t.Q6J("ngIf",n.checkPer(6)))},directives:[I.lW,N.rH,k.Hw,g.O5,J.W,$.k,q.HP,g.sg,g.mk,y.NW,S.y,v.t,kt.x],pipes:[T.zZ,T._2],styles:[""],data:{animation:[b.Ym]}}),i})(),Lt=(()=>{class i{constructor(){}generate(e){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var B=p(46936),Ot=p(77446),$t=p(51511),P=function(i,l,e,n){return new(e||(e=Promise))(function(a,s){function m(c){try{u(n.next(c))}catch(_){s(_)}}function h(c){try{u(n.throw(c))}catch(_){s(_)}}function u(c){c.done?a(c.value):function o(a){return a instanceof e?a:new e(function(s){s(a)})}(c.value).then(m,h)}u((n=n.apply(i,l||[])).next())})};function Pt(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",45),t.NdJ("click",function(){return t.CHM(e),t.oxw().reload()}),t.TgZ(1,"mat-icon"),t._uU(2,"undo"),t.qZA()()}2&i&&t.Q6J("@slideIn",void 0)}function Gt(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",46),t.NdJ("click",function(){return t.CHM(e),t.oxw().saveList()}),t._uU(1," L\u01b0u "),t.qZA()}2&i&&t.Q6J("@slideX",void 0)}function Rt(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",47),t.NdJ("click",function(){return t.CHM(e),t.oxw().sendMail()}),t.TgZ(1,"mat-icon"),t._uU(2,"email"),t.qZA()()}2&i&&t.Q6J("@slideX",void 0)}function Xt(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",48),t.NdJ("click",function(){return t.CHM(e),t.oxw().checkEmail()}),t.TgZ(1,"mat-icon"),t._uU(2,"move_to_inbox"),t.qZA()()}2&i&&t.Q6J("@slideX",void 0)}function zt(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",49),t.NdJ("click",function(){return t.CHM(e),t.oxw().updateQualified()}),t.TgZ(1,"mat-icon"),t._uU(2,"thumb_up"),t.qZA()()}2&i&&t.Q6J("@slideX",void 0)}function Wt(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",50),t.NdJ("click",function(){return t.CHM(e),t.oxw().report()}),t.TgZ(1,"mat-icon"),t._uU(2,"file_download"),t.qZA()()}2&i&&t.Q6J("@slideX",void 0)}function Vt(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",51),t.NdJ("click",function(){return t.CHM(e),t.oxw().complete()}),t.TgZ(1,"mat-icon"),t._uU(2,"send"),t.qZA()()}2&i&&t.Q6J("@slideX",void 0)}function jt(i,l){1&i&&(t.TgZ(0,"button",52)(1,"mat-icon"),t._uU(2,"receipt"),t.qZA()()),2&i&&t.Q6J("@slideX",void 0)}function te(i,l){1&i&&(t.TgZ(0,"h5",53),t._uU(1,"L\u1ed7i d\u1eef li\u1ec7u"),t.qZA())}function ee(i,l){if(1&i&&(t.TgZ(0,"h5",54),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij("DANH S\xc1CH THANH TO\xc1N TI\u1ec0N \u0110I\u1ec6N M\u1eb6T TR\u1edcI ",e.bangKe.length," KH")}}function ne(i,l){1&i&&(t.TgZ(0,"th"),t._uU(1,"L\u1ed7i"),t.qZA())}function ie(i,l){if(1&i&&(t.TgZ(0,"td",61),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.err)}}function oe(i,l){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",57)(4,"a",58),t._uU(5),t.qZA()(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td",59),t._uU(11),t.ALo(12,"numberPipe"),t.qZA(),t.TgZ(13,"td",59),t._uU(14),t.ALo(15,"numberPipe"),t.qZA(),t.YNc(16,ie,2,1,"td",60),t.qZA()),2&i){const e=l.$implicit,n=l.index,o=t.oxw(2);t.xp6(2),t.Oqu(n+1),t.xp6(2),t.s9C("routerLink",e._id),t.xp6(1),t.Oqu(e.MaKhachHang),t.xp6(2),t.Oqu(e.Email),t.xp6(2),t.Oqu(e.KhachHang),t.xp6(2),t.Oqu(t.lcZ(12,8,e.SanLuong)),t.xp6(3),t.Oqu(t.lcZ(15,10,e.TongTien)),t.xp6(2),t.Q6J("ngIf",2==o.step)}}function ae(i,l){if(1&i&&(t.TgZ(0,"table",55)(1,"thead")(2,"tr")(3,"th"),t._uU(4,"TT"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"M\xe3 Kh\xe1ch h\xe0ng"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Email"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Kh\xe1ch h\xe0ng"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"S\u1ea3n l\u01b0\u1ee3ng"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"T\u1ed5ng ti\u1ec1n"),t.qZA(),t.YNc(15,ne,2,0,"th",17),t.qZA()(),t.TgZ(16,"tbody"),t.YNc(17,oe,17,12,"tr",56),t.qZA()()),2&i){const e=t.oxw();t.xp6(15),t.Q6J("ngIf",2==e.step),t.xp6(2),t.Q6J("ngForOf",e.errors.length>0?e.errors:e.bangKe)}}function le(i,l){if(1&i&&(t.TgZ(0,"mat-option",62),t._uU(1),t.qZA()),2&i){const e=l.$implicit;t.Q6J("value",e.GiaTri),t.xp6(1),t.hij("",e.NoiDung," ")}}function re(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"mat-icon",65),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).searchText=""}),t._uU(1,"close"),t.qZA()}}function se(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"mat-form-field"),t.YNc(1,re,2,0,"mat-icon",63),t.TgZ(2,"input",64),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().searchText=o}),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.searchText.length>0),t.xp6(1),t.Q6J("ngModel",e.searchText)}}function ce(i,l){1&i&&(t.TgZ(0,"th"),t._uU(1,"G\u1eedi mail"),t.qZA())}function ue(i,l){1&i&&(t.TgZ(0,"th"),t._uU(1,"B\u1ea3ng k\xea"),t.qZA())}function pe(i,l){1&i&&(t.TgZ(0,"th"),t._uU(1,"Tr\u1ea1ng th\xe1i h\u1ed3 s\u01a1"),t.qZA())}const me=function(i){return{"bg-success text-center":i}};function he(i,l){if(1&i&&(t.TgZ(0,"td",73),t._uU(1),t.ALo(2,"enum"),t.qZA()),2&i){const e=t.oxw().$implicit;t.Q6J("ngClass",t.VKq(5,me,1==e.DaGuiMail)),t.xp6(1),t.Oqu(t.xi3(2,2,e.DaGuiMail,"TrangThaiEmail"))}}function _e(i,l){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.KyThanhToan)}}function de(i,l){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.TenBangKe)}}function ge(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"mat-icon",76),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw(2).onDelete(o)}),t._uU(1," delete"),t.qZA()}}const fe=function(i){return{"text-info":i}},Te=function(i,l,e,n,o){return{"bg-warning text-center":i,"bg-info text-center":l,"bg-secondary text-center":e,"bg-primary text-center":n,"bg-success text-center":o}};function be(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"td")(2,"mat-checkbox",72),t.NdJ("change",function(o){const s=t.CHM(e).$implicit;return t.oxw(2).checkItem(o,s)}),t.qZA()(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td")(6,"a",58),t._uU(7),t.qZA()(),t.TgZ(8,"td",73),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.ALo(12,"number"),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.ALo(15,"number"),t.qZA(),t.YNc(16,he,3,7,"td",74),t.YNc(17,_e,2,1,"td",69),t.YNc(18,de,2,1,"td",69),t.TgZ(19,"td",73),t._uU(20),t.ALo(21,"enum"),t.qZA(),t.TgZ(22,"td"),t.YNc(23,ge,2,0,"mat-icon",75),t.qZA()()}if(2&i){const e=l.$implicit,n=l.index,o=t.oxw(2);t.xp6(2),t.Q6J("hidden",e.TrangThaiHoSo>1)("checked",o.selectedItems.indexOf(e)>-1),t.xp6(2),t.Oqu(n+1),t.xp6(2),t.s9C("routerLink",e._id),t.xp6(1),t.Oqu(e.MaKhachHang),t.xp6(1),t.Q6J("ngClass",t.VKq(22,fe,0==e.CoHoaDon)),t.xp6(1),t.Oqu(e.KhachHang),t.xp6(2),t.Oqu(t.lcZ(12,15,e.SanLuong)),t.xp6(3),t.Oqu(t.lcZ(15,17,e.TongTien)),t.xp6(2),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(1),t.Q6J("ngClass",t.qbA(24,Te,0==e.TrangThaiHoSo,1==e.TrangThaiHoSo,2==e.TrangThaiHoSo,3==e.TrangThaiHoSo,4==e.TrangThaiHoSo)),t.xp6(1),t.Oqu(t.xi3(21,19,e.TrangThaiHoSo,"DMTTrangThaiHoSo")),t.xp6(3),t.Q6J("ngIf",o.checkPer(2)&&e.TrangThaiHoSo<2||o.checkPer(7))}}function xe(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"table",66)(1,"thead",67)(2,"tr")(3,"th")(4,"mat-checkbox",68),t.NdJ("change",function(o){return t.CHM(e),t.oxw().checkAll(o)}),t.qZA()(),t.TgZ(5,"th"),t._uU(6,"TT"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"M\xe3 kh\xe1ch h\xe0ng"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Kh\xe1ch h\xe0ng"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"S\u1ea3n l\u01b0\u1ee3ng"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"T\u1ed5ng ti\u1ec1n"),t.qZA(),t.YNc(15,ce,2,0,"th",69),t.TgZ(16,"th"),t._uU(17,"K\u1ef3 thanh to\xe1n"),t.qZA(),t.YNc(18,ue,2,0,"th",69),t.YNc(19,pe,2,0,"th",69),t.TgZ(20,"th")(21,"mat-icon",70),t.NdJ("click",function(){return t.CHM(e),t.oxw().reload()}),t._uU(22,"cached"),t.qZA()()()(),t.TgZ(23,"tbody"),t.YNc(24,be,24,30,"tr",71),t.ALo(25,"filter"),t.qZA()()}if(2&i){const e=t.oxw();t.Q6J("@slideIn",void 0),t.xp6(4),t.Q6J("checked",e.all),t.xp6(11),t.Q6J("Device",3),t.xp6(3),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(5),t.Q6J("ngForOf",t.xi3(25,7,e.filter.length>0?e.filter:e.items,e.searchText))("ngForTrackBy",e.trackByFn)}}const Ze=function(){return[20,50,100,500]};function Ne(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"mat-paginator",77),t.NdJ("page",function(o){return t.CHM(e),t.oxw().changePage(o)}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("length",e.items.length)("pageSize",500)("pageSizeOptions",t.DdM(3,Ze))}}function Ce(i,l){if(1&i&&t._UZ(0,"app-import-database",78),2&i){const e=t.oxw();t.Q6J("api",e.api)("global",e.global)("form",e.bangKeForm)}}function Ie(i,l){if(1&i&&t._UZ(0,"app-export-ecxel",79),2&i){const e=t.oxw();t.Q6J("dataJson",e.items)}}function ke(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",80),t.NdJ("click",function(){return t.CHM(e),t.oxw().resetDB()}),t._uU(1,"X\xf3a to\xe0n b\u1ed9 d\u1eef li\u1ec7u"),t.qZA()}}function Ae(i,l){1&i&&t._UZ(0,"section",81)}function De(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"app-drop-files",82),t.NdJ("files",function(o){return t.CHM(e),t.oxw().onDropFile(o)})("ondragover",function(){return t.CHM(e),t.oxw().ondragover()}),t.qZA()}2&i&&t.Q6J("label","")}function Ee(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"div",28)(1,"div",83)(2,"button",84),t.NdJ("click",function(){return t.CHM(e),t.oxw().pre()}),t._UZ(3,"i",85),t.qZA(),t.TgZ(4,"button",86),t.NdJ("click",function(){return t.CHM(e),t.oxw().next()}),t._UZ(5,"i",87),t.qZA()(),t.TgZ(6,"div",88)(7,"h5",89),t._uU(8),t.qZA(),t._UZ(9,"div",90),t.qZA(),t._UZ(10,"hr"),t.qZA()}if(2&i){const e=t.oxw();t.xp6(8),t.Oqu(e.emails[e.i].title),t.xp6(1),t.Q6J("innerHTML",e.emails[e.i].message,t.oJD)}}let qe=(()=>{class i{constructor(e,n,o,a,s,m,h){this.plus=e,this.fb=n,this.rtSv=o,this.excelSv=a,this.docxSv=s,this.nlmtSv=m,this.xlsxTem=h,this.importForm=this.fb.group({keyWord:[,[]],_id:[,[]],TONG_TIEN:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],MA_DVIQLY:[,[]],TKHOAN_KHANG:[,[]],MA_NHANG:[,[]],TEN_NHANG:[,[]],MA_SOGCS:[,[r.kI.required]],TYLE_THUE:[,[]],DIEN_TTHU:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],SO_TIEN:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],DCHI_KHANG:[,[]],MA_KHANG:[,[r.kI.required,r.kI.minLength(10)]],TIEN_GTGT:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],TEN_KHANG:[,[r.kI.required]],NGAY_GCS:[,[]],DON_GIA:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]]}),this.bangKeForm=this.fb.group({Email:[],MaKhachHang:[,[r.kI.required]],KhachHang:[,[r.kI.required]],DiaChi:[,[r.kI.required]],MaGCS:[,],ChuTaiKhoan:[],SoTaiKhoan:[],NganHang:[,[r.kI.required]],Nam:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],Thang:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],SanLuong:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],DonGia:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],TruocThue:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],Thue:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],TongTien:[,[r.kI.required,r.kI.pattern("^[0-9]*$")]],KyHieuHoaDon:[,[]],SoHoaDon:[,[]],CCCD:[,[]],NgayHoaDon:[,[]],TrangThai:[,],DaGuiMail:[0],NgayMuaHang:[,[]]}),this.searchText="",this.title="L\u1eadp b\u1ea3ng k\xea",this.global=!0,this.dbName="dien-luc",this.api="dmt-input",this.db=null,this.userId=this.plus.userId,this.usr=this.plus.usr,this.items=[],this.selectedItem=null,this.selectedItems=[],this.filter=[],this.chart=[],this.errors=[],this.dataInXls={},this.wordFile=null,this.emails=[],this.i=0,this.startDay=new Date,this.bangKe=[],this.readFileDone=!1,this.step=0,this.TongPhatLen=0,this.ThanhTienTruocThue=0,this.Thue=0,this.ThanhTienSauThue=0,this.itemsReport=[],this.itemsReportNoBill=[],this.all=!1,this.statusNumber=1}ngOnInit(){this.plus.setTiTle(this.title),this.plus.IDB_InitDB(this.dbName).subscribe(e=>P(this,void 0,void 0,function*(){this.db=e,this.plus.updateRealtime(this.db,this.api,this.global),this.getMonth(this.startDay),this.plus.IDB_DB_CleanTrash(e,this.api),this.plus.updateAPi.subscribe(n=>{n&&this.getIDB(1)})}))}getIDB(e){console.log(e),this.filter=[],this.items=[],this.selectedItems=[],this.plus.IDB_DB_GetAllByIndexKey(this.db,this.api,"TrangThaiHoSo","<=",e).subscribe(n=>{this.items=n})}xlsx(){this.xlsxTem.generate("t1")}ngOnDestroy(){console.log("Destroy",this.api),this.plus.subs.unsubscribe(),this.rtSv.leaveRoom(this.api)}saveList(){const e=this.bangKe;console.log(e),this.plus.httpPost(this.api+"/import",e,this.global).subscribe(n=>{console.log(n),this.reload()})}convertToList(){let e=[];this.plus.IDB_DB_GetAll(this.db,this.api).subscribe(a=>{e=a}),console.log("convertToList()");const n=this.dataInXls.data,o=Date.now();for(let a=0;a<n.length;a++){const s=n[a];if(this.importForm.patchValue(s),this.importForm.invalid)this.plus.alertError("Ki\u1ec3m tra l\u1ea1i d\u1eef li\u1ec7u file import");else{const m={MaKhachHang:s.MA_KHANG,MaGCS:s.MA_SOGCS,Nam:+d()(s.NGAY_GCS,"DD/MM/YYYY").format("YYYY"),Thang:+d()(s.NGAY_GCS,"DD/MM/YYYY").format("MM"),SanLuong:+s.DIEN_TTHU,DonGia:+s.DON_GIA,TruocThue:+s.SO_TIEN,NgayMuaHang:s.NGAY_GCS,TiLeThue:+s.TYLE_THUE,Thue:+s.TIEN_GTGT,TongTien:+s.TONG_TIEN,KyThanhToan:d()(s.NGAY_GCS,"DD/MM/YYYY").format("MM/YYYY"),DaGuiMail:0,TrangThaiThanhToan:0,dateModify:o+a};this.plus.IDB_DB_GetAllByIndexKey(this.db,"dmt-khach-hang","MaKhachHang","=",s.MA_KHANG).subscribe(h=>{const u=h[0];if(0==h.length)return this.plus.alertMatSnackBar(`B\u1ea1n ch\u01b0a c\xf3 d\u1eef li\u1ec7u kh\xe1ch h\xe0ng ${s.MA_KHANG}`,5e3);console.log(u,m);const c=Object.assign(u,m);if(delete c.__v,delete c._id,c.TrangThaiHoSo=0==c.CoHoaDon?1:-1,this.bangKeForm.patchValue(c),this.bangKeForm.invalid){console.log("bangKeForm.invalid");const _=this.plus.getErrValidateForm(this.bangKeForm);c.err=_,this.errors.push(c),this.step=2}else{console.log(c);let _=!1;for(let U=0;U<e.length;U++){const w=e[U];w.MaKhachHang==c.MaKhachHang&&w.Nam==c.Nam&&w.Thang==c.Thang&&(_=!0)}_?confirm(`${c.MaKhachHang} - ${c.KhachHang} \u0111\xe3 t\u1ed3n t\u1ea1i!\n B\u1ea1n c\xf3 mu\u1ed1n th\xeam v\xe0o danh s\xe1ch?`)&&this.bangKe.push(c):this.bangKe.push(c)}})}}this.step=this.errors.length>0?2:3}onDropFile(e){console.log("onDropFile()"),this.reset();for(let n=0;n<e.length;n++)if("application/vnd.openxmlformats-officedocument.wordprocessingml.document"==e[n].type){const o=new FileReader;o.readAsArrayBuffer(e[n]),o.onloadend=()=>this.wordFile=o.result}else"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"==e[n].type?this.excelSv.toJsonArray(e[n],!1).then(o=>{this.dataInXls=o,this.convertToList()}):this.plus.alertError("File kh\xf4ng h\u1ee3p l\u1ec7")}checkEmail(){const e=this.itemsReport.concat(this.itemsReportNoBill);for(let n=0;n<e.length;n++){let a=this.nlmtSv.geneBodyMail(e[n],this.startDay,1);this.emails.push(a)}}sendMail(){return P(this,void 0,void 0,function*(){console.info("sendMail()"),this.plus.clickBtn("closeModalEmail");const e=this.itemsReport.concat(this.itemsReportNoBill);for(let n=0;n<e.length;n++){const o=e[n],a=this.items.indexOf(o),s=this.items[a];if(0==o.DaGuiMail&&o.Email.length>5){let m=this.nlmtSv.geneBodyMail(s,this.startDay,1);this.plus.load(),this.plus.httpPost("mail/dien-mat-troi",m).subscribe(h=>{const u=h.index;console.log("Mail sent: ",u,h.email),u>=0&&h.email?(this.plus.loaded(),this.items[a].DaGuiMail=1,this.nlmtSv.statusMail(s)):(this.items[a].DaGuiMail=0,this.plus.alertToasrt(h))}),yield this.plus.sleep(4e3)}}this.reload()})}reporUnqualified(){let e=[],n=[];for(let o=0;o<this.items.length;o++){const a=this.items[o];0==a.TrangThaiThanhToan&&(1==a.TrangThaiHoSo&&a.Thang==this.month&&a.Nam==this.year&&n.push(a),a.TrangThaiHoSo<1&&a.Thang==this.month&&a.Nam==this.year&&e.push(a))}if(console.log(e,n),e.length>0){const o=this.nlmtSv.geneBodyPay(e,this.startDay);o.DanhSach.map((a,s)=>a.TT=s+1),this.nlmtSv.download(o,"ChuaDuDieuKien")}if(n.length>0){const o=this.nlmtSv.geneBodyPay(n,this.startDay);o.DanhSach.map((a,s)=>a.TT=s+1),this.nlmtSv.download(o,"DuDieuKien")}}updateQualified(){this.nlmtSv.updateQualified(this.selectedItems)}report(){}complete(){if(this.itemsReport.length>0){const e=d()(this.startDay).format("YYMMDDHHmm");this.nlmtSv.updateNameBill(this.itemsReport,e)}if(this.itemsReportNoBill.length>0){const e=d()(this.startDay).format("YYMMDDHHmm");this.nlmtSv.updateNameBill(this.itemsReportNoBill,e)}}showUnpaid(){this.items=this.items.filter(e=>e.TrangThaiHoSo<1)}checkItem(e,n){const o=this.itemsReport.indexOf(n),a=this.itemsReportNoBill.indexOf(n),s=this.selectedItems.indexOf(n);e.checked?(this.isHasBill(n),n.TrangThaiHoSo=1):(this.all=!1,n.TrangThaiHoSo=-1,o>0?this.itemsReport.splice(o,1):this.itemsReportNoBill.splice(a,1),this.selectedItems.splice(s,1))}checkAll(e){if(e.checked){this.all=!0;for(let n=0;n<this.items.length;n++){const o=this.items[n];o.TrangThaiHoSo<2&&(this.items[n].TrangThaiHoSo=1,this.isHasBill(o))}}else this.all=!1,this.itemsReport=[],this.itemsReportNoBill=[],this.selectedItems=[]}isHasBill(e){0==e.CoHoaDon?this.itemsReportNoBill.push(e):this.itemsReport.push(e),this.selectedItems.push(e)}ondragover(){document.getElementById("dropZone").setAttribute("drop-active","true")}getMonth(e){this.startDay=e,this.itemsReport=[],this.month=d()(e).month()+1,this.year=d()(e).year(),console.log(`GetMonth:  ${this.year}, ${this.month}`)}onEdit(e){}onDelete(e){if(confirm("B\u1ea1n mu\u1ed1n x\xf3a?")){if(1==e.TrangThaiHoSo)return this.plus.alertWarning("B\u1ea1n kh\xf4ng th\u1ec3 x\xf3a khi \u0111\xe3 g\u1eedi b\u1ea3ng k\xea");this.plus.load(),this.plus.httpDisable(this.api,e,this.global).then(o=>{this.reload()})}}search(e){this.items=e}find(e){this.items=e}checkPer(e){return this.plus.checkPer(this.api,e)}reload(){return this.plus.reload(this.dbName+"/"+this.api)}reset(){console.log("reset()"),this.plus.loaded(),this.filter=[],this.errors=[],this.selectedItems=[],this.plus.clickBtn("closeImportButton")}changePage(e){this.filter=this.items.slice(e.pageIndex*e.pageSize,(e.pageIndex+1)*e.pageSize)}trackByFn(e,n){return n}resetDB(){this.plus.resetDB(this.db,this.api),this.reload()}pre(){this.i>0?this.i--:this.i=0}next(){this.i<this.emails.length-1?this.i++:this.i=1}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(x.T),t.Y36(r.qu),t.Y36(Z.i),t.Y36(L.x),t.Y36(K.E),t.Y36(Q),t.Y36(Lt))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-nlmt-input"]],decls:75,vars:26,consts:[[1,"container-fluid"],["id","back-btn","mat-raised-button","","color","primary",3,"click",4,"ngIf"],[3,"db","api","filter"],[1,"row"],["color","accent","mat-raised-button","","data-toggle","modal","data-target","#modalImport"],["mat-raised-button","","color","warn",3,"click",4,"ngIf"],["mat-raised-button","","color","warn","matTooltip","G\u1eedi mail",3,"click",4,"ngIf"],["mat-raised-button","","color","primary","data-toggle","modal","data-target","#modalEmail","matTooltip","Xem tr\u01b0\u1edbc email",3,"click",4,"ngIf"],["mat-raised-button","","color","primary","matTooltip","KH \u0111\u1ee7 \u0110K",3,"click",4,"ngIf"],["mat-raised-button","","color","accent","matTooltip","Xu\u1ea5t B\u1ea3ng k\xea",3,"click",4,"ngIf"],["mat-raised-button","","color","warn","matTooltip","G\u1eedi b\u1ea3ng k\xea",3,"click",4,"ngIf"],["mat-raised-button","","data-toggle","modal","data-target","#unqualified","matTooltip","B\u1ea3ng k\xea t\u1ed3n",4,"ngIf"],["class","tit bg-warning",4,"ngIf"],["class","tit",4,"ngIf"],["class","table",4,"ngIf"],[3,"selectionChange"],["selected","",3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["class","table table-hover",4,"ngIf"],[3,"length","pageSize","pageSizeOptions","page",4,"ngIf"],[3,"api","global","form",4,"ngIf"],[3,"dataJson",4,"ngIf"],["mat-button","","color","warn",3,"click",4,"ngIf"],["id","modalImport","tabindex","-1","role","dialog","aria-labelledby","modelTitleId","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content"],["type","button","id","closeImportButton","data-dismiss","modal","aria-label","Close",1,"close","text-danger"],["aria-hidden","true"],[1,"modal-body"],["class","py-3",4,"ngIf"],[1,"drop"],[3,"label","files","ondragover",4,"ngIf"],["type","button","hidden","","data-toggle","modal","data-target","#unqualified",1,"btn","btn-primary","btn-lg"],["id","unqualified","tabindex","-1","role","dialog","aria-labelledby","modelTitleId","aria-hidden","true",1,"modal","fade"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],[3,"startDay","month"],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"click"],["type","button","hidden","","data-toggle","modal","data-target","#modalEmail",1,"btn","btn-primary","btn-lg"],["id","modalEmail","tabindex","-1","role","dialog","aria-labelledby","modelTitleId","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-lg"],["class","modal-body",4,"ngIf"],["type","button","id","closeModalEmail","data-dismiss","modal",1,"btn","btn-secondary"],["id","back-btn","mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","warn","matTooltip","G\u1eedi mail",3,"click"],["mat-raised-button","","color","primary","data-toggle","modal","data-target","#modalEmail","matTooltip","Xem tr\u01b0\u1edbc email",3,"click"],["mat-raised-button","","color","primary","matTooltip","KH \u0111\u1ee7 \u0110K",3,"click"],["mat-raised-button","","color","accent","matTooltip","Xu\u1ea5t B\u1ea3ng k\xea",3,"click"],["mat-raised-button","","color","warn","matTooltip","G\u1eedi b\u1ea3ng k\xea",3,"click"],["mat-raised-button","","data-toggle","modal","data-target","#unqualified","matTooltip","B\u1ea3ng k\xea t\u1ed3n"],[1,"tit","bg-warning"],[1,"tit"],[1,"table"],[4,"ngFor","ngForOf"],["scope","row"],[3,"routerLink"],[1,"text-right"],["class","bg-danger",4,"ngIf"],[1,"bg-danger"],["selected","",3,"value"],["matSuffix","","color","warn",3,"click",4,"ngIf"],["matInput","","id","search-api","placeholder","T\xecm ki\u1ebfm nhanh (F2)","value","value",3,"ngModel","ngModelChange"],["matSuffix","","color","warn",3,"click"],[1,"table","table-hover"],[1,"thead-inverse"],["color","warn",3,"checked","change"],[4,"Device"],["color","primary",3,"click"],[4,"ngFor","ngForOf","ngForTrackBy"],["color","primary",3,"hidden","checked","change"],[3,"ngClass"],[3,"ngClass",4,"Device"],["color","warn",3,"click",4,"ngIf"],["color","warn",3,"click"],[3,"length","pageSize","pageSizeOptions","page"],[3,"api","global","form"],[3,"dataJson"],["mat-button","","color","warn",3,"click"],[1,"py-3"],[3,"label","files","ondragover"],[1,"button"],["type","button",1,"btn","btn-danger","float-left",3,"click"],["aria-hidden","true",1,"fa","fa-arrow-left"],["type","button",1,"btn","btn-danger","float-right",3,"click"],["aria-hidden","true",1,"fa","fa-arrow-right"],[1,"card-body"],[1,"text-center","rounded","font-weigth-bold","bg-warning","py-2"],[3,"innerHTML"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.YNc(1,Pt,3,1,"button",1),t.TgZ(2,"app-search-table",2),t.NdJ("filter",function(a){return n.search(a)}),t.qZA(),t.TgZ(3,"div",3)(4,"button",4)(5,"mat-icon"),t._uU(6,"control_point"),t.qZA()(),t.YNc(7,Gt,2,1,"button",5),t.YNc(8,Rt,3,1,"button",6),t.YNc(9,Xt,3,1,"button",7),t.YNc(10,zt,3,1,"button",8),t.YNc(11,Wt,3,1,"button",9),t.YNc(12,Vt,3,1,"button",10),t.YNc(13,jt,3,1,"button",11),t.qZA(),t.YNc(14,te,2,0,"h5",12),t.YNc(15,ee,2,1,"h5",13),t.YNc(16,ae,18,2,"table",14),t.TgZ(17,"mat-form-field")(18,"mat-label"),t._uU(19,"Ch\u1ecdn tr\u1ea1ng th\xe1i c\u1ea7n xem"),t.qZA(),t.TgZ(20,"mat-select",15),t.NdJ("selectionChange",function(a){return n.getIDB(a.value)}),t.YNc(21,le,2,2,"mat-option",16),t.ALo(22,"catalog"),t.qZA()(),t.TgZ(23,"div",3),t.YNc(24,se,3,2,"mat-form-field",17),t.YNc(25,xe,26,10,"table",18),t.YNc(26,Ne,1,4,"mat-paginator",19),t.qZA(),t.YNc(27,Ce,1,3,"app-import-database",20),t.YNc(28,Ie,1,1,"app-export-ecxel",21),t.YNc(29,ke,2,0,"button",22),t.qZA(),t.TgZ(30,"div",23)(31,"div",24)(32,"div",25)(33,"button",26)(34,"span",27),t._uU(35,"\xd7"),t.qZA()(),t.TgZ(36,"div",28),t.YNc(37,Ae,1,0,"section",29),t.TgZ(38,"div",30),t.YNc(39,De,1,1,"app-drop-files",31),t.qZA()()()()(),t.TgZ(40,"button",32),t._uU(41," Launch demo modal\n"),t.qZA(),t.TgZ(42,"div",33)(43,"div",24)(44,"div",25)(45,"div",34)(46,"h5",35),t._uU(47,"Ch\u1ecdn k\u1ef3 b\xe1o c\xe1o"),t.qZA(),t.TgZ(48,"button",36)(49,"span",27),t._uU(50,"\xd7"),t.qZA()()(),t.TgZ(51,"div",28)(52,"app-month-year",37),t.NdJ("month",function(a){return n.getMonth(a)}),t.qZA()(),t.TgZ(53,"div",38)(54,"button",39),t.NdJ("click",function(){return n.reporUnqualified()}),t._uU(55,"Xem"),t.qZA()()()()(),t.TgZ(56,"button",40),t._uU(57," Launch demo modal email\n"),t.qZA(),t.TgZ(58,"div",41)(59,"div",42)(60,"div",25)(61,"div",34)(62,"h5",35),t._uU(63,"Xem tr\u01b0\u1edbc email"),t.qZA(),t.TgZ(64,"button",36)(65,"span",27),t._uU(66,"\xd7"),t.qZA()()(),t.YNc(67,Ee,11,2,"div",43),t.TgZ(68,"div",38)(69,"button",44)(70,"mat-icon"),t._uU(71,"close"),t.qZA()(),t.TgZ(72,"button",39),t.NdJ("click",function(){return n.sendMail()}),t.TgZ(73,"mat-icon"),t._uU(74,"email"),t.qZA()()()()()()),2&e&&(t.xp6(1),t.Q6J("ngIf",n.step>1),t.xp6(1),t.Q6J("db",n.db)("api",n.api),t.xp6(5),t.Q6J("ngIf",n.bangKe.length>0&&0==n.errors.length),t.xp6(1),t.Q6J("ngIf",n.emails.length>0),t.xp6(1),t.Q6J("ngIf",n.selectedItems.length>0),t.xp6(1),t.Q6J("ngIf",n.items.length>0),t.xp6(1),t.Q6J("ngIf",n.selectedItems.length>0),t.xp6(1),t.Q6J("ngIf",n.selectedItems.length>0),t.xp6(1),t.Q6J("ngIf",n.items.length>0),t.xp6(1),t.Q6J("ngIf",2==n.step),t.xp6(1),t.Q6J("ngIf",1==n.step),t.xp6(1),t.Q6J("ngIf",n.step>1),t.xp6(5),t.Q6J("ngForOf",t.lcZ(22,24,"DMTTrangThaiHoSo")),t.xp6(3),t.Q6J("ngIf",n.items.length+n.filter.length>0&&0==n.errors.length),t.xp6(1),t.Q6J("ngIf",n.items.length+n.filter.length>0&&0==n.errors.length),t.xp6(1),t.Q6J("ngIf",n.items.length+n.filter.length>0),t.xp6(1),t.Q6J("ngIf",n.checkPer(4)),t.xp6(1),t.Q6J("ngIf",n.checkPer(4)),t.xp6(1),t.Q6J("ngIf",n.checkPer(6)),t.xp6(8),t.Q6J("ngIf",0==n.step),t.xp6(2),t.Q6J("ngIf",0==n.bangKe.length||!n.wordFile),t.xp6(13),t.Q6J("startDay",n.startDay),t.xp6(15),t.Q6J("ngIf",n.emails.length>0))},directives:[g.O5,I.lW,k.Hw,B.D,O.gM,g.sg,N.yS,f.KE,f.hX,M.gD,H.ey,f.R9,A.Nt,r.Fj,r.JJ,r.On,Ot.oG,q.HP,g.mk,y.NW,S.y,v.t,$t.k,$.k],pipes:[T._2,T.pW,T.Cf,g.JJ,T.zZ],styles:[""],data:{animation:[b.Ym,b.Mq]}}),i})();function ve(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",10),t.NdJ("click",function(){return t.CHM(e),t.oxw().reload()}),t.TgZ(1,"mat-icon"),t._uU(2,"undo"),t.qZA()()}2&i&&t.Q6J("@slideIn",void 0)}function Ue(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"app-search-api",11),t.NdJ("data",function(o){return t.CHM(e),t.oxw().find(o)}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("api",e.api)}}function Me(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"mat-icon",18),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw(2).onDelete(o)}),t._uU(1,"delete"),t.qZA()}}function He(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"td",16),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw(2).onEdit(a)}),t._uU(2),t.qZA(),t.TgZ(3,"td",16),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw(2).onEdit(a)}),t._uU(4),t.qZA(),t.TgZ(5,"td",16),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw(2).onEdit(a)}),t._uU(6),t.ALo(7,"date"),t.qZA(),t.TgZ(8,"td",16),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw(2).onEdit(a)}),t._uU(9),t.qZA(),t.TgZ(10,"td"),t.YNc(11,Me,2,0,"mat-icon",17),t.qZA()()}if(2&i){const e=l.$implicit,n=t.oxw(2);t.xp6(2),t.Oqu(e.TaiKhoan),t.xp6(2),t.Oqu(e.NoiDung),t.xp6(2),t.Oqu(t.xi3(7,5,e.ThoiGian,"dd/MM/YYYY HH:mm")),t.xp6(3),t.Oqu(e.MaKhachHang),t.xp6(2),t.Q6J("ngIf",n.checkPer(4))}}function Je(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"table",12)(1,"thead",13)(2,"tr")(3,"th"),t._uU(4,"T\xe0i kho\u1ea3n"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"N\u1ed9i dung thay \u0111\u1ed5i"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Th\u1eddi gian"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"M\xe3 kh\xe1ch h\xe0ng"),t.qZA(),t.TgZ(11,"th")(12,"mat-icon",14),t.NdJ("click",function(){return t.CHM(e),t.oxw().reload()}),t._uU(13,"cached"),t.qZA()()()(),t.TgZ(14,"tbody"),t.YNc(15,He,12,8,"tr",15),t.qZA()()}if(2&i){const e=t.oxw();t.Q6J("@slideIn",void 0),t.xp6(15),t.Q6J("ngForOf",e.filter.length>0?e.filter:e.items.slice(0,10))("ngForTrackBy",e.trackByFn)}}function Se(i,l){if(1&i&&t._UZ(0,"app-export-ecxel",19),2&i){const e=t.oxw();t.Q6J("dataJson",e.items)}}function Be(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",20),t.NdJ("click",function(){return t.CHM(e),t.oxw().resetDB()}),t._uU(1,"X\xf3a to\xe0n b\u1ed9 d\u1eef li\u1ec7u"),t.qZA()}}const we=function(){return[5,10,25,100]};let Ye=(()=>{class i{constructor(e,n,o){this.plus=e,this.fb=n,this.rtSv=o,this.title="L\u1ecbch s\u1eed c\u1eadp nh\u1eadt",this.dbName="dien-luc",this.api="dmt-history",this.db=null,this.items=[],this.selectedItem=null,this.filter=[],this.global=!0,this.chart=[],this.main=this.fb.group({keyWord:[,[]],_id:[,[]],TaiKhoan:[,[r.kI.required]],NoiDung:[,[r.kI.required]],ThoiGian:[,[r.kI.required]],MaKhachHang:[,[r.kI.required]]})}ngOnInit(){this.plus.setTiTle(this.title),this.plus.IDB_InitDB(this.dbName).subscribe(e=>function(i,l,e,n){return new(e||(e=Promise))(function(a,s){function m(c){try{u(n.next(c))}catch(_){s(_)}}function h(c){try{u(n.throw(c))}catch(_){s(_)}}function u(c){c.done?a(c.value):function o(a){return a instanceof e?a:new e(function(s){s(a)})}(c.value).then(m,h)}u((n=n.apply(i,l||[])).next())})}(this,void 0,void 0,function*(){this.db=e,this.plus.updateRealtime(this.db,this.api,this.global),this.plus.IDB_DB_CleanTrash(e,this.api),this.plus.updateAPi.subscribe(n=>{n&&this.getIDB()})}))}getIDB(){this.filter=[],this.plus.IDB_DB_GetAll(this.db,this.api).subscribe(e=>{this.items=e})}ngOnDestroy(){console.log("Destroy",this.api),this.plus.subs.unsubscribe(),this.rtSv.leaveRoom(this.api)}save(){if(this.main.invalid)return;const e=this.main.value,n=this.plus.datetoNumObj(this.main.value,["ThoiGian"]);console.log(n),null==e._id?(delete e._id,this.plus.httpPost(this.api,n).subscribe(o=>{o.status&&this.plus.clickBtn("closeModal")})):this.plus.httpPut(this.api,n).subscribe(o=>{o.status&&this.plus.clickBtn("closeModal")})}onEdit(e){this.selectedItem=e;const n=this.plus.dateToHtmlObj(e,["ThoiGian"]);this.main.patchValue(n),this.plus.clickBtn("openModal")}onDelete(e){!confirm("B\u1ea1n mu\u1ed1n x\xf3a?")||(this.plus.load(),this.plus.httpDisable(this.api,e).then(o=>{console.log(o)}))}chooseOpt(e,n,o,a=!1){this.main.controls[n].setValue(e[o]),a&&this.main.controls[n+"ID"].setValue(e._id)}closeModal(){this.main.reset()}search(e){this.filter=e}find(e){this.items=e}checkPer(e){return this.plus.checkPer(this.api,e)}patchForm(){this.main.reset({_id:" "})}reload(){return this.plus.reload(this.dbName+"/"+this.api)}reset(){this.plus.loaded(),this.filter=[],this.getIDB(),this.main.reset({})}changePage(e){this.filter=this.items.slice(e.pageIndex*e.pageSize,(e.pageIndex+1)*e.pageSize)}trackByFn(e,n){return n}resetDB(){this.plus.resetDB(this.db,this.api)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(x.T),t.Y36(r.qu),t.Y36(Z.i))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-nlmt-history"]],decls:12,vars:11,consts:[[1,"container"],["id","add-btn","color","accent","mat-raised-button","","data-toggle","modal","data-target","#modelId",3,"click"],["id","back-btn","mat-raised-button","","color","primary",3,"click",4,"ngIf"],[3,"api","data",4,"ngIf"],[3,"db","api","filter"],[1,"row"],["class","table table-hover",4,"ngIf"],[3,"length","pageSize","pageSizeOptions","page"],[3,"dataJson",4,"ngIf"],["mat-button","","color","warn",3,"click",4,"ngIf"],["id","back-btn","mat-raised-button","","color","primary",3,"click"],[3,"api","data"],[1,"table","table-hover"],[1,"thead-inverse"],["color","primary",3,"click"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"click"],["color","warn",3,"click",4,"ngIf"],["color","warn",3,"click"],[3,"dataJson"],["mat-button","","color","warn",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"button",1),t.NdJ("click",function(){return n.reset()}),t.TgZ(2,"mat-icon"),t._uU(3,"control_point"),t.qZA()(),t.YNc(4,ve,3,1,"button",2),t.YNc(5,Ue,1,1,"app-search-api",3),t.TgZ(6,"app-search-table",4),t.NdJ("filter",function(a){return n.search(a)}),t.qZA(),t.TgZ(7,"div",5),t.YNc(8,Je,16,3,"table",6),t.TgZ(9,"mat-paginator",7),t.NdJ("page",function(a){return n.changePage(a)}),t.qZA()(),t.YNc(10,Se,1,1,"app-export-ecxel",8),t.qZA(),t.YNc(11,Be,2,0,"button",9)),2&e&&(t.xp6(4),t.Q6J("ngIf",n.filter.length>0),t.xp6(1),t.Q6J("ngIf",n.checkPer(10)),t.xp6(1),t.Q6J("db",n.db)("api",n.api),t.xp6(2),t.Q6J("ngIf",n.items.length+n.filter.length>0),t.xp6(1),t.Q6J("length",n.items.length)("pageSize",10)("pageSizeOptions",t.DdM(10,we)),t.xp6(1),t.Q6J("ngIf",n.checkPer(4)),t.xp6(1),t.Q6J("ngIf",n.checkPer(5)))},directives:[I.lW,k.Hw,g.O5,J.W,B.D,g.sg,y.NW,v.t],pipes:[g.uU],styles:[""],data:{animation:[b.Ym]}}),i})();function Fe(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",34),t.NdJ("click",function(){return t.CHM(e),t.oxw().reload()}),t.TgZ(1,"mat-icon"),t._uU(2,"undo"),t.qZA()()}2&i&&t.Q6J("@slideIn",void 0)}function Qe(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"app-search-api",35),t.NdJ("data",function(o){return t.CHM(e),t.oxw().find(o)}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("api",e.api)}}function Le(i,l){1&i&&(t.TgZ(0,"th"),t._uU(1,"\u0110\u1ecba ch\u1ec9"),t.qZA())}function Oe(i,l){1&i&&(t.TgZ(0,"th"),t._uU(1,"M\xe3 G C S"),t.qZA())}function $e(i,l){1&i&&(t.TgZ(0,"th"),t._uU(1,"Ch\u1ee7 t\xe0i kho\u1ea3n"),t.qZA())}function Pe(i,l){1&i&&(t.TgZ(0,"th"),t._uU(1,"S\u1ed1 t\xe0i kho\u1ea3n"),t.qZA())}function Ge(i,l){1&i&&(t.TgZ(0,"th"),t._uU(1,"Ng\xe2n h\xe0ng"),t.qZA())}function Re(i,l){1&i&&(t.TgZ(0,"th"),t._uU(1,"Email"),t.qZA())}function Xe(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"td",41),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw(2).onEdit(o)}),t._uU(1),t.qZA()}if(2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.DiaChi)}}function ze(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"td",41),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw(2).onEdit(o)}),t._uU(1),t.qZA()}if(2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.MaGCS)}}function We(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"td",41),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw(2).onEdit(o)}),t._uU(1),t.qZA()}if(2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.ChuTaiKhoan)}}function Ve(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"td",41),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw(2).onEdit(o)}),t._uU(1),t.qZA()}if(2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.SoTaiKhoan)}}function je(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"td",41),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw(2).onEdit(o)}),t._uU(1),t.qZA()}if(2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.NganHang)}}function tn(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"td",41),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw(2).onEdit(o)}),t._uU(1),t.qZA()}if(2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.Email)}}function en(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"mat-icon",44),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw(2).onDelete(o)}),t._uU(1,"delete"),t.qZA()}}function nn(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"td",41),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw(2).onEdit(a)}),t._uU(2),t.qZA(),t.TgZ(3,"td",41),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw(2).onEdit(a)}),t._uU(4),t.qZA(),t.YNc(5,Xe,2,1,"td",42),t.YNc(6,ze,2,1,"td",42),t.YNc(7,We,2,1,"td",42),t.YNc(8,Ve,2,1,"td",42),t.YNc(9,je,2,1,"td",42),t.YNc(10,tn,2,1,"td",42),t.TgZ(11,"td"),t.YNc(12,en,2,0,"mat-icon",43),t.qZA()()}if(2&i){const e=l.$implicit,n=t.oxw(2);t.xp6(2),t.Oqu(e.MaKhachHang),t.xp6(2),t.Oqu(e.KhachHang),t.xp6(1),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",2),t.xp6(2),t.Q6J("ngIf",n.checkPer(4))}}function on(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"table",36)(1,"thead",37)(2,"tr")(3,"th"),t._uU(4,"M\xe3 kh\xe1ch h\xe0ng"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Kh\xe1ch h\xe0ng"),t.qZA(),t.YNc(7,Le,2,0,"th",38),t.YNc(8,Oe,2,0,"th",38),t.YNc(9,$e,2,0,"th",38),t.YNc(10,Pe,2,0,"th",38),t.YNc(11,Ge,2,0,"th",38),t.YNc(12,Re,2,0,"th",38),t.TgZ(13,"th")(14,"mat-icon",39),t.NdJ("click",function(){return t.CHM(e),t.oxw().reload()}),t._uU(15,"cached"),t.qZA()()()(),t.TgZ(16,"tbody"),t.YNc(17,nn,13,9,"tr",40),t.qZA()()}if(2&i){const e=t.oxw();t.Q6J("@slideIn",void 0),t.xp6(7),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(5),t.Q6J("ngForOf",e.filter.length>0?e.filter:e.items.slice(0,10))("ngForTrackBy",e.trackByFn)}}function an(i,l){if(1&i&&t._UZ(0,"app-import-database",45),2&i){const e=t.oxw();t.Q6J("api",e.api)("global",e.global)("form",e.main)}}function ln(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",46),t.NdJ("click",function(){return t.CHM(e),t.oxw().resetDB()}),t._uU(1,"X\xf3a to\xe0n b\u1ed9 d\u1eef li\u1ec7u"),t.qZA()}}function rn(i,l){if(1&i&&(t.TgZ(0,"mat-option",47),t._uU(1),t.qZA()),2&i){const e=l.$implicit;t.Q6J("value",e.GiaTri),t.xp6(1),t.hij("",e.NoiDung," ")}}function sn(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",48),t.NdJ("click",function(){return t.CHM(e),t.oxw().save()}),t.TgZ(1,"mat-icon"),t._uU(2,"save"),t.qZA()()}2&i&&t.Q6J("@slideIn",void 0)}const cn=function(){return[5,10,25,100]},un=[{path:"",component:(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-dlxl"]],decls:2,vars:0,template:function(e,n){1&e&&(t.TgZ(0,"p"),t._uU(1,"dlxl works!"),t.qZA())},styles:[""]}),i})()},{path:"dmt-khach-hang",component:(()=>{class i{constructor(e,n,o){this.plus=e,this.fb=n,this.rtSv=o,this.main=this.fb.group({_id:[,[]],MaKhachHang:[,[r.kI.required,r.kI.minLength(5)]],KhachHang:[,[r.kI.required,r.kI.minLength(5)]],DiaChi:[,[r.kI.required,r.kI.minLength(5)]],MaGCS:[""],ChuTaiKhoan:[""],SoTaiKhoan:[""],NganHang:[""],Email:["",[r.kI.email]],CoHoaDon:[,[r.kI.required]],CCCD:[""]}),this.title="Kh\xe1ch h\xe0ng",this.dbName="dien-luc",this.global=!0,this.api="dmt-khach-hang",this.db=null,this.userId=this.plus.userId,this.usr=this.plus.usr,this.items=[],this.selectedItem=null,this.filter=[],this.chart=[]}ngOnInit(){this.plus.setTiTle(this.title),this.plus.IDB_InitDB(this.dbName).subscribe(e=>function(i,l,e,n){return new(e||(e=Promise))(function(a,s){function m(c){try{u(n.next(c))}catch(_){s(_)}}function h(c){try{u(n.throw(c))}catch(_){s(_)}}function u(c){c.done?a(c.value):function o(a){return a instanceof e?a:new e(function(s){s(a)})}(c.value).then(m,h)}u((n=n.apply(i,l||[])).next())})}(this,void 0,void 0,function*(){this.db=e,this.plus.updateRealtime(this.db,this.api,this.global),this.plus.IDB_DB_CleanTrash(e,this.api),this.plus.updateAPi.subscribe(n=>{n&&this.getIDB()})}))}getIDB(){this.filter=[],this.plus.IDB_DB_GetAll(this.db,this.api).subscribe(e=>{this.items=e})}ngOnDestroy(){console.log("Destroy",this.api),this.plus.subs.unsubscribe(),this.rtSv.leaveRoom(this.api)}save(){if(this.main.invalid)return;const e=this.main.value;if(null==e._id)delete e._id,this.plus.httpPost(this.api,e,this.global).subscribe(n=>{n.status&&(this.plus.clickBtn("closeModal"),this.reload())});else{const n=this.plus.objVs(this.selectedItem,e);if(0===Object.keys(n).length)return this.plus.alertMatSnackBar("Kh\xf4ng c\xf3 n\u1ed9i dung n\xe0o thay \u0111\u1ed5i");this.plus.httpPut(this.api,e,this.global).subscribe(o=>{o.status&&(this.plus.clickBtn("closeModal"),this.addHistory(n),this.reload())})}}addHistory(e){const n=[];for(const a in e)n.push(this.selectedItem[a]+" => "+e[a]);const o={TaiKhoan:this.plus.user.value.fullName,NoiDung:n.join(", "),ThoiGian:Date.now(),MaKhachHang:this.selectedItem.MaKhachHang};0!=n.length&&this.plus.httpPost("dmt-history",o,!0).subscribe(a=>{console.log(a)})}onEdit(e){this.selectedItem=e,this.main.patchValue(e),this.plus.clickBtn("openModal")}onDelete(e){!confirm("B\u1ea1n mu\u1ed1n x\xf3a?")||(this.plus.load(),this.plus.httpDisable(this.api,e,!0).then(o=>{console.log(o)}))}chooseOpt(e,n,o,a=!1){this.main.controls[n].setValue(e[o]),a&&this.main.controls[n+"ID"].setValue(e._id)}closeModal(){this.main.reset()}search(e){this.filter=e}find(e){this.items=e}checkPer(e){return this.plus.checkPer(this.api,e)}reload(){return this.plus.reload(this.dbName+"/"+this.api)}reset(){this.plus.loaded(),this.filter=[],this.getIDB(),this.main.reset({})}changePage(e){this.filter=this.items.slice(e.pageIndex*e.pageSize,(e.pageIndex+1)*e.pageSize)}trackByFn(e,n){return n}resetDB(){this.plus.resetDB(this.db,this.api)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(x.T),t.Y36(r.qu),t.Y36(Z.i))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-nlmt-kh"]],decls:77,vars:18,consts:[[1,"container"],["id","add-btn","color","accent","mat-raised-button","","data-toggle","modal","data-target","#modelId",3,"click"],["id","back-btn","mat-raised-button","","color","primary",3,"click",4,"ngIf"],[3,"api","data",4,"ngIf"],[3,"db","api","filter"],[1,"row"],["class","table table-hover",4,"ngIf"],[3,"length","pageSize","pageSizeOptions","page"],[3,"api","global","form",4,"ngIf"],["mat-button","","color","warn",3,"click",4,"ngIf"],[3,"dataJson"],["id","openModal","type","button","data-toggle","modal","data-target","#modelId",1,"d-none"],["id","modelId","data-backdrop","static","tabindex","-1","role","dialog","aria-labelledby","modelTitleId","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-body"],[1,"container-fluid"],[3,"formGroup"],["hidden","","formControlName","_id"],["required","","type","text","autocomplete","off","matInput","","formControlName","MaKhachHang"],["matSuffix",""],["required","","type","text","autocomplete","off","matInput","","formControlName","KhachHang"],["required","","type","text","autocomplete","off","matInput","","formControlName","DiaChi"],["type","text","autocomplete","off","matInput","","formControlName","MaGCS"],["type","text","autocomplete","off","matInput","","formControlName","ChuTaiKhoan"],["type","text","autocomplete","off","matInput","","formControlName","SoTaiKhoan"],["type","text","autocomplete","off","matInput","","formControlName","NganHang"],["type","text","autocomplete","off","matInput","","formControlName","Email"],["formControlName","CoHoaDon"],[3,"value",4,"ngFor","ngForOf"],["type","text","autocomplete","off","matInput","","formControlName","CCCD"],[1,"modal-footer"],["id","closeModal","mat-raised-button","","color","primary","data-dismiss","modal",3,"click"],["mat-raised-button","","color","warn",3,"click",4,"ngIf"],["id","back-btn","mat-raised-button","","color","primary",3,"click"],[3,"api","data"],[1,"table","table-hover"],[1,"thead-inverse"],[4,"Device"],["color","primary",3,"click"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"click"],[3,"click",4,"Device"],["color","warn",3,"click",4,"ngIf"],["color","warn",3,"click"],[3,"api","global","form"],["mat-button","","color","warn",3,"click"],[3,"value"],["mat-raised-button","","color","warn",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"button",1),t.NdJ("click",function(){return n.reset()}),t.TgZ(2,"mat-icon"),t._uU(3,"control_point"),t.qZA()(),t.YNc(4,Fe,3,1,"button",2),t.YNc(5,Qe,1,1,"app-search-api",3),t.TgZ(6,"app-search-table",4),t.NdJ("filter",function(a){return n.search(a)}),t.qZA(),t.TgZ(7,"div",5),t.YNc(8,on,18,9,"table",6),t.TgZ(9,"mat-paginator",7),t.NdJ("page",function(a){return n.changePage(a)}),t.qZA()(),t.YNc(10,an,1,3,"app-import-database",8),t.qZA(),t.YNc(11,ln,2,0,"button",9),t._UZ(12,"app-export-ecxel",10)(13,"button",11),t.TgZ(14,"div",12)(15,"div",13)(16,"div",14)(17,"div",15)(18,"div",16)(19,"form",17),t._UZ(20,"input",18),t.TgZ(21,"mat-form-field")(22,"mat-label"),t._uU(23,"M\xe3 kh\xe1ch h\xe0ng"),t.qZA(),t._UZ(24,"input",19)(25,"span",20),t.qZA(),t.TgZ(26,"mat-form-field")(27,"mat-label"),t._uU(28,"Kh\xe1ch h\xe0ng"),t.qZA(),t._UZ(29,"input",21)(30,"span",20),t.qZA(),t.TgZ(31,"mat-form-field")(32,"mat-label"),t._uU(33,"\u0110\u1ecba ch\u1ec9"),t.qZA(),t._UZ(34,"input",22)(35,"span",20),t.qZA(),t.TgZ(36,"mat-form-field")(37,"mat-label"),t._uU(38,"M\xe3 Ghi ch\u1ec9 s\u1ed1"),t.qZA(),t._UZ(39,"input",23)(40,"span",20),t.qZA(),t.TgZ(41,"mat-form-field")(42,"mat-label"),t._uU(43,"Ch\u1ee7 t\xe0i kho\u1ea3n"),t.qZA(),t._UZ(44,"input",24)(45,"span",20),t.qZA(),t.TgZ(46,"mat-form-field")(47,"mat-label"),t._uU(48,"S\u1ed1 t\xe0i kho\u1ea3n"),t.qZA(),t._UZ(49,"input",25)(50,"span",20),t.qZA(),t.TgZ(51,"mat-form-field")(52,"mat-label"),t._uU(53,"Ng\xe2n h\xe0ng"),t.qZA(),t._UZ(54,"input",26)(55,"span",20),t.qZA(),t.TgZ(56,"mat-form-field")(57,"mat-label"),t._uU(58,"Email"),t.qZA(),t._UZ(59,"input",27)(60,"span",20),t.qZA(),t.TgZ(61,"mat-form-field")(62,"mat-label"),t._uU(63,"C\xf3 h\xf3a \u0111\u01a1n"),t.qZA(),t.TgZ(64,"mat-select",28),t.YNc(65,rn,2,2,"mat-option",29),t.ALo(66,"catalog"),t.qZA()(),t.TgZ(67,"mat-form-field")(68,"mat-label"),t._uU(69,"CCCD"),t.qZA(),t._UZ(70,"input",30)(71,"span",20),t.qZA()()()(),t.TgZ(72,"div",31)(73,"button",32),t.NdJ("click",function(){return n.closeModal()}),t.TgZ(74,"mat-icon"),t._uU(75,"close"),t.qZA()(),t.YNc(76,sn,3,1,"button",33),t.qZA()()()()),2&e&&(t.xp6(4),t.Q6J("ngIf",n.filter.length>0),t.xp6(1),t.Q6J("ngIf",n.checkPer(10)),t.xp6(1),t.Q6J("db",n.db)("api",n.api),t.xp6(2),t.Q6J("ngIf",n.items.length+n.filter.length>0),t.xp6(1),t.Q6J("length",n.items.length)("pageSize",10)("pageSizeOptions",t.DdM(17,cn)),t.xp6(1),t.Q6J("ngIf",n.checkPer(4)),t.xp6(1),t.Q6J("ngIf",n.checkPer(5)),t.xp6(1),t.Q6J("dataJson",n.items),t.xp6(7),t.Q6J("formGroup",n.main),t.xp6(46),t.Q6J("ngForOf",t.lcZ(66,15,"CoHoaDon")),t.xp6(8),t.Q6J("@slideIn",void 0),t.xp6(3),t.Q6J("ngIf",n.checkPer(2)&&n.main.valid))},directives:[I.lW,k.Hw,g.O5,J.W,B.D,q.HP,g.sg,y.NW,S.y,v.t,r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,f.KE,f.hX,A.Nt,r.Q7,f.R9,M.gD,H.ey],pipes:[T.pW],styles:[""],data:{animation:[b.Ym]}}),i})()},{path:"dmt-history",component:Ye},{path:"dmt-input",component:qe},{path:"dmt-input/:id",component:j},{path:"dmt-pay",component:Qt},{path:"dmt-pay/:id",component:It}];let pn=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[N.Bz.forChild(un)],N.Bz]}),i})();var mn=p(83886);let hn=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[g.ez,pn,z.ShareModule,X.m,R.D,G.X,mn.N]]}),i})()}}]);