(self.webpackChunk_4la=self.webpackChunk_4la||[]).push([[558],{97534:function(t,i,e){"use strict";e.d(i,{F:function(){return o}});var n=e(61511),a=e(31572);let o=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[n.ez]]}),t})()},38558:function(t,i,e){"use strict";e.r(i),e.d(i,{ThuChiModule:function(){return Q}});var n=e(41007),a=e(94803),o=e(35845),r=e(35180),s=e(61511),h=e(68591),u=e(7171),c=e(16073),l=e(82393),p=e(29609),d=e.n(p),g=e(31572),m=e(66283),f=e(26756),Z=e(15812),T=e(40084),y=e(4786),A=e(27521),q=e(84521),b=e(99194),x=e(60635),D=e(71522),k=e(15980),C=e(43691),N=e(85354);function v(t,i){if(1&t&&(g.TgZ(0,"mat-option",29),g._uU(1),g.qZA()),2&t){const t=i.$implicit;g.s9C("value",t),g.xp6(1),g.hij(" ",t," ")}}function _(t,i){if(1&t&&(g.TgZ(0,"mat-option",29),g._uU(1),g.qZA()),2&t){const t=i.$implicit;g.s9C("value",t.NoiDung),g.xp6(1),g.hij("",t.NoiDung," ")}}function I(t,i){if(1&t){const t=g.EpF();g.TgZ(0,"button",30),g.NdJ("click",function(){return g.CHM(t),g.oxw().save()}),g.TgZ(1,"mat-icon"),g._uU(2,"save"),g.qZA(),g.qZA()}2&t&&g.Q6J("@slideIn",void 0)}function J(t,i){if(1&t){const t=g.EpF();g.TgZ(0,"button",31),g.NdJ("click",function(){return g.CHM(t),g.oxw().reload()}),g.TgZ(1,"mat-icon"),g._uU(2,"undo"),g.qZA(),g.qZA()}2&t&&g.Q6J("@slideIn",void 0)}function w(t,i){if(1&t){const t=g.EpF();g.TgZ(0,"i",35),g.NdJ("click",function(){g.CHM(t);const i=g.oxw().$implicit;return g.oxw().onDelete(i)}),g.qZA()}}const U=function(t){return{"text-primary":t}};function Y(t,i){if(1&t){const t=g.EpF();g.TgZ(0,"tr"),g.TgZ(1,"td",32),g.NdJ("click",function(){const i=g.CHM(t).$implicit;return g.oxw().onEdit(i)}),g._uU(2),g.ALo(3,"date"),g.qZA(),g.TgZ(4,"td",32),g.NdJ("click",function(){const i=g.CHM(t).$implicit;return g.oxw().onEdit(i)}),g._uU(5),g.qZA(),g.TgZ(6,"td",33),g.NdJ("click",function(){const i=g.CHM(t).$implicit;return g.oxw().onEdit(i)}),g._uU(7),g.ALo(8,"commas"),g.qZA(),g.TgZ(9,"td",19),g.YNc(10,w,1,0,"i",34),g.qZA(),g.qZA()}if(2&t){const t=i.$implicit,e=g.oxw();g.Q6J("@slideIn",0==e.filter.length),g.xp6(2),g.Oqu(g.xi3(3,6,t.Ngay,"dd/MM/yyyy")),g.xp6(3),g.Oqu(t.DienGiai),g.xp6(1),g.Q6J("ngClass",g.VKq(11,U,t.ThuChi)),g.xp6(1),g.hij(" ",g.lcZ(8,9,t.SoTien),""),g.xp6(3),g.Q6J("ngIf",e.checkPer(4))}}const F=[{path:"thu-chi",component:(()=>{class t{constructor(t,i){this.plus=t,this.fb=i,this.chart=[],this.ThuChiChart=[],this.main=this.fb.group({_id:[,[]],Ngay:[this.plus.dateFormat(Date.now(),"YYYY-MM-DD","x"),[c.kI.required]],DienGiai:[,[c.kI.required,c.kI.minLength(2)]],PhanLoai:["Thi\u1ebft y\u1ebfu",[c.kI.required]],SoTien:[,[c.kI.required]],ThuChi:[!1,[c.kI.required]]}),this.searchForm=this.fb.group({input:[,[c.kI.minLength(3),c.kI.maxLength(50)]]}),this.title="Thu-Chi",this.dbName="user",this.api="thu-chi",this.db=null,this.items=[],this.filter=[],this.keyWord=[],this.showForm=!1}ngOnInit(){this.plus.setTiTle(this.title),this.plus.IDB_InitDB(this.dbName).subscribe(t=>{return i=this,void 0,n=function*(){this.db=t,this.getIDB(),this.plus.updateUserLocal(t,this.api),this.plus.updateAPi.subscribe(t=>{t&&this.getIDB()})},new((e=void 0)||(e=Promise))(function(t,a){function o(t){try{s(n.next(t))}catch(i){a(i)}}function r(t){try{s(n.throw(t))}catch(i){a(i)}}function s(i){var n;i.done?t(i.value):(n=i.value,n instanceof e?n:new e(function(t){t(n)})).then(o,r)}s((n=n.apply(i,[])).next())});var i,e,n}),this.getKeyWord()}getIDB(){console.log("getIDB"),this.filter=[],this.plus.IDB_DB_GetAll(this.db,this.api).subscribe(t=>{this.items=t,this.thuChiNgay(7)})}thuChiNgay(t=1){const i=this.filter.length>0?this.filter:this.items,e=Date.now()-24*t*60*60*1e3,n=[];for(let a=0;a<i.length;a++)if(i[a].Ngay>e){const t={ThuChi:i[a].ThuChi?"Thu":"Chi",SoTien:i[a].SoTien,Ngay:d()(i[a].Ngay).format("DD/MM"),PhanLoai:i[a].PhanLoai};n.push(t)}this.ThuChiChart=this.plus.generateChart(n,"ThuChi","SoTien"),this.chart=this.plus.generateChart(n,"PhanLoai","SoTien")}ngOnDestroy(){console.log("Destroy thu-chi"),this.plus.subs.unsubscribe()}save(){let t=this.main.value;t.Ngay=Date.parse(t.Ngay),t.SoTien=1e3*t.SoTien,null!==t._id?this.plus.httpPut(this.api,t).subscribe(t=>{this.showForm=!1,this.getIDB()}):(delete t._id,this.plus.httpPost(this.api,t).subscribe(t=>{this.showForm=!1,this.getIDB()})),this.main.reset({Ngay:this.plus.dateFormat(Date.now(),"YYYY-MM-DD","x"),ThuChi:!1,PhanLoai:"Thi\u1ebft y\u1ebfu"})}onEdit(t){this.main.valid||(this.showForm=!0,t.Ngay=this.plus.dateFormat(t.Ngay,"YYYY-MM-DD","x"),t.SoTien=t.SoTien/1e3,this.items=[],this.plus.scrollTop(),this.main.patchValue(t),this.filter[0]=t)}onDelete(t){confirm("B\u1ea1n mu\u1ed1n x\xf3a?")&&(this.plus.load(),this.plus.httpDisable(this.api,t).then(t=>{console.log(t)}))}selectMat(t){this.main.controls.DienGiai.setValue(t.DienGiai)}search(t){this.filter=t,this.thuChiNgay(365)}getKeyWord(){this.keyWord=[],this.main.valueChanges.subscribe(t=>{this.plus.IDB_DB_GetAll(this.db,this.api).subscribe(i=>{this.keyWord=this.plus.getKeyWord(i,"DienGiai",t.DienGiai)})})}keyWordF2(){this.keyWord=[],this.searchForm.valueChanges.subscribe(t=>{this.plus.IDB_DB_GetAll(this.db,this.api).subscribe(i=>{this.keyWord=this.plus.getKeyWord(i,"DienGiai",t.DienGiai)})})}find(t){this.items=t}checkPer(t){return this.plus.checkPer(this.api,t)}reload(){return this.plus.reload(this.dbName+"/"+this.api)}reset(){this.plus.loaded(),this.filter=[],this.getIDB(),this.main.reset({Ngay:this.plus.dateFormat(Date.now(),"YYYY-MM-DD","x"),ThuChi:!1,PhanLoai:"Thi\u1ebft y\u1ebfu"})}}return t.\u0275fac=function(i){return new(i||t)(g.Y36(l.T),g.Y36(c.qu))},t.\u0275cmp=g.Xpm({type:t,selectors:[["app-thu-chi"]],decls:61,vars:26,consts:[[1,"container"],[1,"row","justify-content-center"],[1,"col-lg-8"],[1,"card"],[3,"formGroup"],["type","text","hidden","","formControlName","_id"],[1,"row"],[1,"col-sm-6"],["required","","type","text","matInput","","formControlName","Ngay",3,"matDatepicker"],["matSuffix","",3,"for"],["Ngay",""],["required","","type","text","autocomplete","off","matInput","","formControlName","DienGiai",3,"matAutocomplete"],["autoActiveFirstOption",""],["DienGiai","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["formControlName","PhanLoai","required",""],["required","","type","number","autocomplete","off","matInput","","formControlName","SoTien",2,"text-align","right",3,"keyup.enter"],["matSuffix",""],["formControlName","ThuChi","checked","false","color","warn",1,"mx-2"],[1,"text-center"],["mat-raised-button","","color","warn",3,"click",4,"ngIf"],["mat-raised-button","","color","primary","id","back-btn",3,"click",4,"ngIf"],[1,"col-md-6"],[3,"day"],[3,"id","arr","type"],[1,"table","table-hover","card"],[3,"db","api","keySearch","filter"],[1,"fa","fa-refresh","mx-2","text-info",3,"click"],[4,"ngFor","ngForOf"],[3,"value"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","primary","id","back-btn",3,"click"],[3,"click"],[1,"text-right",3,"ngClass","click"],["class","fa fa-trash text-danger mx-3 fa-lg","aria-hidden","true",3,"click",4,"ngIf"],["aria-hidden","true",1,"fa","fa-trash","text-danger","mx-3","fa-lg",3,"click"]],template:function(t,i){if(1&t&&(g.TgZ(0,"div",0),g.TgZ(1,"div",1),g.TgZ(2,"div",2),g.TgZ(3,"div",3),g.TgZ(4,"form",4),g._UZ(5,"input",5),g.TgZ(6,"div",6),g.TgZ(7,"div",7),g.TgZ(8,"mat-form-field"),g.TgZ(9,"mat-label"),g._uU(10,"Ng\xe0y"),g.qZA(),g._UZ(11,"input",8),g._UZ(12,"mat-datepicker-toggle",9),g._UZ(13,"mat-datepicker",null,10),g.qZA(),g.TgZ(15,"mat-form-field"),g.TgZ(16,"mat-label"),g._uU(17,"Di\u1ec5n gi\u1ea3i"),g.qZA(),g._UZ(18,"input",11),g.qZA(),g.TgZ(19,"mat-autocomplete",12,13),g.YNc(21,v,2,2,"mat-option",14),g.qZA(),g.qZA(),g.TgZ(22,"div",7),g.TgZ(23,"mat-form-field"),g.TgZ(24,"mat-label"),g._uU(25,"Ph\xe2n lo\u1ea1i"),g.qZA(),g.TgZ(26,"mat-select",15),g.YNc(27,_,2,2,"mat-option",14),g.ALo(28,"catalog"),g.qZA(),g.qZA(),g.TgZ(29,"mat-form-field"),g.TgZ(30,"mat-label"),g._uU(31),g.qZA(),g.TgZ(32,"input",16),g.NdJ("keyup.enter",function(){return i.save()}),g.qZA(),g.TgZ(33,"span",17),g._uU(34,".000"),g.qZA(),g.qZA(),g.TgZ(35,"mat-slide-toggle",18),g._uU(36,"Thu/Chi"),g.qZA(),g.qZA(),g.qZA(),g.TgZ(37,"div",19),g.YNc(38,I,3,1,"button",20),g.YNc(39,J,3,1,"button",21),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(40,"div",6),g.TgZ(41,"div",22),g.TgZ(42,"app-chip",23),g.NdJ("day",function(t){return i.thuChiNgay(t)}),g.qZA(),g._UZ(43,"app-chart",24),g._UZ(44,"app-chart",24),g.qZA(),g.TgZ(45,"div",22),g.TgZ(46,"table",25),g._UZ(47,"thead"),g.TgZ(48,"tbody"),g.TgZ(49,"app-search-idb",26),g.NdJ("filter",function(t){return i.search(t)}),g.qZA(),g.TgZ(50,"tr"),g.TgZ(51,"th"),g._uU(52,"Ng\xe0y"),g.qZA(),g.TgZ(53,"th"),g._uU(54,"Di\u1ec5n gi\u1ea3i"),g.qZA(),g.TgZ(55,"th"),g._uU(56,"S\u1ed1 ti\u1ec1n"),g.qZA(),g.TgZ(57,"th"),g.TgZ(58,"i",27),g.NdJ("click",function(){return i.reload()}),g.qZA(),g.qZA(),g.qZA(),g.YNc(59,Y,11,13,"tr",28),g.ALo(60,"slice"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA()),2&t){const t=g.MAs(14),e=g.MAs(20);g.xp6(2),g.Q6J("@slideIn",void 0),g.xp6(2),g.Q6J("formGroup",i.main),g.xp6(7),g.Q6J("matDatepicker",t),g.xp6(1),g.Q6J("for",t),g.xp6(6),g.Q6J("matAutocomplete",e),g.xp6(3),g.Q6J("ngForOf",i.keyWord),g.xp6(6),g.Q6J("ngForOf",g.lcZ(28,20,"ThuChi")),g.xp6(4),g.hij("S\u1ed1 ti\u1ec1n ",i.main.controls.ThuChi.value?"Thu ":"Chi",""),g.xp6(7),g.Q6J("ngIf",i.checkPer(2)&&i.main.valid),g.xp6(1),g.Q6J("ngIf",i.checkPer(2)&&i.main.valid),g.xp6(4),g.Q6J("id","thu-chi")("arr",i.chart)("type","bar"),g.xp6(1),g.Q6J("id","ThuChiChart")("arr",i.ThuChiChart)("type","doughnut"),g.xp6(5),g.Q6J("db",i.db)("api",i.api)("keySearch","DienGiai"),g.xp6(10),g.Q6J("ngForOf",g.Dn7(60,22,i.filter.length>0?i.filter:i.items,0,20))}},directives:[c._Y,c.JL,c.sg,c.Fj,c.JJ,c.u,m.KE,m.hX,f.Nt,Z.hl,c.Q7,Z.nW,m.R9,Z.Mq,T.ZL,T.XC,s.sg,y.gD,c.wV,A.Rr,s.O5,q.Y,b.x,x.$,D.ey,k.lW,C.Hw,s.mk],pipes:[N.pW,s.OU,s.uU,N.W],styles:[""],data:{animation:[u.Y]}}),t})()}];let M=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=g.oAB({type:t}),t.\u0275inj=g.cJS({imports:[[h.Bz.forChild(F)],h.Bz]}),t})();var B=e(97534),S=e(52923);let Q=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=g.oAB({type:t}),t.\u0275inj=g.cJS({imports:[[s.ez,r.ShareModule,B.F,o.q,M,a.N,S.k,n.m]]}),t})()}}]);