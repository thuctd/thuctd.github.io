"use strict";(self.webpackChunk_4la=self.webpackChunk_4la||[]).push([[465,511],{63465:function(t,e,n){n.r(e),n.d(e,{EmailModule:function(){return se}});var i=n(85913),o=n(5923),a=n(24561),r=n(13397),s=n(88817),l=n(24751),c=n(12057),u=n(74788),h=n(57922),d=n(2895),p=n(49356),g=n(46936),m=n(23487),f=n(46833),Z=n(46113),b=n(61260),T=n(68042),q=n(25862),x=n(17935),A=n(73888);function y(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"button",40),u.NdJ("click",function(){return u.CHM(t),u.oxw().reload()}),u.TgZ(1,"mat-icon"),u._uU(2,"undo"),u.qZA(),u.qZA()}2&t&&u.Q6J("@slideIn",void 0)}function v(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"app-search-api",41),u.NdJ("data",function(e){return u.CHM(t),u.oxw().find(e)}),u.qZA()}if(2&t){const t=u.oxw();u.Q6J("api",t.api)}}function I(t,e){1&t&&(u.TgZ(0,"th"),u._uU(1,"Email"),u.qZA())}function k(t,e){1&t&&(u.TgZ(0,"th"),u._uU(1,"M\xe3 kh\xe1ch h\xe0ng"),u.qZA())}function _(t,e){1&t&&(u.TgZ(0,"th"),u._uU(1,"Kh\xe1ch h\xe0ng"),u.qZA())}function J(t,e){1&t&&(u.TgZ(0,"th"),u._uU(1,"\u0110\u1ecba ch\u1ec9"),u.qZA())}function N(t,e){1&t&&(u.TgZ(0,"th"),u._uU(1,"M\xe3 G C S"),u.qZA())}function U(t,e){1&t&&(u.TgZ(0,"th"),u._uU(1,"Ch\u1ee7 t\xe0i kho\u1ea3n"),u.qZA())}function D(t,e){1&t&&(u.TgZ(0,"th"),u._uU(1,"S\u1ed1 t\xe0i kho\u1ea3n"),u.qZA())}function w(t,e){1&t&&(u.TgZ(0,"th"),u._uU(1,"Ng\xe2n h\xe0ng"),u.qZA())}function C(t,e){1&t&&(u.TgZ(0,"th"),u._uU(1,"Tr\u01b0\u1edbc thu\u1ebf"),u.qZA())}function M(t,e){1&t&&(u.TgZ(0,"th"),u._uU(1,"Thu\u1ebf"),u.qZA())}function S(t,e){1&t&&(u.TgZ(0,"th"),u._uU(1,"Ng\xe0y h\xf3a \u0111\u01a1n"),u.qZA())}function H(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"td",47),u.NdJ("click",function(){u.CHM(t);const e=u.oxw().$implicit;return u.oxw(2).onEdit(e)}),u._uU(1),u.qZA()}if(2&t){const t=u.oxw().$implicit;u.xp6(1),u.Oqu(t.Email)}}function E(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"td",47),u.NdJ("click",function(){u.CHM(t);const e=u.oxw().$implicit;return u.oxw(2).onEdit(e)}),u._uU(1),u.qZA()}if(2&t){const t=u.oxw().$implicit;u.xp6(1),u.Oqu(t.MaKhachHang)}}function B(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"td",47),u.NdJ("click",function(){u.CHM(t);const e=u.oxw().$implicit;return u.oxw(2).onEdit(e)}),u._uU(1),u.qZA()}if(2&t){const t=u.oxw().$implicit;u.xp6(1),u.Oqu(t.KhachHang)}}function F(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"td",47),u.NdJ("click",function(){u.CHM(t);const e=u.oxw().$implicit;return u.oxw(2).onEdit(e)}),u._uU(1),u.qZA()}if(2&t){const t=u.oxw().$implicit;u.xp6(1),u.Oqu(t.DiaChi)}}function L(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"td",47),u.NdJ("click",function(){u.CHM(t);const e=u.oxw().$implicit;return u.oxw(2).onEdit(e)}),u._uU(1),u.qZA()}if(2&t){const t=u.oxw().$implicit;u.xp6(1),u.Oqu(t.MaGCS)}}function Y(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"td",47),u.NdJ("click",function(){u.CHM(t);const e=u.oxw().$implicit;return u.oxw(2).onEdit(e)}),u._uU(1),u.qZA()}if(2&t){const t=u.oxw().$implicit;u.xp6(1),u.Oqu(t.ChuTaiKhoan)}}function O(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"td",47),u.NdJ("click",function(){u.CHM(t);const e=u.oxw().$implicit;return u.oxw(2).onEdit(e)}),u._uU(1),u.qZA()}if(2&t){const t=u.oxw().$implicit;u.xp6(1),u.Oqu(t.SoTaiKhoan)}}function Q(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"td",47),u.NdJ("click",function(){u.CHM(t);const e=u.oxw().$implicit;return u.oxw(2).onEdit(e)}),u._uU(1),u.qZA()}if(2&t){const t=u.oxw().$implicit;u.xp6(1),u.Oqu(t.NganHang)}}function $(t,e){if(1&t&&(u.TgZ(0,"td"),u._uU(1),u.ALo(2,"number"),u.qZA()),2&t){const t=u.oxw().$implicit;u.xp6(1),u.Oqu(u.lcZ(2,1,t.TruocThue))}}function G(t,e){if(1&t&&(u.TgZ(0,"td"),u._uU(1),u.ALo(2,"number"),u.qZA()),2&t){const t=u.oxw().$implicit;u.xp6(1),u.Oqu(u.lcZ(2,1,t.Thue))}}function P(t,e){if(1&t&&(u.TgZ(0,"td"),u._uU(1),u.ALo(2,"number"),u.qZA()),2&t){const t=u.oxw().$implicit;u.xp6(1),u.Oqu(u.lcZ(2,1,t.NgayHoaDon))}}function K(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"mat-icon",50),u.NdJ("click",function(){u.CHM(t);const e=u.oxw().$implicit;return u.oxw(2).onDelete(e)}),u._uU(1,"delete"),u.qZA()}}function j(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"tr"),u.TgZ(1,"td",47),u.NdJ("click",function(){const e=u.CHM(t).$implicit;return u.oxw(2).onEdit(e)}),u._uU(2),u.qZA(),u.YNc(3,H,2,1,"td",48),u.YNc(4,E,2,1,"td",48),u.YNc(5,B,2,1,"td",48),u.YNc(6,F,2,1,"td",48),u.YNc(7,L,2,1,"td",48),u.YNc(8,Y,2,1,"td",48),u.YNc(9,O,2,1,"td",48),u.YNc(10,Q,2,1,"td",48),u.TgZ(11,"td",47),u.NdJ("click",function(){const e=u.CHM(t).$implicit;return u.oxw(2).onEdit(e)}),u._uU(12),u.ALo(13,"number"),u.qZA(),u.TgZ(14,"td",47),u.NdJ("click",function(){const e=u.CHM(t).$implicit;return u.oxw(2).onEdit(e)}),u._uU(15),u.ALo(16,"number"),u.qZA(),u.TgZ(17,"td",47),u.NdJ("click",function(){const e=u.CHM(t).$implicit;return u.oxw(2).onEdit(e)}),u._uU(18),u.ALo(19,"number"),u.qZA(),u.TgZ(20,"td"),u._uU(21),u.ALo(22,"number"),u.qZA(),u.YNc(23,$,3,3,"td",44),u.YNc(24,G,3,3,"td",44),u.TgZ(25,"td"),u._uU(26),u.ALo(27,"number"),u.qZA(),u.TgZ(28,"td"),u._uU(29),u.qZA(),u.TgZ(30,"td"),u._uU(31),u.qZA(),u.YNc(32,P,3,3,"td",44),u.TgZ(33,"td"),u._uU(34),u.qZA(),u.TgZ(35,"td"),u.YNc(36,K,2,0,"mat-icon",49),u.qZA(),u.qZA()}if(2&t){const t=e.$implicit,n=u.oxw(2);u.xp6(2),u.Oqu(t._id),u.xp6(1),u.Q6J("Device",3),u.xp6(1),u.Q6J("Device",2),u.xp6(1),u.Q6J("Device",2),u.xp6(1),u.Q6J("Device",3),u.xp6(1),u.Q6J("Device",3),u.xp6(1),u.Q6J("Device",3),u.xp6(1),u.Q6J("Device",3),u.xp6(1),u.Q6J("Device",3),u.xp6(2),u.Oqu(u.lcZ(13,21,t.Nam)),u.xp6(3),u.Oqu(u.lcZ(16,23,t.Thang)),u.xp6(3),u.Oqu(u.lcZ(19,25,t.SanLuong)),u.xp6(3),u.Oqu(u.lcZ(22,27,t.DonGia)),u.xp6(2),u.Q6J("Device",3),u.xp6(1),u.Q6J("Device",3),u.xp6(2),u.Oqu(u.lcZ(27,29,t.TongTien)),u.xp6(3),u.Oqu(t.KyHieuHoaDon),u.xp6(2),u.Oqu(t.SoHoaDon),u.xp6(1),u.Q6J("Device",3),u.xp6(2),u.Oqu(t.TrangThai),u.xp6(2),u.Q6J("ngIf",n.checkPer(4))}}function V(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"table",42),u.TgZ(1,"thead",43),u.TgZ(2,"tr"),u.TgZ(3,"th"),u._uU(4,"_id"),u.qZA(),u.YNc(5,I,2,0,"th",44),u.YNc(6,k,2,0,"th",44),u.YNc(7,_,2,0,"th",44),u.YNc(8,J,2,0,"th",44),u.YNc(9,N,2,0,"th",44),u.YNc(10,U,2,0,"th",44),u.YNc(11,D,2,0,"th",44),u.YNc(12,w,2,0,"th",44),u.TgZ(13,"th"),u._uU(14,"N\u0103m"),u.qZA(),u.TgZ(15,"th"),u._uU(16,"Th\xe1ng"),u.qZA(),u.TgZ(17,"th"),u._uU(18,"S\u1ea3n l\u01b0\u1ee3ng"),u.qZA(),u.TgZ(19,"th"),u._uU(20,"\u0110\u01a1n gi\xe1"),u.qZA(),u.YNc(21,C,2,0,"th",44),u.YNc(22,M,2,0,"th",44),u.TgZ(23,"th"),u._uU(24,"T\u1ed5ng ti\u1ec1n"),u.qZA(),u.TgZ(25,"th"),u._uU(26,"K\xfd hi\u1ec7u h\xf3a \u0111\u01a1n"),u.qZA(),u.TgZ(27,"th"),u._uU(28,"S\u1ed1 h\xf3a \u0111\u01a1n"),u.qZA(),u.YNc(29,S,2,0,"th",44),u.TgZ(30,"th"),u._uU(31,"Tr\u1ea1ng th\xe1i"),u.qZA(),u.TgZ(32,"th"),u.TgZ(33,"mat-icon",45),u.NdJ("click",function(){return u.CHM(t),u.oxw().reload()}),u._uU(34,"cached"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(35,"tbody"),u.YNc(36,j,37,31,"tr",46),u.qZA(),u.qZA()}if(2&t){const t=u.oxw();u.Q6J("@slideIn",void 0),u.xp6(5),u.Q6J("Device",3),u.xp6(1),u.Q6J("Device",2),u.xp6(1),u.Q6J("Device",2),u.xp6(1),u.Q6J("Device",3),u.xp6(1),u.Q6J("Device",3),u.xp6(1),u.Q6J("Device",3),u.xp6(1),u.Q6J("Device",3),u.xp6(1),u.Q6J("Device",3),u.xp6(9),u.Q6J("Device",3),u.xp6(1),u.Q6J("Device",3),u.xp6(7),u.Q6J("Device",3),u.xp6(7),u.Q6J("ngForOf",t.filter.length>0?t.filter:t.items.slice(0,10))("ngForTrackBy",t.trackByFn)}}function X(t,e){if(1&t&&(u.TgZ(0,"mat-option",51),u._uU(1),u.qZA()),2&t){const t=e.$implicit;u.s9C("value",t.NoiDung),u.xp6(1),u.hij("",t.NoiDung," ")}}function z(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"button",52),u.NdJ("click",function(){return u.CHM(t),u.oxw().save()}),u.TgZ(1,"mat-icon"),u._uU(2,"save"),u.qZA(),u.qZA()}2&t&&u.Q6J("@slideIn",void 0)}const R=function(){return[5,10,25,100]};let W=(()=>{class t{constructor(t,e){this.plus=t,this.fb=e,this.main=this.fb.group({keyWord:[,[]],_id:[,[]],Email:[,[l.kI.required]],MaKhachHang:[,[l.kI.required]],KhachHang:[,[l.kI.required]],DiaChi:[,[l.kI.required]],MaGCS:[,[l.kI.required]],ChuTaiKhoan:[,[l.kI.required]],SoTaiKhoan:[,[l.kI.required]],NganHang:[,[l.kI.required]],Nam:[,[l.kI.required,l.kI.pattern("^[0-9]*$")]],Thang:[,[l.kI.required,l.kI.pattern("^[0-9]*$")]],SanLuong:[,[l.kI.required,l.kI.pattern("^[0-9]*$")]],DonGia:[,[l.kI.required,l.kI.pattern("^[0-9]*$")]],TruocThue:[,[l.kI.required,l.kI.pattern("^[0-9]*$")]],Thue:[,[l.kI.required,l.kI.pattern("^[0-9]*$")]],TongTien:[,[l.kI.required,l.kI.pattern("^[0-9]*$")]],KyHieuHoaDon:[,[]],SoHoaDon:[,[]],NgayHoaDon:[,[l.kI.pattern("^[0-9]*$")]],TrangThai:[,[l.kI.pattern("^[0-9]*$")]]}),this.chart=[],this.title="Thanh to\xe1n \u0110MT",this.dbName="email",this.api="dmt",this.db=null,this.items=[],this.selectedItem=null,this.filter=[]}ngOnInit(){this.plus.setTiTle(this.title),this.plus.IDB_InitDB(this.dbName).subscribe(t=>function(t,e,n,i){return new(n||(n=Promise))(function(o,a){function r(t){try{l(i.next(t))}catch(e){a(e)}}function s(t){try{l(i.throw(t))}catch(e){a(e)}}function l(t){t.done?o(t.value):function(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(r,s)}l((i=i.apply(t,e||[])).next())})}(this,void 0,void 0,function*(){this.db=t,this.getIDB(),this.plus.updateUserLocal(t,this.api),this.plus.updateAPi.subscribe(t=>{t&&this.getIDB()})}))}getIDB(){console.log("getIDB"),this.filter=[],this.plus.IDB_DB_GetAll(this.db,this.api).subscribe(t=>{this.items=t,this.plus.updateAPi.next(!1)})}ngOnDestroy(){console.log("Destroy",this.api),this.plus.subs.unsubscribe()}save(){if(this.main.invalid)return;const t=this.main.value,e=this.plus.datetoNumObj(this.main.value,[""]);console.log(e),null==t._id?(delete t._id,this.plus.httpPost(this.api,e).subscribe(t=>{t.status&&this.plus.clickBtn("closeModal")})):this.plus.httpPut(this.api,e).subscribe(t=>{t.status&&this.plus.clickBtn("closeModal")})}onEdit(t){this.selectedItem=t;const e=this.plus.dateToHtmlObj(t,[""]);this.main.patchValue(e),this.plus.clickBtn("openModal")}onDelete(t){!confirm("B\u1ea1n mu\u1ed1n x\xf3a?")||(this.plus.load(),this.plus.httpDisable(this.api,t).then(t=>{console.log(t)}))}chooseOpt(t,e,n,i=!1){this.main.controls[e].setValue(t[n]),i&&this.main.controls[e+"ID"].setValue(t._id)}closeModal(){this.main.reset()}search(t){this.filter=t}find(t){this.items=t}checkPer(t){return this.plus.checkPer(this.api,t)}patchForm(){this.main.reset({_id:" "})}reload(){return this.plus.reload(this.dbName+"/"+this.api)}reset(){this.plus.loaded(),this.filter=[],this.getIDB(),this.main.reset({})}changePage(t){this.filter=this.items.slice(t.pageIndex*t.pageSize,(t.pageIndex+1)*t.pageSize)}trackByFn(t,e){return e}}return t.\u0275fac=function(e){return new(e||t)(u.Y36(h.T),u.Y36(l.qu))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-tien-do-dmt"]],decls:119,vars:15,consts:[[1,"container"],["id","add-btn","color","accent","mat-raised-button","","data-toggle","modal","data-target","#modelId",3,"click"],["id","back-btn","mat-raised-button","","color","primary",3,"click",4,"ngIf"],[3,"api","data",4,"ngIf"],[3,"db","api","filter"],[1,"row"],["class","table table-hover",4,"ngIf"],[3,"length","pageSize","pageSizeOptions","page"],["id","openModal","type","button","data-toggle","modal","data-target","#modelId",1,"d-none"],["id","modelId","data-backdrop","static","tabindex","-1","role","dialog","aria-labelledby","modelTitleId","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-body"],[1,"container-fluid"],[3,"formGroup"],["hidden","","formControlName","_id"],["required","","type","text","autocomplete","off","matInput","","formControlName","Email"],["matSuffix",""],["type","text","autocomplete","off","matInput","","formControlName","MaKhachHang"],["type","text","autocomplete","off","matInput","","formControlName","KhachHang"],["type","text","autocomplete","off","matInput","","formControlName","DiaChi"],["type","text","autocomplete","off","matInput","","formControlName","MaGCS"],["type","text","autocomplete","off","matInput","","formControlName","ChuTaiKhoan"],["type","text","autocomplete","off","matInput","","formControlName","SoTaiKhoan"],["type","text","autocomplete","off","matInput","","formControlName","NganHang"],["type","text","autocomplete","off","matInput","","formControlName","Nam"],["type","text","autocomplete","off","matInput","","formControlName","Thang"],["type","text","autocomplete","off","matInput","","formControlName","SanLuong"],["type","text","autocomplete","off","matInput","","formControlName","DonGia"],["type","text","autocomplete","off","matInput","","formControlName","TruocThue"],["type","text","autocomplete","off","matInput","","formControlName","Thue"],["type","text","autocomplete","off","matInput","","formControlName","TongTien"],["type","text","autocomplete","off","matInput","","formControlName","KyHieuHoaDon"],["type","text","autocomplete","off","matInput","","formControlName","SoHoaDon"],["type","text","autocomplete","off","matInput","","formControlName","NgayHoaDon"],["formControlName","TrangThai"],[3,"value",4,"ngFor","ngForOf"],[1,"modal-footer"],["id","closeModal","mat-raised-button","","color","primary","data-dismiss","modal",3,"click"],["mat-raised-button","","color","warn",3,"click",4,"ngIf"],["id","back-btn","mat-raised-button","","color","primary",3,"click"],[3,"api","data"],[1,"table","table-hover"],[1,"thead-inverse"],[4,"Device"],["color","primary",3,"click"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"click"],[3,"click",4,"Device"],["color","warn",3,"click",4,"ngIf"],["color","warn",3,"click"],[3,"value"],["mat-raised-button","","color","warn",3,"click"]],template:function(t,e){1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"button",1),u.NdJ("click",function(){return e.reset()}),u.TgZ(2,"mat-icon"),u._uU(3,"control_point"),u.qZA(),u.qZA(),u.YNc(4,y,3,1,"button",2),u.YNc(5,v,1,1,"app-search-api",3),u.TgZ(6,"app-search-table",4),u.NdJ("filter",function(t){return e.search(t)}),u.qZA(),u.TgZ(7,"div",5),u.YNc(8,V,37,14,"table",6),u.TgZ(9,"mat-paginator",7),u.NdJ("page",function(t){return e.changePage(t)}),u.qZA(),u.qZA(),u.qZA(),u._UZ(10,"button",8),u.TgZ(11,"div",9),u.TgZ(12,"div",10),u.TgZ(13,"div",11),u.TgZ(14,"div",12),u.TgZ(15,"div",13),u.TgZ(16,"form",14),u._UZ(17,"input",15),u.TgZ(18,"mat-form-field"),u.TgZ(19,"mat-label"),u._uU(20,"Email"),u.qZA(),u._UZ(21,"input",16),u._UZ(22,"span",17),u.qZA(),u.TgZ(23,"mat-form-field"),u.TgZ(24,"mat-label"),u._uU(25,"M\xe3 kh\xe1ch h\xe0ng"),u.qZA(),u._UZ(26,"input",18),u._UZ(27,"span",17),u.qZA(),u.TgZ(28,"mat-form-field"),u.TgZ(29,"mat-label"),u._uU(30,"Kh\xe1ch h\xe0ng"),u.qZA(),u._UZ(31,"input",19),u._UZ(32,"span",17),u.qZA(),u.TgZ(33,"mat-form-field"),u.TgZ(34,"mat-label"),u._uU(35,"\u0110\u1ecba ch\u1ec9"),u.qZA(),u._UZ(36,"input",20),u._UZ(37,"span",17),u.qZA(),u.TgZ(38,"mat-form-field"),u.TgZ(39,"mat-label"),u._uU(40,"M\xe3 G C S"),u.qZA(),u._UZ(41,"input",21),u._UZ(42,"span",17),u.qZA(),u.TgZ(43,"mat-form-field"),u.TgZ(44,"mat-label"),u._uU(45,"Ch\u1ee7 t\xe0i kho\u1ea3n"),u.qZA(),u._UZ(46,"input",22),u._UZ(47,"span",17),u.qZA(),u.TgZ(48,"mat-form-field"),u.TgZ(49,"mat-label"),u._uU(50,"S\u1ed1 t\xe0i kho\u1ea3n"),u.qZA(),u._UZ(51,"input",23),u._UZ(52,"span",17),u.qZA(),u.TgZ(53,"mat-form-field"),u.TgZ(54,"mat-label"),u._uU(55,"Ng\xe2n h\xe0ng"),u.qZA(),u._UZ(56,"input",24),u._UZ(57,"span",17),u.qZA(),u.TgZ(58,"mat-form-field"),u.TgZ(59,"mat-label"),u._uU(60,"N\u0103m"),u.qZA(),u._UZ(61,"input",25),u._UZ(62,"span",17),u.qZA(),u.TgZ(63,"mat-form-field"),u.TgZ(64,"mat-label"),u._uU(65,"Th\xe1ng"),u.qZA(),u._UZ(66,"input",26),u._UZ(67,"span",17),u.qZA(),u.TgZ(68,"mat-form-field"),u.TgZ(69,"mat-label"),u._uU(70,"S\u1ea3n l\u01b0\u1ee3ng"),u.qZA(),u._UZ(71,"input",27),u._UZ(72,"span",17),u.qZA(),u.TgZ(73,"mat-form-field"),u.TgZ(74,"mat-label"),u._uU(75,"\u0110\u01a1n gi\xe1"),u.qZA(),u._UZ(76,"input",28),u._UZ(77,"span",17),u.qZA(),u.TgZ(78,"mat-form-field"),u.TgZ(79,"mat-label"),u._uU(80,"Tr\u01b0\u1edbc thu\u1ebf"),u.qZA(),u._UZ(81,"input",29),u._UZ(82,"span",17),u.qZA(),u.TgZ(83,"mat-form-field"),u.TgZ(84,"mat-label"),u._uU(85,"Thu\u1ebf"),u.qZA(),u._UZ(86,"input",30),u._UZ(87,"span",17),u.qZA(),u.TgZ(88,"mat-form-field"),u.TgZ(89,"mat-label"),u._uU(90,"T\u1ed5ng ti\u1ec1n"),u.qZA(),u._UZ(91,"input",31),u._UZ(92,"span",17),u.qZA(),u.TgZ(93,"mat-form-field"),u.TgZ(94,"mat-label"),u._uU(95,"K\xfd hi\u1ec7u h\xf3a \u0111\u01a1n"),u.qZA(),u._UZ(96,"input",32),u._UZ(97,"span",17),u.qZA(),u.TgZ(98,"mat-form-field"),u.TgZ(99,"mat-label"),u._uU(100,"S\u1ed1 h\xf3a \u0111\u01a1n"),u.qZA(),u._UZ(101,"input",33),u._UZ(102,"span",17),u.qZA(),u.TgZ(103,"mat-form-field"),u.TgZ(104,"mat-label"),u._uU(105,"Ng\xe0y h\xf3a \u0111\u01a1n"),u.qZA(),u._UZ(106,"input",34),u._UZ(107,"span",17),u.qZA(),u.TgZ(108,"mat-form-field"),u.TgZ(109,"mat-label"),u._uU(110,"Tr\u1ea1ng th\xe1i"),u.qZA(),u.TgZ(111,"mat-select",35),u.YNc(112,X,2,2,"mat-option",36),u.ALo(113,"catalog"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(114,"div",37),u.TgZ(115,"button",38),u.NdJ("click",function(){return e.closeModal()}),u.TgZ(116,"mat-icon"),u._uU(117,"close"),u.qZA(),u.qZA(),u.YNc(118,z,3,1,"button",39),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&t&&(u.xp6(4),u.Q6J("ngIf",e.filter.length>0),u.xp6(1),u.Q6J("ngIf",e.checkPer(10)),u.xp6(1),u.Q6J("db",e.db)("api",e.api),u.xp6(2),u.Q6J("ngIf",e.items.length+e.filter.length>0),u.xp6(1),u.Q6J("length",e.items.length)("pageSize",10)("pageSizeOptions",u.DdM(14,R)),u.xp6(7),u.Q6J("formGroup",e.main),u.xp6(96),u.Q6J("ngForOf",u.lcZ(113,12,"Trangthai")),u.xp6(3),u.Q6J("@slideIn",void 0),u.xp6(3),u.Q6J("ngIf",e.checkPer(2)&&e.main.valid))},directives:[d.lW,p.Hw,c.O5,g.D,m.NW,l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,f.KE,f.hX,Z.Nt,l.Q7,f.R9,b.gD,c.sg,T.W,q.HP,x.ey],pipes:[A.pW,c.JJ],styles:[""]}),t})();var tt=n(58497);class et{constructor(t,e,n,i){this.loader=t,this.url=e,this.http=n,this.plus=i}uploadFile(t,e,n){let i=new FormData;const o=new tt.WM({"ngsw-bypass":""});return i.append("file",t),console.log("formData",i),new tt.LE,this.http.post("https://up-log.herokuapp.com/upload",i,{headers:o})}upload(){return new Promise((t,e)=>{this.loader.file.then(n=>{this.uploadFile(n,this.url,"test").subscribe(e=>{console.log(e),t({default:e.url})},t=>{e("Ch\u1ee9c n\u0103ng b\u1ecb l\u1ed7i.\nVui l\xf2ng th\u1eed l\u1ea1i sau \xedt ph\xfat!"),console.log(n)})})})}abort(){console.log("abort")}}var nt=n(29726),it=n(84487),ot=n(15228),at=n(33982),rt=n(50166),st=function(t,e,n,i){return new(n||(n=Promise))(function(o,a){function r(t){try{l(i.next(t))}catch(e){a(e)}}function s(t){try{l(i.throw(t))}catch(e){a(e)}}function l(t){t.done?o(t.value):function(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(r,s)}l((i=i.apply(t,e||[])).next())})};const lt=["myEditor"];function ct(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"button",18),u.NdJ("click",function(){return u.CHM(t),u.oxw().checkImportData()}),u._uU(1,"Xem tr\u01b0\u1edbc"),u.qZA()}}function ut(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"button",19),u.NdJ("click",function(){return u.CHM(t),u.oxw().reload()}),u._uU(1,"L\xe0m l\u1ea1i "),u.qZA()}}function ht(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"div",20),u.TgZ(1,"div",21),u.TgZ(2,"button",22),u.NdJ("click",function(){return u.CHM(t),u.oxw().pre()}),u._UZ(3,"i",23),u.qZA(),u.TgZ(4,"button",24),u.NdJ("click",function(){return u.CHM(t),u.oxw().next()}),u._UZ(5,"i",25),u.qZA(),u.qZA(),u.TgZ(6,"div",26),u.TgZ(7,"h5",27),u._uU(8),u.qZA(),u._UZ(9,"div",28),u.qZA(),u._UZ(10,"hr"),u.qZA()}if(2&t){const t=u.oxw();u.Q6J("@slideIn",void 0),u.xp6(8),u.AsE("N\u1ed8I DUNG EMAIL S\u1ed0 ",t.i+1,": ",t.dataJson[t.i].email,""),u.xp6(1),u.Q6J("innerHTML",t.dataJson[t.i].message,u.oJD)}}function dt(t,e){if(1&t&&(u.TgZ(0,"tr"),u.TgZ(1,"td"),u._uU(2),u.qZA(),u.TgZ(3,"td"),u._uU(4),u.qZA(),u.qZA()),2&t){const t=e.$implicit;u.xp6(2),u.hij(" ",t.email," "),u.xp6(2),u.hij(" ",t.err," ")}}function pt(t,e){if(1&t&&(u.TgZ(0,"div",29),u.TgZ(1,"h6"),u._uU(2,"DANH S\xc1CH D\u1eee LI\u1ec6U KH\xd4NG H\u1ee2P L\u1ec6"),u.qZA(),u.TgZ(3,"table",30),u.YNc(4,dt,5,2,"tr",31),u.qZA(),u.qZA()),2&t){const t=u.oxw();u.Q6J("@slideIn",void 0),u.xp6(4),u.Q6J("ngForOf",t.errData)}}const gt=function(t,e){return{"bg-success":t,"bg-danger":e}};function mt(t,e){if(1&t&&(u.TgZ(0,"tr"),u.TgZ(1,"td"),u._uU(2),u.qZA(),u.TgZ(3,"td",35),u._uU(4),u.qZA(),u.TgZ(5,"td",35),u._uU(6),u.qZA(),u.TgZ(7,"td",36),u._uU(8),u.qZA(),u.qZA()),2&t){const t=e.$implicit,n=e.index;u.xp6(2),u.Oqu(n+1),u.xp6(2),u.Oqu(t.fullName),u.xp6(2),u.Oqu(t.email),u.xp6(1),u.Q6J("ngClass",u.WLB(5,gt,t.status,3===t.status)),u.xp6(1),u.hij(" ",1===t.status?"\u0110\xe3 g\u1eedi":"Ch\u01b0a g\u1eedi"," ")}}function ft(t,e){if(1&t&&(u.TgZ(0,"div",32),u.TgZ(1,"h5"),u._uU(2,"DANH S\xc1CH EMAIL \u0110\u01af\u1ee2C TH\xd4NG B\xc1O"),u.qZA(),u.TgZ(3,"table",33),u.TgZ(4,"thead"),u.TgZ(5,"tr"),u.TgZ(6,"th"),u._uU(7,"STT"),u.qZA(),u.TgZ(8,"th"),u._uU(9,"H\u1ecd v\xe0 t\xean"),u.qZA(),u.TgZ(10,"th"),u._uU(11,"Email"),u.qZA(),u.TgZ(12,"th",34),u._uU(13,"Tr\u1ea1ng th\xe1i"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(14,"tbody"),u.YNc(15,mt,9,8,"tr",31),u.qZA(),u.qZA(),u.qZA()),2&t){const t=u.oxw();u.Q6J("@slideIn",void 0),u.xp6(15),u.Q6J("ngForOf",t.dataJson)}}function Zt(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"button",37),u.NdJ("click",function(){return u.CHM(t),u.oxw().sendMail()}),u._uU(1,"G\u1eedi mail"),u.qZA()}}let bt=(()=>{class t{constructor(t,e,n,i){this.plus=t,this.fb=e,this.router=n,this.httpClient=i,this.Editor=nt,this.user=this.plus.user.getValue(),this.from=this.plus.user.getValue().unit,this.localName="moneyMail",this.dataImport=[],this.dataJson=[],this.errData=[],this.resent=[],this.tienLuong=[],this.send="",this.i=0,this.doc="",this.htmlContent=sessionStorage.getItem("htmlContentMain")||"",this.main=this.fb.group({email:[,l.kI.email],title:[`Th\xf4ng b\xe1o ti\u1ec1n l\u01b0\u01a1ng chuy\u1ec3n kho\u1ea3n ng\xe0y ${this.plus.dateFormat(Date.now())}`,[l.kI.required,l.kI.minLength(3)]]}),this.checkBody=this.fb.group({email:["",[l.kI.required,l.kI.email]],from:["\u0110i\u1ec7n l\u1ef1c Xu\xe2n L\u1ed9c",[l.kI.required,l.kI.minLength(10)]],title:["",[l.kI.required,l.kI.minLength(3)]],message:["",[l.kI.required,l.kI.minLength(200)]],reciver:["",[l.kI.required,l.kI.minLength(3)]],index:[,l.kI.max(1e3)]}),this.tienluong=this.fb.group({keyWord:[,[]],_id:[,[]],HoTen:[,[l.kI.required]],ThucLanh:[,[l.kI.required]],NgayNhanLuong:[,[l.kI.required]],MucHtnv:[,],SoNguoiGiamTru:[,],ThueTamDong:[,]})}ngOnInit(){this.init()}init(){if((JSON.parse(localStorage.getItem(this.localName))||[]).filter(t=>{0===t.status&&this.resent.push(t)}),0==this.from.length){const t=this.plus.user.getValue().unit;t?this.from=t:this.plus.alertToasrt({err:"B\u1ea1n ch\u01b0a khai b\xe1o \u0111\u01a1n v\u1ecb t\u1ea1i m\u1ee5c T\xe0i Kho\u1ea3n"}),console.log(t)}this.resent.length>0?(console.log(this.resent),confirm("B\u1ea5m OK \u0111\u1ec3 g\u1eedi mail tr\u01b0\u1edbc ch\u01b0a ho\xe0n th\xe0nh.\nB\u1ea5m Cancel \u0111\u1ec3 x\xf3a phi\xean l\xe0m vi\u1ec7c tr\u01b0\u1edbc?")?this.dataJson=this.resent:(localStorage.removeItem(this.localName),this.reset())):(this.reset(),localStorage.removeItem(this.localName))}onReady(t){t.ui.getEditableElement().parentElement.insertBefore(t.ui.view.toolbar.element,t.ui.getEditableElement()),t.plugins.get("FileRepository").createUploadAdapter=t=>(console.log(btoa(t.file)),new et(t,"/upload",this.httpClient,this.plus))}saveArticle(){this.dataJson.length>0&&(this.plus.alertToasrt({war:"B\u1ea1n c\u1ea7n ch\u1ecdn l\u1ea1i danh s\xe1ch nh\u1eadn email sau khi hi\u1ec7u ch\u1ec9nh n\u1ed9i dung!"}),this.reset()),this.htmlContent=this.getArticleContent(),sessionStorage.setItem("htmlContentMain",this.htmlContent)}getArticleContent(){return this.myEditor&&this.myEditor.editorInstance?this.myEditor.editorInstance.getData():""}readXlsx(t){this.dataJson=[],this.dataImport=[];let e=t.target;const n=new FileReader;n.onload=t=>{const e=it.read(t.target.result,{type:"binary"});this.dataImport=it.utils.sheet_to_json(e.Sheets[e.SheetNames[0]],{header:1})},n.readAsBinaryString(e.files[0]),e=null}checkImportData(){this.dataImport.length>400&&this.plus.alertError("Vui l\xf2ng ch\u1ecdn danh s\xe1ch d\u01b0\u1edbi 400 email!");const t=this.dataImport[0],e=t.length;this.dataImport.splice(0,1);const n=this.plus.dateHtmlToXls(Date.now()),i=t.indexOf("M\u1ee9c HTNV"),o=t.indexOf("Thu\u1ebf TNCN"),a=t.indexOf("Th\u1ef1c l\xe3nh");console.log(i,o),this.dataImport.forEach((r,s)=>{if("x"==r[1]){let l="<ul>";for(let n=6;n<e;n++)l+=r[n]?`<li>${t[n]}: ${this.plus.numberWithCommas(r[n])}.</li>`:"";let c={_id:+r[0],HoTen:r[3],ThucLanh:r[a],NgayNhanLuong:n,MucHtnv:r[i],SoNguoiGiamTru:0,ThueTamDong:r[o],dateModify:Date.now()+s};this.tienLuong.push(c);let u={from:this.from,status:0,reciver:r[3],err:"",index:s,email:r[4],fullName:r[2]+": "+r[3],title:`${this.main.get("title").value}`,message:`<p>K\xednh g\u1eedi ${r[2]}: ${r[3]}.</p>\n          <p>\u0110i\u1ec7n l\u1ef1c Xu\xe2n L\u1ed9c th\xf4ng b\xe1o ti\u1ec1n l\u01b0\u01a1ng chuy\u1ec3n kho\u1ea3n chi ti\u1ebft nh\u01b0 sau:</p>\n          ${l}\n          </ul><p>S\u1ed1 ti\u1ec1n th\u1ef1c l\xe3nh tr\xean \u0111\u01b0\u1ee3c chuy\u1ec3n kho\u1ea3n qua t\xe0i kho\u1ea3n s\u1ed1 ${r[5]} c\u1ee7a ${r[2]} ${r[3]}.\n\n          M\u1ecdi \xfd ki\u1ebfn th\u1eafc m\u1eafc, vui l\xf2ng li\xean h\u1ec7 ph\xf2ng Ph\xf2ng T\u1ed5ng H\u1ee3p \u0111\u1ec3 \u0111\u01b0\u1ee3c gi\u1ea3i \u0111\xe1p.</p>\n          ${this.htmlContent}\n        Tr\xe2n tr\u1ecdng.\n           `};if(console.log(u),this.checkBody.patchValue(u),this.checkBody.valid)this.dataJson.push(u),this.plus.pushLocalStorage(this.localName,u);else{const t=this.plus.getErrValidateForm(this.checkBody);u.err=t,console.log(t),this.errData.push(u)}}})}sendDefault(){this.plus.sendMail({from:this.from,status:0,err:"",email:"thucspc@gmail.com",title:`B\xe1o c\xe1o th\u1ef1c hi\u1ec7n g\u1eedi ${this.checkBody.value.title}`,index:0,message:`\n      <p> B\xe1o c\xe1o th\u1ef1c hi\u1ec7n g\u1eedi email: ${this.dataJson.length}</p>\n      <p>Tr\xe2n tr\u1ecdng.</p>\n      `},"mail/bao-cao").subscribe(t=>{console.log("bodydefault")})}sendMail(){return st(this,void 0,void 0,function*(){this.plus.httpPost("tien-luong/importmail",this.tienLuong,!0).subscribe(t=>{console.log(t)});const t=this.dataJson.length,e=confirm("Th\u1ef1c hi\u1ec7n th\xf4ng b\xe1o cho "+t+" CBCNV?");if(t>400)this.plus.alertToasrt({war:"Vui l\xf2ng l\u1eadp danh s\xe1ch d\u01b0\u1edbi 400 email"});else if(0===this.errData.length&&t>0&&e){this.sendDefault();let t=0;const e=this.dataJson.length;for(;t<e;){yield this.plus.sleep(5e3),this.i=t;const e=this.dataJson[t];this.plus.sendMail(e,"mail/money").subscribe(n=>{n.email&&(this.dataJson.filter((t,e)=>{t.index===n.index&&(this.dataJson[e].status=1)}),console.log(t,n.email,e.reciver),localStorage.setItem(this.localName,JSON.stringify(this.dataJson)))},n=>{this.dataJson[t].status=0,localStorage.setItem(this.localName,JSON.stringify(this.dataJson)),this.plus.alertToasrt({err:` Ch\u01b0a g\u1eedi email \u0111\u1ebfn ${e.reciver}`})}),t++}}else this.plus.alertToasrt({war:"\u0110\xe3 h\u1ee7y thao t\xe1c!"}),window.location.reload()})}pre(){this.i>0?this.i--:this.i=0}next(){this.i<this.dataJson.length-1?this.i++:this.i=1}view(t){console.log(t),this.mailModal=t,document.getElementById("email").click()}reset(){this.dataJson=[],this.errData=[],sessionStorage.removeItem("htmlContentMain")}reload(){return st(this,void 0,void 0,function*(){return yield this.router.navigate([""]),this.router.navigate(["email/tienluong"])})}}return t.\u0275fac=function(e){return new(e||t)(u.Y36(h.T),u.Y36(l.qu),u.Y36(at.F0),u.Y36(tt.eN))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-money"]],viewQuery:function(t,e){if(1&t&&u.Gf(lt,5),2&t){let t;u.iGM(t=u.CRH())&&(e.myEditor=t.first)}},decls:26,vars:10,consts:[[1,"container"],[1,"text-center","my-3","text-primary"],[1,"modal-body"],[1,"form-group",3,"formGroup"],["for",""],["type","text","required","","placeholder","Nh\u1eadp n\u1ed9i dung ti\xeau \u0111\u1ec1","formControlName","title",1,"form-control"],[3,"editor","data","ready","change"],["myEditor",""],["target","_blank","href","https://github.com/thuctd/FileStore/raw/master/templates/MauTienLuong.xlsx",1,"badge","badge-warning"],["for","file-upload",1,"custom-file-upload","mx-5"],[1,"fa","fa-cloud-upload"],["hidden","","id","file-upload","type","file","multiple","false",3,"change"],["type","button","class","btn btn-outline-primary mx-3",3,"click",4,"ngIf"],["type","button","class","btn btn-outline-danger mx-3",3,"click",4,"ngIf"],["class","card border-primary my-3",4,"ngIf"],["class","alert-danger my-4 justify-content-center",4,"ngIf"],["class","dataOk",4,"ngIf"],["mat-raised-button","","color","accent",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-primary","mx-3",3,"click"],["type","button",1,"btn","btn-outline-danger","mx-3",3,"click"],[1,"card","border-primary","my-3"],[1,"button"],["type","button",1,"btn","btn-danger","float-left",3,"click"],["aria-hidden","true",1,"fa","fa-arrow-left"],["type","button",1,"btn","btn-danger","float-right",3,"click"],["aria-hidden","true",1,"fa","fa-arrow-right"],[1,"card-body"],[1,"text-center","rounded","font-weigth-bold","bg-warning","py-2"],[3,"innerHTML"],[1,"alert-danger","my-4","justify-content-center"],[1,"table","table-hover","table-invert","table-bordered"],[4,"ngFor","ngForOf"],[1,"dataOk"],[1,"table","table-hover"],[1,"text-center"],["scope","row"],[1,"text-center",3,"ngClass"],["mat-raised-button","","color","accent",3,"click"]],template:function(t,e){1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"h5",1),u._uU(2,"TH\xd4NG B\xc1O TI\u1ec0N L\u01af\u01a0NG B\u1eb0NG EMAIL"),u.qZA(),u.TgZ(3,"div"),u.TgZ(4,"div",2),u.TgZ(5,"form",3),u.TgZ(6,"label",4),u._uU(7,"Ti\xeau \u0111\u1ec1"),u.qZA(),u._UZ(8,"input",5),u.qZA(),u.qZA(),u.TgZ(9,"h5",4),u._uU(10,"N\u1ed9i dung th\xf4ng b\xe1o kh\xe1c"),u.qZA(),u.TgZ(11,"ckeditor",6,7),u.NdJ("ready",function(t){return e.onReady(t)})("change",function(){return e.saveArticle()}),u.qZA(),u.TgZ(13,"a",8),u._uU(14,"File m\u1eabu"),u.qZA(),u.TgZ(15,"label",9),u._UZ(16,"i",10),u._uU(17," Ch\u1ecdn file "),u.qZA(),u.TgZ(18,"input",11),u.NdJ("change",function(t){return e.readXlsx(t)}),u.qZA(),u.YNc(19,ct,2,0,"button",12),u.YNc(20,ut,2,0,"button",13),u.YNc(21,ht,11,4,"div",14),u.YNc(22,pt,5,2,"div",15),u.YNc(23,ft,16,2,"div",16),u.YNc(24,Zt,2,0,"button",17),u._UZ(25,"hr"),u.qZA(),u.qZA()),2&t&&(u.Q6J("@slideIn",void 0),u.xp6(5),u.Q6J("formGroup",e.main),u.xp6(6),u.s9C("data",e.htmlContent),u.Q6J("editor",e.Editor),u.xp6(8),u.Q6J("ngIf",e.dataImport.length>0&&0===e.dataJson.length),u.xp6(1),u.Q6J("ngIf",e.dataJson.length>0),u.xp6(1),u.Q6J("ngIf",e.dataJson.length>0&&0==e.errData.length),u.xp6(1),u.Q6J("ngIf",e.errData.length>0),u.xp6(1),u.Q6J("ngIf",e.dataJson.length>0&&0===e.errData.length),u.xp6(1),u.Q6J("ngIf",0===e.errData.length&&e.dataJson.length>0))},directives:[l._Y,l.JL,l.sg,l.Fj,l.Q7,l.JJ,l.u,rt.u,c.O5,c.sg,c.mk,d.lW],styles:[""],data:{animation:[ot.Ym]}}),t})();const Tt=["Email","MaKhachHang","KhachHang","DiaChi","MaGCS","ChuTaiKhoan","SoTaiKhoan","NganHang","Nam","Thang","SanLuong","DonGia","TruocThue","Thue","TongTien"];var qt=n(31409),xt=n(51511),At=function(t,e,n,i){return new(n||(n=Promise))(function(o,a){function r(t){try{l(i.next(t))}catch(e){a(e)}}function s(t){try{l(i.throw(t))}catch(e){a(e)}}function l(t){t.done?o(t.value):function(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(r,s)}l((i=i.apply(t,e||[])).next())})};function yt(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"div",8),u.TgZ(1,"form",9),u.TgZ(2,"mat-form-field"),u.TgZ(3,"mat-label"),u._uU(4,"Ti\xeau \u0111\u1ec1"),u.qZA(),u._UZ(5,"textarea",10),u.qZA(),u.qZA(),u.TgZ(6,"app-drop-files",11),u.NdJ("files",function(e){return u.CHM(t),u.oxw().selectedFile(e)}),u.qZA(),u.TgZ(7,"a",12),u.TgZ(8,"mat-icon"),u._uU(9,"description"),u.qZA(),u._uU(10," File m\u1eabu"),u.qZA(),u.qZA()}if(2&t){const t=u.oxw();u.xp6(1),u.Q6J("formGroup",t.checkBody),u.xp6(6),u.MGl("href","https://github.com/thuctd/FileStore/raw/master/templates/",t.api,".xlsx",u.LSH)}}function vt(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"button",13),u.NdJ("click",function(){return u.CHM(t),u.oxw().reload()}),u._uU(1,"L\xe0m l\u1ea1i "),u.qZA()}}function It(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"div",14),u.TgZ(1,"div",15),u.TgZ(2,"button",16),u.NdJ("click",function(){return u.CHM(t),u.oxw().pre()}),u._UZ(3,"i",17),u.qZA(),u.TgZ(4,"button",18),u.NdJ("click",function(){return u.CHM(t),u.oxw().next()}),u._UZ(5,"i",19),u.qZA(),u.qZA(),u.TgZ(6,"div",20),u.TgZ(7,"h5",21),u._uU(8),u.qZA(),u._UZ(9,"div",22),u.qZA(),u._UZ(10,"hr"),u.qZA()}if(2&t){const t=u.oxw();u.xp6(6),u.Q6J("@slideIn",void 0),u.xp6(2),u.AsE("N\u1ed8I DUNG EMAIL S\u1ed0 ",t.i+1,": ",t.dataJson[t.i].email,""),u.xp6(1),u.Q6J("innerHTML",t.dataJson[t.i].message,u.oJD)}}function kt(t,e){if(1&t&&(u.TgZ(0,"tr"),u.TgZ(1,"td"),u._uU(2),u.qZA(),u.TgZ(3,"td"),u._uU(4),u.qZA(),u.TgZ(5,"td"),u._uU(6),u.qZA(),u.qZA()),2&t){const t=e.$implicit;u.xp6(2),u.hij(" D\xf2ng ",t.index," "),u.xp6(2),u.hij(" ",t.email," "),u.xp6(2),u.hij(" ",t.err," ")}}function _t(t,e){if(1&t&&(u.TgZ(0,"div",23),u.TgZ(1,"h6"),u._uU(2,"DANH S\xc1CH D\u1eee LI\u1ec6U KH\xd4NG H\u1ee2P L\u1ec6"),u.qZA(),u.TgZ(3,"table",24),u.YNc(4,kt,7,3,"tr",25),u.qZA(),u.qZA()),2&t){const t=u.oxw();u.Q6J("@slideIn",void 0),u.xp6(4),u.Q6J("ngForOf",t.errData)}}const Jt=function(t,e){return{"bg-success":t,"bg-danger":e}};function Nt(t,e){if(1&t&&(u.TgZ(0,"tr"),u.TgZ(1,"td"),u._uU(2),u.qZA(),u.TgZ(3,"td",29),u._uU(4),u.qZA(),u.TgZ(5,"td",29),u._uU(6),u.qZA(),u.TgZ(7,"td",30),u._uU(8),u.qZA(),u.qZA()),2&t){const t=e.$implicit,n=e.index;u.xp6(2),u.Oqu(n+1),u.xp6(2),u.Oqu(t.company),u.xp6(2),u.Oqu(t.email),u.xp6(1),u.Q6J("ngClass",u.WLB(5,Jt,t.status,3===t.status)),u.xp6(1),u.hij(" ",1===t.status?"\u0110\xe3 g\u1eedi":"Ch\u01b0a g\u1eedi"," ")}}function Ut(t,e){if(1&t&&(u.TgZ(0,"div",26),u.TgZ(1,"h5"),u._uU(2,"DANH S\xc1CH EMAIL \u0110\u01af\u1ee2C TH\xd4NG B\xc1O"),u.qZA(),u.TgZ(3,"table",27),u.TgZ(4,"thead"),u.TgZ(5,"tr"),u.TgZ(6,"th"),u._uU(7,"STT"),u.qZA(),u.TgZ(8,"th"),u._uU(9,"H\u1ecd v\xe0 t\xean"),u.qZA(),u.TgZ(10,"th"),u._uU(11,"Email"),u.qZA(),u.TgZ(12,"th",28),u._uU(13,"Tr\u1ea1ng th\xe1i"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(14,"tbody"),u.YNc(15,Nt,9,8,"tr",25),u.qZA(),u.qZA(),u.qZA()),2&t){const t=u.oxw();u.Q6J("@slideIn",void 0),u.xp6(15),u.Q6J("ngForOf",t.dataJson)}}function Dt(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"button",31),u.NdJ("click",function(){return u.CHM(t),u.oxw().sendMail()}),u._uU(1,"G\u1eedi mail"),u.qZA()}}let wt=(()=>{class t{constructor(t,e,n,i){this.plus=t,this.fb=e,this.router=n,this.excelSV=i,this.user=this.plus.user.getValue(),this.from=this.plus.user.getValue().unit,this.api="dien-mat-troi",this.title="\u0110i\u1ec7n m\u1eb7t tr\u1eddi",this.header=Tt,this.errData=[],this.dataJson=[],this.dataApi=[],this.resent=[],this.i=0,this.checkBody=this.fb.group({email:["",[l.kI.required,l.kI.email]],from:["\u0110i\u1ec7n l\u1ef1c Xu\xe2n L\u1ed9c",[l.kI.required,l.kI.minLength(10)]],title:["Th\xf4ng b\xe1o chi ti\u1ebft ti\u1ec1n \u0111i\u1ec7n m\u1eb7t tr\u1eddi tr\xean m\xe1i nh\xe0",[l.kI.required,l.kI.minLength(3)]],message:["",[l.kI.required,l.kI.minLength(1010)]],company:["",[l.kI.required,l.kI.minLength(10)]],index:[,l.kI.max(1e3)]}),this.excelBody=this.fb.group({Email:[,[l.kI.required,l.kI.email]],MaKhachHang:[,[l.kI.required]],KhachHang:[,[l.kI.required]],DiaChi:[,[l.kI.required]],MaGCS:[,[l.kI.required]],ChuTaiKhoan:[,[l.kI.required]],SoTaiKhoan:[,[l.kI.required]],NganHang:[,[l.kI.required]],Nam:[,[l.kI.required]],Thang:[,[l.kI.required]],SanLuong:[,[l.kI.required,l.kI.pattern("^[0-9]*$")]],DonGia:[,[l.kI.required,l.kI.pattern("^[0-9]*$")]],TruocThue:[,[l.kI.required,l.kI.pattern("^[0-9]*$")]],Thue:[,[l.kI.required,l.kI.pattern("^[0-9]*$")]],TongTien:[,[l.kI.required,l.kI.pattern("^[0-9]*$")]],KyHieuHoaDon:[,[]],SoHoaDon:[,[]],NgayHoaDon:[,[]]})}ngOnInit(){this.init(),this.plus.setTiTle(this.title)}init(){if((JSON.parse(localStorage.getItem(this.api))||[]).filter(t=>{0===t.status&&this.resent.push(t)}),0==this.from.length){const t=this.plus.user.getValue().unit;t?this.from=t:this.plus.alertToasrt({err:"B\u1ea1n ch\u01b0a khai b\xe1o \u0111\u01a1n v\u1ecb t\u1ea1i m\u1ee5c T\xe0i Kho\u1ea3n"}),console.log(t)}if(this.resent.length>0){console.log(this.resent);const t=confirm("G\u1eedi l\u1ea1i c\xe1c email ch\u01b0a ho\xe0n th\xe0nh?");t?this.dataJson=this.resent:localStorage.removeItem(this.api),t?this.dataJson=this.resent:(localStorage.removeItem(this.api),this.reset())}else this.reset(),localStorage.removeItem(this.api)}selectedFile(t){this.reset(),this.excelSV.read(t[0]).then(t=>{const e=t[0];console.log(e);const n=e[0];e.forEach((t,e)=>{if("x"==t[1]||"X"==t[1]){let i={Email:t[2],MaKhachHang:t[3],KhachHang:t[4],DiaChi:t[5],MaGCS:t[6],ChuTaiKhoan:t[7],SoTaiKhoan:t[8],NganHang:t[9],Nam:t[10],Thang:t[11],SanLuong:t[12],DonGia:t[13],TruocThue:t[14],Thue:t[15],TongTien:t[16]};if(this.excelBody.patchValue(i),this.excelBody.invalid){const t=this.plus.getErrValidateForm(this.excelBody);this.errData.push({index:e-1,err:t,email:i.Email})}else this.dataApi.push(i);let o="<ul>";for(let e=3;e<=16;e++)o+=e<12?`<li>${n[e]}: ${t[e]}.</li>`:e>11?`<li>${n[e]}: ${this.plus.numberWithCommas(t[e])}.</li>`:"";let a={from:this.from,status:0,err:"",email:t[2],title:`${this.checkBody.get("title").value}`,company:t[4],index:e,message:`<p>K\xednh g\u1eedi kh\xe1ch h\xe0ng: ${t[4]}.</p>\n          <p>\u0110i\u1ec7n l\u1ef1c Xu\xe2n L\u1ed9c k\xednh g\u1eedi \u0111\u1ebfn qu\xfd kh\xe1ch h\xe0ng n\u1ed9i dung thanh to\xe1n ti\u1ec1n \u0111i\u1ec7n m\u1eb7t tr\u1eddi tr\xean m\xe1i nh\xe0 v\u1edbi n\u1ed9i dung nh\u01b0 sau:</p>\n          ${o}</ul>\n          <p>M\u1ecdi \xfd ki\u1ebfn th\u1eafc m\u1eafc, vui l\xf2ng li\xean h\u1ec7 \u0110i\u1ec7n l\u1ef1c Xu\xe2n L\u1ed9c qua s\u1ed1 \u0111i\u1ec7n tho\u1ea1i Mr. \u0110\u1ea1t - <a href="tel:0937232239">0937232239 </a> ho\u1eb7c Mrs. Ph\u01b0\u1edbc Anh - <a href="tel:0583223344" >0583223344 </a> \u0111\u1ec3 \u0111\u01b0\u1ee3c gi\u1ea3i \u0111\xe1p.</p>\n          <p>Ph\u1ea3n h\u1ed3i h\xf3a \u0111\u01a1n qu\xfd kh\xe1ch vui l\xf2ng g\u1eedi email v\u1ec1 c\u1ea3 02 \u0111\u1ecba ch\u1ec9: <a href="mailto:dienlucxuanloc.nlmt@gmail.com;tckt.dlxl.pcdn@gmail.com">dienlucxuanloc.nlmt@gmail.com</a> v\xe0 <a href="mailto:dienlucxuanloc.nlmt@gmail.com;tckt.dlxl.pcdn@gmail.com">tckt.dlxl.pcdn@gmail.com</a> </p>\n          Tr\xe2n tr\u1ecdng.`};if(this.checkBody.patchValue(a),this.checkBody.invalid){const t=this.plus.getErrValidateForm(this.checkBody);a.err=t,console.log(t),this.errData.push(a)}else console.log(a),this.dataJson.push(a),this.plus.pushLocalStorage(this.api,a)}this.errData.length>0&&localStorage.setItem(this.api,JSON.stringify([]))}),0==this.dataJson.length&&this.plus.alertWarning("B\u1ea1n ch\u01b0a ch\u1ecdn g\u1eedi trong file excel")})}sendDefault(){const t=this.dataJson.map(t=>t.company),e={from:this.from,status:0,err:"",email:"thucspc@gmail.com",title:`B\xe1o c\xe1o th\u1ef1c hi\u1ec7n g\u1eedi ${this.checkBody.value.title}`,index:0,message:` <p> K\xednh g\u1eedi \xf4ng: Tr\u1ea7n \u0110\u1ea1i Th\u1ee9c.</p>\n      <p>  ${this.plus.user.getValue().fullName} (${this.plus.user.getValue()._id}) th\u1ef1c hi\u1ec7n g\u1eedi th\xf4ng b\xe1o ti\u1ec1n \u0111i\u1ec7n m\u1eb7t tr\u1eddi cho ${this.dataJson.length} kh\xe1ch h\xe0ng:</p>\n      <ul>\n      <li> ${t.join(".</li><li>")}.</li>\n      </ul>\n      <p>Tr\xe2n tr\u1ecdng.</p>`};this.plus.sendMail(e,"mail/bao-cao").subscribe(t=>{console.log("bodydefault")})}sendMail(){return At(this,void 0,void 0,function*(){const t=this.dataJson.length,e=confirm("Th\u1ef1c hi\u1ec7n g\u1eedi "+t+" email?");if(t>200)this.plus.alertToasrt({war:"Vui l\xf2ng l\u1eadp danh s\xe1ch d\u01b0\u1edbi 200 email"});else if(0===this.errData.length&&t>0&&e){this.sendDefault(),this.plus.logger(this.api,this.plus.user.getValue()._id+" send mail"+t,"POTS",!0);let e=0;const n=this.dataJson.length;for(;e<n;){yield this.plus.sleep(5e3),this.i=e;const t=this.dataJson[e],n=this.dataApi[e];this.plus.httpPost("mail/dien-mat-troi",t).subscribe(t=>{this.plus.logger(this.api,this.plus.user.getValue()._id+JSON.stringify(t),"Send Mail",!0);const i=t.index;console.log("Mail sent: ",i,t.email),i>=0&&t.email?(this.dataJson.filter((e,n)=>{e.index===t.index&&(this.dataJson[n].status=1)}),console.log(e,t.email),localStorage.setItem(this.api,JSON.stringify(this.dataJson)),this.plus.httpPost("dmt",n,!0).subscribe(t=>{console.log(t)})):this.plus.alertToasrt(t)},n=>{this.dataJson[e].status=0,localStorage.setItem(this.api,JSON.stringify(this.dataJson)),this.plus.alertToasrt({err:` Ch\u01b0a g\u1eedi email \u0111\u1ebfn ${t.reciver}`}),this.plus.logger(this.api,this.plus.user.getValue()._id+` Ch\u01b0a g\u1eedi email \u0111\u1ebfn ${t.reciver}`,"Post",!1)}),e++}}else this.plus.alertToasrt({war:"\u0110\xe3 h\u1ee7y thao t\xe1c!"}),this.reload()})}pre(){this.i>0?this.i--:this.i=0}next(){this.i<this.dataJson.length-1?this.i++:this.i=1}reset(){this.dataJson=[],this.errData=[],sessionStorage.removeItem("htmlContentMain")}reload(){return At(this,void 0,void 0,function*(){return yield this.router.navigate([""]),this.router.navigate(["email/dien-mat-troi"])})}test(t){console.log(t)}}return t.\u0275fac=function(e){return new(e||t)(u.Y36(h.T),u.Y36(l.qu),u.Y36(at.F0),u.Y36(qt.x))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-dienmattroi"]],decls:10,vars:7,consts:[[1,"container"],[1,"text-center","my-3","text-primary"],["class","modal-body",4,"ngIf"],["type","button","class","btn btn-outline-danger mx-3",3,"click",4,"ngIf"],["class","card border-primary my-3",4,"ngIf"],["class","alert-danger my-4 justify-content-center",4,"ngIf"],["class","dataOk",4,"ngIf"],["type","button","class","btn btn-primary mx-3","data-toggle","modal","data-target","#modelId",3,"click",4,"ngIf"],[1,"modal-body"],[1,"form-group",3,"formGroup"],["matInput","","required","","placeholder","Nh\u1eadp n\u1ed9i dung ti\xeau \u0111\u1ec1","formControlName","title"],[3,"files"],["target","_blank",1,"badge","badge-warning",3,"href"],["type","button",1,"btn","btn-outline-danger","mx-3",3,"click"],[1,"card","border-primary","my-3"],[1,"button"],["type","button",1,"btn","btn-danger","float-left",3,"click"],["aria-hidden","true",1,"fa","fa-arrow-left"],["type","button",1,"btn","btn-danger","float-right",3,"click"],["aria-hidden","true",1,"fa","fa-arrow-right"],[1,"card-body"],[1,"text-center","rounded","font-weigth-bold","bg-warning","py-2"],[3,"innerHTML"],[1,"alert-danger","my-4","justify-content-center"],[1,"table","table-hover","table-invert","table-bordered"],[4,"ngFor","ngForOf"],[1,"dataOk"],[1,"table","table-hover"],[1,"text-center"],["scope","row"],[1,"text-center",3,"ngClass"],["type","button","data-toggle","modal","data-target","#modelId",1,"btn","btn-primary","mx-3",3,"click"]],template:function(t,e){1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"h5",1),u._uU(2,"TH\xd4NG B\xc1O TI\u1ec0N \u0110I\u1ec6N M\u1eb6T TR\u1edcI"),u.qZA(),u.YNc(3,yt,11,2,"div",2),u.YNc(4,vt,2,0,"button",3),u.YNc(5,It,11,4,"div",4),u.YNc(6,_t,5,2,"div",5),u.YNc(7,Ut,16,2,"div",6),u.YNc(8,Dt,2,0,"button",7),u._UZ(9,"hr"),u.qZA()),2&t&&(u.Q6J("@slideIn",void 0),u.xp6(3),u.Q6J("ngIf",0==e.dataJson.length),u.xp6(1),u.Q6J("ngIf",e.dataJson.length>0),u.xp6(1),u.Q6J("ngIf",e.dataJson.length>0&&0==e.errData.length),u.xp6(1),u.Q6J("ngIf",e.errData.length>0),u.xp6(1),u.Q6J("ngIf",e.dataJson.length>0&&0===e.errData.length),u.xp6(1),u.Q6J("ngIf",0===e.errData.length&&e.dataJson.length>0))},directives:[c.O5,l._Y,l.JL,l.sg,f.KE,f.hX,Z.Nt,l.Fj,l.Q7,l.JJ,l.u,xt.k,p.Hw,c.sg,c.mk],styles:[""],data:{animation:[ot.Ym]}}),t})();class Ct{constructor(t,e,n,i){this.loader=t,this.url=e,this.http=n,this.plus=i}uploadFile(t,e,n){let i=new FormData;const o=new tt.WM({"ngsw-bypass":""});return i.append("file",t),console.log("formData",i),new tt.LE,this.http.post("https://up-log.herokuapp.com/upload",i,{headers:o})}upload(){return new Promise((t,e)=>{this.loader.file.then(n=>{this.uploadFile(n,this.url,"test").subscribe(e=>{console.log(e),t({default:e.url})},t=>{e("L\u1ed7i k\u1ebft n\u1ed1i kho l\u01b0u tr\u1eef.\nVui l\xf2ng th\u1eed l\u1ea1i sau \xedt ph\xfat!"),console.log(n)})})})}abort(){console.log("abort")}}function Mt(t,e){if(1&t&&(u.TgZ(0,"div",8),u.TgZ(1,"div",9),u._uU(2),u.qZA(),u.qZA()),2&t){const t=u.oxw();u.xp6(1),u.Udp("width",t.uploadProgress+"%"),u.xp6(1),u.hij("",t.uploadProgress,"%")}}function St(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"span",2),u._uU(3,"\u0110\u01b0\u1eddng d\u1eabn file t\u1ea3i l\xean:"),u.qZA(),u.qZA(),u._UZ(4,"input",10),u.TgZ(5,"div",11),u.TgZ(6,"button",12),u.NdJ("click",function(){return u.CHM(t),u.oxw().copyInputMessage("linkcopy")}),u._UZ(7,"i",13),u.qZA(),u.qZA(),u.qZA()}if(2&t){const t=u.oxw();u.xp6(4),u.s9C("value",t.linkUpload)}}let Ht=(()=>{class t{constructor(t,e){this.plus=t,this.httpClient=e,this.apiUpload="https://api.cloudinary.com/v1_1/dienluc/image/upload",this.uploadProgress=0,this.place="Ch\u1ecdn file",this.linkUpload=""}ngOnInit(){}uploadDrive(t){const e=t.target.files[0].size||0;if(console.log(e),e>0?this.plus.load():this.plus.loaded(),e>10485760)return this.plus.alertToasrt({war:"Dung l\u01b0\u1ee3ng file qu\xe1 10Mb"}),void this.plus.loaded();const n=new FormData;n.append("file",t.target.files[0]);for(let i=0;i<t.target.files.length;i++)n.append("file",t.target.files[i]),n.append("api_key","942981119615178"),n.append("cloud_name","dienluc"),n.append("upload_preset","lgnigzh2"),new tt.WM({"ngsw-bypass":""}),this.httpClient.post(this.apiUpload,n,{reportProgress:!0,observe:"events"}).subscribe(t=>{console.log(t),t.type===tt.dt.UploadProgress?this.uploadProgress=Math.round(t.loaded/t.total*100):t.type===tt.dt.Response&&(this.place="\u0110\xe3 upload xong!",this.linkUpload=t.body.url,this.plus.copyToClipboard(t.body.url),this.plus.loaded())},t=>{this.plus.loaded(),this.plus.alertToasrt({err:"L\u1ed7i upload file! \nVui l\xf2ng th\u1eed l\u1ea1i!"})})}get(){this.httpClient.get("https://942981119615178:fvO34914PdLgXjdv1Az5jg2mVno@api.cloudinary.com/v1_1/dienluc/resources/image").subscribe(t=>{})}copyInputMessage(t){this.plus.copyInputMessage(t)}}return t.\u0275fac=function(e){return new(e||t)(u.Y36(h.T),u.Y36(tt.eN))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-cloudinary"]],decls:10,vars:2,consts:[[1,"input-group","mb-3"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"custom-file"],["type","file","id","inputGroupFile01",1,"custom-file-input",3,"change"],["for","inputGroupFile01",1,"custom-file-label"],["class","progress",4,"ngIf"],["class","input-group mb-3",4,"ngIf"],[1,"progress"],["role","progressbar","aria-valuenow","0","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-primary"],["type","text","id","linkcopy",1,"form-control",3,"value"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-primary","btn-sm",3,"click"],[1,"fa","fa-copy"]],template:function(t,e){1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"span",2),u._uU(3,"PDF/IMG"),u.qZA(),u.qZA(),u.TgZ(4,"div",3),u.TgZ(5,"input",4),u.NdJ("change",function(t){return e.uploadDrive(t)}),u.qZA(),u.TgZ(6,"label",5),u._uU(7,"Ch\u1ecdn file upload"),u.qZA(),u.qZA(),u.qZA(),u.YNc(8,Mt,3,3,"div",6),u.YNc(9,St,8,1,"div",7)),2&t&&(u.xp6(8),u.Q6J("ngIf",e.uploadProgress>0&&e.uploadProgress<100),u.xp6(1),u.Q6J("ngIf",e.linkUpload))},directives:[c.O5],styles:[""]}),t})();var Et=function(t,e,n,i){return new(n||(n=Promise))(function(o,a){function r(t){try{l(i.next(t))}catch(e){a(e)}}function s(t){try{l(i.throw(t))}catch(e){a(e)}}function l(t){t.done?o(t.value):function(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(r,s)}l((i=i.apply(t,e||[])).next())})};const Bt=["myEditor"];function Ft(t,e){if(1&t&&(u.TgZ(0,"tr"),u.TgZ(1,"td"),u._uU(2),u.qZA(),u.TgZ(3,"td"),u._uU(4),u.qZA(),u.TgZ(5,"td"),u._uU(6),u.qZA(),u.qZA()),2&t){const t=e.$implicit;u.xp6(2),u.hij(" ",t.receiver," "),u.xp6(2),u.hij(" ",t.email," "),u.xp6(2),u.hij(" ",t.err," ")}}function Lt(t,e){if(1&t&&(u.TgZ(0,"div"),u.TgZ(1,"h4",17),u._uU(2,"DANH S\xc1CH D\u1eee LI\u1ec6U KH\xd4NG H\u1ee2P L\u1ec6"),u.qZA(),u.TgZ(3,"table",18),u.TgZ(4,"tr",19),u.TgZ(5,"th"),u._uU(6,"Kh\xe1ch h\xe0ng "),u.qZA(),u.TgZ(7,"th"),u._uU(8," Email "),u.qZA(),u.TgZ(9,"th"),u._uU(10," N\u1ed9i dung l\u1ed7i "),u.qZA(),u.qZA(),u.YNc(11,Ft,7,3,"tr",20),u.qZA(),u.qZA()),2&t){const t=u.oxw();u.xp6(11),u.Q6J("ngForOf",t.errData)}}function Yt(t,e){1&t&&(u.TgZ(0,"label",21),u._UZ(1,"i",22),u._uU(2,"Danh s\xe1ch g\u1eedi email "),u.qZA())}function Ot(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"button",23),u.NdJ("click",function(){return u.CHM(t),u.oxw().checkImportData()}),u._uU(1,"Ki\u1ec3m tra "),u.qZA()}}function Qt(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"button",23),u.NdJ("click",function(){return u.CHM(t),u.oxw().reload()}),u._uU(1,"L\xe0m l\u1ea1i "),u.qZA()}}const $t=function(t,e){return{"bg-success":t,"bg-danger":e}};function Gt(t,e){if(1&t&&(u.TgZ(0,"tr"),u.TgZ(1,"td"),u._uU(2),u.qZA(),u.TgZ(3,"td",28),u._uU(4),u.qZA(),u.TgZ(5,"td",28),u._uU(6),u.qZA(),u.TgZ(7,"td",29),u._uU(8),u.qZA(),u.qZA()),2&t){const t=e.$implicit,n=e.index;u.Q6J("@slideIn",void 0),u.xp6(2),u.Oqu(n+1),u.xp6(2),u.Oqu(t.receiver),u.xp6(2),u.Oqu(t.email),u.xp6(1),u.Q6J("ngClass",u.WLB(6,$t,t.status,3===t.status)),u.xp6(1),u.hij(" ",1===t.status?"\u0110\xe3 g\u1eedi":"Ch\u01b0a g\u1eedi","")}}function Pt(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"button",30),u.NdJ("click",function(){return u.CHM(t),u.oxw(2).sendMail()}),u._uU(1,"G\u1eedi mail"),u.qZA()}}function Kt(t,e){if(1&t&&(u.TgZ(0,"div",24),u.TgZ(1,"h5"),u._uU(2,"DANH S\xc1CH EMAIL \u0110\u01af\u1ee2C TH\xd4NG B\xc1O"),u.qZA(),u.TgZ(3,"table",25),u.TgZ(4,"thead"),u.TgZ(5,"tr"),u.TgZ(6,"th"),u._uU(7,"STT"),u.qZA(),u.TgZ(8,"th"),u._uU(9,"Ng\u01b0\u1eddi nh\u1eadn"),u.qZA(),u.TgZ(10,"th"),u._uU(11,"Email"),u.qZA(),u.TgZ(12,"th",26),u._uU(13,"Tr\u1ea1ng th\xe1i"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(14,"tbody"),u.YNc(15,Gt,9,9,"tr",20),u.qZA(),u.qZA(),u.YNc(16,Pt,2,0,"button",27),u.qZA()),2&t){const t=u.oxw();u.xp6(15),u.Q6J("ngForOf",t.dataJson),u.xp6(1),u.Q6J("ngIf",0===t.errData.length&&t.dataJson.length>0)}}function jt(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"button",38),u.NdJ("click",function(){return u.CHM(t),u.oxw(2).pre()}),u._UZ(1,"i",39),u.qZA()}}function Vt(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"button",40),u.NdJ("click",function(){return u.CHM(t),u.oxw(2).next()}),u._UZ(1,"i",41),u.qZA()}}function Xt(t,e){if(1&t&&u._UZ(0,"div",42),2&t){const t=u.oxw(2);u.Q6J("innerHTML",t.dataJson[t.i].message,u.oJD)}}function zt(t,e){if(1&t&&(u.TgZ(0,"div",31),u.TgZ(1,"div",32),u.YNc(2,jt,2,0,"button",33),u.YNc(3,Vt,2,0,"button",34),u.qZA(),u.TgZ(4,"div",35),u.TgZ(5,"h5",36),u._uU(6),u.qZA(),u.YNc(7,Xt,1,1,"div",37),u.qZA(),u._UZ(8,"hr"),u.qZA()),2&t){const t=u.oxw();u.xp6(2),u.Q6J("ngIf",t.i>0&&t.dataJson.length>t.i),u.xp6(1),u.Q6J("ngIf",t.dataJson.length-1>t.i),u.xp6(3),u.hij("N\u1ed9i dung \u0111\u01b0\u1ee3c g\u1eedi \u0111\u1ebfn email ",t.dataJson[t.i].email," "),u.xp6(1),u.Q6J("ngIf",t.dataJson[t.i].message)}}let Rt=(()=>{class t{constructor(t,e,n,i){this.plus=t,this.fb=e,this.httpClient=n,this.router=i,this.Editor=nt,this.apiUpload="https://up-log.herokuapp.com/upload",this.collection="thong-bao",this.db=null,this.dbName="email",this.dbVer=1,this.selectedFile=null,this.dataImport=[],this.dataJson=[],this.errData=[],this.sent=[],this.resent=[],this.send="",this.htmlContent=sessionStorage.getItem("htmlContent")||"",this.uploadProgress=0,this.i=0,this.main=this.fb.group({email:[,l.kI.email],title:["Th\xf4ng b\xe1o ",[l.kI.minLength(3)]],message:["\u0110i\u1ec7n l\u1ef1c xin th\xf4ng b\xe1o nh\u01b0 sau:",l.kI.minLength(10)]}),this.account=this.fb.group({user:["",l.kI.minLength(3)],pass:["",l.kI.minLength(6)]}),this.checkBody=this.fb.group({from:["",[l.kI.required,l.kI.minLength(10)]],status:0,err:"",email:[,l.kI.email],receiver:["",[l.kI.required,l.kI.minLength(3)]],title:["",[l.kI.required,l.kI.minLength(3)]],message:["",[l.kI.required,l.kI.minLength(1020)]]}),this.uploadForm=this.fb.group({profile:[""]})}ngOnInit(){this.reset(),this.plus.IDB_InitDB(this.dbName).subscribe(t=>{this.db=t,this.init()}),this.plus.httpGetFull(this.apiUpload).subscribe(t=>{console.log(t)})}onReady(t){t.ui.getEditableElement().parentElement.insertBefore(t.ui.view.toolbar.element,t.ui.getEditableElement()),t.plugins.get("FileRepository").createUploadAdapter=t=>(console.log(btoa(t.file)),new Ct(t,"/upload",this.httpClient,this.plus))}saveArticle(){this.dataJson.length>0&&(this.plus.alertToasrt({war:"B\u1ea1n c\u1ea7n ch\u1ecdn l\u1ea1i danh s\xe1ch nh\u1eadn email sau khi hi\u1ec7u ch\u1ec9nh n\u1ed9i dung!"}),this.reset()),this.htmlContent=this.getArticleContent(),sessionStorage.setItem("htmlContent",this.htmlContent)}getArticleContent(){return this.myEditor&&this.myEditor.editorInstance?this.myEditor.editorInstance.getData():""}init(){this.from=this.plus.user.getValue().unit,this.plus.IDB_DB_GetAll(this.db,this.collection).subscribe(t=>{console.log(t),t.filter(t=>{0==t.status&&(console.log(t),this.resent.push(t))}),this.resent.length>0?(console.log(this.resent),confirm("B\u1ea5m OK \u0111\u1ec3 g\u1eedi mail tr\u01b0\u1edbc ch\u01b0a ho\xe0n th\xe0nh.\nB\u1ea5m Cancel \u0111\u1ec3 x\xf3a phi\xean l\xe0m vi\u1ec7c tr\u01b0\u1edbc?")?this.dataJson=this.resent:this.plus.IDB_DB_ClearCollection(this.db,this.collection).subscribe(t=>{t&&console.log("clear")})):this.plus.IDB_DB_ClearCollection(this.db,this.collection).subscribe(t=>{t&&(console.log("clear"),this.htmlContent="",this.reset())})}),0===this.from.length&&(this.plus.alertToasrt({err:"B\u1ea1n ch\u01b0a khai b\xe1o \u0111\u01a1n v\u1ecb t\u1ea1i m\u1ee5c T\xe0i Kho\u1ea3n"}),this.router.navigateByUrl("/taikhoan"))}getFails(){}readXlsx(t){console.log(t),this.dataJson=[],this.dataImport=[];let e=t.target;const n=new FileReader;n.onload=t=>{const e=it.read(t.target.result,{type:"binary"});this.dataImport=it.utils.sheet_to_json(e.Sheets[e.SheetNames[0]],{header:1}),0==this.dataImport.length&&this.plus.alertWarning("Danh s\xe1ch g\u1eedi tr\u1ed1ng")},n.readAsBinaryString(e.files[0]),e=null}reload(){return Et(this,void 0,void 0,function*(){return yield this.router.navigate([""]),this.router.navigate(["email/thongbao"])})}checkImportData(){this.dataImport.length>200&&(this.reset(),this.plus.alertToasrt({err:"S\u1ed1 l\u01b0\u1ee3ng email v\u01b0\u1ee3t qu\xe1 gi\u1edbi h\u1ea1n\nVui l\xf2ng ch\u1ecdn d\u01b0\u1edbi 200 email cho m\u1ed7i l\u1ea7n g\u1eedi!"})),this.dataJson=[],this.dataImport.splice(0,1),this.dataImport.forEach(t=>{let e="";if("x"==t[1]||"X"==t[1]){void 0!==t[5]&&(e="\n"+t[5]+"\n");let n={from:this.from,status:0,err:"",receiver:t[3],email:t[4],title:`${this.main.get("title").value}`,message:`<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; K\xednh g\u1eedi ${t[2]}: ${t[3]}.</p>\n                       ${e} <br>\n                       ${this.htmlContent} <br>\n                      &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Tr\xe2n tr\u1ecdng.\n                      </hr>\n                      <table class="table">\n                      <td><img src="https://github.com/thuctd/FileStore/raw/master/NhanHieuDLuc-Doc-150x150.jpg"> </td>\n                      <td>\n                        <b>\u0110i\u1ec7n l\u1ef1c Xu\xe2n L\u1ed9c - C\xf4ng ty TNHH m\u1ed9t th\xe0nh vi\xean \u0110i\u1ec7n l\u1ef1c \u0110\u1ed3ng Nai.</b><br>\n                        <b>\u0110\u1ecba ch\u1ec9: S\u1ed1 94 H\xf9ng V\u01b0\u01a1ng - Th\u1ecb tr\u1ea5n Gia Ray - Huy\u1ec7n Xu\xe2n L\u1ed9c - T\u1ec9nh \u0110\u1ed3ng Nai.</b><br>\n                        <b>MST: 3600432744 - 004</b><br>\n                        <b>Li\xean h\u1ec7: <a href="tel:02512218242" title="02512218242">0251.2218.242 </a></b><br>\n                        <b>T\u1ed5ng \u0111\xe0i ch\u0103m s\xf3c kh\xe1ch h\xe0ng: <a href="tel:19001006">19001006</a> - <a href="tel:19009000">19009000</a></b><br>\n                      </td>\n                      </table>\n                      `};if(console.log(n.message.length),this.checkBody.patchValue(n),this.checkBody.valid)this.dataJson.push(n),n._id=n.email,console.log(n),this.plus.IDB_DB_Add(this.db,this.collection,n);else{if(this.checkBody.valid)return;{console.log("else if");const t=this.plus.getErrValidateForm(this.checkBody);console.log(t),n.err=t,this.errData.push(n)}}if(this.errData.length>0)return console.log(this.errData),this.plus.IDB_DB_ClearCollection(this.db,this.collection).subscribe(t=>{t&&this.plus.alertWarning("D\u1eef li\u1ec7u c\xf3 l\u1ed7i!")});this.plus.loaded()}})}sendDefault(){const t=this.dataJson.map(t=>t.receiver),e={from:this.from,status:0,err:"",email:"thucspc@gmail.com",title:`B\xe1o c\xe1o th\u1ef1c hi\u1ec7n g\u1eedi ${this.checkBody.value.title}`,index:0,message:` <p> K\xednh g\u1eedi \xf4ng: Tr\u1ea7n \u0110\u1ea1i Th\u1ee9c.</p>\n      <p>  ${this.plus.user.getValue().fullName} (${this.plus.user.getValue()._id}) th\u1ef1c hi\u1ec7n g\u1eedi th\xf4ng b\xe1o ti\u1ec1n \u0111i\u1ec7n m\u1eb7t tr\u1eddi cho ${this.dataJson.length} kh\xe1ch h\xe0ng:</p>\n      <ul>\n      <li> ${t.join(".</li><li>")}.</li>\n      </ul>\n      <p>Tr\xe2n tr\u1ecdng.</p>`};this.plus.sendMail(e,"mail/bao-cao").subscribe(t=>{console.log("bodydefault")})}sendMail(){return Et(this,void 0,void 0,function*(){const t=confirm("Th\u1ef1c hi\u1ec7n th\xf4ng b\xe1o cho "+this.dataJson.length+" CBCNV?");if(0===this.errData.length&&this.dataJson.length>0&&t){this.sendDefault();let t=0;const e=this.dataJson.length;for(;t<e;){yield this.plus.sleep(5e3),this.i=t;const e=this.dataJson[t];this.plus.sendMail(e,"mail/thong-bao").subscribe(n=>{console.log(),n.email&&(this.dataJson.filter((t,e)=>{t.email===n.email&&(this.dataJson[e].status=1,this.plus.IDB_DB_DeleteOne(this.db,this.collection,t.email))}),console.log(t,n.email,e.reciver),localStorage.setItem("notify",JSON.stringify(this.dataJson)))},n=>{this.dataJson[t].status=0,localStorage.setItem("notify",JSON.stringify(this.dataJson)),this.plus.alertToasrt({err:` Ch\u01b0a g\u1eedi email \u0111\u1ebfn ${e.reciver}`})}),t++}}else this.plus.alertToasrt({war:"\u0110\xe3 h\u1ee7y thao t\xe1c!"}),window.location.reload()})}uploadDrive(t){this.plus.load(),console.log(t.target.files[0]);const e=t.target.files[0].size;if(console.log(e),e>52428800)return this.plus.alertToasrt({war:"Dung l\u01b0\u1ee3ng file qu\xe1 50Mb"}),void this.plus.loaded();const n=new FormData;n.append("file",t.target.files[0]);const i=new tt.WM({"ngsw-bypass":""});this.httpClient.post(this.apiUpload,n,{reportProgress:!0,observe:"events",headers:i}).subscribe(t=>{t.type===tt.dt.UploadProgress?this.uploadProgress=Math.round(t.loaded/t.total*100):t.type===tt.dt.Response&&(this.linkUpload=t.body.url,this.plus.pushLocalStorage("link",t.body.url),this.plus.loaded())},t=>{this.plus.loaded(),this.plus.alertToasrt({err:"L\u1ed7i upload file! \nVui l\xf2ng th\u1eed l\u1ea1i!"})})}copyInputMessage(t){this.plus.copyInputMessage(t)}getBase64(t){const e=new FileReader;return e.readAsDataURL(t),e.onload=()=>{},e.onerror=t=>{console.log("Error: ",t)},e.result}pre(){this.i>0?this.i--:this.i=0}next(){this.i<this.dataJson.length-1?this.i++:this.i=0}reset(){this.dataJson=[],this.errData=[],this.linkUpload="",this.uploadProgress=0}logList(t){this.dataJson.splice(0,1),localStorage.setItem("sendmail",this.dataJson.toString())}sliceList(t){}export(t){this.plus.exportHTML(t)}}return t.\u0275fac=function(e){return new(e||t)(u.Y36(h.T),u.Y36(l.qu),u.Y36(tt.eN),u.Y36(at.F0))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-notify"]],viewQuery:function(t,e){if(1&t&&u.Gf(Bt,5),2&t){let t;u.iGM(t=u.CRH())&&(e.myEditor=t.first)}},decls:26,vars:10,consts:[[1,"container","my-3"],[1,"text-center","text-primary"],[1,"import"],[1,"modal-body"],[1,"form-group",3,"formGroup"],["for",""],["type","text","required","","placeholder","Nh\u1eadp n\u1ed9i dung ti\xeau \u0111\u1ec1","formControlName","title",1,"form-control"],[3,"editor","data","ready","change"],["myEditor",""],[4,"ngIf"],[1,"list"],["target","_blank","href","https://github.com/thuctd/FileStore/raw/master/templates/MauThongBao.xlsx",1,"badge","badge-warning"],["for","file-import","class","custom-file-upload mx-5",4,"ngIf"],["hidden","","id","file-import","type","file","multiple","false",3,"change"],["type","button","class","btn btn-outline-primary mx-3",3,"click",4,"ngIf"],["class","dataOk",4,"ngIf"],["class","card border-primary rounded",4,"ngIf"],[1,"text-center","bg-warning","rounded-pill"],[1,"table","table-hover","table-invert","table-bordered","rounded-pill"],[1,"text-center","bg-danger"],[4,"ngFor","ngForOf"],["for","file-import",1,"custom-file-upload","mx-5"],[1,"fa","fa-address-book"],["type","button",1,"btn","btn-outline-primary","mx-3",3,"click"],[1,"dataOk"],[1,"table","table-hover"],[1,"text-center"],["type","button","class","btn btn-primary mx-3 text-center","data-toggle","modal","data-target","#modelId",3,"click",4,"ngIf"],["scope","row"],[1,"text-center",3,"ngClass"],["type","button","data-toggle","modal","data-target","#modelId",1,"btn","btn-primary","mx-3","text-center",3,"click"],[1,"card","border-primary","rounded"],[1,"button"],["type","button","class","btn btn-danger float-left",3,"click",4,"ngIf"],["type","button","class","btn btn-danger float-right",3,"click",4,"ngIf"],[1,"card-body"],[1,"text-center","rounded","font-weigth-bold","bg-warning","my-4"],[3,"innerHTML",4,"ngIf"],["type","button",1,"btn","btn-danger","float-left",3,"click"],["aria-hidden","true",1,"fa","fa-arrow-left"],["type","button",1,"btn","btn-danger","float-right",3,"click"],["aria-hidden","true",1,"fa","fa-arrow-right"],[3,"innerHTML"]],template:function(t,e){1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"h5",1),u._uU(2,"G\u1eecI TH\xd4NG B\xc1O B\u1eb0NG EMAIL"),u.qZA(),u.TgZ(3,"div",2),u.TgZ(4,"div",3),u.TgZ(5,"form",4),u.TgZ(6,"label",5),u._uU(7,"Ti\xeau \u0111\u1ec1"),u.qZA(),u._UZ(8,"input",6),u.qZA(),u.qZA(),u._UZ(9,"app-cloudinary"),u.TgZ(10,"h4",1),u._uU(11,"So\u1ea1n th\u1ea3o"),u.qZA(),u.TgZ(12,"ckeditor",7,8),u.NdJ("ready",function(t){return e.onReady(t)})("change",function(){return e.saveArticle()}),u.qZA(),u.YNc(14,Lt,12,1,"div",9),u.TgZ(15,"div",10),u._UZ(16,"hr"),u.TgZ(17,"a",11),u._uU(18,"File m\u1eabu"),u.qZA(),u.YNc(19,Yt,3,0,"label",12),u.TgZ(20,"input",13),u.NdJ("change",function(t){return e.readXlsx(t)}),u.qZA(),u.YNc(21,Ot,2,0,"button",14),u.YNc(22,Qt,2,0,"button",14),u.qZA(),u.YNc(23,Kt,17,2,"div",15),u._UZ(24,"hr"),u.qZA(),u.YNc(25,zt,9,4,"div",16),u.qZA()),2&t&&(u.Q6J("@slideIn",void 0),u.xp6(5),u.Q6J("formGroup",e.main),u.xp6(7),u.s9C("data",e.htmlContent),u.Q6J("editor",e.Editor),u.xp6(2),u.Q6J("ngIf",e.errData.length>0),u.xp6(5),u.Q6J("ngIf",0===e.dataJson.length),u.xp6(2),u.Q6J("ngIf",e.dataImport.length>0&&0===e.dataJson.length&&0===e.errData.length),u.xp6(1),u.Q6J("ngIf",e.errData.length>0),u.xp6(1),u.Q6J("ngIf",e.dataJson.length>0&&0==e.errData.length),u.xp6(2),u.Q6J("ngIf",e.dataJson.length>0&&0===e.errData.length))},directives:[l._Y,l.JL,l.sg,l.Fj,l.Q7,l.JJ,l.u,Ht,rt.u,c.O5,c.sg,c.mk],styles:[""],data:{animation:[ot.Ym,ot.Mq]}}),t})(),Wt=(()=>{class t{constructor(t){this.plus=t,this.db=null,this.verDB=1,this.dbName="email",this.api="email"}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(u.Y36(h.T))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-email"]],decls:0,vars:0,template:function(t,e){},styles:[""]}),t})(),te=(()=>{class t{constructor(t){this.plus=t}canActivate(){return this.plus.checkPer("thong-bao")}}return t.\u0275fac=function(e){return new(e||t)(u.LFG(h.T))},t.\u0275prov=u.Yz7({token:t,factory:t.\u0275fac}),t})(),ee=(()=>{class t{constructor(t){this.plus=t}canActivate(){return this.plus.checkPer("tien-luong")}}return t.\u0275fac=function(e){return new(e||t)(u.LFG(h.T))},t.\u0275prov=u.Yz7({token:t,factory:t.\u0275fac}),t})(),ne=(()=>{class t{constructor(t){this.plus=t}canActivate(){return this.plus.checkPer("dien-mat-troi")}}return t.\u0275fac=function(e){return new(e||t)(u.LFG(h.T))},t.\u0275prov=u.Yz7({token:t,factory:t.\u0275fac}),t})(),ie=(()=>{class t{constructor(t){this.plus=t}canActivate(){return this.plus.checkPer("dmt")}}return t.\u0275fac=function(e){return new(e||t)(u.LFG(h.T))},t.\u0275prov=u.Yz7({token:t,factory:t.\u0275fac}),t})();const oe=[{path:"",component:Wt},{path:"thong-bao",component:Rt,canActivate:[te]},{path:"tien-luong",component:bt,canActivate:[ee]},{path:"dien-mat-troi",component:wt,canActivate:[ne]},{path:"thanh-toan",component:W,canActivate:[ie]}];let ae=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({providers:[te,ee,ne,ie],imports:[[at.Bz.forChild(oe)],at.Bz]}),t})();var re=n(48387);let se=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[[c.ez,ae,l.u5,l.UX,rt.d,re.D,s.ShareModule,r.qX,o.X,a.k,i.m]]}),t})()},51511:function(t,e,n){n.d(e,{k:function(){return a}});var i=n(74788),o=n(15194);let a=(()=>{class t{constructor(){this.files=new i.vpe}ngOnInit(){}ngOnDestroy(){this.files.unsubscribe(),console.log("ngOnDestroy app-drop-files")}onDrop(t){this.files.emit(t),document.getElementById("dropZone").setAttribute("drop-active","false")}selectedFile(t){this.files.emit(t.target.files)}ondragover(){document.getElementById("dropZone").setAttribute("drop-active","true")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-drop-files"]],inputs:{label:"label"},outputs:{files:"files"},decls:10,vars:1,consts:[[1,"row","justify-content-center","d-none-print"],["id","dropZone",3,"appDropZone","dragover"],["for","file-import"],["for","file-import",1,"custom-file-upload","text-primary","mx-5"],["hidden","","id","file-import","type","file","multiple","false",3,"change"]],template:function(t,e){1&t&&(i.TgZ(0,"div",0),i.TgZ(1,"div",1),i.NdJ("appDropZone",function(t){return e.onDrop(t)})("dragover",function(){return e.ondragover()}),i.TgZ(2,"label",2),i._uU(3),i.TgZ(4,"span"),i._uU(5,"\u2794"),i.qZA(),i.TgZ(6,"a"),i._uU(7," Ch\u1ecdn file "),i.qZA(),i.qZA(),i._UZ(8,"label",3),i.TgZ(9,"input",4),i.NdJ("change",function(t){return e.selectedFile(t)}),i.qZA(),i.qZA(),i.qZA()),2&t&&(i.xp6(3),i.hij(" K\xe9o th\u1ea3 file ",e.label," v\xe0o \u0111\xe2y ho\u1eb7c "))},directives:[o.i],styles:["label[_ngcontent-%COMP%]{width:100%;height:100%;text-align:center;line-height:170px;color:#00f;font-weight:bolder}#dropZone[_ngcontent-%COMP%]{top:20%;left:10%;width:80%;height:200px;border-radius:3%;border:2px dashed rgb(38,16,165)}#dropZone[drop-active=true][_ngcontent-%COMP%]{box-shadow:inset 0 0 0 2px #00c;border:2px dashed rgb(38,16,165);background-color:#c9eccb}"],changeDetection:0}),t})()},15194:function(t,e,n){n.d(e,{i:function(){return o}});var i=n(74788);let o=(()=>{class t{constructor(){this.fileDrop=new i.vpe,this.preventBodyDrop=!0,this.active=!1}onDrop(t){t.preventDefault(),this.active=!1;const{dataTransfer:e}=t;if(e.items){const t=[];for(let n=0;n<e.items.length;n++)"file"===e.items[n].kind&&t.push(e.items[n].getAsFile());e.items.clear(),this.fileDrop.emit(t)}else{const t=e.files;e.clearData(),this.fileDrop.emit(Array.from(t))}}onDragOver(t){t.stopPropagation(),t.preventDefault(),this.active=!0}onDragLeave(t){this.active=!1}onBodyDragOver(t){this.preventBodyDrop&&(t.preventDefault(),t.stopPropagation())}onBodyDrop(t){this.preventBodyDrop&&t.preventDefault()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=i.lG2({type:t,selectors:[["","appDropZone",""]],hostVars:2,hostBindings:function(t,e){1&t&&i.NdJ("drop",function(t){return e.onDrop(t)})("dragover",function(t){return e.onDragOver(t)})("dragleave",function(t){return e.onDragLeave(t)})("dragover",function(t){return e.onBodyDragOver(t)},!1,i.pYS)("drop",function(t){return e.onBodyDrop(t)},!1,i.pYS),2&t&&i.ekj("drop-zone-active",e.active)},inputs:{preventBodyDrop:"preventBodyDrop"},outputs:{fileDrop:"appDropZone"}}),t})()},31409:function(t,e,n){n.d(e,{x:function(){return r}});var i=n(84487),o=n(74788),a=n(57922);let r=(()=>{class t{constructor(t){this.plus=t}toJsonArray(t,e=!0){return new Promise(n=>{let o={};if(this.plus.load(),null!=t&&"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"!=t.type&&"application/vnd.ms-excel"!=t.type)return this.plus.alertError("Kh\xf4ng ph\u1ea3i file excel");const a=new FileReader;a.readAsBinaryString(t),a.onloadend=t=>{const a=i.read(t.target.result,{type:"binary",cellDates:!0,dateNF:"DD/MM/YYYY"}),r=a.SheetNames;for(let n=0;n<r.length;n++){const t=r[n],s=i.utils.sheet_to_json(a.Sheets[t],{header:1,raw:e});o[`${t}`]=this.convertJSon(s)}this.plus.loaded(),n(o)}})}read(t,e=2){return new Promise(n=>{let o=[];if(this.plus.load(),null!=t&&"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"!=t.type&&"application/vnd.ms-excel"!=t.type)return this.plus.alertError("Kh\xf4ng ph\u1ea3i file excel");const a=new FileReader;a.readAsBinaryString(t),a.onloadend=t=>{const a=i.read(t.target.result,{type:"binary",cellDates:!0,dateNF:"DD/MM/YYYY"}),r=a.SheetNames;for(let n=0;n<e;n++){const t=i.utils.sheet_to_json(a.Sheets[r[n]],{header:1});o.push(t)}this.plus.loaded(),n(o)}})}convertJSon(t){const e=[];for(let n=1;n<t.length;n++){const i={};t[0].forEach((e,o)=>{i[`${e}`]=t[n][o]}),e.push(i)}return e}convertJSonByX(t){const e=[];for(let n=1;n<t.length;n++)if("x"==t[n][0]){const i={};t[0].forEach((e,o)=>{i[`${e}`]=t[n][o]}),e.push(i)}return e}readXlsxToMerge(t){return console.log(t),new Promise((e,n)=>{this.plus.load();let o={};if(null!=t&&"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"!=t.type&&"application/vnd.ms-excel"!=t.type)return this.plus.alertError("Kh\xf4ng ph\u1ea3i file excel");const a=new FileReader;a.readAsBinaryString(t),a.onloadend=t=>{const n=i.read(t.target.result,{type:"binary",cellDates:!0,dateNF:"DD/MM/YYYY"}),a=n.SheetNames;for(let e=0;e<a.length;e++){const t=a[e];if("_Merge"==t)return this.plus.alertError("Vui l\xf2ng \u0111\u1ed5i t\xean sheet _Merge th\xe0nh t\xean kh\xe1c");const r=i.utils.sheet_to_json(n.Sheets[t],{header:1,raw:!0});o[`${0==e?"_Merge":t}`]=this.convertJSonByX(r)}e(o),this.plus.loaded()}})}export(t,e=""){const n=i.utils.json_to_sheet(t,{skipHeader:!0,dateNF:"mm/dd/yyyy;@",cellDates:!0}),o=i.utils.book_new();i.utils.book_append_sheet(o,n,"ChuaImport"),i.writeFile(o,"4la-"+e+"-ChuaImport.xlsx")}exportTar(t,e=""){for(let r=0;r<t.length;r++)delete t[r].dateModify,delete t[r].canEdit,delete t[r].keyWord,delete t[r].__v,delete t[r]._id;let n=JSON.stringify(t),i="data:application/json;charset=utf-8,"+encodeURIComponent(n);console.log(i);let o=`4la-${e||""}`+Date.now()+".tar",a=document.createElement("a");a.setAttribute("href",i),a.setAttribute("download",o),a.click()}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(a.T))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},48387:function(t,e,n){n.d(e,{D:function(){return l}});var i=n(13397),o=n(12057),a=n(24751),r=n(5923),s=n(74788);let l=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[o.ez,a.u5,i.qX,r.X]]}),t})()},85913:function(t,e,n){n.d(e,{m:function(){return s}});var i=n(13397),o=n(24751),a=n(12057),r=n(74788);let s=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[a.ez,o.UX,i.qX]]}),t})()}}]);