"use strict";(self.webpackChunkdlxl=self.webpackChunkdlxl||[]).push([[126],{85913:(N,x,i)=>{i.d(x,{m:()=>f});var C=i(17721),r=i(24006),E=i(36895),h=i(94650);let f=(()=>{class u{}return u.\u0275fac=function(v){return new(v||u)},u.\u0275mod=h.oAB({type:u}),u.\u0275inj=h.cJS({imports:[E.ez,r.UX,C.q,r.u5]}),u})()},35304:(N,x,i)=>{i.d(x,{v:()=>u});var C=i(15861),r=i(12157),E=i(94650),h=i(25555),f=i(94559);let u=(()=>{class d{constructor(t,p){this.plus=t,this.loadSV=p}getBanks(){return r.Z.get("https://api.banklookup.net/api/bank/list").then(t=>t.data.data)}getApiKey(){r.Z.get("https://raw.githubusercontent.com/thuctd/FileStore/master/vietqr.json").then(p=>{console.log(p.data),localStorage.setItem("vietqr",JSON.stringify(p.data))})}check(t){var p=this;return(0,C.Z)(function*(){return p.loadSV.load("UNC-CHECK"),new Promise(function(){var g=(0,C.Z)(function*(U,c){return r.Z.post("https://api.httzip.com/api/bank/id-lookup-prod",t,{headers:{"Content-Type":"application/json","x-api-key":"af750e1f-e72a-4051-8d76-948ea5bd280fkey","x-api-secret":"3beb091c-b863-4872-ab1e-3bf6fd3aa5d2secret"},timeout:1e4}).then(_=>{p.loadSV.loaded("UNC-CHECK"),console.log(_.data),U(_)}).catch(_=>{p.loadSV.loaded("UNC-CHECK"),console.log(_),U(!1)})});return function(U,c){return g.apply(this,arguments)}}())})()}}return d.\u0275fac=function(t){return new(t||d)(E.LFG(h.T),E.LFG(f.b))},d.\u0275prov=E.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()},94222:(N,x,i)=>{i.d(x,{I:()=>j});var C=i(15861),r=i(24006),E=i(15228),h=i(10875),f=i(28986),u=i(78372),d=i(15439),v=i.n(d),t=i(94650),p=i(92358),g=i(12012),U=i(11147),c=i(25555),_=i(94559),K=i(5383),A=i(9157),O=i(35304),P=i(85608),S=i(36895),I=i(4859),k=i(97392),B=i(284),D=i(59549),Z=i(47957),V=i(3238),L=i(10266),H=i(49652),y=i(31361),F=i(51511),R=i(30627);function J(l,m){if(1&l){const e=t.EpF();t.TgZ(0,"mat-option",58),t.NdJ("click",function(){const o=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG(s.selectBank(o))}),t._UZ(1,"img",59),t._uU(2),t.qZA()}if(2&l){const e=m.$implicit;t.xp6(1),t.s9C("src",e.icon_url,t.LSH),t.s9C("alt",e.short_name),t.xp6(1),t.AsE(" ",e.name," - ",e.short_name,"")}}function W(l,m){if(1&l&&(t.TgZ(0,"mat-error",60),t._uU(1,"T\xcaN T\xc0I KHO\u1ea2N: "),t.TgZ(2,"strong"),t._uU(3),t.qZA()()),2&l){const e=t.oxw(2);t.xp6(3),t.hij(" ",e.accountName," ")}}function G(l,m){if(1&l){const e=t.EpF();t.TgZ(0,"mat-option",61),t.NdJ("click",function(){const o=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG(s.selectedTK(o))}),t._uU(1),t.qZA()}if(2&l){const e=m.$implicit;t.Q6J("value",e.MaNganHang+(e.ChiNhanh.length>0?" - "+e.ChiNhanh:"")),t.xp6(1),t.lnq(" ",e.MaNganHang," ",e.ChiNhanh.length>0?" - "+e.ChiNhanh:""," ",e.NganHang," ")}}function w(l,m){if(1&l){const e=t.EpF();t.TgZ(0,"div",2)(1,"mat-expansion-panel")(2,"mat-expansion-panel-header"),t._uU(3," Import "),t.qZA(),t.TgZ(4,"app-drop-files",62),t.NdJ("files",function(a){t.CHM(e);const o=t.oxw(2);return t.KtG(o.onDropFile(a))})("ondragover",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.ondragover())}),t.qZA(),t.TgZ(5,"button",63),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.import())}),t._uU(6,"Import"),t.qZA()()()}if(2&l){const e=t.oxw(2);t.xp6(4),t.Q6J("label",""),t.xp6(1),t.Q6J("disabled",0==e.items.length&&e.importItems.length>0)}}function q(l,m){if(1&l){const e=t.EpF();t.TgZ(0,"mat-expansion-panel",20)(1,"mat-expansion-panel-header")(2,"h5",21),t._uU(3,"L\u1eacP PHI\u1ebeU CHI"),t.qZA()(),t.TgZ(4,"div",22)(5,"div",23)(6,"div",24)(7,"mat-form-field")(8,"mat-label"),t._uU(9,"Ng\xe2n h\xe0ng \u0111\u01a1n v\u1ecb nh\u1eadn ti\u1ec1n"),t.qZA(),t._UZ(10,"input",25),t.TgZ(11,"button",26),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.clear())}),t.TgZ(12,"mat-icon"),t._uU(13,"close"),t.qZA()(),t.TgZ(14,"mat-autocomplete",null,27),t.YNc(16,J,3,4,"mat-option",28),t.qZA()()(),t.TgZ(17,"div",29)(18,"mat-form-field",30)(19,"mat-label"),t._uU(20,"S\u1ed1 t\xe0i kho\u1ea3n"),t.qZA(),t._UZ(21,"input",31)(22,"span",32),t.qZA()(),t.TgZ(23,"div",29)(24,"button",33),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.check())}),t._uU(25," Ki\u1ec3m tra "),t.qZA(),t.TgZ(26,"button",34)(27,"mat-icon",35),t._uU(28,"qr_code_2"),t.qZA()()()(),t.TgZ(29,"div",23)(30,"div",24)(31,"mat-form-field",30)(32,"mat-label"),t._uU(33,"Kh\xe1ch h\xe0ng"),t.qZA(),t._UZ(34,"input",36)(35,"span",32),t.qZA()(),t.TgZ(36,"div",29)(37,"mat-form-field",30)(38,"mat-label"),t._uU(39,"T\u1ec9nh"),t.qZA(),t._UZ(40,"input",37)(41,"span",32),t.qZA()(),t.TgZ(42,"div",29)(43,"mat-form-field",30)(44,"mat-label"),t._uU(45,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"),t.qZA(),t._UZ(46,"input",38)(47,"span",32),t.qZA()(),t.YNc(48,W,4,1,"mat-error",39),t.qZA(),t._UZ(49,"div",23),t.TgZ(50,"div",23)(51,"div",40)(52,"button",41),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.saveCustomer())}),t.TgZ(53,"mat-icon"),t._uU(54,"save"),t.qZA()()()(),t.TgZ(55,"div",22)(56,"h5",42),t._uU(57,"Th\xf4ng tin thanh to\xe1n"),t.qZA(),t.TgZ(58,"div",43)(59,"mat-form-field")(60,"mat-label"),t._uU(61,"S\u1ed1 phi\u1ebfu"),t.qZA(),t._UZ(62,"input",44),t.qZA()(),t.TgZ(63,"div",43)(64,"mat-form-field",30)(65,"mat-label"),t._uU(66,"S\u1ed1 ti\u1ec1n"),t.qZA(),t.TgZ(67,"input",45,46),t.NdJ("input",function(){t.CHM(e);const a=t.MAs(68),o=t.oxw();return t.KtG(o.formatNumber(a.value))}),t.qZA(),t._UZ(69,"span",32),t.qZA()(),t.TgZ(70,"div",47)(71,"mat-form-field",30)(72,"mat-label"),t._uU(73,"N\u1ed9i dung"),t.qZA(),t._UZ(74,"input",48)(75,"span",32),t.qZA()(),t.TgZ(76,"div",47)(77,"mat-form-field")(78,"mat-label"),t._uU(79,"M\u1eabu UNC "),t.qZA(),t._UZ(80,"input",49),t.TgZ(81,"mat-autocomplete",50,51),t.YNc(83,G,2,4,"mat-option",52),t.qZA()()(),t.TgZ(84,"div",53)(85,"h5",54),t._uU(86),t.ALo(87,"bangChu"),t.qZA(),t.TgZ(88,"button",55),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.printOrSave(0))}),t.TgZ(89,"mat-icon"),t._uU(90,"print"),t.qZA()(),t.TgZ(91,"button",56),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.printOrSave(1))}),t.TgZ(92,"mat-icon"),t._uU(93,"save"),t.qZA()()()()(),t.YNc(94,w,7,2,"div",57),t.qZA()}if(2&l){const e=t.MAs(15),n=t.MAs(82),a=t.oxw();t.Q6J("expanded",a.isexpanded)("@slideIn",void 0),t.xp6(4),t.Q6J("formGroup",a.main),t.xp6(6),t.Q6J("matAutocomplete",e),t.xp6(6),t.Q6J("ngForOf",a.banksOpt),t.xp6(8),t.Q6J("disabled",a.main.controls.code.invalid),t.xp6(2),t.Q6J("disabled",a.main.controls.code.invalid),t.xp6(22),t.Q6J("ngIf",a.accountName.length>0),t.xp6(7),t.Q6J("formGroup",a.uncForm),t.xp6(25),t.Q6J("matAutocomplete",n),t.xp6(3),t.Q6J("ngForOf",a.banksOptMA),t.xp6(3),t.hij(" B\u1eb1ng ch\u1eef: ",t.lcZ(87,15,a.uncForm.value.SoTien),""),t.xp6(2),t.Q6J("disabled",a.uncForm.invalid||a.main.invalid),t.xp6(3),t.Q6J("disabled",a.uncForm.invalid||a.main.invalid),t.xp6(3),t.Q6J("ngIf",a.checkPer(4))}}function Y(l,m){if(1&l&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&l){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.err)}}function Q(l,m){if(1&l){const e=t.EpF();t.TgZ(0,"mat-icon",67),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit,o=t.oxw();return t.KtG(o.onDelete(a))}),t._uU(1,"delete"),t.qZA()}}function $(l,m){if(1&l){const e=t.EpF();t.TgZ(0,"tr")(1,"td",58),t.NdJ("click",function(){const o=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.onEdit(o))}),t._uU(2),t.qZA(),t.TgZ(3,"td",58),t.NdJ("click",function(){const o=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.onEdit(o))}),t._uU(4),t.qZA(),t.TgZ(5,"td",58),t.NdJ("click",function(){const o=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.onEdit(o))}),t._uU(6),t.qZA(),t.TgZ(7,"td",58),t.NdJ("click",function(){const o=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.onEdit(o))}),t._uU(8),t.qZA(),t.YNc(9,Y,2,1,"td",64),t.TgZ(10,"td"),t.YNc(11,Q,2,0,"mat-icon",65),t.qZA(),t.TgZ(12,"td")(13,"mat-icon",66),t.NdJ("click",function(){const o=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.onEdit(o))}),t._uU(14,"print"),t.qZA()()()}if(2&l){const e=m.$implicit,n=t.oxw();t.Q6J("@slideIn",void 0),t.xp6(2),t.Oqu(e.TenKhachHang),t.xp6(2),t.Oqu(e.SoTK),t.xp6(2),t.Oqu(e.NganHang),t.xp6(2),t.Oqu(e.Tinh),t.xp6(1),t.Q6J("ngIf",e.err),t.xp6(2),t.Q6J("ngIf",n.checkPer(2))}}let j=(()=>{class l{constructor(e,n,a,o,s,T,b,M,X,z){this.httpSV=e,this.idbSV=n,this.formSV=a,this.authSV=o,this.plus=s,this.loadSV=T,this.excelSV=b,this.docxSV=M,this.bankSV=X,this.uncSV=z,this.main=this.formSV.fb.group({_id:["",[]],TenKhachHang:["",[r.kI.required]],SoTK:["",[r.kI.required,r.kI.minLength(3),this.formSV.pattern_letterAndNumber()]],NganHang:["",[r.kI.required,r.kI.minLength(3)]],Tinh:["",[r.kI.required]],DienThoai:["",[]],bin:["",[]],code:["",[r.kI.required,r.kI.minLength(1),this.formSV.pattern_letterAndNumber()]],Checked:[!1,[]]}),this.uncForm=this.formSV.fb.group({SoTien:["",[r.kI.required,r.kI.minLength(1)]],NoiDung:["",[r.kI.required,r.kI.minLength(5)]],SoPhieu:["",[]],maUNC:["",[r.kI.required]]}),this.uncFormHeader={SoTien:"S\u1ed1 Ti\u1ec1n",NoiDung:"N\u1ed9i Dung"},this.header={_id:"_id",bin:"M\xe3 ng\xe2n h\xe0ng",TenKhachHang:"T\xean Kh\xe1ch h\xe0ng",SoTK:"S\u1ed1 t\xe0i kho\u1ea3n",NganHang:"Ng\xe2n H\xe0ng",Tinh:"T\u1ec9nh",DienThoai:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"},this.searchForm=this.formSV.fb.group({input:["",[r.kI.required,r.kI.minLength(4)]]}),this.user=null,this.api="unc-khach-hang",this.dbName="unc",this.db=null,this.allItems=[],this.items=[],this.importItems=[],this.item=null,this.allowLoadmore=!0,this.perPageItems=50,this.fileName="",this.isexpanded=!1,this.setup=null,this.banks=[],this.banksOpt=[],this.selectedBank=null,this.accountName="",this.dsTKnganHang=[],this.maUNC="",this.bankGui=null,this.banksOptMA=[]}ngOnDestroy(){console.log("Destroy",this.api),this.httpSV.unsubcribe()}ngOnInit(){this.idbSV.IDB_InitDB(this.dbName).subscribe(e=>{this.db=e,this.uncSV.db=e,this.user=this.authSV.userDir,console.log("ngOnInit",this.user),this.authSV._getOpt(h.HB.UNCSETUP).then(n=>{this.setup=n}),this.uncForm.controls.NoiDung.setValue(window.max.unitFull+" T/T"),this.syncKH(),this.getdsTKnganHangDonVi(),this.uncSV.getTaiKhoanPK().subscribe(n=>{this.idbSV.IDB_DB_Add(this.db,this.uncSV.apiNganHang,n.data)}),this.getMaxPhieu(),this.getBanks(),this.filter(),this.filter2()})}syncKH(){this.uncSV.syncKH().subscribe(e=>{this.getAllIDB()})}getMaxPhieu(){return this.uncSV.getMaxPhieu().then(e=>{this.uncForm.controls.SoPhieu.setValue(e+1+"")})}getBanks(){this.bankSV.getBanks().then(e=>{this.banks=e,this.banksOpt=this.banks})}getdsTKnganHangDonVi(){this.uncSV.getallTK().subscribe(e=>{this.dsTKnganHang=e})}selectedTK(e){this.maUNC=e.MaNganHang,this.bankGui=e}addNew(){this.item=null,this.main.reset(),this.main.controls.SoTK.setValue(""),this.main.controls.NganHang.setValue(""),this.isexpanded=!0}check(){this.loadSV.load("UNC-CHECK"),this.accountName="",this.bankSV.check({account:this.main.controls.SoTK.value,bank:this.selectedBank.code}).then(a=>{if(this.loadSV.loaded("UNC-CHECK"),!a)return this.accountName="Kho\u0302ng ti\u0300m tha\u0302\u0301y t\xe0i kho\u1ea3n ho\u1eb7c ng\xe2n h\xe0ng kh\xf4ng ph\u1ea3n h\u1ed3i, vui l\xf2ng qu\xe9t m\xe3 QR \u0111\u1ec3 ki\u1ec3m tra";console.log(a),this.accountName=a.data.data.ownerName}).catch(a=>{this.loadSV.loaded("UNC-CHECK")})}selectBank(e){this.selectedBank=e,this.main.controls.NganHang.setValue(e.name+" - "+e.short_name),this.main.controls.code.setValue(e.code),this.main.controls.bin.setValue(e.bin.toString())}filter(){this.banksOpt=this.banks,this.main.valueChanges.pipe((0,u.b)(500)).subscribe(e=>{let n=this.plus.removeAccents(e.NganHang);this.banksOpt=this.banks.filter(a=>this.plus.removeAccents(JSON.stringify(a)).toLowerCase().includes(n)),1==this.banksOpt.length&&(this.selectBank(this.banksOpt[0]),document.getElementById("accountNumber").focus())})}filter2(){this.banksOptMA=this.dsTKnganHang,this.uncForm.valueChanges.pipe((0,u.b)(500)).subscribe(e=>{let n=this.plus.removeAccents(e.maUNC).toLowerCase();this.banksOptMA=this.dsTKnganHang.filter(a=>this.plus.removeAccents(JSON.stringify(a)).toLowerCase().includes(n))})}formatNumber(e){let n=e.toString().replace(/[^0-9]/g,"");n=n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,"."),console.log(n),this.uncForm.controls.SoTien.setValue(n)}printOrSave(e){var n=this;return(0,C.Z)(function*(){let a=n.formSV.getErrValidateFormV2(n.uncForm,n.uncFormHeader);if(a.length>0)return n.plus.alertWarning(a),!1;let o=n.main.value,s=n.uncForm.value;s.SoTien=s.SoTien.toString().replace(/[^0-9]/g,"");let T={ChuTaiKhoan:n.bankGui.ChuTaiKhoan,ChiNhanh:n.bankGui.ChiNhanh,SoTaiKhoan:n.bankGui.SoTaiKhoan,ThuocTinh:n.setup.TINH,GiamDoc:n.setup.TENGIAMDOC,TruongPTC:n.setup.NGUOIKY,ChucDanh:n.setup.CHUCDANHKY,KhachHang:o.TenKhachHang,Tinh:o.Tinh,SoTien:+s.SoTien,SoTaiKhoanKH:o.SoTK,NganHang:o.NganHang,NoiDung:s.NoiDung,_id:(0,f.h)(5),status:1,sync:0,SoPhieu:s.SoPhieu?s.SoPhieu:n.uncSV.lastUNC+1+"",NgayLap:v()().format("DD/MM/YYYY"),MaNganHang:n.maUNC,nick:n.user.nick};n.loadSV.load("xuatUNC"),0==e?n.docxSV.loadFileUrl(`https://thuctd.github.io/templates/UNC/${n.maUNC}-UNC.docx`).then(b=>{n.docxSV.generateOne(T,b,"UNC-"+T.KhachHang).then(M=>{console.log(M),n.plus.alertSuccess(),n.loadSV.loaded("xuatUNC"),n.uncSV.savePhieuLog(T)})}):1==e&&n.uncSV.savePhieu(T).subscribe(b=>{n.loadSV.loaded("xuatUNC")})})()}onDropFile(e){this.items=[],this.importItems=[],this.excelSV.read(e[0],1).then(n=>{let a=this.excelSV.convertJSon(n[0]);for(let o=0;o<a.length;o++){const s=a[o];s.SoTK=s.SoTK.toString(),this.main.patchValue(s),s.err=this.formSV.getErrValidateFormV2(this.main,this.header),this.items.push(s),console.log(s)}0==this.items.length&&this.plus.alertSuccess("Danh s\xe1ch \u0111\xe3 \u0111\u01b0\u1ee3c ki\u1ec3m tra")})}getSetup(e){console.log(e),this.setup=e}getAllIDB(){this.checkPer(1),this.isexpanded=!1,this.idbSV.IDB_DB_GetAll(this.db,this.api).subscribe(e=>{this.allItems=e,console.log(e),this.items=e.slice(0,this.perPageItems)})}onEdit(e){this.item=e,this.selectedBank=this.banks.find(n=>n.code==e.code),this.isexpanded=!0,e.SoTK=this.plus.removeSpecialCharacters(e.SoTK),this.main.patchValue(e),this.uncForm.reset(),this.uncForm.controls.NoiDung.setValue(window.max.nick+" T/T "),this.uncSV.getMaxPhieu().then(n=>{this.uncForm.controls.SoPhieu.setValue(n+1+"")}),this.plus.scrollTo("form")}onDelete(e){let n=e;confirm("X\xf3a?")&&(n.status=0,delete n.__v,this.uncSV.saveKH(n).subscribe(o=>{this.plus.alertSuccess(),this.plus.reload()}))}saveCustomer(){let e=this.main.value,n=this.formSV.getErrValidateFormV2(this.main,this.header);if(n.length>2)return this.plus.alertError(`${n}`);e._id=(0,f.h)(6),e.status=1,e.sync=1,this.uncSV.saveKH(e).subscribe(a=>{this.main.reset()})}import(){this.httpSV.post(this.api+"/import",this.importItems).subscribe(e=>{console.log(e)})}search(){let e=this.searchForm.value;if(this.searchForm.valid){console.log(e);const n=[];this.allowLoadmore=!1,this.idbSV.IDB_DB_GetAll(this.db,this.api).subscribe(a=>{console.log("IDB_DB_GetAll()",a.length);const o=this.plus.removeAccents(e.input);for(let s=0;s<a.length;s++){let T=a[s];const b=JSON.stringify(T);this.plus.removeAccents(b).includes(o)&&n.push(T)}this.items=n,0==n.length&&this.plus.alertMatSnackBar("Kh\xf4ng c\xf2n k\u1ebft qu\u1ea3 ph\xf9 h\u1ee3p")})}}pushData(e){if(this.loadSV.load("pushData"),e&&this.allowLoadmore){let n=this.items.length,a=this.allItems.slice(n,n+this.perPageItems);this.items=this.items.concat(a),this.loadSV.loaded("pushData")}this.loadSV.loaded("pushData")}reset(){this.loadSV.clear(),this.authSV.reload()}reload(){this.authSV.reload()}checkPer(e=1,n=this.api){return this.authSV.checkPer(n,e)}clear(){this.accountName="",this.main.reset()}ondragover(){document.getElementById("dropZone").setAttribute("drop-active","true")}}return l.\u0275fac=function(e){return new(e||l)(t.Y36(p.a),t.Y36(g.F),t.Y36(U.o),t.Y36(h.c1),t.Y36(c.T),t.Y36(_.b),t.Y36(K.x),t.Y36(A.E),t.Y36(O.v),t.Y36(P.X))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-unc-khach-hang"]],decls:38,vars:8,consts:[["id","form",1,"container","pt-4"],["color","primary","style","border: solid 1.5px; border-radius: 10px; border-color: blue;",3,"expanded",4,"ngIf"],[1,"row","py-2"],["appearance","outline",3,"formGroup"],["matInput","","id","search-api","formControlName","input","placeholder","T\xecm ki\u1ebfm (F2)",3,"keyup.enter"],[1,"table-responsive"],[1,"table","table-striped","table-hover"],["color","primary","matTooltip","L\xe0m m\u1edbi d\u1eef li\u1ec7u",3,"click"],["color","accent","matTooltip","Th\xeam m\u1edbi",3,"click"],[4,"ngFor","ngForOf"],["id","qrcode","tabindex","-1","data-bs-backdrop","static","data-bs-keyboard","false","role","dialog","aria-labelledby","modelTitleId","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content","text-center"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"container-fluid"],[1,"card","text-white","bg-primary"],["target","_blank","download","",1,"text-white","text-bolder",3,"href"],[1,"card-img-top",3,"src"],[3,"percentLoad","emit"],["color","primary",2,"border","solid 1.5px","border-radius","10px","border-color","blue",3,"expanded"],[1,"text-danger"],[1,"row",3,"formGroup"],[1,"row"],[1,"col-sm-6"],["type","text","placeholder","Ng\xe2n h\xe0ng \u0111\u01a1n v\u1ecb nh\u1eadn ti\u1ec1n","matInput","","formControlName","NganHang",3,"matAutocomplete"],["matSuffix","","mat-icon-button","",3,"click"],["auto","matAutocomplete"],[3,"click",4,"ngFor","ngForOf"],[1,"col-sm-3"],["appearance","outline"],["required","","type","text","autocomplete","off","matInput","","formControlName","SoTK"],["matSuffix",""],["mat-raised-button","","color","primary",3,"disabled","click"],["type","button","id","qrcodeModal","data-bs-toggle","modal","data-bs-target","#qrcode","matTooltip","Xem m\xe3 QR thanh to\xe1n",1,"btn",3,"disabled"],["color","warn"],["required","","type","text","autocomplete","off","matInput","","formControlName","TenKhachHang"],["required","","type","text","autocomplete","off","matInput","","formControlName","Tinh"],["type","text","autocomplete","off","matInput","","formControlName","DienThoai"],["class","text-white bg-primary py-3",4,"ngIf"],[1,"btn","text-center"],["mat-raised-button","","color","warn","matTooltip","L\u01b0u kh\xe1ch h\xe0ng",3,"click"],[1,"text-primary"],[1,"col-2"],["type","text","autocomplete","off","matInput","","formControlName","SoPhieu"],["required","","autocomplete","off","matInput","","formControlName","SoTien",2,"text-align","right",3,"input"],["soTien",""],[1,"col"],["required","","type","text","autocomplete","off","matInput","","formControlName","NoiDung"],["matInput","","formControlName","maUNC",3,"matAutocomplete"],["autoActiveFirstOption",""],["automaUNC","matAutocomplete"],[3,"value","click",4,"ngFor","ngForOf"],[1,"text-center"],[1,"font-red"],["mat-raised-button","","color","primary","matTooltip","Xu\u1ea5t file in",3,"disabled","click"],["mat-raised-button","","color","accent","matTooltip","L\u01b0u phi\u1ebfu thanh to\xe1n",3,"disabled","click"],["class","row  py-2",4,"ngIf"],[3,"click"],["width","40px",3,"src","alt"],[1,"text-white","bg-primary","py-3"],[3,"value","click"],[3,"label","files","ondragover"],["mat-raised-button","","color","warn",3,"disabled","click"],["class","text-danger",4,"ngIf"],["color","warn","matTooltip","X\xf3a",3,"click",4,"ngIf"],["color","primary","matTooltip","Ch\u1ecdn kh\xe1ch h\xe0ng in phi\u1ebfu",3,"click"],["color","warn","matTooltip","X\xf3a",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.YNc(1,q,95,17,"mat-expansion-panel",1),t.TgZ(2,"div",2)(3,"mat-form-field",3)(4,"input",4),t.NdJ("keyup.enter",function(){return n.search()}),t.qZA()()(),t.TgZ(5,"div",2)(6,"div",5)(7,"table",6)(8,"thead")(9,"tr")(10,"th"),t._uU(11,"Kh\xe1ch h\xe0ng"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"S\u1ed1 t\xe0i kho\u1ea3n"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Ng\xe2n H\xe0ng"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"T\u1ec9nh"),t.qZA(),t.TgZ(18,"th")(19,"mat-icon",7),t.NdJ("click",function(){return n.reload()}),t._uU(20,"refresh"),t.qZA()(),t.TgZ(21,"th")(22,"mat-icon",8),t.NdJ("click",function(){return n.addNew()}),t._uU(23," add"),t.qZA()()()(),t.TgZ(24,"tbody"),t.YNc(25,$,15,7,"tr",9),t.qZA(),t._UZ(26,"tfoot"),t.qZA()()()(),t.TgZ(27,"div",10)(28,"div",11)(29,"div",12),t._UZ(30,"button",13),t.TgZ(31,"div",14)(32,"div",15)(33,"div",16)(34,"a",17),t._uU(35,"T\u1ea3i xu\u1ed1ng"),t.qZA(),t._UZ(36,"img",18),t.qZA()()()()()(),t.TgZ(37,"app-loadmore",19),t.NdJ("emit",function(o){return n.pushData(o)}),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",!0),t.xp6(2),t.Q6J("formGroup",n.searchForm),t.xp6(22),t.Q6J("ngForOf",n.items),t.xp6(9),t.hYB("href","https://img.vietqr.io/image/",null==n.selectedBank?null:n.selectedBank.short_name,"-",n.main.value.SoTK,"-compact2.jpg",t.LSH),t.xp6(2),t.hYB("src","https://img.vietqr.io/image/",null==n.selectedBank?null:n.selectedBank.code,"-",n.main.value.SoTK,"-compact2.png?",t.LSH),t.xp6(1),t.Q6J("percentLoad",60))},dependencies:[S.sg,S.O5,r.Fj,r.JJ,r.JL,r.Q7,r.sg,r.u,I.lW,I.RK,k.Hw,B.Nt,D.KE,D.hX,D.TO,D.R9,Z.XC,V.ey,Z.ZL,L.gM,H.ib,H.yz,y.w,F.k,R.ID],data:{animation:[E.Ym]}}),l})()},85608:(N,x,i)=>{i.d(x,{X:()=>p});var C=i(15861),r=i(10875),E=i(54004),h=i(94650),f=i(58441),u=i(25555),d=i(12012),v=i(94559),t=i(92358);let p=(()=>{class g{constructor(c,_,K,A,O,P){this.sheetdbSV=c,this.plus=_,this.idbSV=K,this.authSV=A,this.loadSV=O,this.httpSV=P,this.sheetId="1pxQZwAtNDwOpMGSRSOSK3UxuV1xvWcAZ1CNhGHvwvRo",this.dbName="unc",this.apiKH="unc-khach-hang",this.apiNganHang="unc-ngan-hang",this.apiPhieu="unc-phieu",this.unit=localStorage.getItem("UNIT"),this.db=null,this.lastUNC=0,this.authSV._getOpt(r.HB.USER).then(S=>this.user=S)}syncKH(){return this.httpSV.updateLocalDB(this.db,this.apiKH,window.max.unit+"-"+this.apiKH)}syncPhieu(){return this.httpSV.updateLocalDB(this.db,this.apiPhieu,localStorage.getItem("UNIT")+"-"+this.apiPhieu)}getallTK(){return this.idbSV.IDB_DB_GetAll(this.db,"unc-ngan-hang","MaNganHang")}getTaiKhoanPK(){let c=this.user||window.max;return this.sheetdbSV.get(this.sheetId,`TK_${c.unit}`)}getAllKH(){return this.user||window,this.sheetdbSV.get(this.sheetId,"UNCKHACHHANG")}getAllPhieu(){let c=this.user||window.max;return this.sheetdbSV.get(this.sheetId,`PHIEU_${c.unit}`)}getMaxPhieu(){var c=this;return(0,C.Z)(function*(){return new Promise((_,K)=>{c.idbSV.IDB_DB_GetAll(c.db,"unc-phieu","SoPhieu").subscribe(A=>{c.lastUNC=c.plus.Arr_MaxValue(A,"SoPhieu"),_(c.lastUNC),console.log("getMaxPhieu",c.lastUNC)})})})()}saveKH(c){return this.user||window,window["unc-khach-hang"]=0,this.httpSV.put(this.apiKH,c,"")}saveCauHinh(c){return window["unc-cau-hinh"]=0,this.user||window,this.sheetdbSV.save(this.sheetId,"UNCCAUHINH",c,"MADONVI")}getCauHinh(){let c=this.user||window.max;return this.sheetdbSV.get(this.sheetId,"UNCCAUHINH").pipe((0,E.U)(_=>{let K=_.data.filter(A=>A.MADONVI==c.unit)[0];return this.authSV._setOpt(r.HB.UNCSETUP,K),K}))}savePhieu(c){return this.user||window,window["unc-phieumax"]=0,delete c.__v,this.httpSV.post(this.apiPhieu,c)}xoaPhieu(c){return this.user||window,this.httpSV.disable(this.apiPhieu,c)}savePhieuLog(c){return this.sheetdbSV.addMany(this.sheetId,"LOG",c)}}return g.\u0275fac=function(c){return new(c||g)(h.LFG(f.F),h.LFG(u.T),h.LFG(d.F),h.LFG(r.c1),h.LFG(v.b),h.LFG(t.a))},g.\u0275prov=h.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()}}]);