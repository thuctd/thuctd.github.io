"use strict";(self.webpackChunkdlxl=self.webpackChunkdlxl||[]).push([[121],{5121:(C,c,e)=>{e.r(c),e.d(c,{KhenThuongModule:()=>W});var p=e(34291),d=e(48387),h=e(41019),f=e(51372),i=e(93075),u=e(69808),g=e(15228),t=e(5e3),D=e(45230),N=e(47423),P=e(25245),A=e(8774),v=e(97012),k=e(87654),_=e(67322),I=e(77531),T=e(86856),E=e(74107),J=e(90508),Z=e(30627);function U(n,r){if(1&n){const o=t.EpF();t.TgZ(0,"button",20),t.NdJ("click",function(){return t.CHM(o),t.oxw().reload()}),t.TgZ(1,"mat-icon"),t._uU(2,"undo"),t.qZA()()}2&n&&t.Q6J("@slideIn",void 0)}function q(n,r){if(1&n){const o=t.EpF();t.TgZ(0,"button",24),t.NdJ("click",function(){return t.CHM(o),t.oxw(2).reload()}),t._uU(1,"Quay l\u1ea1i"),t.qZA()}}function B(n,r){if(1&n){const o=t.EpF();t.TgZ(0,"div",21)(1,"button",22),t.NdJ("click",function(){return t.CHM(o),t.oxw().chuaDangKy()}),t._uU(2,"Ch\u01b0a \u0111\u0103ng k\xfd"),t.qZA(),t.TgZ(3,"button",22),t.NdJ("click",function(){return t.CHM(o),t.oxw().chuaPhatDong()}),t._uU(4,"Ch\u01b0a ph\xe1t \u0111\u1ed9ng"),t.qZA(),t.YNc(5,q,2,0,"button",23),t.qZA()}if(2&n){const o=t.oxw();t.xp6(5),t.Q6J("ngIf",o.filter.length>0)}}function L(n,r){if(1&n){const o=t.EpF();t.TgZ(0,"tr",28),t.NdJ("click",function(){const s=t.CHM(o).$implicit;return t.oxw(2).onEdit(s)}),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"excelDay"),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.ALo(10,"excelDay"),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"excelDay"),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.ALo(16,"excelDay"),t.qZA(),t.TgZ(17,"td")(18,"mat-icon",29),t.NdJ("click",function(){const s=t.CHM(o).$implicit;return t.oxw(2).onDelete(s)}),t._uU(19,"delete"),t.qZA()()()}if(2&n){const o=r.$implicit;t.xp6(2),t.hij(" ",o.PhongTrao,""),t.xp6(2),t.Oqu(t.lcZ(5,6,o.NgayPhatDong)),t.xp6(3),t.Oqu(o.PhongChuTri),t.xp6(2),t.Oqu(t.lcZ(10,8,o.HanDangKy)),t.xp6(3),t.Oqu(t.lcZ(13,10,o.NgayDLDangKy)),t.xp6(3),t.Oqu(t.lcZ(16,12,o.NgayDLPhatDong))}}function H(n,r){if(1&n&&(t.TgZ(0,"div",14)(1,"table",25)(2,"thead",26)(3,"tr")(4,"th"),t._uU(5,"Phong tr\xe0o"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Ng\xe0y ph\xe1t \u0111\u1ed9ng"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Ph\xf2ng ch\u1ee7 tr\xec"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"H\u1ea1n \u0111\u0103ng k\xfd"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Ng\xe0y \u0111\u0103ng k\xfd"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Ng\xe0y \u0110L ph\xe1t \u0111\u1ed9ng"),t.qZA(),t._UZ(16,"th"),t.qZA()(),t.TgZ(17,"tbody"),t.YNc(18,L,20,14,"tr",27),t.qZA()()()),2&n){const o=t.oxw();t.Q6J("@slideIn",void 0),t.xp6(1),t.Q6J("@slideIn",void 0),t.xp6(17),t.Q6J("ngForOf",o.filter.length>0?o.filter:o.items.slice(0,10))}}function K(n,r){if(1&n&&t._UZ(0,"app-import-database",30),2&n){const o=t.oxw();t.Q6J("api",o.api)("form",o.importForm)}}function M(n,r){if(1&n&&(t.TgZ(0,"mat-option",53),t._uU(1),t.qZA()),2&n){const o=r.$implicit;t.s9C("value",o.NoiDung),t.xp6(1),t.hij("",o.NoiDung," ")}}function F(n,r){if(1&n&&(t.TgZ(0,"div")(1,"mat-form-field",31)(2,"mat-label"),t._uU(3,"_id"),t.qZA(),t._UZ(4,"input",32),t.qZA(),t.TgZ(5,"mat-form-field")(6,"mat-label"),t._uU(7,"Phong tr\xe0o"),t.qZA(),t._UZ(8,"textarea",33),t.qZA(),t.TgZ(9,"div",14)(10,"div",34)(11,"mat-form-field")(12,"mat-label"),t._uU(13,"S\u1ed1 ph\xe1t \u0111\u1ed9ng"),t.qZA(),t._UZ(14,"input",35),t.qZA(),t.TgZ(15,"mat-form-field")(16,"mat-label"),t._uU(17,"Ng\xe0y ph\xe1t \u0111\u1ed9ng"),t.qZA(),t._UZ(18,"input",36)(19,"mat-datepicker-toggle",37)(20,"mat-datepicker",null,38),t.qZA(),t.TgZ(22,"mat-form-field")(23,"mat-label"),t._uU(24,"Ph\xf2ng ch\u1ee7 tr\xec"),t.qZA(),t.TgZ(25,"mat-select",39),t.YNc(26,M,2,2,"mat-option",40),t.ALo(27,"catalog"),t.qZA()(),t.TgZ(28,"mat-form-field")(29,"mat-label"),t._uU(30,"H\u1ea1n \u0111\u0103ng k\xfd"),t.qZA(),t._UZ(31,"input",41)(32,"mat-datepicker-toggle",37)(33,"mat-datepicker",null,42),t.qZA(),t.TgZ(35,"mat-form-field")(36,"mat-label"),t._uU(37,"H\u1ea1n b\xe1o c\xe1o"),t.qZA(),t._UZ(38,"input",43)(39,"mat-datepicker-toggle",37)(40,"mat-datepicker",null,44),t.qZA()(),t.TgZ(42,"div",34)(43,"mat-form-field")(44,"mat-label"),t._uU(45,"Ng\xe0y \u0110L \u0111\u0103ng k\xfd"),t.qZA(),t._UZ(46,"input",45)(47,"mat-datepicker-toggle",37)(48,"mat-datepicker",null,46),t.qZA(),t.TgZ(50,"mat-form-field")(51,"mat-label"),t._uU(52,"S\u1ed1 \u0110L \u0111\u0103ng k\xfd"),t.qZA(),t._UZ(53,"input",47),t.qZA(),t.TgZ(54,"mat-form-field")(55,"mat-label"),t._uU(56,"Ng\xe0y \u0110L ph\xe1t \u0111\u1ed9ng"),t.qZA(),t._UZ(57,"input",48)(58,"mat-datepicker-toggle",37)(59,"mat-datepicker",null,49),t.qZA(),t.TgZ(61,"mat-form-field")(62,"mat-label"),t._uU(63,"S\u1ed1 \u0110L ph\xe1t \u0111\u1ed9ng"),t.qZA(),t._UZ(64,"input",50),t.qZA(),t.TgZ(65,"mat-form-field")(66,"mat-label"),t._uU(67,"Ng\xe0y \u0110L b\xe1o c\xe1o"),t.qZA(),t._UZ(68,"input",51)(69,"mat-datepicker-toggle",37)(70,"mat-datepicker",null,52),t.qZA()()()()),2&n){const o=t.MAs(21),a=t.MAs(34),l=t.MAs(41),s=t.MAs(49),m=t.MAs(60),x=t.MAs(71);t.Q6J("@slideIn",void 0),t.xp6(18),t.Q6J("matDatepicker",o),t.xp6(1),t.Q6J("for",o),t.xp6(7),t.Q6J("ngForOf",t.lcZ(27,14,"PhongBan")),t.xp6(5),t.Q6J("matDatepicker",a),t.xp6(1),t.Q6J("for",a),t.xp6(6),t.Q6J("matDatepicker",l),t.xp6(1),t.Q6J("for",l),t.xp6(7),t.Q6J("matDatepicker",s),t.xp6(1),t.Q6J("for",s),t.xp6(10),t.Q6J("matDatepicker",m),t.xp6(1),t.Q6J("for",m),t.xp6(10),t.Q6J("matDatepicker",x),t.xp6(1),t.Q6J("for",x)}}function Q(n,r){if(1&n){const o=t.EpF();t.TgZ(0,"button",54),t.NdJ("click",function(){return t.CHM(o),t.oxw().save()}),t.TgZ(1,"mat-icon"),t._uU(2,"save"),t.qZA()()}2&n&&t.Q6J("@slideIn",void 0)}let Y=(()=>{class n{constructor(o,a){this.plus=o,this.fb=a,this.main=this.fb.group({_id:[,[]],PhongTrao:[,[i.kI.required]],SoPhatDong:[,[i.kI.required]],NgayPhatDong:[,[i.kI.required]],PhongChuTri:[,[i.kI.required]],HanDangKy:[,[i.kI.required]],NgayDLPhatDong:[,[]],SoDLPhatDong:[,[]],NgayDLDangKy:[,[]],SoDLDangKy:[,[]],HanBaoCao:[,[]],SoBaoCao:[,[]],NgayBaoCao:[,[]]}),this.importForm=this.fb.group({_id:[,[]],PhongTrao:[,[i.kI.required]],SoPhatDong:[,[i.kI.required]],NgayPhatDong:[,[i.kI.required]],PhongChuTri:[,[i.kI.required]],HanDangKy:[,[i.kI.required]],NgayDLPhatDong:[,[]],SoDLPhatDong:[,[]],NgayDLDangKy:[,[]],SoDLDangKy:[,[]],HanBaoCao:[,[]],SoBaoCao:[,[]],NgayBaoCao:[,[]]}),this.title="Phong tr\xe0o thi \u0111ua",this.dbName="khen-thuong",this.api="phong-trao",this.db=null,this.global=!0,this.items=[],this.filter=[],this.chart=[],this.importData=[],this.errorData=[],this.showInput=!1}ngOnInit(){this.plus.setTiTle(this.title),this.plus.IDB_InitDB(this.dbName).subscribe(o=>{this.db=o,this.plus.updateGlobalLocal(o,this.api),this.plus.updateAPi.subscribe(a=>{this.getData()})})}ngOnDestroy(){console.log("Destroy "+this.api),this.plus.subs.unsubscribe()}getData(){this.plus.IDB_DB_GetAll(this.db,this.api).subscribe(o=>{this.items=o})}save(){let o=this.main.value;o.NgayPhatDong=this.plus.dateHtmlToXls(o.NgayPhatDong),o.HanDangKy=this.plus.dateHtmlToXls(o.HanDangKy),o.NgayDLPhatDong=this.plus.dateHtmlToXls(o.NgayDLPhatDong),o.NgayDLDangKy=this.plus.dateHtmlToXls(o.NgayDLDangKy),o.HanBaoCao=this.plus.dateHtmlToXls(o.HanBaoCao),o.NgayBaoCao=this.plus.dateHtmlToXls(o.NgayBaoCao),null!==o._id?this.plus.httpPut(this.api,o,this.global).subscribe(a=>{this.reset()}):(delete o._id,this.plus.httpPost(this.api,o,this.global).subscribe(a=>{this.reset()}))}onEdit(o){const a=Object.assign({},o);a.NgayPhatDong=this.plus.datexlsToHtml(a.NgayPhatDong),a.HanDangKy=this.plus.datexlsToHtml(a.HanDangKy),a.NgayDLPhatDong=this.plus.datexlsToHtml(a.NgayDLPhatDong),a.NgayDLDangKy=this.plus.datexlsToHtml(a.NgayDLDangKy),a.HanBaoCao=this.plus.datexlsToHtml(a.HanBaoCao),a.NgayBaoCao=this.plus.datexlsToHtml(a.NgayBaoCao),this.item=a,this.main.patchValue(a),this.plus.clickBtn("modal"),this.plus.scrollTop()}onDelete(o){!confirm("B\u1ea1n mu\u1ed1n x\xf3a?")||(this.plus.load(),this.plus.httpDisable(this.api,o,this.global).then(l=>{console.log(l)}))}initForm(){this.main.reset({NgayPhatDong:this.plus.dateFormat(Date.now(),"YYYY-MM-DD","x"),HanDangKy:this.plus.dateFormat(Date.now()+10368e5,"YYYY-MM-DD","x")})}find(o){this.items=o}checkPer(o){return this.plus.checkPer(this.api,o)}reload(){return this.plus.reload(this.dbName+"/"+this.api)}report(){}search(o){this.filter=o}selectedFile(o){o.forEach(a=>{this.importData.push(a)}),this.items=this.importData}export(){console.log("x")}reset(){this.plus.loaded(),this.filter=[],this.importData=[],this.errorData=[],this.main.reset(),this.showInput=!1,this.plus.clickBtn("closeModal")}chuaDangKy(){this.showInput=!1,this.filter=this.items.filter(o=>null==o.NgayDLDangKy||o.NgayDLDangKy<o.NgayPhatDong),0==this.filter.length&&this.plus.alertMatSnackBar("\u0110\xe3 th\u1ef1c hi\u1ec7n \u0111\u0103ng k\xfd xong!")}chuaPhatDong(){this.showInput=!1,this.filter=this.items.filter(o=>null==o.NgayDLPhatDong||o.NgayDLPhatDong<44e3),0==this.filter.length&&this.plus.alertMatSnackBar("\u0110\xe3 th\u1ef1c hi\u1ec7n ph\xe1t \u0111\u1ed9ng xong!")}}return n.\u0275fac=function(o){return new(o||n)(t.Y36(D.T),t.Y36(i.qu))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-phong-trao"]],decls:25,vars:15,consts:[[1,"container"],["id","add-btn","color","accent","mat-raised-button","","data-toggle","modal","data-target","#modelId",3,"click"],["id","back-btn","mat-raised-button","","color","primary",3,"click",4,"ngIf"],["class","row justify-content-center",4,"ngIf"],[3,"db","api","keySearch","filter"],["class","row",4,"ngIf"],[3,"dataJson","api","click"],[3,"api","form",4,"ngIf"],["type","button","id","modal","data-toggle","modal","data-target","#modelId",1,"d-none"],["id","modelId","tabindex","1","role","dialog","aria-labelledby","modelTitleId","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-body"],[1,"container-fluid"],[1,"row"],[3,"formGroup"],[4,"ngIf"],[1,"modal-footer","justify-content-center"],["id","closeModal","mat-raised-button","","color","primary","data-dismiss","modal"],["mat-raised-button","","color","warn",3,"click",4,"ngIf"],["id","back-btn","mat-raised-button","","color","primary",3,"click"],[1,"row","justify-content-center"],["mat-raised-button","","color","accent",3,"click"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",3,"click"],[1,"table","table-hover"],[1,"thead-inverse"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["color","warn",3,"click"],[3,"api","form"],["hidden",""],["type","0","autocomplete","off","matInput","","formControlName","_id"],["matInput","","formControlName","PhongTrao"],[1,"col-sm-6"],["type","true ","autocomplete","off","matInput","","formControlName","SoPhatDong"],["matInput","","formControlName","NgayPhatDong",3,"matDatepicker"],["matSuffix","",3,"for"],["NgayPhatDong",""],["formControlName","PhongChuTri"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","HanDangKy",3,"matDatepicker"],["HanDangKy",""],["matInput","","formControlName","HanBaoCao",3,"matDatepicker"],["HanBaoCao",""],["matInput","","formControlName","NgayDLDangKy",3,"matDatepicker"],["NgayDLDangKy",""],["type","0","autocomplete","off","matInput","","formControlName","SoDLDangKy"],["matInput","","formControlName","NgayDLPhatDong",3,"matDatepicker"],["NgayDLPhatDong",""],["type","0","autocomplete","off","matInput","","formControlName","SoDLPhatDong"],["matInput","","formControlName","NgayBaoCao",3,"matDatepicker"],["NgayBaoCao",""],[3,"value"],["mat-raised-button","","color","warn",3,"click"]],template:function(o,a){1&o&&(t.TgZ(0,"div",0)(1,"button",1),t.NdJ("click",function(){return a.initForm()}),t.TgZ(2,"mat-icon"),t._uU(3,"control_point"),t.qZA()(),t.YNc(4,U,3,1,"button",2),t.YNc(5,B,6,1,"div",3),t.TgZ(6,"app-search-idb",4),t.NdJ("filter",function(s){return a.search(s)}),t.qZA(),t.YNc(7,H,19,3,"div",5),t.qZA(),t.TgZ(8,"app-export-ecxel",6),t.NdJ("click",function(){return a.export()}),t.qZA(),t.YNc(9,K,1,2,"app-import-database",7),t.TgZ(10,"button",8),t._uU(11," Launch "),t.qZA(),t.TgZ(12,"div",9)(13,"div",10)(14,"div",11)(15,"div",12)(16,"div",13)(17,"div",14)(18,"form",15),t.YNc(19,F,72,16,"div",16),t.qZA()()()(),t.TgZ(20,"div",17)(21,"button",18)(22,"mat-icon"),t._uU(23,"close"),t.qZA()(),t.YNc(24,Q,3,1,"button",19),t.qZA()()()()),2&o&&(t.xp6(4),t.Q6J("ngIf",a.filter.length>0),t.xp6(1),t.Q6J("ngIf",0==a.filter.length),t.xp6(1),t.Q6J("db",a.db)("api",a.api)("keySearch","PhongTrao"),t.xp6(1),t.Q6J("ngIf",a.items.length+a.filter.length>0),t.xp6(1),t.Q6J("dataJson",a.items)("api",a.api),t.xp6(1),t.Q6J("ngIf",a.checkPer(4)),t.xp6(8),t.Q6J("@slideIn",void 0),t.xp6(1),t.Q6J("formGroup",a.main),t.xp6(1),t.Q6J("ngIf",a.items.length>0||a.filter.length>0),t.xp6(1),t.Q6J("@slideIn",void 0),t.xp6(1),t.Q6J("@slideIn",void 0),t.xp6(3),t.Q6J("ngIf",a.checkPer(2)&&a.main.valid))},directives:[N.lW,P.Hw,u.O5,A.$,u.sg,v.t,k.y,i._Y,i.JL,i.sg,_.KE,_.hX,I.Nt,i.Fj,i.JJ,i.u,T.hl,T.nW,_.R9,T.Mq,E.gD,J.ey],pipes:[Z.cf,Z.pW],styles:[""],data:{animation:[g.Ym,g.Mq]}}),n})();var y=e(99826);function S(n,r){if(1&n){const o=t.EpF();t.TgZ(0,"div",2)(1,"button",3),t.NdJ("click",function(){return t.CHM(o),t.oxw().resetPhongTrao()}),t._uU(2,"PhongTrao"),t.qZA()()}}let O=(()=>{class n{constructor(o){this.plus=o,this.db=null,this.dbName="khen-thuong",this.global=!0,this.isAdmin=this.plus.isAdmin(),this.chart=[],this.chuaPhatDong=[],this.chuaDangKy=[]}ngOnInit(){this.plus.IDB_InitDB(this.dbName).subscribe(o=>{this.db=o,this.getData()})}getData(){this.plus.IDB_DB_GetAll(this.db,"phong-trao").subscribe(o=>{})}resetPhongTrao(){confirm("Reset DB?")&&this.plus.httpDelete("phong-trao","del",this.global).subscribe(l=>{console.log("Clear DB")})}resetHangHoa(){confirm("Reset DB?")&&this.plus.httpDelete("hang-hoa","del",this.global).subscribe(l=>{console.log("Clear DB")})}checkPer(o,a){return this.plus.checkPer(o,a)}}return n.\u0275fac=function(o){return new(o||n)(t.Y36(D.T))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-khen-thuong"]],decls:2,vars:1,consts:[[1,"container"],["class","row",4,"ngIf"],[1,"row"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(o,a){1&o&&(t.TgZ(0,"div",0),t.YNc(1,S,3,0,"div",1),t.qZA()),2&o&&(t.xp6(1),t.Q6J("ngIf",a.isAdmin))},directives:[u.O5],styles:[""]}),n})(),b=(()=>{class n{constructor(o){this.plus=o}canActivate(){return this.plus.checkPer("phong-trao")}}return n.\u0275fac=function(o){return new(o||n)(t.LFG(D.T))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})();const X=[{path:"",component:O},{path:"phong-trao",component:Y,canActivate:[b]}];let j=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[b],imports:[[y.Bz.forChild(X)],y.Bz]}),n})();var R=e(85913),w=e(6109),G=e(83886);let W=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[],imports:[[u.ez,p.ShareModule,j,i.UX,f.qX,R.m,h.k,d.D,w.UltisModule,G.N]]}),n})()},83886:(C,c,e)=>{e.d(c,{N:()=>f});var p=e(51372),d=e(69808),h=e(5e3);let f=(()=>{class i{}return i.\u0275fac=function(g){return new(g||i)},i.\u0275mod=h.oAB({type:i}),i.\u0275inj=h.cJS({imports:[[d.ez,p.qX]]}),i})()}}]);