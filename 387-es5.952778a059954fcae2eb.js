!function(){"use strict";function n(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function t(n,t){for(var i=0;i<t.length;i++){var e=t[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}function i(n,i,e){return i&&t(n.prototype,i),e&&t(n,e),n}(self.webpackChunk_4la=self.webpackChunk_4la||[]).push([[387],{16011:function(n,t,i){Object.defineProperty(t,"__esModule",{value:!0});var e=i(68273),o=i(32434);t.empty={closed:!0,next:function(n){},error:function(n){if(e.config.useDeprecatedSynchronousErrorHandling)throw n;o.hostReportError(n)},complete:function(){}}},67241:function(n,t,i){var e,o=this&&this.__extends||(e=function(n,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])})(n,t)},function(n,t){function i(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0});var a=i(67382),r=i(16011),u=i(43984),c=i(81476),s=i(68273),h=i(32434),l=function(n){function t(i,e,o){var a=n.call(this)||this;switch(a.syncErrorValue=null,a.syncErrorThrown=!1,a.syncErrorThrowable=!1,a.isStopped=!1,arguments.length){case 0:a.destination=r.empty;break;case 1:if(!i){a.destination=r.empty;break}if("object"==typeof i){i instanceof t?(a.syncErrorThrowable=i.syncErrorThrowable,a.destination=i,i.add(a)):(a.syncErrorThrowable=!0,a.destination=new d(a,i));break}default:a.syncErrorThrowable=!0,a.destination=new d(a,i,e,o)}return a}return o(t,n),t.prototype[c.rxSubscriber]=function(){return this},t.create=function(n,i,e){var o=new t(n,i,e);return o.syncErrorThrowable=!1,o},t.prototype.next=function(n){this.isStopped||this._next(n)},t.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,n.prototype.unsubscribe.call(this))},t.prototype._next=function(n){this.destination.next(n)},t.prototype._error=function(n){this.destination.error(n),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var n=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=n,this},t}(u.Subscription);t.Subscriber=l;var d=function(n){function t(t,i,e,o){var u=n.call(this)||this;u._parentSubscriber=t;var c,s=u;return a.isFunction(i)?c=i:i&&(c=i.next,e=i.error,o=i.complete,i!==r.empty&&(s=Object.create(i),a.isFunction(s.unsubscribe)&&u.add(s.unsubscribe.bind(s)),s.unsubscribe=u.unsubscribe.bind(u))),u._context=s,u._next=c,u._error=e,u._complete=o,u}return o(t,n),t.prototype.next=function(n){if(!this.isStopped&&this._next){var t=this._parentSubscriber;s.config.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,n)&&this.unsubscribe():this.__tryOrUnsub(this._next,n)}},t.prototype.error=function(n){if(!this.isStopped){var t=this._parentSubscriber,i=s.config.useDeprecatedSynchronousErrorHandling;if(this._error)i&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,n),this.unsubscribe()):(this.__tryOrUnsub(this._error,n),this.unsubscribe());else if(t.syncErrorThrowable)i?(t.syncErrorValue=n,t.syncErrorThrown=!0):h.hostReportError(n),this.unsubscribe();else{if(this.unsubscribe(),i)throw n;h.hostReportError(n)}}},t.prototype.complete=function(){var n=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var i=function(){return n._complete.call(n._context)};s.config.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,i),this.unsubscribe()):(this.__tryOrUnsub(i),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(n,t){try{n.call(this._context,t)}catch(i){if(this.unsubscribe(),s.config.useDeprecatedSynchronousErrorHandling)throw i;h.hostReportError(i)}},t.prototype.__tryOrSetError=function(n,t,i){if(!s.config.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,i)}catch(e){return s.config.useDeprecatedSynchronousErrorHandling?(n.syncErrorValue=e,n.syncErrorThrown=!0,!0):(h.hostReportError(e),!0)}return!1},t.prototype._unsubscribe=function(){var n=this._parentSubscriber;this._context=null,this._parentSubscriber=null,n.unsubscribe()},t}(l);t.SafeSubscriber=d},43984:function(n,t,i){Object.defineProperty(t,"__esModule",{value:!0});var e=i(40993),o=i(54720),a=i(67382),r=i(18574),u=function(){function n(n){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,n&&(this._ctorUnsubscribe=!0,this._unsubscribe=n)}return n.prototype.unsubscribe=function(){var t;if(!this.closed){var i=this,u=i._parentOrParents,s=i._ctorUnsubscribe,h=i._unsubscribe,l=i._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,u instanceof n)u.remove(this);else if(null!==u)for(var d=0;d<u.length;++d)u[d].remove(this);if(a.isFunction(h)){s&&(this._unsubscribe=void 0);try{h.call(this)}catch(f){t=f instanceof r.UnsubscriptionError?c(f.errors):[f]}}if(e.isArray(l)){d=-1;for(var g=l.length;++d<g;){var p=l[d];if(o.isObject(p))try{p.unsubscribe()}catch(m){t=t||[],m instanceof r.UnsubscriptionError?t=t.concat(c(m.errors)):t.push(m)}}}if(t)throw new r.UnsubscriptionError(t)}},n.prototype.add=function(t){var i=t;if(!t)return n.EMPTY;switch(typeof t){case"function":i=new n(t);case"object":if(i===this||i.closed||"function"!=typeof i.unsubscribe)return i;if(this.closed)return i.unsubscribe(),i;if(!(i instanceof n)){var e=i;(i=new n)._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var o=i._parentOrParents;if(null===o)i._parentOrParents=this;else if(o instanceof n){if(o===this)return i;i._parentOrParents=[o,this]}else{if(-1!==o.indexOf(this))return i;o.push(this)}var a=this._subscriptions;return null===a?this._subscriptions=[i]:a.push(i),i},n.prototype.remove=function(n){var t=this._subscriptions;if(t){var i=t.indexOf(n);-1!==i&&t.splice(i,1)}},n.EMPTY=((t=new n).closed=!0,t),n;var t}();function c(n){return n.reduce(function(n,t){return n.concat(t instanceof r.UnsubscriptionError?t.errors:t)},[])}t.Subscription=u},68273:function(n,t){Object.defineProperty(t,"__esModule",{value:!0});var i=!1;t.config={Promise:void 0,set useDeprecatedSynchronousErrorHandling(n){if(n){var t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else i&&console.log("RxJS: Back to a better error behavior. Thank you. <3");i=n},get useDeprecatedSynchronousErrorHandling(){return i}}},81476:function(n,t){Object.defineProperty(t,"__esModule",{value:!0}),t.rxSubscriber="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),t.$$rxSubscriber=t.rxSubscriber},18574:function(n,t){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function n(n){return Error.call(this),this.message=n?n.length+" errors occurred during unsubscription:\n"+n.map(function(n,t){return t+1+") "+n.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=n,this}return n.prototype=Object.create(Error.prototype),n}();t.UnsubscriptionError=i},32434:function(n,t){Object.defineProperty(t,"__esModule",{value:!0}),t.hostReportError=function(n){setTimeout(function(){throw n},0)}},40993:function(n,t){Object.defineProperty(t,"__esModule",{value:!0}),t.isArray=Array.isArray||function(n){return n&&"number"==typeof n.length}},67382:function(n,t){Object.defineProperty(t,"__esModule",{value:!0}),t.isFunction=function(n){return"function"==typeof n}},54720:function(n,t){Object.defineProperty(t,"__esModule",{value:!0}),t.isObject=function(n){return null!==n&&"object"==typeof n}},48912:function(t,e,o){o.r(e),o.d(e,{BanHangModule:function(){return ot}});var a,r=o(83886),u=o(87841),c=o(11596),s=o(62136),h=o(48387),l=o(12057),d=o(16738),g=o.n(d),p=o(74788),f=o(88638),m=o(2895),Z=o(18849),T=o(37472),b=o(16314),v=((a=function(){function t(i){n(this,t),this.plus=i,this.db=null,this.title="B\xe1o c\xe1o b\xe1n h\xe0ng",this.dbName="ban-hang",this.items=[],this.DoanhThu=0,this.LoiNhuan=0,this.DoanhThuThang=[],this.LoiNhuanThang=[],this.BanChay=[],this.BanNgoiNhieu=[]}return i(t,[{key:"ngOnDestroy",value:function(){console.log("Destroy bao-cao"),this.plus.subs.unsubscribe()}},{key:"ngOnInit",value:function(){var n=this;this.plus.setTiTle(this.title),this.plus.IDB_InitDB(this.dbName).subscribe(function(t){n.plus.updateUserLocal(t,"nhan-don"),n.db=t,n.plus.updateAPi.subscribe(function(t){n.getNhanDon()})})}},{key:"getNhanDon",value:function(){var n=this;this.plus.subs.add(this.plus.IDB_DB_GetAll(this.db,"nhan-don").subscribe(function(t){null==t&&(t=[]),n.items=t,n.doanhThuNgay(1)}))}},{key:"doanhThuNgay",value:function(n){for(var t=this.items,i=Date.now()-24*n*60*60*1e3,e=[],o=[],a=[],r=0;r<t.length;r++)if(t[r].dateModify>i&&t[r].LoiNhuan>0&&1==t[r].DaThanhToan){var u={LoiNhuan:1e3*t[r].LoiNhuan,ThanhTien:t[r].ThanhTien,Ngay:g()(t[r].dateModify).format("DD/MM")};e.push(u),t[r].DonMua.forEach(function(n){o.push({TenHangHoa:n.TenHangHoa,TongCong:n.TongCong})}),a.push({TenBan:t[r].TenBan,SoKH:t[r].SoKH})}this.DoanhThuThang=this.plus.generateChart(e,"Ngay","ThanhTien"),this.LoiNhuanThang=this.plus.generateChart(e,"Ngay","LoiNhuan"),this.DoanhThu=this.plus.sumByKey(e,"ThanhTien"),this.LoiNhuan=this.plus.sumByKey(e,"LoiNhuan");var c=this.plus.sortArr(o,"TongCong"),s=this.plus.generateChart(c,"TenHangHoa","TongCong");this.BanChay=this.plus.generateChart(s.slice(0,5),"x","y"),this.BanNgoiNhieu=this.plus.generateChart(a,"TenBan","SoKH")}}]),t}()).\u0275fac=function(n){return new(n||a)(p.Y36(f.T))},a.\u0275cmp=p.Xpm({type:a,selectors:[["app-bao-cao"]],decls:37,vars:24,consts:[[1,"container"],[1,"tit"],[1,"row","text-center"],["mat-raised-button","","color","warn"],[1,"row"],[3,"day"],[1,"row","my-3"],[1,"col-md-6"],[3,"id","arr","type"],[1,"col-md-4"],[1,"col-md-8"]],template:function(n,t){1&n&&(p.TgZ(0,"div",0),p.TgZ(1,"h5",1),p._uU(2,"B\xc1O C\xc1O B\xc1N H\xc0NG"),p.qZA(),p.TgZ(3,"div",2),p.TgZ(4,"button",3),p._uU(5),p.ALo(6,"commas"),p.qZA(),p.TgZ(7,"button",3),p._uU(8),p.ALo(9,"commas"),p.qZA(),p.qZA(),p.TgZ(10,"div",4),p.TgZ(11,"app-chip",5),p.NdJ("day",function(n){return t.doanhThuNgay(n)}),p.qZA(),p.qZA(),p.TgZ(12,"div",6),p.TgZ(13,"div",7),p.TgZ(14,"h6",1),p._uU(15,"B\u1ea3ng Doanh thu"),p.qZA(),p._UZ(16,"app-chart",8),p.qZA(),p.TgZ(17,"div",7),p.TgZ(18,"h6",1),p._uU(19,"B\u1ea3ng L\u1ee3i nhu\u1eadn"),p.qZA(),p._UZ(20,"app-chart",8),p.qZA(),p.qZA(),p._UZ(21,"hr"),p.TgZ(22,"h6",1),p._uU(23,"Top b\xe1n ch\u1ea1y"),p.qZA(),p.TgZ(24,"div",6),p.TgZ(25,"div",9),p._UZ(26,"app-chart",8),p.qZA(),p.TgZ(27,"div",10),p._UZ(28,"app-chart",8),p.qZA(),p.qZA(),p._UZ(29,"hr"),p.TgZ(30,"h6",1),p._uU(31,"Top B\xe0n kh\xe1ch ch\u1ecdn"),p.qZA(),p.TgZ(32,"div",6),p.TgZ(33,"div",9),p._UZ(34,"app-chart",8),p.qZA(),p.TgZ(35,"div",10),p._UZ(36,"app-chart",8),p.qZA(),p.qZA(),p.qZA()),2&n&&(p.xp6(5),p.hij(" Doanh thu: ",p.lcZ(6,20,t.DoanhThu),""),p.xp6(3),p.hij(" L\u1ee3i nhu\u1eadn: ",p.lcZ(9,22,t.LoiNhuan),""),p.xp6(8),p.Q6J("id","doanhthuthang")("arr",t.DoanhThuThang)("type","line"),p.xp6(4),p.Q6J("id","LoinhuanThan")("arr",t.LoiNhuanThang)("type","bar"),p.xp6(6),p.Q6J("id","BanChay")("arr",t.BanChay)("type","doughnut"),p.xp6(2),p.Q6J("id","BanChayBar")("arr",t.BanChay)("type","bar"),p.xp6(6),p.Q6J("id","BanNgoiNhieu")("arr",t.BanNgoiNhieu)("type","doughnut"),p.xp6(2),p.Q6J("id","BanNgoiNhieuBar")("arr",t.BanNgoiNhieu)("type","bar"))},directives:[m.lW,Z.Y,T.x],pipes:[b.W],styles:["mat-chip[_ngcontent-%COMP%]{max-width:200px}"]}),a),y=o(28831),A=o(24751),_=o(49356);function q(n,t){1&n&&(p.TgZ(0,"h4",4),p._uU(1,"\u0110\xe3 ho\xe0n th\xe0nh "),p.qZA())}function x(n,t){if(1&n){var i=p.EpF();p.TgZ(0,"button",15),p.NdJ("click",function(){p.CHM(i);var n=p.oxw().index,t=p.oxw().$implicit;return p.oxw().onComplete(t,n)}),p.TgZ(1,"mat-icon"),p._uU(2,"done"),p.qZA(),p.qZA()}}function D(n,t){if(1&n&&(p.TgZ(0,"div",9),p.TgZ(1,"b",10),p._uU(2),p.TgZ(3,"b",11),p._uU(4),p.qZA(),p.qZA(),p.TgZ(5,"i",12),p._uU(6),p.qZA(),p._UZ(7,"br"),p.TgZ(8,"i",13),p._uU(9),p.ALo(10,"fromNow"),p.qZA(),p.YNc(11,x,3,0,"button",14),p.qZA()),2&n){var i=t.$implicit,e=p.oxw(2);p.Q6J("@slideIn",void 0),p.xp6(2),p.hij("",i.TenHangHoa,": "),p.xp6(2),p.AsE(" ",i.TongCong," ",i.DVT," "),p.xp6(2),p.Oqu(i.GhiChu),p.xp6(3),p.Oqu(p.lcZ(10,7,i.GioVao)),p.xp6(2),p.Q6J("ngIf",e.checkPer(2)&&0==i.DaLam)}}function k(n,t){if(1&n){var i=p.EpF();p.TgZ(0,"div"),p.TgZ(1,"div",5),p.TgZ(2,"h4",6),p._uU(3),p.qZA(),p.YNc(4,D,12,9,"div",7),p.TgZ(5,"button",8),p.NdJ("click",function(){var n=p.CHM(i).$implicit;return p.oxw().onCompleteAll(n)}),p.TgZ(6,"mat-icon"),p._uU(7,"done_all"),p.qZA(),p.qZA(),p.qZA(),p.qZA()}if(2&n){var e=t.$implicit;p.xp6(3),p.Oqu(e.TenBan),p.xp6(1),p.Q6J("ngForOf",e.DonMua)}}var C=function(){var t=function(){function t(i,e){n(this,t),this.plus=i,this.fb=e,this.dbName="ban-hang",this.db=null,this.api="nhan-don",this.items=[],this.tittle="Pha ch\u1ebf",this.DonMua=[],this.groups=[],this.main=this.fb.group({_id:[,[]],idHangHoa:[,[A.kI.required]],TrangThai:[0,[A.kI.required]]})}return i(t,[{key:"ngOnDestroy",value:function(){this.plus.subs.unsubscribe(),console.log("Destroy pha-che")}},{key:"ngOnInit",value:function(){var n=this;this.plus.setTiTle(this.tittle),this.plus.IDB_InitDB(this.dbName).subscribe(function(t){n.db=t,n.plus.updateUserLocal(t,n.api),n.plus.updateAPi.subscribe(function(i){n.getIDB(t)})})}},{key:"getIDB",value:function(n){var t=this;this.groups=[],this.plus.IDB_DB_GetAll(n,this.api).subscribe(function(n){for(var i=[],e=0;e<n.length;e++)if(0==n[e].DaThanhToan){var o=n[e].DonMua.filter(function(n){return 0==n.DaLam&&(t.addNewItem(n),t.groups.push(n),t.plus.notify_send("C\xf3 kh\xe1ch v\xe0o!"),t.plus.playUpdate()),0==n.DaLam});o.length>0&&(n[e].DonMua=o,i.push(n[e]))}t.items=i,console.log(t.groups),t.groupItems()})}},{key:"groupItems",value:function(){var n=this.plus.obj_GroupByKey(this.groups,"TenHangHoa");console.log(n)}},{key:"addNewItem",value:function(n){var t=this.DonMua.find(function(t){return t._id==n._id});if(window.navigator.vibrate(200),t){var i=this.DonMua.findIndex(function(n){return n._id==t._id});this.DonMua[i].TongCong+=n.TongCong}else n.TongCong=1,n.GioVao=Date.now(),n.DaLam=!1,this.DonMua.push(n)}},{key:"onComplete",value:function(n,t){var i=this;console.log(n,t);var e=n;delete e.__v,e.DonMua[t].DaLam=!0,console.log(e),this.plus.httpPut(this.api,e).subscribe(function(n){console.log(n),i.getIDB(i.db)})}},{key:"onCompleteAll",value:function(n){var t=this,i=n;delete i.__v;for(var e=0;e<i.DonMua.length;e++)i.DonMua[e].DaLam=!0;console.log(i),this.plus.httpPut(this.api,i).subscribe(function(n){console.log(n),t.plus.IDB_DB_Add(t.db,t.api,i),t.getIDB(t.db)})}},{key:"reload",value:function(){this.plus.reload("ban-hang/pha-che")}},{key:"checkPer",value:function(n){return this.plus.checkPer(this.api,n)}}]),t}();return t.\u0275fac=function(n){return new(n||t)(p.Y36(f.T),p.Y36(A.qu))},t.\u0275cmp=p.Xpm({type:t,selectors:[["app-pha-che"]],decls:4,vars:2,consts:[[1,"container"],["class","text-center text-primary",4,"ngIf"],[1,"card-group"],[4,"ngFor","ngForOf"],[1,"text-center","text-primary"],[1,"card","text-center","mx-3","mb-3"],[1,"card-title","bg-success"],["class","card-body text-left",4,"ngFor","ngForOf"],["mat-raised-button","","color","accent",3,"click"],[1,"card-body","text-left"],[1,"font-blue"],[1,"text-danger","mx-3"],[1,"font-red","font-note"],[1,"mx-3"],["hidden","","mat-raised-button","","color","accent",3,"click",4,"ngIf"],["hidden","","mat-raised-button","","color","accent",3,"click"]],template:function(n,t){1&n&&(p.TgZ(0,"div",0),p.YNc(1,q,2,0,"h4",1),p.TgZ(2,"div",2),p.YNc(3,k,8,2,"div",3),p.qZA(),p.qZA()),2&n&&(p.xp6(1),p.Q6J("ngIf",0==t.items.length),p.xp6(2),p.Q6J("ngForOf",t.items))},directives:[l.O5,l.sg,m.lW,_.Hw],pipes:[b.dw],styles:[".card[_ngcontent-%COMP%]{border-radius:1rem}.card-title[_ngcontent-%COMP%]{border-radius:1rem}"],data:{animation:[y.Ym]}}),t}(),w=o(1156),B=o(33982),M=o(40859),N=o(48743),U=o(46833),I=o(46113);function H(n,t){if(1&n&&(p.TgZ(0,"button",32),p._uU(1),p.qZA()),2&n){var i=p.oxw();p.xp6(1),p.hij("B\xe0n hi\u1ec7n t\u1ea1i: ",i.BanDuocChon.TenBan,"")}}function O(n,t){if(1&n){var i=p.EpF();p.TgZ(0,"div"),p.TgZ(1,"button",33),p.NdJ("click",function(){return p.CHM(i),p.oxw().LuuTam()}),p._uU(2),p.qZA(),p.TgZ(3,"button",33),p.NdJ("click",function(){return p.CHM(i),p.oxw().LuuCho()}),p._uU(4,"L\u01b0u"),p.qZA(),p.TgZ(5,"button",34),p.NdJ("click",function(){return p.CHM(i),p.oxw().thanhToan()}),p._uU(6),p.ALo(7,"commas"),p.qZA(),p.qZA()}if(2&n){var e=p.oxw();p.xp6(2),p.Oqu(e.xemMon?"Th\xeam ghi ch\xfa":"Ch\u1ecdn th\xeam m\xf3n"),p.xp6(4),p.AsE("",e.total," m\xf3n: ",p.lcZ(7,3,e.ThanhTien),"")}}function J(n,t){if(1&n&&(p.TgZ(0,"button",47),p._uU(1),p.ALo(2,"commas"),p.qZA()),2&n){var i=p.oxw(2).$implicit;p.xp6(1),p.Oqu(p.lcZ(2,1,i.ThanhTien))}}function P(n,t){if(1&n&&(p.TgZ(0,"span",48),p._uU(1),p.ALo(2,"fromNow"),p.qZA()),2&n){var i=p.oxw(2).$implicit;p.xp6(1),p.hij(" ",p.lcZ(2,1,i.GioVao),"")}}var E=function(n){return{"border border-danger":n}};function L(n,t){if(1&n){var i=p.EpF();p.TgZ(0,"div",42),p.NdJ("click",function(){p.CHM(i);var n=p.oxw().index;return p.oxw(3).chonBan(n)}),p.TgZ(1,"h4",43),p._uU(2),p.qZA(),p.YNc(3,J,3,3,"button",44),p.YNc(4,P,3,3,"span",45),p._UZ(5,"div",46),p.qZA()}if(2&n){var e=p.oxw().$implicit;p.Q6J("ngClass",p.VKq(4,E,e.ThanhTien>0)),p.xp6(2),p.Oqu(e.TenBan),p.xp6(1),p.Q6J("ngIf",e.ThanhTien>0),p.xp6(1),p.Q6J("ngIf",e.GioVao>0)}}function G(n,t){if(1&n&&(p.TgZ(0,"div",40),p.YNc(1,L,6,6,"div",41),p.qZA()),2&n){var i=t.$implicit,e=p.oxw().$implicit;p.xp6(1),p.Q6J("ngIf",i.NhomBan==e.NoiDung)}}function F(n,t){if(1&n&&(p.TgZ(0,"mat-tab",38),p.TgZ(1,"div",27),p.YNc(2,G,2,1,"div",39),p.qZA(),p.qZA()),2&n){var i=t.$implicit,e=p.oxw(2);p.s9C("label",i.NoiDung),p.xp6(2),p.Q6J("ngForOf",e.ChiaBan)}}function S(n,t){if(1&n&&(p.TgZ(0,"div",35),p.TgZ(1,"mat-tab-group",36),p.YNc(2,F,3,2,"mat-tab",37),p.qZA(),p.qZA()),2&n){var i=p.oxw();p.xp6(1),p.Q6J("@slideIn",void 0),p.xp6(1),p.Q6J("ngForOf",i.TabBan)}}function Q(n,t){if(1&n){var i=p.EpF();p.TgZ(0,"div",55),p.NdJ("click",function(){var n=p.CHM(i).$implicit;return p.oxw(4).addNewItem(n)}),p.TgZ(1,"div",56),p.TgZ(2,"h4",57),p._uU(3),p.qZA(),p.qZA(),p.qZA()}if(2&n){var e=t.$implicit;p.xp6(1),p.Udp("border-bottom-color",e.HinhAnh),p.xp6(2),p.hij("",e.TenHangHoa," ")}}function Y(n,t){if(1&n&&(p.TgZ(0,"mat-tab",38),p.TgZ(1,"div",53),p.YNc(2,Q,4,3,"div",54),p.ALo(3,"filterByKV"),p.qZA(),p.qZA()),2&n){var i=t.$implicit,e=p.oxw(3);p.s9C("label",i.NoiDung),p.xp6(1),p.Q6J("@slideX",void 0),p.xp6(1),p.Q6J("ngForOf",p.Dn7(3,3,e.items,"NhomHang",i.NoiDung))}}function V(n,t){if(1&n&&(p.TgZ(0,"div",52),p.TgZ(1,"mat-tab-group",36),p.YNc(2,Y,4,7,"mat-tab",37),p.qZA(),p.qZA()),2&n){var i=p.oxw(2);p.xp6(1),p.Q6J("@slideIn",void 0),p.xp6(1),p.Q6J("ngForOf",i.NhomHang)}}function j(n,t){if(1&n){var i=p.EpF();p.TgZ(0,"span",67),p.NdJ("click",function(){p.CHM(i);var n=p.oxw().index;return p.oxw(3).delItem(n)}),p._UZ(1,"i",68),p.qZA()}}function K(n,t){if(1&n&&(p.TgZ(0,"i",69),p._uU(1),p.qZA()),2&n){var i=p.oxw().$implicit;p.xp6(1),p.Oqu(i.GhiChu.length>30?i.GhiChu.slice(0,25)+"...":i.GhiChu)}}function $(n,t){if(1&n){var i=p.EpF();p.TgZ(0,"i",70),p.NdJ("click",function(){p.CHM(i);var n=p.oxw().index;return p.oxw(3).openModal(n)}),p.qZA()}}function R(n,t){if(1&n){var i=p.EpF();p.TgZ(0,"mat-icon",71),p.NdJ("click",function(){p.CHM(i);var n=p.oxw().index;return p.oxw(3).removeItem(n)}),p._uU(1,"arrow_left"),p.qZA()}}function z(n,t){if(1&n){var i=p.EpF();p.TgZ(0,"mat-icon",72),p.NdJ("click",function(){p.CHM(i);var n=p.oxw(),t=n.$implicit,e=n.index;return p.oxw(3).addItem(t,e)}),p._uU(1,"arrow_right"),p.qZA()}}function W(n,t){if(1&n&&(p.TgZ(0,"tr"),p.TgZ(1,"td"),p._uU(2),p.YNc(3,j,2,0,"span",60),p.qZA(),p.TgZ(4,"td"),p.TgZ(5,"b",61),p._uU(6),p.qZA(),p._UZ(7,"br"),p._uU(8),p.ALo(9,"commas"),p.YNc(10,K,2,1,"i",62),p.YNc(11,$,1,0,"i",63),p.qZA(),p.TgZ(12,"td"),p.TgZ(13,"mat-form-field"),p.YNc(14,R,2,0,"mat-icon",64),p._UZ(15,"input",65),p.ALo(16,"number"),p.YNc(17,z,2,0,"mat-icon",66),p.qZA(),p.qZA(),p.TgZ(18,"td"),p._uU(19),p.ALo(20,"commas"),p.qZA(),p.qZA()),2&n){var i=t.$implicit,e=t.index;p.xp6(2),p.hij("",e+1," "),p.xp6(1),p.Q6J("ngIf",0==i.DaLam),p.xp6(3),p.hij(" ",i.TenHangHoa,""),p.xp6(2),p.AsE(" ",p.lcZ(9,11,1e3*i.GiaBan)," ",i.KhuyenMai>0?"(Gi\u1ea3m "+i.KhuyenMai+"%)":""," "),p.xp6(2),p.Q6J("ngIf",0==i.DaLam),p.xp6(1),p.Q6J("ngIf",0==i.DaLam),p.xp6(3),p.Q6J("ngIf",0==i.DaLam),p.xp6(1),p.s9C("value",p.lcZ(16,13,i.TongCong)),p.xp6(2),p.Q6J("ngIf",0==i.DaLam),p.xp6(2),p.Oqu(p.lcZ(20,15,i.TongCong*(i.GiaBan-i.GiaBan*i.KhuyenMai/100)*1e3))}}function X(n,t){if(1&n){var i=p.EpF();p.TgZ(0,"div",1),p.TgZ(1,"table",58),p.TgZ(2,"thead",18),p.TgZ(3,"tr"),p.TgZ(4,"th"),p._uU(5,"TT "),p.qZA(),p.TgZ(6,"th"),p._uU(7,"H\u1ea1ng m\u1ee5c"),p.qZA(),p.TgZ(8,"th"),p._uU(9,"S\u1ed1 l\u01b0\u1ee3ng"),p.qZA(),p.TgZ(10,"th"),p._uU(11,"Th\xe0nh ti\u1ec1n"),p.qZA(),p.qZA(),p.qZA(),p.TgZ(12,"tbody"),p.YNc(13,W,21,17,"tr",28),p.TgZ(14,"tr",35),p.TgZ(15,"td",59),p.TgZ(16,"h5"),p._uU(17),p.ALo(18,"commas"),p.qZA(),p.TgZ(19,"h6"),p.TgZ(20,"i"),p._uU(21),p.ALo(22,"titlecase"),p.qZA(),p.qZA(),p.qZA(),p.TgZ(23,"td"),p.TgZ(24,"button",34),p.NdJ("click",function(){return p.CHM(i),p.oxw(2).thanhToan()}),p._uU(25),p.ALo(26,"commas"),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA()}if(2&n){var e=p.oxw(2);p.xp6(13),p.Q6J("ngForOf",e.BanDuocChon.DonMua),p.xp6(4),p.AsE("T\u1ed5ng c\u1ed9ng: ",p.lcZ(18,5,e.ThanhTien)," / ",e.total," m\xf3n"),p.xp6(4),p.Oqu(p.lcZ(22,7,e.bangchu)),p.xp6(4),p.hij("Thanh to\xe1n ",p.lcZ(26,9,e.ThanhTien),"")}}function nn(n,t){if(1&n&&(p.TgZ(0,"div",49),p.YNc(1,V,3,2,"div",50),p.YNc(2,X,27,11,"div",51),p.qZA()),2&n){var i=p.oxw();p.xp6(1),p.Q6J("ngIf",i.xemMon),p.xp6(1),p.Q6J("ngIf",!i.xemMon)}}function tn(n,t){if(1&n&&(p.TgZ(0,"tr"),p.TgZ(1,"td"),p._uU(2),p.qZA(),p.TgZ(3,"td"),p._uU(4),p._UZ(5,"br"),p._uU(6),p.ALo(7,"commas"),p.qZA(),p.TgZ(8,"td",35),p._uU(9),p.qZA(),p.TgZ(10,"td",75),p._uU(11),p.ALo(12,"commas"),p.qZA(),p.qZA()),2&n){var i=t.$implicit,e=t.index;p.xp6(2),p.hij("",e+1," "),p.xp6(2),p.hij(" ",i.TenHangHoa," "),p.xp6(2),p.AsE(" ",p.lcZ(7,6,1e3*i.GiaBan)," ",i.KhuyenMai>0?"(Gi\u1ea3m "+i.KhuyenMai+"%)":""," "),p.xp6(3),p.Oqu(i.TongCong),p.xp6(2),p.Oqu(p.lcZ(12,8,i.TongCong*(i.GiaBan-i.GiaBan*i.KhuyenMai/100)*1e3))}}function en(n,t){if(1&n&&(p.TgZ(0,"tbody"),p.YNc(1,tn,13,10,"tr",28),p.TgZ(2,"tr"),p.TgZ(3,"td",73),p.TgZ(4,"h5"),p._uU(5,"T\u1ed5ng c\u1ed9ng:"),p.qZA(),p.qZA(),p.TgZ(6,"td"),p.TgZ(7,"h5"),p._uU(8),p.qZA(),p.qZA(),p.TgZ(9,"td",35),p.TgZ(10,"h5"),p._uU(11),p.ALo(12,"commas"),p.qZA(),p.TgZ(13,"h6"),p.TgZ(14,"i"),p._uU(15),p.ALo(16,"titlecase"),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.TgZ(17,"td",74),p.TgZ(18,"h6"),p._uU(19,"Xin c\u1ea3m \u01a1n qu\xfd kh\xe1ch"),p.qZA(),p.TgZ(20,"h6"),p._uU(21,"S\u1ea3n ph\u1ea9m c\u1ee7a 4la.vn"),p.qZA(),p.qZA(),p.qZA()),2&n){var i=p.oxw();p.xp6(1),p.Q6J("ngForOf",i.BanDuocChon.DonMua),p.xp6(7),p.hij("",i.total," m\xf3n"),p.xp6(3),p.hij(" ",p.lcZ(12,4,i.ThanhTien),""),p.xp6(4),p.Oqu(p.lcZ(16,6,i.bangchu))}}function on(n,t){if(1&n){var i=p.EpF();p.TgZ(0,"div"),p.TgZ(1,"span",76),p.NdJ("click",function(){var n=p.CHM(i).$implicit;return p.oxw().note.push(n.NoiDung)}),p._uU(2),p.qZA(),p.qZA()}if(2&n){var e=t.$implicit;p.xp6(2),p.Oqu(e.NoiDung)}}function an(n,t){if(1&n){var i=p.EpF();p.TgZ(0,"div"),p.TgZ(1,"span",77),p.NdJ("click",function(){var n=p.CHM(i).$implicit;return p.oxw().note.push(n.NoiDung)}),p._uU(2),p.qZA(),p.qZA()}if(2&n){var e=t.$implicit;p.xp6(2),p.Oqu(e.NoiDung)}}var rn=function(){var t=function(){function t(i,e,o){n(this,t),this.plus=i,this.route=e,this.fb=o,this.db=null,this.title="H\xe0ng h\xf3a",this.dbName="ban-hang",this.api="nhan-don",this.tabs=[],this.items=[],this.DonMua=[],this.total=0,this.ThanhTien=0,this.donHang=[],this.bangchu="",this.filter=[],this.note=[],this.user=this.plus.user.getValue(),this.printTime=Date.now(),this.NhomHang=this.plus.user.getValue().NhomHang,this.TabBan=this.plus.sortArr(this.plus.user.getValue().NhomBan,"ThuTu",1),this.ChiaBan=[],this.ban=0,this.now=Date.now(),this.xemBan=!0,this.xemMon=!1,this.donHangFB=this.fb.group({TenBan:[,[A.kI.required]],NhomBan:[,[A.kI.required]],ThanhTien:[,[A.kI.required]],LoiNhuan:[,[A.kI.required]],SoKH:[,[A.kI.required]],GioVao:[,[A.kI.required]],DaThanhToan:[,[A.kI.required]],DonMua:this.fb.array([this.fb.group({idHangHoa:[,[A.kI.required]],DVT:[,[A.kI.required]],GiaBan:[,[A.kI.required]],GiaVon:[,[A.kI.required]],KhuyenMai:[,[A.kI.required]],TenHangHoa:[,[A.kI.required]],TongCong:[,[A.kI.required]],DaLam:[,[]],GioVao:[,[A.kI.required]],GhiChu:[]})])})}return i(t,[{key:"ngOnDestroy",value:function(){if(console.log("Destroy nhan-don"),console.log(this.BanDuocChon),this.note.length>0&&confirm("Ban c\xf3 mu\u1ed1n l\u01b0u ghi ch\xfa?"))return this.LuuCho();this.plus.subs.unsubscribe()}},{key:"ngOnInit",value:function(){var n=this;this.chiaBan(),this.plus.setTiTle(this.title),this.plus.IDB_InitDB(this.dbName).subscribe(function(t){n.db=t,n.getHangHoa(),n.plus.updateUserLocal(t,n.api),n.getDonHangLocal(),n.plus.updateAPi.subscribe(function(t){t&&(console.log("updateAPi",t),n.chiaBan(),n.getDonHangLocal())})}),this.DonMua=[]}},{key:"thanhToan",value:function(){var n=this,t=confirm("B\u1ea1n c\xf3 mu\u1ed1n in h\xf3a \u0111\u01a1n ko?"),i=this.BanDuocChon;if(delete i.__v,i.DaThanhToan=!0,0==i.ThanhTien&&(this.BanDuocChon=Object.assign(this.BanDuocChon,{DonMua:this.DonMua.map(function(n){return{idHangHoa:n._id,TenHangHoa:n.TenHangHoa,GiaBan:n.GiaBan,GiaVon:n.GiaVon,KhuyenMai:n.KhuyenMai,DVT:n.DVT,TongCong:n.TongCong,DaLam:n.DaLam}}),LoiNhuan:this.DonMua.map(function(n){return n.GiaBan-n.GiaVon-n.GiaBan*n.KhuyenMai/100}).reduce(function(n,t){return n+t}),ThanhTien:this.ThanhTien,GioVao:Date.now(),SoKH:this.total,DaThanhToan:!0}),this.donHangFB.patchValue(this.BanDuocChon),this.donHangFB.invalid)){var e=this.plus.getErrValidateForm(this.donHangFB);console.log(e)}void 0!==i._id?(delete i.__v,this.plus.httpPut("nhan-don",i).subscribe(function(t){var e=n.plus.Crypt_DecryptRest(t);console.log(e),n.plus.IDB_DB_Add(n.db,n.api,i),n.plus.FBS_PostByUser("hang-hoa",e.dateModify).then(function(){n.back()})})):this.plus.httpPost("nhan-don",i).subscribe(function(t){n.back()}),t?(this.PrintDiv("HoaDon"),console.log(0,i)):console.log(1,i)}},{key:"getDonHangLocal",value:function(){var n=this;this.plus.subs.add(this.plus.IDB_DB_GetAll(this.db,this.api,"TenBan",1).pipe((0,w.map)(function(n){return n?n.filter(function(n){return 0==n.DaThanhToan}):[]})).subscribe(function(t){null==t&&(t=[]),n.donHang=t,n.ChiaBan=t.concat(n.ChiaBan.filter(function(n){var i=n.TenBan;return!t.find(function(n){return n.TenBan==i})})),n.ChiaBan=n.plus.sortArr(n.ChiaBan,"TenBan",1)}))}},{key:"LuuTam",value:function(){this.xemMon=!this.xemMon,this.ChiaBan[this.ban]=Object.assign(this.ChiaBan[this.ban],{DonMua:this.DonMua.map(function(n){return{idHangHoa:n._id,TenHangHoa:n.TenHangHoa,GiaBan:n.GiaBan,GiaVon:n.GiaVon,KhuyenMai:n.KhuyenMai,DVT:n.DVT,TongCong:n.TongCong,DaLam:n.DaLam,GioVao:n.GioVao,GhiChu:n.GhiChu}}),LoiNhuan:this.DonMua.map(function(n){return n.GiaBan-n.GiaVon-n.GiaBan*n.KhuyenMai/100}).reduce(function(n,t){return n+t}),ThanhTien:this.ThanhTien,GioVao:Date.now(),SoKH:this.total,DaThanhToan:!1})}},{key:"LuuCho",value:function(){this.LuuTam(),this.xemMon=!1,this.xemBan=!0,this.total=0,this.DonMua=[];var n=this.ChiaBan[this.ban];if(this.donHangFB.patchValue(n),this.donHangFB.valid)console.log(n._id),void 0!==n._id?(delete n.__v,this.plus.httpPut("nhan-don",n).subscribe(function(n){console.log(n)})):this.plus.httpPost("nhan-don",n).subscribe(function(n){console.log(n)});else{var t=this.plus.getErrValidateForm(this.donHangFB);console.log(t)}}},{key:"chiaBan",value:function(){var n=this;this.plus.load(),this.ChiaBan=[],this.TabBan.forEach(function(t){n.ChiaBan.push({TenBan:t.NoiDung+"- Mang v\u1ec1",NhomBan:t.NoiDung,DonMua:[],ThanhTien:0,GioVao:0,SoKH:0,DaThanhToan:!1});for(var i=1;i<t.SoLuong+1;i++)n.ChiaBan.push({TenBan:t.NoiDung+"-"+i,NhomBan:t.NoiDung,DonMua:[],ThanhTien:0,GioVao:0,SoKH:0,DaThanhToan:!1})}),this.plus.loaded()}},{key:"chonBan",value:function(n){this.BanDuocChon=this.ChiaBan[n],console.log(this.BanDuocChon),this.bangchu=this.plus.numToVi(this.BanDuocChon.ThanhTien),this.xemBan=!1,this.ban=n;var t=this.ChiaBan[n];console.log(t),t.ThanhTien>0?(this.DonMua=t.DonMua,this.xemMon=!1):this.xemMon=!0,this.getTongCong()}},{key:"getHangHoa",value:function(){var n=this;this.plus.subs.add(this.plus.IDB_DB_GetAll(this.db,"hang-hoa").subscribe(function(t){try{n.items=t}catch(i){n.items=[],n.plus.alertWarning("B\u1ea1n ch\u01b0a c\xf3 h\xe0ng h\xf3a trong kho!!!")}0==t.length&&n.plus.alertWarning("B\u1ea1n ch\u01b0a c\xf3 h\xe0ng h\xf3a trong kho!"),console.log("getHangHoa: "+t.length)}))}},{key:"addNewItem",value:function(n){var t=this.DonMua.find(function(t){return t._id==n._id});if(window.navigator.vibrate(200),!t)return n.TongCong=1,n.GioVao=Date.now(),n.DaLam=!1,n.GhiChu=this.note.join(" "),this.DonMua.push(n),this.getTongCong();var i=this.DonMua.findIndex(function(n){return n._id==t._id});this.DonMua[i].TongCong+=1,this.getTongCong()}},{key:"removeItem",value:function(n){this.BanDuocChon.DonMua[n].TongCong>0&&(this.BanDuocChon.DonMua[n].TongCong-=1),this.getTongCong()}},{key:"addItem",value:function(n,t){this.BanDuocChon.DonMua[t].TongCong+=1,this.getTongCong()}},{key:"delItem",value:function(n){this.BanDuocChon.DonMua.splice(n,1),this.getTongCong()}},{key:"getTongCong",value:function(){this.total=this.plus.sumByKey(this.DonMua,"TongCong"),this.getThanhTien()}},{key:"getThanhTien",value:function(){var n=0;return this.DonMua.forEach(function(t){n+=(t.GiaBan-t.GiaBan*t.KhuyenMai/100)*t.TongCong*1e3}),this.ThanhTien=n}},{key:"openModal",value:function(n){this.plus.clickBtn("ghichubtn"),this.indexDonMua=n}},{key:"addNote",value:function(){this.BanDuocChon.DonMua[this.indexDonMua].GhiChu=this.note.join(", "),this.note=[]}},{key:"updateList",value:function(n,t,i){var e=+i.target.textContent;if(console.log(e),"Enter"===i.key&&i.preventDefault(),"number"!=typeof e)return this.plus.alertError("Sai \u0111\u1ecbnh d\u1ea1ng"),this.DonMua[n][t]=0;this.DonMua[n][t]=+e,this.getTongCong()}},{key:"PrintDiv",value:function(n){var t=window.document.getElementById(n),i=window.open("","PRINT");i.document.write(document.documentElement.innerHTML),setTimeout(function(){i.document.body.innerHTML=t.outerHTML,i.document.close(),i.focus(),i.print(),i.close()},1e3)}},{key:"back",value:function(){this.plus.reload("ban-hang/nhan-don")}}]),t}();return t.\u0275fac=function(n){return new(n||t)(p.Y36(f.T),p.Y36(B.gz),p.Y36(A.qu))},t.\u0275cmp=p.Xpm({type:t,selectors:[["app-nhan-don"]],decls:65,vars:18,consts:[[1,"row","text-center","inline"],[1,"col"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","warn","class","float-rigth",4,"ngIf"],[4,"ngIf"],["class","text-center",4,"ngIf"],["class","row",4,"ngIf"],["id","modelId","tabindex","-1","role","dialog","aria-labelledby","modelTitleId","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body","hoadon"],["id","HoaDon",1,"div"],[1,"text-left"],[1,"table","table-hover"],[1,"thead-inverse"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],["type","button",1,"btn","btn-primary"],["id","ghichubtn","mat-raised-button","","color","accent","data-toggle","modal","data-target","#notes",1,"d-none"],["id","notes","tabindex","-1","role","dialog","aria-labelledby","modelTitleId","aria-hidden","true",1,"modal","fade"],["notes",""],["role","document",1,"modal-dialog","modal-sm"],[1,"modal-body"],[1,"card-group"],[4,"ngFor","ngForOf"],["type","text","placeholder","Ghi ch\xfa kh\xe1c",1,"form-control",3,"blur"],["ghichuKhac",""],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"click"],["mat-raised-button","","color","warn",1,"float-rigth"],["mat-raised-button","","color","accent",3,"click"],["mat-raised-button","","color","warn",3,"click"],[1,"text-center"],["dynamicHeight",""],[3,"label",4,"ngFor","ngForOf"],[3,"label"],["class","div",4,"ngFor","ngForOf"],[1,"div"],["class","card hangHoa",3,"ngClass","click",4,"ngIf"],[1,"card","hangHoa",3,"ngClass","click"],[1,"text-center","pt-3"],["class","badge badge-warning",4,"ngIf"],["class","badge badge-light",4,"ngIf"],[1,"card-body","py-3","px-2"],[1,"badge","badge-warning"],[1,"badge","badge-light"],[1,"row"],["class","list",4,"ngIf"],["class","col",4,"ngIf"],[1,"list"],["id","item",1,"card-group"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],[1,"card","hangHoa"],[1,"text-center","py-3"],["id","myDiv",1,"table","table-hover"],["colspan","3"],["class","badge badge-danger mx-2 ",3,"click",4,"ngIf"],[1,"font-blue"],["class"," font-note",4,"ngIf"],["class","fa fa-pencil text-success",3,"click",4,"ngIf"],["matPrefix","",3,"click",4,"ngIf"],["readonly","","required","","type","text","autocomplete","off","matInput","",2,"text-align","center",3,"value"],["matSuffix","",3,"click",4,"ngIf"],[1,"badge","badge-danger","mx-2",3,"click"],["aria-hidden","true",1,"fa","fa-trash"],[1,"font-note"],[1,"fa","fa-pencil","text-success",3,"click"],["matPrefix","",3,"click"],["matSuffix","",3,"click"],["colspan","2",1,"text-center"],["colspan","4",1,"text-center"],[1,"text-rigth"],[1,"badge","badge-primary","py-2","mx-2","my-2",3,"click"],[1,"badge","badge-warning","py-2","mx-2","my-2",3,"click"]],template:function(n,t){if(1&n){var i=p.EpF();p.TgZ(0,"div",0),p.TgZ(1,"div",1),p.TgZ(2,"button",2),p.NdJ("click",function(){return t.back()}),p._uU(3,"Ch\u1ecdn b\xe0n"),p.qZA(),p.YNc(4,H,2,1,"button",3),p.qZA(),p.TgZ(5,"div",1),p.YNc(6,O,8,5,"div",4),p.qZA(),p.qZA(),p.YNc(7,S,3,2,"div",5),p.YNc(8,nn,3,2,"div",6),p.TgZ(9,"div",7),p.TgZ(10,"div",8),p.TgZ(11,"div",9),p.TgZ(12,"div",10),p.TgZ(13,"h5",11),p._uU(14,"Modal title"),p.qZA(),p.TgZ(15,"button",12),p.TgZ(16,"span",13),p._uU(17,"\xd7"),p.qZA(),p.qZA(),p.qZA(),p.TgZ(18,"div",14),p.TgZ(19,"div",15),p.TgZ(20,"div",16),p.TgZ(21,"h6"),p._uU(22),p.qZA(),p.TgZ(23,"h6"),p._uU(24),p.qZA(),p.TgZ(25,"h6"),p._uU(26),p.ALo(27,"date"),p.qZA(),p.qZA(),p.TgZ(28,"table",17),p.TgZ(29,"thead",18),p.TgZ(30,"tr"),p.TgZ(31,"th"),p._uU(32,"TT"),p.qZA(),p.TgZ(33,"th"),p._uU(34,"H\u1ea1ng m\u1ee5c"),p.qZA(),p.TgZ(35,"th"),p._uU(36,"S\u1ed1 l\u01b0\u1ee3ng"),p.qZA(),p.TgZ(37,"th"),p._uU(38,"Th\xe0nh ti\u1ec1n"),p.qZA(),p.qZA(),p.qZA(),p.YNc(39,en,22,8,"tbody",4),p.qZA(),p.qZA(),p.qZA(),p.TgZ(40,"div",19),p.TgZ(41,"button",20),p._uU(42,"Close"),p.qZA(),p.TgZ(43,"button",21),p._uU(44,"Save"),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p._UZ(45,"button",22),p.TgZ(46,"div",23,24),p.TgZ(48,"div",25),p.TgZ(49,"div",9),p.TgZ(50,"div",10),p.TgZ(51,"h6",11),p._uU(52,"Ghi ch\xfa"),p.qZA(),p.qZA(),p.TgZ(53,"div",26),p._uU(54),p.TgZ(55,"div",27),p.YNc(56,on,3,1,"div",28),p.ALo(57,"catalog"),p.YNc(58,an,3,1,"div",28),p.ALo(59,"catalog"),p.qZA(),p.qZA(),p.TgZ(60,"input",29,30),p.NdJ("blur",function(){p.CHM(i);var n=p.MAs(61);return t.note.push(n.value)}),p.qZA(),p.TgZ(62,"div",19),p.TgZ(63,"button",31),p.NdJ("click",function(){return t.addNote()}),p._uU(64," Ok "),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA()}2&n&&(p.xp6(4),p.Q6J("ngIf",t.BanDuocChon),p.xp6(2),p.Q6J("ngIf",t.total>0),p.xp6(1),p.Q6J("ngIf",t.xemBan),p.xp6(1),p.Q6J("ngIf",!t.xemBan),p.xp6(14),p.Oqu(t.user.title),p.xp6(2),p.Oqu(t.user.phoneNumber),p.xp6(2),p.hij("Gi\u1edd in: ",p.xi3(27,11,t.printTime,"HH:MM dd/MM/yyyy"),""),p.xp6(13),p.Q6J("ngIf",t.BanDuocChon),p.xp6(15),p.hij(" ",t.note.join(", ")," "),p.xp6(2),p.Q6J("ngForOf",p.lcZ(57,14,"SoLy")),p.xp6(2),p.Q6J("ngForOf",p.lcZ(59,16,"GhiChuMon")))},directives:[m.lW,l.O5,l.sg,M.SP,M.uX,l.mk,N.oO,U.KE,I.Nt,_.Hw,U.qo,U.R9],pipes:[l.uU,b.pW,b.W,b.dw,b.H$,l.rS,l.JJ],styles:[".hangHoa[_ngcontent-%COMP%]{height:10rem;width:10rem;border-radius:1rem;margin:.2rem;border-bottom-width:3rem;border-color:#90ee90;color:#00f;float:left;display:flex;align-items:center;justify-content:center}@media screen,print{.container[_ngcontent-%COMP%]{background-color:#999;position:relative;border:solid 1px black;width:500px;height:500px}}@media screen{.hideForPrint[_ngcontent-%COMP%]{position:absolute;width:100px;height:200px;top:100px;left:50px;border:dashed 5px #cccccc;z-index:98;background-color:#fff}}@media print{.hideForPrint[_ngcontent-%COMP%], .hideForPrint2[_ngcontent-%COMP%]{display:none}.noPrint[_ngcontent-%COMP%]{display:none}}.hangHoa[_ngcontent-%COMP%]:active{transform:scale(1.1);opacity:50%;background-color:tomato}.hoadon[_ngcontent-%COMP%]{width:200px}mat-icon[_ngcontent-%COMP%]{transform:scale(2);color:tomato}mat-icon[_ngcontent-%COMP%]:active{transform:scale(2.2);color:red}"],data:{animation:[y.Ym,y.Mq]}}),t}(),un=o(46936),cn=o(97012),sn=o(61260),hn=o(15265),ln=o(73624),dn=o(68042),gn=o(55352),pn=o(17935);function fn(n,t){if(1&n){var i=p.EpF();p.TgZ(0,"button",35),p.NdJ("click",function(){return p.CHM(i),p.oxw().reload()}),p.TgZ(1,"mat-icon"),p._uU(2,"undo"),p.qZA(),p.qZA()}2&n&&p.Q6J("@slideIn",void 0)}function mn(n,t){if(1&n){var i=p.EpF();p.TgZ(0,"app-search-api",36),p.NdJ("data",function(n){return p.CHM(i),p.oxw().find(n)}),p.qZA()}if(2&n){var e=p.oxw();p.Q6J("api",e.api)}}function Zn(n,t){1&n&&(p.TgZ(0,"th"),p._uU(1,"M\xe3 v\u1ea1ch"),p.qZA())}function Tn(n,t){1&n&&(p.TgZ(0,"th"),p._uU(1,"Khuy\u1ebfn m\xe3i"),p.qZA())}function bn(n,t){1&n&&(p.TgZ(0,"th"),p._uU(1,"Gi\xe1 v\u1ed1n"),p.qZA())}function vn(n,t){1&n&&(p.TgZ(0,"th"),p._uU(1,"Quy \u0111\u1ed5i \u0111\u01a1n v\u1ecb"),p.qZA())}function yn(n,t){1&n&&(p.TgZ(0,"th"),p._uU(1,"H\xecnh \u1ea3nh"),p.qZA())}function An(n,t){if(1&n){var i=p.EpF();p.TgZ(0,"td",42),p.NdJ("click",function(){p.CHM(i);var n=p.oxw().$implicit;return p.oxw(2).onEdit(n)}),p._uU(1),p.qZA()}if(2&n){var e=p.oxw().$implicit;p.xp6(1),p.Oqu(e.Barcode)}}function _n(n,t){if(1&n&&(p.TgZ(0,"td"),p._uU(1),p.qZA()),2&n){var i=p.oxw().$implicit;p.xp6(1),p.Oqu(i.KhuyenMai)}}function qn(n,t){if(1&n&&(p.TgZ(0,"td"),p._uU(1),p.qZA()),2&n){var i=p.oxw().$implicit;p.xp6(1),p.Oqu(i.GiaVon)}}function xn(n,t){if(1&n&&(p.TgZ(0,"td"),p._uU(1),p.qZA()),2&n){var i=p.oxw().$implicit;p.xp6(1),p.Oqu(i.QuyDoi)}}function Dn(n,t){if(1&n&&(p.TgZ(0,"td"),p._uU(1),p.qZA()),2&n){var i=p.oxw().$implicit;p.xp6(1),p.Oqu(i.HinhAnh)}}function kn(n,t){if(1&n){var i=p.EpF();p.TgZ(0,"mat-icon",45),p.NdJ("click",function(){p.CHM(i);var n=p.oxw().$implicit;return p.oxw(2).onDelete(n)}),p._uU(1,"delete"),p.qZA()}}function Cn(n,t){if(1&n){var i=p.EpF();p.TgZ(0,"tr"),p.YNc(1,An,2,1,"td",41),p.TgZ(2,"td",42),p.NdJ("click",function(){var n=p.CHM(i).$implicit;return p.oxw(2).onEdit(n)}),p._uU(3),p.qZA(),p.TgZ(4,"td",42),p.NdJ("click",function(){var n=p.CHM(i).$implicit;return p.oxw(2).onEdit(n)}),p._uU(5),p.qZA(),p.TgZ(6,"td",42),p.NdJ("click",function(){var n=p.CHM(i).$implicit;return p.oxw(2).onEdit(n)}),p._uU(7),p.qZA(),p.TgZ(8,"td",42),p.NdJ("click",function(){var n=p.CHM(i).$implicit;return p.oxw(2).onEdit(n)}),p._uU(9),p.qZA(),p.YNc(10,_n,2,1,"td",39),p.TgZ(11,"td"),p._uU(12),p.qZA(),p.TgZ(13,"td"),p.TgZ(14,"mat-slide-toggle",43),p.NdJ("change",function(){var n=p.CHM(i).$implicit;return p.oxw(2).updateStatus(n)}),p.qZA(),p.qZA(),p.YNc(15,qn,2,1,"td",39),p.YNc(16,xn,2,1,"td",39),p.YNc(17,Dn,2,1,"td",39),p.TgZ(18,"td"),p.YNc(19,kn,2,0,"mat-icon",44),p.qZA(),p.qZA()}if(2&n){var e=t.$implicit,o=p.oxw(2);p.Q6J("@slideIn",void 0),p.xp6(1),p.Q6J("ngIf",o.device),p.xp6(2),p.Oqu(e.NhomHang),p.xp6(2),p.Oqu(e.TenHangHoa),p.xp6(2),p.Oqu(e.TonKho),p.xp6(2),p.Oqu(e.GiaBan),p.xp6(1),p.Q6J("ngIf",o.device),p.xp6(2),p.Oqu(e.DVT),p.xp6(2),p.Q6J("checked",e.TrangThai),p.xp6(1),p.Q6J("ngIf",o.device),p.xp6(1),p.Q6J("ngIf",o.device),p.xp6(1),p.Q6J("ngIf",o.device),p.xp6(2),p.Q6J("ngIf",o.checkPer(4))}}function wn(n,t){if(1&n&&(p.TgZ(0,"table",37),p.TgZ(1,"thead",38),p.TgZ(2,"tr"),p.YNc(3,Zn,2,0,"th",39),p.TgZ(4,"th"),p._uU(5,"Nh\xf3m h\xe0ng"),p.qZA(),p.TgZ(6,"th"),p._uU(7,"T\xean"),p.qZA(),p.TgZ(8,"th"),p._uU(9,"T\u1ed3n kho"),p.qZA(),p.TgZ(10,"th"),p._uU(11,"Gi\xe1n B\xe1n"),p.qZA(),p.YNc(12,Tn,2,0,"th",39),p.TgZ(13,"th"),p._uU(14,"\u0110\u01a1n v\u1ecb t\xednh"),p.qZA(),p.TgZ(15,"th"),p._uU(16,"Cho b\xe1n"),p.qZA(),p.YNc(17,bn,2,0,"th",39),p.YNc(18,vn,2,0,"th",39),p.YNc(19,yn,2,0,"th",39),p._UZ(20,"th"),p.qZA(),p.qZA(),p.TgZ(21,"tbody"),p.YNc(22,Cn,20,13,"tr",40),p.qZA(),p.qZA()),2&n){var i=p.oxw();p.xp6(3),p.Q6J("ngIf",i.device),p.xp6(9),p.Q6J("ngIf",i.device),p.xp6(5),p.Q6J("ngIf",i.device),p.xp6(1),p.Q6J("ngIf",i.device),p.xp6(1),p.Q6J("ngIf",i.device),p.xp6(3),p.Q6J("ngForOf",i.filter.length>0?i.filter:i.items.slice(0,20))}}function Bn(n,t){if(1&n&&p._UZ(0,"app-import-database",46),2&n){var i=p.oxw();p.Q6J("api",i.api)("form",i.main)("global",!1)}}function Mn(n,t){if(1&n&&(p.TgZ(0,"mat-option",47),p._uU(1),p.qZA()),2&n){var i=t.$implicit;p.s9C("value",i.NoiDung),p.xp6(1),p.hij("",i.NoiDung," ")}}function Nn(n,t){if(1&n&&(p.TgZ(0,"mat-option",47),p._uU(1),p.qZA()),2&n){var i=t.$implicit;p.s9C("value",i.NoiDung),p.xp6(1),p.hij("",i.NoiDung," ")}}function Un(n,t){if(1&n){var i=p.EpF();p.TgZ(0,"button",48),p.NdJ("click",function(){return p.CHM(i),p.oxw().save()}),p.TgZ(1,"mat-icon"),p._uU(2,"save"),p.qZA(),p.qZA()}2&n&&p.Q6J("@slideIn",void 0)}var In=function(){var t=function(){function t(i,e){n(this,t),this.plus=i,this.fb=e,this.chart=[],this.nhomHang=this.plus.sortArr(this.plus.user.getValue().NhomHang,"ThuTu",1),this.main=this.fb.group({_id:[,[]],Barcode:[,[]],NhomHang:[,[A.kI.required]],TenHangHoa:[,[A.kI.required]],TonKho:[0,[]],GiaBan:[,[A.kI.required]],KhuyenMai:[,[]],DVT:[,[A.kI.required]],TrangThai:[!0,[A.kI.required]],GiaVon:[,[A.kI.required]],QuyDoi:[,[]],HinhAnh:[,[]]}),this.device=window.innerWidth>1200,this.title="H\xe0ng h\xf3a",this.dbName="ban-hang",this.api="hang-hoa",this.db=null,this.items=[],this.selectedItem=null,this.filter=[],this.itemsAuto=[]}return i(t,[{key:"ngOnInit",value:function(){var n=this;this.plus.setTiTle(this.title),this.plus.IDB_InitDB(this.dbName).subscribe(function(t){return function(n,t,i,e){return new(i||(i=Promise))(function(t,o){function a(n){try{u(e.next(n))}catch(t){o(t)}}function r(n){try{u(e.throw(n))}catch(t){o(t)}}function u(n){n.done?t(n.value):function(n){return n instanceof i?n:new i(function(t){t(n)})}(n.value).then(a,r)}u((e=e.apply(n,[])).next())})}(n,0,void 0,regeneratorRuntime.mark(function n(){var i=this;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:this.db=t,this.getIDB(),this.plus.updateUserLocal(t,this.api),this.plus.updateAPi.subscribe(function(n){n&&i.getIDB()});case 1:case"end":return n.stop()}},n,this)}))})}},{key:"getIDB",value:function(){var n=this;console.log("getIDB"),this.filter=[],this.plus.IDB_DB_GetAll(this.db,this.api).subscribe(function(t){n.items=t,n.plus.updateAPi.next(!1)})}},{key:"ngOnDestroy",value:function(){console.log("Destroy",this.api),this.plus.subs.unsubscribe()}},{key:"save",value:function(){var n=this;if(!this.main.invalid){var t=this.main.value;null==t._id?(delete t._id,this.plus.httpPost(this.api,t).subscribe(function(t){t.status&&n.plus.clickBtn("closeModal")})):this.plus.httpPut(this.api,t).subscribe(function(t){t.status&&n.plus.clickBtn("closeModal")})}}},{key:"onEdit",value:function(n){this.selectedItem=n;var t=this.plus.dateToHtmlObj(n,[""]);this.main.patchValue(t),this.plus.clickBtn("openModal")}},{key:"onDelete",value:function(n){!confirm("B\u1ea1n mu\u1ed1n x\xf3a?")||(this.plus.load(),this.plus.httpDisable(this.api,n).then(function(n){console.log(n)}))}},{key:"getAuto",value:function(n,t){var i=this;!this.db||t.length<2||(this.itemsAuto=[],this.plus.IDB_DB_Search(this.db,n,t,4).subscribe(function(n){i.itemsAuto=n}))}},{key:"getBarcode",value:function(n){this.main.patchValue({Barcode:n})}},{key:"chooseOpt",value:function(n,t,i){var e=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.main.controls[t].setValue(n[i]),e&&this.main.controls[t+"ID"].setValue(n._id)}},{key:"updateStatus",value:function(n){n.TrangThai=!n.TrangThai,delete n.__v,this.plus.httpPost(this.api+"/updateStatus",n).subscribe(function(n){})}},{key:"closeModal",value:function(){this.main.reset()}},{key:"search",value:function(n){this.filter=n}},{key:"find",value:function(n){this.items=n}},{key:"checkPer",value:function(n){return this.plus.checkPer(this.api,n)}},{key:"patchForm",value:function(){}},{key:"reload",value:function(){return this.plus.reload(this.dbName+"/"+this.api)}},{key:"reset",value:function(){this.plus.loaded(),this.filter=[],this.getIDB(),this.main.reset({TonKho:0,TrangThai:!0,KhuyenMai:0,QuyDoi:1,HinhAnh:"#ffffff"})}}]),t}();return t.\u0275fac=function(n){return new(n||t)(p.Y36(f.T),p.Y36(A.qu))},t.\u0275cmp=p.Xpm({type:t,selectors:[["app-hang-hoa"]],decls:81,vars:15,consts:[[1,"container"],["id","add-btn","color","accent","mat-raised-button","","data-toggle","modal","data-target","#modelId",3,"click"],["id","back-btn","mat-raised-button","","color","primary",3,"click",4,"ngIf"],[3,"api","data",4,"ngIf"],[3,"db","api","filter"],[1,"row"],["class","table table-hover",4,"ngIf"],[3,"api","form","global",4,"ngIf"],[3,"dataJson"],["id","openModal","type","button","data-toggle","modal","data-target","#modelId",1,"d-none"],["id","modelId","data-backdrop","static","tabindex","-1","role","dialog","aria-labelledby","modelTitleId","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-body"],[1,"container-fluid"],[3,"formGroup"],["hidden","","formControlName","_id"],["required","","matInput","","formControlName","TenHangHoa"],[1,"col-6"],["required","","formControlName","NhomHang"],[3,"value",4,"ngFor","ngForOf"],["required","","formControlName","DVT"],["type","number","autocomplete","off","matInput","","formControlName","GiaVon",2,"float","right"],["matSuffix",""],["type","number","autocomplete","off","matInput","","formControlName","TonKho",2,"float","right"],["required","","type","number","autocomplete","off","matInput","","formControlName","GiaBan",2,"float","right"],["type","number","autocomplete","off","matInput","","formControlName","KhuyenMai",2,"float","right"],["type","text","autocomplete","off","matInput","","formControlName","QuyDoi"],["type","color","matInput","","formControlName","HinhAnh"],["type","text","autocomplete","off","matInput","","formControlName","Barcode"],[3,"barcodeResult"],["matPrefix","","formControlName","TrangThai","color","primary",1,"mx-2"],[1,"modal-footer"],["id","closeModal","mat-raised-button","","color","primary","data-dismiss","modal",3,"click"],["mat-raised-button","","color","warn",3,"click",4,"ngIf"],["id","back-btn","mat-raised-button","","color","primary",3,"click"],[3,"api","data"],[1,"table","table-hover"],[1,"thead-inverse"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"click",4,"ngIf"],[3,"click"],["matPrefix","","color","primary",1,"mx-2",3,"checked","change"],["color","warn",3,"click",4,"ngIf"],["color","warn",3,"click"],[3,"api","form","global"],[3,"value"],["mat-raised-button","","color","warn",3,"click"]],template:function(n,t){1&n&&(p.TgZ(0,"div",0),p.TgZ(1,"button",1),p.NdJ("click",function(){return t.reset()}),p.TgZ(2,"mat-icon"),p._uU(3,"control_point"),p.qZA(),p.qZA(),p.YNc(4,fn,3,1,"button",2),p.YNc(5,mn,1,1,"app-search-api",3),p.TgZ(6,"app-search-table",4),p.NdJ("filter",function(n){return t.search(n)}),p.qZA(),p.TgZ(7,"div",5),p.YNc(8,wn,23,6,"table",6),p.qZA(),p.YNc(9,Bn,1,3,"app-import-database",7),p._UZ(10,"app-export-ecxel",8),p.qZA(),p._UZ(11,"button",9),p.TgZ(12,"div",10),p.TgZ(13,"div",11),p.TgZ(14,"div",12),p.TgZ(15,"div",13),p.TgZ(16,"div",14),p.TgZ(17,"form",15),p._UZ(18,"input",16),p.TgZ(19,"mat-form-field"),p.TgZ(20,"mat-label"),p._uU(21,"T\xean"),p.qZA(),p._UZ(22,"textarea",17),p.qZA(),p.TgZ(23,"div",5),p.TgZ(24,"div",18),p.TgZ(25,"mat-form-field"),p.TgZ(26,"mat-label"),p._uU(27,"Nh\xf3m h\xe0ng"),p.qZA(),p.TgZ(28,"mat-select",19),p.YNc(29,Mn,2,2,"mat-option",20),p.qZA(),p.qZA(),p.TgZ(30,"mat-form-field"),p.TgZ(31,"mat-label"),p._uU(32,"\u0110\u01a1n v\u1ecb t\xednh"),p.qZA(),p.TgZ(33,"mat-select",21),p.YNc(34,Nn,2,2,"mat-option",20),p.ALo(35,"catalog"),p.qZA(),p.qZA(),p.TgZ(36,"mat-form-field"),p.TgZ(37,"mat-label"),p._uU(38,"Gi\xe1 v\u1ed1n"),p.qZA(),p._UZ(39,"input",22),p.TgZ(40,"span",23),p._uU(41,".000"),p.qZA(),p.qZA(),p.TgZ(42,"mat-form-field"),p.TgZ(43,"mat-label"),p._uU(44,"T\u1ed3n kho"),p.qZA(),p._UZ(45,"input",24),p._UZ(46,"span",23),p.qZA(),p.TgZ(47,"mat-form-field"),p.TgZ(48,"mat-label"),p._uU(49,"Gi\xe1n B\xe1n"),p.qZA(),p._UZ(50,"input",25),p._UZ(51,"span",23),p.qZA(),p.qZA(),p.TgZ(52,"div",18),p.TgZ(53,"mat-form-field"),p.TgZ(54,"mat-label"),p._uU(55,"Khuy\u1ebfn m\xe3i"),p.qZA(),p._UZ(56,"input",26),p.TgZ(57,"span",23),p._uU(58,"%"),p.qZA(),p.qZA(),p.TgZ(59,"mat-form-field"),p.TgZ(60,"mat-label"),p._uU(61,"Quy \u0111\u1ed5i \u0111\u01a1n v\u1ecb"),p.qZA(),p._UZ(62,"input",27),p._UZ(63,"span",23),p.qZA(),p.TgZ(64,"mat-form-field"),p.TgZ(65,"mat-label"),p._uU(66,"M\xe0u \u0111\u1ea1i di\u1ec7n"),p.qZA(),p._UZ(67,"input",28),p.qZA(),p.TgZ(68,"mat-form-field"),p.TgZ(69,"mat-label"),p._uU(70,"M\xe3 v\u1ea1ch"),p.qZA(),p._UZ(71,"input",29),p.qZA(),p.TgZ(72,"app-barcode-scanner",30),p.NdJ("barcodeResult",function(n){return t.getBarcode(n)}),p.qZA(),p._UZ(73,"hr"),p.TgZ(74,"mat-slide-toggle",31),p._uU(75),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.TgZ(76,"div",32),p.TgZ(77,"button",33),p.NdJ("click",function(){return t.closeModal()}),p.TgZ(78,"mat-icon"),p._uU(79,"close"),p.qZA(),p.qZA(),p.YNc(80,Un,3,1,"button",34),p.qZA(),p.qZA(),p.qZA(),p.qZA()),2&n&&(p.xp6(4),p.Q6J("ngIf",t.filter.length>0),p.xp6(1),p.Q6J("ngIf",t.checkPer(10)),p.xp6(1),p.Q6J("db",t.db)("api",t.api),p.xp6(2),p.Q6J("ngIf",t.items.length+t.filter.length>0),p.xp6(1),p.Q6J("ngIf",t.checkPer(4)),p.xp6(1),p.Q6J("dataJson",t.items),p.xp6(7),p.Q6J("formGroup",t.main),p.xp6(12),p.Q6J("ngForOf",t.nhomHang),p.xp6(5),p.Q6J("ngForOf",p.lcZ(35,13,"DVT")),p.xp6(41),p.hij(" ",t.main.controls.TrangThai.value?"C\xf2n h\xe0ng":"H\u1ebft h\xe0ng",""),p.xp6(2),p.Q6J("@slideIn",void 0),p.xp6(3),p.Q6J("ngIf",t.checkPer(2)&&t.main.valid))},directives:[m.lW,_.Hw,l.O5,un.D,cn.t,A._Y,A.JL,A.sg,A.Fj,A.JJ,A.u,U.KE,U.hX,I.Nt,A.Q7,sn.gD,l.sg,A.wV,U.R9,hn.O,ln.Rr,U.qo,dn.W,gn.y,pn.ey],pipes:[b.pW],styles:[""],data:{animation:[y.Ym,y.Mq]}}),t}();function Hn(n,t){if(1&n){var i=p.EpF();p.TgZ(0,"div",2),p.TgZ(1,"button",3),p.NdJ("click",function(){return p.CHM(i),p.oxw().resetNhanDon()}),p._uU(2,"nhan-don"),p.qZA(),p.TgZ(3,"button",3),p.NdJ("click",function(){return p.CHM(i),p.oxw().resetHangHoa()}),p._uU(4,"hang-hoa"),p.qZA(),p.qZA()}}var On=function(){var t=function(){function t(i){n(this,t),this.plus=i,this.db=null,this.dbName="ban-hang",this.isAdmin=this.plus.isAdmin()}return i(t,[{key:"ngOnInit",value:function(){var n=this;this.plus.IDB_InitDB(this.dbName).subscribe(function(t){n.db=t})}},{key:"resetNhanDon",value:function(){var n=this,t="nhan-don";!confirm("Reset DB"+t)||this.plus.httpDelete(t,"del").subscribe(function(i){console.log("Clear DB"),n.plus.FBS_PostByUser(t,0).then(function(i){console.log("Clear FBS"),console.log(i),n.plus.IDB_DB_ClearCollection(n.db,t).subscribe(function(n){console.log("Clear IDB")})})})}},{key:"resetHangHoa",value:function(){var n=this,t="hang-hoa";!confirm("Reset DB"+t)||this.plus.httpDelete(t,"del").subscribe(function(i){console.log("Clear DB"),n.plus.FBS_PostByUser(t,0).then(function(i){console.log("Clear FBS"),console.log(i),n.plus.IDB_DB_ClearCollection(n.db,t).subscribe(function(n){console.log("Clear IDB")})})})}},{key:"checkPer",value:function(n,t){return this.plus.checkPer(n,t)}},{key:"onDetect",value:function(n){console.log(n)}}]),t}();return t.\u0275fac=function(n){return new(n||t)(p.Y36(f.T))},t.\u0275cmp=p.Xpm({type:t,selectors:[["app-ban-hang"]],decls:2,vars:1,consts:[[1,"container"],["class","row",4,"ngIf"],[1,"row"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(n,t){1&n&&(p.TgZ(0,"div",0),p.YNc(1,Hn,5,0,"div",1),p.qZA()),2&n&&(p.xp6(1),p.Q6J("ngIf",t.checkPer("hang-hoa",7)))},directives:[l.O5],styles:[""]}),t}(),Jn=o(83550),Pn=o(50296);function En(n,t){if(1&n&&(p.TgZ(0,"b"),p._uU(1),p.qZA()),2&n){var i=p.oxw().$implicit;p.xp6(1),p.lnq(" ",i.TenHangHoa," [",i.GiaBan,"k/",i.DVT,"]")}}function Ln(n,t){if(1&n){var i=p.EpF();p.TgZ(0,"mat-option",34),p.NdJ("click",function(){var n=p.CHM(i).$implicit;return p.oxw().addNewItem(n)})("keyup.enter",function(){var n=p.CHM(i).$implicit;return p.oxw().addNewItem(n)})("onSelectionChange",function(){var n=p.CHM(i).$implicit;return p.oxw().addNewItem(n)}),p.YNc(1,En,2,3,"b",8),p.qZA()}if(2&n){var e=t.$implicit;p.xp6(1),p.Q6J("ngIf",e.TrangThai)}}function Gn(n,t){1&n&&(p.TgZ(0,"mat-option"),p._uU(1," Kh\xf4ng c\xf2n k\u1ebft qu\u1ea3 ph\xf9 h\u1ee3p! "),p.qZA())}function Fn(n,t){if(1&n&&(p.TgZ(0,"b"),p._uU(1),p.ALo(2,"commas"),p.qZA()),2&n){var i=p.oxw();p.xp6(1),p.hij("Ti\u1ec1n th\u1eeba: ",p.lcZ(2,1,1e3*+i.khachDua-i.ThanhTien),"")}}function Sn(n,t){if(1&n){var i=p.EpF();p.TgZ(0,"tr"),p.TgZ(1,"td",35),p._uU(2),p.qZA(),p.TgZ(3,"td",36),p._uU(4),p._UZ(5,"br"),p.TgZ(6,"b",37),p.NdJ("blur",function(n){var t=p.CHM(i).index;return p.oxw().updateGiaBan(t,"GiaBan",n)})("keydown.enter",function(n){var t=p.CHM(i).index;return p.oxw().updateGiaBan(t,"GiaBan",n)})("keydown.enter",function(n){var t=p.CHM(i).index;return p.oxw().updateList(t,"GiaBan",n)})("blur",function(n){var t=p.CHM(i).index;return p.oxw().updateList(t,"GiaBan",n)}),p._uU(7),p.ALo(8,"number"),p.qZA(),p._uU(9),p.qZA(),p.TgZ(10,"td",17),p.TgZ(11,"mat-icon",38),p.NdJ("click",function(){var n=p.CHM(i).index;return p.oxw().removeItem(n)}),p._uU(12,"arrow_left"),p.qZA(),p.TgZ(13,"b",39),p.NdJ("keydown.enter",function(n){var t=p.CHM(i).index;return p.oxw().updateList(t,"TongCong",n)})("blur",function(n){var t=p.CHM(i).index;return p.oxw().updateList(t,"TongCong",n)}),p._uU(14),p.ALo(15,"number"),p.qZA(),p.TgZ(16,"mat-icon",40),p.NdJ("click",function(){var n=p.CHM(i),t=n.$implicit,e=n.index;return p.oxw().addItem(t,e)}),p._uU(17,"arrow_right"),p.qZA(),p.qZA(),p.TgZ(18,"td",41),p.TgZ(19,"b"),p._uU(20),p.ALo(21,"commas"),p.qZA(),p.TgZ(22,"span",42),p.NdJ("click",function(){var n=p.CHM(i).index;return p.oxw().delItem(n)}),p.TgZ(23,"mat-icon",43),p._uU(24,"delete"),p.qZA(),p.qZA(),p.qZA(),p.qZA()}if(2&n){var e=t.$implicit,o=t.index;p.xp6(2),p.Oqu(o+1),p.xp6(2),p.Oqu(e.TenHangHoa),p.xp6(3),p.Oqu(p.lcZ(8,6,e.GiaBan)),p.xp6(2),p.hij("k/",e.DVT," "),p.xp6(5),p.hij(" ",p.lcZ(15,8,e.TongCong)," "),p.xp6(6),p.Oqu(p.lcZ(21,10,e.TongCong*e.GiaBan*1e3))}}function Qn(n,t){if(1&n&&(p.TgZ(0,"tr"),p.TgZ(1,"td"),p._uU(2),p.qZA(),p.TgZ(3,"td"),p._uU(4),p._UZ(5,"br"),p._uU(6),p.ALo(7,"commas"),p.qZA(),p.TgZ(8,"td",45),p._uU(9),p.qZA(),p.TgZ(10,"td",47),p._uU(11),p.ALo(12,"commas"),p.qZA(),p.qZA()),2&n){var i=t.$implicit,e=t.index;p.xp6(2),p.hij("",e+1," "),p.xp6(2),p.hij("",i.TenHangHoa," "),p.xp6(2),p.hij(" ",p.lcZ(7,5,1e3*i.GiaBan)," "),p.xp6(3),p.Oqu(i.TongCong),p.xp6(2),p.Oqu(p.lcZ(12,7,i.TongCong*i.GiaBan*1e3))}}function Yn(n,t){if(1&n&&(p.TgZ(0,"tbody"),p.YNc(1,Qn,13,9,"tr",19),p.TgZ(2,"tr"),p.TgZ(3,"td",44),p.TgZ(4,"h5"),p._uU(5,"T\u1ed5ng c\u1ed9ng:"),p.qZA(),p.qZA(),p.TgZ(6,"td"),p.TgZ(7,"h5"),p._uU(8),p.qZA(),p.qZA(),p.TgZ(9,"td",45),p.TgZ(10,"h5"),p._uU(11),p.ALo(12,"commas"),p.qZA(),p.TgZ(13,"h6"),p.TgZ(14,"i"),p._uU(15),p.ALo(16,"titlecase"),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.TgZ(17,"td",46),p.TgZ(18,"h6"),p._uU(19,"Xin c\u1ea3m \u01a1n qu\xfd kh\xe1ch"),p.qZA(),p.TgZ(20,"h6"),p._uU(21,"S\u1ea3n ph\u1ea9m c\u1ee7a 4la.vn"),p.qZA(),p.qZA(),p.qZA()),2&n){var i=p.oxw();p.xp6(1),p.Q6J("ngForOf",i.DonMua),p.xp6(7),p.hij("",i.total," m\xf3n"),p.xp6(3),p.hij(" ",p.lcZ(12,4,i.ThanhTien),""),p.xp6(4),p.Oqu(p.lcZ(16,6,i.bangchu))}}var Vn=function(n){return{loading:n}},jn=function(){var t=function(){function t(i,e,o){n(this,t),this.plus=i,this.route=e,this.fb=o,this.subs=(new Jn.y).subscribe(),this.db=null,this.title="B\xe1n h\xe0ng t\u1ea1p h\xf3a",this.dbName="ban-hang",this.api="tap-hoa",this.tabs=[],this.items=[],this.DonMua=[],this.total=0,this.ThanhTien=0,this.donHang=[],this.bangchu="",this.filter=[],this.audio=new Audio,this.nhapThuCong=!1,this.xemHoaDon=!0,this.user=this.plus.user.getValue(),this.printTime=Date.now(),this.NhomHang=this.plus.user.getValue().NhomHang,this.TabBan=this.plus.sortArr(this.plus.user.getValue().NhomBan,"ThuTu",1),this.ChiaBan=[],this.ban=0,this.width=window.innerWidth,this.count=0,this.now=Date.now(),this.xemBan=!0,this.xemMon=!1,this.donHangFB=this.fb.group({ThanhTien:[,[A.kI.required]],LoiNhuan:[,[A.kI.required]],SoKH:[,[A.kI.required]],GioVao:[,[A.kI.required]],DaThanhToan:[,[A.kI.required]],DonMua:this.fb.array([this.fb.group({idHangHoa:[,[A.kI.required]],DVT:[,[A.kI.required]],GiaBan:[,[A.kI.required]],GiaVon:[,[A.kI.required]],KhuyenMai:[,[A.kI.required]],TenHangHoa:[,[A.kI.required]],TongCong:[,[A.kI.required]]})])}),this.searchForm=this.fb.group({input:[,[A.kI.minLength(3),A.kI.maxLength(50)]]})}return i(t,[{key:"ngOnDestroy",value:function(){console.log("Destroy nhan-don"),this.plus.subs.unsubscribe()}},{key:"test",value:function(n){console.log(+n.replace(/\D/g,"")),this.khachDua=+n}},{key:"ngOnInit",value:function(){var n=this;this.plus.setTiTle(this.title),this.getBillLocal(),this.plus.IDB_InitDB(this.dbName).subscribe(function(t){n.db=t,document.getElementById("search-api").focus(),n.plus.updateUserLocal(t,"hang-hoa")}),this.search(),this.audio.src="assets/audio/beep.mp3",this.audio.load()}},{key:"getBillLocal",value:function(){var n=localStorage.getItem("tapHoaBill");this.DonMua=n?JSON.parse(n):[],this.getTongCong()}},{key:"search",value:function(){var n=this;this.subs.add(this.searchForm.valueChanges.subscribe(function(t){var i=n.plus.removeAccents(t.input);i.trim().length<2||n.plus.IDB_DB_GetByBarCode(n.db,"hang-hoa",i).subscribe(function(t){t?(n.searchForm.reset(),t.TrangThai?n.addNewItem(t):n.plus.alertMatSnackBar("T\u1ea1m h\u1ebft h\xe0ng")):(n.filter=[],n.plus.IDB_DB_Search(n.db,"hang-hoa",i,5).subscribe(function(t){n.filter=t}))})}))}},{key:"thanhToan",value:function(){var n=this,t=confirm("In h\xf3a \u0111\u01a1n?"),i=Object.assign({DonMua:this.DonMua.map(function(n){return{idHangHoa:n._id,TenHangHoa:n.TenHangHoa,GiaBan:n.GiaBan,GiaVon:n.GiaVon,KhuyenMai:n.KhuyenMai,DVT:n.DVT,TongCong:n.TongCong}}),LoiNhuan:this.DonMua.map(function(n){return n.GiaBan-n.GiaVon-n.GiaBan*n.KhuyenMai/100}).reduce(function(n,t){return n+t}),ThanhTien:this.ThanhTien,GioVao:Date.now(),SoKH:this.total,DaThanhToan:!0});if(this.donHangFB.patchValue(i),this.donHangFB.invalid){var e=this.plus.getErrValidateForm(this.donHangFB);console.log(e,this.donHangFB.status)}else this.plus.httpPost("tap-hoa",i).subscribe(function(t){console.log(t),n.DonMua=[],n.reload()});localStorage.removeItem("tapHoaBill"),t?(this.PrintDiv("HoaDon"),console.log(0,i)):console.log(1,i)}},{key:"addNewItem",value:function(n){this.filter=[],this.playAudio(),this.xemHoaDon=!0,window.navigator.vibrate(100);var t=this.DonMua.find(function(t){return t._id==n._id});if(!t)return n.TongCong=1,this.DonMua.unshift(n),this.getTongCong();var i=this.DonMua.findIndex(function(n){return n._id==t._id});this.DonMua[i].TongCong+=1,this.getTongCong(),this.filter=[],this.searchForm.controls.input.setValue("")}},{key:"removeItem",value:function(n){this.playAudio(),this.DonMua[n].TongCong>0&&(this.DonMua[n].TongCong-=1),this.getTongCong()}},{key:"addItem",value:function(n,t){this.playAudio(),this.DonMua[t].TongCong+=1,this.getTongCong()}},{key:"delItem",value:function(n){this.DonMua.splice(n,1),this.getTongCong()}},{key:"getTongCong",value:function(){this.total=this.plus.sumByKey(this.DonMua,"TongCong"),this.getThanhTien()}},{key:"getThanhTien",value:function(){var n=0;return this.DonMua.forEach(function(t){n+=t.GiaBan*t.TongCong*1e3}),this.bangchu=this.plus.numToVi(n),localStorage.setItem("tapHoaBill",JSON.stringify(this.DonMua)),this.ThanhTien=n}},{key:"PrintDiv",value:function(n){this.plus.load();var t=window.document.getElementById(n),i=window.open("","PRINT");i.document.write(document.documentElement.innerHTML),setTimeout(function(){i.document.body.innerHTML=t.outerHTML,i.document.close(),i.focus(),i.print(),i.close()},1e3),this.plus.loaded()}},{key:"getBarcode",value:function(n){this.searchForm.controls.input.setValue(n)}},{key:"find",value:function(n){this.filter=n}},{key:"getByBarcode",value:function(n){}},{key:"reload",value:function(){this.plus.reload("ban-hang/tap-hoa")}},{key:"updateList",value:function(n,t,i){var e=+i.target.textContent;if(console.log(e),"Enter"===i.key&&i.preventDefault(),"number"!=typeof e)return this.plus.alertError("Sai \u0111\u1ecbnh d\u1ea1ng"),this.DonMua[n][t]=0;this.DonMua[n][t]=+e,this.getTongCong()}},{key:"updateGiaBan",value:function(n,t,i){var e=this;if(this.DonMua[n][t]!=+i.target.textContent){var o=this.DonMua[n].TongCong,a=this.DonMua[n];delete a.__v,delete a.TongCong,a.GiaBan=+i.target.textContent,this.plus.httpPut("hang-hoa",a).subscribe(function(t){document.getElementById("search-api").focus(),console.log(e.DonMua[n])}),this.DonMua[n][t]=+i.target.textContent,this.DonMua[n].TongCong=+o,this.getTongCong()}}},{key:"updateKhachDua",value:function(n){var t=+n.target.textContent;console.log(t,typeof t),"Enter"===n.key&&n.preventDefault(),("number"!=typeof t||Number.isNaN(t))&&this.plus.alertError("B\u1ea1n ph\u1ea3i nh\u1eadp s\u1ed1 ti\u1ec1n"),this.khachDua=+t}},{key:"playAudio",value:function(){this.audio.play()}}]),t}();return t.\u0275fac=function(n){return new(n||t)(p.Y36(f.T),p.Y36(B.gz),p.Y36(A.qu))},t.\u0275cmp=p.Xpm({type:t,selectors:[["app-tap-hoa"]],decls:71,vars:21,consts:[[1,"container-fluid"],[1,"row",2,"padding-top","10px"],[1,"col-lg-6"],[1,"form-group",3,"formGroup"],["type","text","id","search-api","autocomplete","off","formControlName","input","placeholder","T\xecm ki\u1ebfm (F2)",1,"form-control",3,"readonly","matAutocomplete","ngClass"],["autoActiveFirstOption",""],["auto","matAutocomplete"],[3,"click","keyup.enter","onSelectionChange",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"barcodeResult"],["mat-raised-button","","color","warn",1,"float-rigth",3,"click"],["contentEditable","true",1,"font-blue",2,"border","blue",3,"keydown.enter","blur"],[2,"padding","10x"],[1,"row"],[1,"table","table-hover"],["width","10%"],["width","35%"],["width","30%"],["width","25%",2,"text-align","center"],[4,"ngFor","ngForOf"],["id","modelId","tabindex","-1","role","dialog","aria-labelledby","modelTitleId","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body","hoadon"],["id","HoaDon",1,"div"],[1,"text-left"],[1,"thead-inverse"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],["type","button",1,"btn","btn-primary"],[3,"click","keyup.enter","onSelectionChange"],["width","10%",2,"padding-left","5px"],["width","35%",2,"font-size","16px"],["contenteditable","true",1,"px-2","font-blue",3,"blur","keydown.enter"],["matPrefix","",1,"ar",3,"click"],["contenteditable","true",1,"font-blue",3,"keydown.enter","blur"],["matSuffix","",1,"ar",3,"click"],["width","25%",1,"text-right"],[2,"margin-left","20px",3,"click"],["color","warn"],["colspan","2",1,"text-center"],[1,"text-center"],["colspan","4",1,"text-center"],[1,"text-rigth"]],template:function(n,t){if(1&n&&(p.TgZ(0,"div",0),p.TgZ(1,"div",1),p.TgZ(2,"div",2),p.TgZ(3,"div",3),p._UZ(4,"input",4),p.TgZ(5,"mat-autocomplete",5,6),p.YNc(7,Ln,2,1,"mat-option",7),p.YNc(8,Gn,2,0,"mat-option",8),p.qZA(),p.qZA(),p.qZA(),p.TgZ(9,"div",2),p.TgZ(10,"app-barcode-scanner",9),p.NdJ("barcodeResult",function(n){return t.getBarcode(n)}),p.qZA(),p.TgZ(11,"button",10),p.NdJ("click",function(){return t.thanhToan()}),p._uU(12),p.ALo(13,"commas"),p.qZA(),p.TgZ(14,"b"),p._uU(15,"Kh\xe1ch \u0111\u01b0a: "),p.TgZ(16,"span",11),p.NdJ("keydown.enter",function(n){return t.updateKhachDua(n)})("blur",function(n){return t.updateKhachDua(n)}),p.qZA(),p._uU(17,".000\u0111"),p.qZA(),p.TgZ(18,"mat-icon",12),p._uU(19,"double_arrow"),p.qZA(),p.YNc(20,Fn,3,3,"b",8),p.qZA(),p.qZA(),p.TgZ(21,"div",13),p.TgZ(22,"table",14),p.TgZ(23,"thead"),p.TgZ(24,"tr"),p.TgZ(25,"th",15),p._uU(26,"TT "),p.qZA(),p.TgZ(27,"th",16),p._uU(28,"H\u1ea1ng m\u1ee5c"),p.qZA(),p.TgZ(29,"th",17),p._uU(30,"S\u1ed1 l\u01b0\u1ee3ng"),p.qZA(),p.TgZ(31,"th",18),p._uU(32,"Th\xe0nh ti\u1ec1n"),p.qZA(),p.qZA(),p.qZA(),p.TgZ(33,"tbody"),p.YNc(34,Sn,25,12,"tr",19),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.TgZ(35,"div",20),p.TgZ(36,"div",21),p.TgZ(37,"div",22),p.TgZ(38,"div",23),p.TgZ(39,"h5",24),p._uU(40,"Modal title"),p.qZA(),p.TgZ(41,"button",25),p.TgZ(42,"span",26),p._uU(43,"\xd7"),p.qZA(),p.qZA(),p.qZA(),p.TgZ(44,"div",27),p.TgZ(45,"div",28),p.TgZ(46,"div",29),p.TgZ(47,"h6"),p._uU(48),p.qZA(),p.TgZ(49,"h6"),p._uU(50),p.qZA(),p.TgZ(51,"h6"),p._uU(52),p.ALo(53,"date"),p.qZA(),p.qZA(),p.TgZ(54,"table",14),p.TgZ(55,"thead",30),p.TgZ(56,"tr"),p.TgZ(57,"th"),p._uU(58,"TT"),p.qZA(),p.TgZ(59,"th"),p._uU(60,"H\u1ea1ng m\u1ee5c"),p.qZA(),p.TgZ(61,"th"),p._uU(62,"S\u1ed1 l\u01b0\u1ee3ng"),p.qZA(),p.TgZ(63,"th"),p._uU(64,"Th\xe0nh ti\u1ec1n"),p.qZA(),p.qZA(),p.qZA(),p.YNc(65,Yn,22,8,"tbody",8),p.qZA(),p.qZA(),p.qZA(),p.TgZ(66,"div",31),p.TgZ(67,"button",32),p._uU(68,"Close"),p.qZA(),p.TgZ(69,"button",33),p._uU(70,"Save"),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA()),2&n){var i=p.MAs(6);p.xp6(3),p.Q6J("formGroup",t.searchForm),p.xp6(1),p.Q6J("readonly",!1)("matAutocomplete",i)("ngClass",p.VKq(19,Vn,t.filter.length>1&&t.filter.length<5)),p.xp6(3),p.Q6J("ngForOf",t.filter),p.xp6(1),p.Q6J("ngIf",0==t.filter.length&&t.searchForm.value.input),p.xp6(4),p.AsE(" ",t.DonMua.length," | ",p.lcZ(13,14,t.ThanhTien)," "),p.xp6(8),p.Q6J("ngIf",t.khachDua>0&&1e3*t.khachDua>t.ThanhTien),p.xp6(14),p.Q6J("ngForOf",t.DonMua),p.xp6(14),p.Oqu(t.user.title),p.xp6(2),p.Oqu(t.user.phoneNumber),p.xp6(2),p.hij("Gi\u1edd in:",p.xi3(53,16,t.printTime,"hh:mm dd/MM/yyyy"),""),p.xp6(13),p.Q6J("ngIf",t.DonMua)}},directives:[A.JL,A.sg,A.Fj,Pn.ZL,A.JJ,A.u,l.mk,N.oO,Pn.XC,l.sg,l.O5,hn.O,m.lW,_.Hw,pn.ey,U.qo,U.R9],pipes:[b.W,l.uU,l.JJ,l.rS],styles:[".hangHoa[_ngcontent-%COMP%]{height:8rem;width:8rem;border-radius:1rem;margin:.2rem;border-bottom-width:1rem;border-color:#90ee90;color:#00f;float:left;display:flex;align-items:center;justify-content:center}.hangHoa[_ngcontent-%COMP%]:active{transform:scale(1.1);opacity:50%}.hoadon[_ngcontent-%COMP%]{width:200px}.font-mat[_ngcontent-%COMP%]{color:#fff;font-size:medium}.font-blue[_ngcontent-%COMP%]{font-size:16px;padding-left:10px;padding-right:10px}.arrow-bt[_ngcontent-%COMP%]{font-size:larger;color:#00f;font-weight:700;padding:.5rem}.arrow-bt[_ngcontent-%COMP%]:hover{border:brown;border-radius:.5rem;background-color:#0ff}.example-form-field[_ngcontent-%COMP%]{max-width:8rem}.row[_ngcontent-%COMP%]{margin-left:5px!important;margin-right:5px!important}td[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{padding:0;vertical-align:middle}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding-bottom:0!important}.ar[_ngcontent-%COMP%]{transform:scale(1.5);color:tomato}.ar[_ngcontent-%COMP%]:active{transform:scale(2.2);color:#00f}"],data:{animation:[y.Ym]}}),t}(),Kn=function(){var t=function(){function t(i){n(this,t),this.plus=i}return i(t,[{key:"canActivate",value:function(){return this.plus.checkPer("hang-hoa")}}]),t}();return t.\u0275fac=function(n){return new(n||t)(p.LFG(f.T))},t.\u0275prov=p.Yz7({token:t,factory:t.\u0275fac}),t}(),$n=function(){var t=function(){function t(i){n(this,t),this.plus=i}return i(t,[{key:"canActivate",value:function(){return this.plus.checkPer("nhan-don")}}]),t}();return t.\u0275fac=function(n){return new(n||t)(p.LFG(f.T))},t.\u0275prov=p.Yz7({token:t,factory:t.\u0275fac}),t}(),Rn=function(){var t=function(){function t(i){n(this,t),this.plus=i}return i(t,[{key:"canActivate",value:function(){return this.plus.checkPer("pha-che")}}]),t}();return t.\u0275fac=function(n){return new(n||t)(p.LFG(f.T))},t.\u0275prov=p.Yz7({token:t,factory:t.\u0275fac}),t}(),zn=function(){var t=function(){function t(i){n(this,t),this.plus=i}return i(t,[{key:"canActivate",value:function(){return this.plus.checkPer("tap-hoa")}}]),t}();return t.\u0275fac=function(n){return new(n||t)(p.LFG(f.T))},t.\u0275prov=p.Yz7({token:t,factory:t.\u0275fac}),t}(),Wn=function(){var t=function(){function t(i){n(this,t),this.plus=i}return i(t,[{key:"canActivate",value:function(){return this.plus.checkPer("bao-cao")}}]),t}();return t.\u0275fac=function(n){return new(n||t)(p.LFG(f.T))},t.\u0275prov=p.Yz7({token:t,factory:t.\u0275fac}),t}(),Xn=[{path:"",component:On},{path:"hang-hoa",component:In,canActivate:[Kn]},{path:"nhan-don/:ten-ban",component:rn,canActivate:[$n]},{path:"nhan-don",component:rn,canActivate:[$n]},{path:"pha-che",component:C,canActivate:[Rn]},{path:"tap-hoa",component:jn,canActivate:[zn]},{path:"bao-cao",component:v,canActivate:[Wn]}],nt=function(){var t=function t(){n(this,t)};return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=p.oAB({type:t}),t.\u0275inj=p.cJS({providers:[Kn,$n,Rn,zn,Wn],imports:[[B.Bz.forChild(Xn)],B.Bz]}),t}(),tt=o(85913),it=o(24561),et=o(60929),ot=function(){var t=function t(){n(this,t)};return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=p.oAB({type:t}),t.\u0275inj=p.cJS({providers:[et.F],imports:[[l.ez,u.ShareModule,s.q,nt,h.D,tt.m,et.F,it.k,c.k,r.N]]}),t}()},64762:function(n,t,i){function e(n,t,i,e){return new(i||(i=Promise))(function(o,a){function r(n){try{c(e.next(n))}catch(t){a(t)}}function u(n){try{c(e.throw(n))}catch(t){a(t)}}function c(n){n.done?o(n.value):function(n){return n instanceof i?n:new i(function(t){t(n)})}(n.value).then(r,u)}c((e=e.apply(n,t||[])).next())})}i.d(t,{mG:function(){return e}})}}])}();