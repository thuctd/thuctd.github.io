"use strict";(self.webpackChunkdlxl=self.webpackChunkdlxl||[]).push([[305],{80305:(an,J,p)=>{p.r(J),p.d(J,{DlxlModule:()=>on});var Q=p(5923),O=p(48387),L=p(85913),$=p(34291),g=p(69808),x=p(15228),l=p(93075),P=p(15439),d=p.n(P),t=p(5e3),b=p(45230),Z=p(69798),N=p(99826),f=p(67322),A=p(77531),C=p(86856),G=p(74107),R=p(90508),I=p(47423),k=p(25245),T=p(30627);function z(i,s){if(1&i&&(t.TgZ(0,"mat-option",35),t._uU(1),t.qZA()),2&i){const e=s.$implicit;t.Q6J("value",e.GiaTri),t.xp6(1),t.hij("",e.NoiDung," ")}}let X=(()=>{class i{constructor(e,n,o,a){this.plus=e,this.fb=n,this.rtSv=o,this.route=a,this.main=this.fb.group({_id:[,[]],KyThanhToan:[,[l.kI.required]],Email:[,],MaKhachHang:[,[l.kI.required]],KhachHang:[,[l.kI.required]],DiaChi:[,[l.kI.required]],MaGCS:[,],ChuTaiKhoan:[,],SoTaiKhoan:[,],NganHang:[,],Nam:[,[l.kI.required,l.kI.pattern("^[0-9]*$")]],Thang:[,[l.kI.required,l.kI.pattern("^[0-9]*$")]],SanLuong:[,[l.kI.required,l.kI.pattern("^[0-9]*$")]],DonGia:[,[l.kI.required,l.kI.pattern("^[0-9]*$")]],TruocThue:[,[l.kI.required,l.kI.pattern("^[0-9]*$")]],Thue:[,[l.kI.required,l.kI.pattern("^[0-9]*$")]],TongTien:[,[l.kI.required,l.kI.pattern("^[0-9]*$")]],KyHieuHoaDon:[,[]],SoHoaDon:[,[]],NgayMuaHang:[,[]],NgayHoaDon:[,[]],ThueSuat:[,[l.kI.pattern("^[0-9]*$")]],TrangThaiThanhToan:[,[l.kI.required,l.kI.pattern("^[0-9]*$")]],TrangThaiHoSo:[,[l.kI.required]],DaGuiMail:[,[l.kI.pattern("^[0-9]*$")]],TenBangKe:[,[]]}),this.title="L\u1eadp b\u1ea3ng k\xea",this.global=!0,this.dbName="dien-luc",this.api="dmt-input",this.db=null,this.userId=this.plus.userId,this.usr=this.plus.usr,this.items=[],this.selectedItem=null,this.filter=[],this.chart=[],this.errors=[]}ngOnInit(){this.plus.setTiTle(this.title),this.plus.IDB_InitDB(this.dbName).subscribe(e=>this.db=e),this.getIDB()}getIDB(){const e=this.route.snapshot.paramMap.get("id");this.plus.httpGet(this.api+"/"+e).subscribe(n=>{const o=this.plus.Crypt_DecryptRest(n);this.main.patchValue(o),(null==o||null==o)&&this.plus.IDB_DB_GetAllByIndexKey(this.db,"dmt-input","MaKhachHang","=",e).subscribe(a=>{this.main.patchValue(a)})})}ngOnDestroy(){console.log("Destroy",this.api),this.plus.subs.unsubscribe(),this.rtSv.leaveRoom(this.api)}save(){if(this.main.invalid)return;const e=this.main.value;null==e._id?(delete e._id,this.plus.httpPost(this.api,e,this.global).subscribe(n=>{n.status&&(this.plus.clickBtn("closeModal"),this.plus.updateAPi.next(!0))})):this.plus.httpPut(this.api,e,this.global).subscribe(n=>{n.status&&(this.plus.updateAPi.next(!0),this.plus.clickBtn("closeModal"))})}onEdit(e){this.selectedItem=e;const n=this.plus.dateToHtmlObj(e,["NgayHoaDon"]);this.main.patchValue(n),this.plus.clickBtn("openModal")}onDelete(e){!confirm("B\u1ea1n mu\u1ed1n x\xf3a?")||(this.plus.load(),this.plus.httpDisable(this.api,e,this.global).then(o=>{this.plus.updateAPi.next(!0)}))}chooseOpt(e,n,o,a=!1){this.main.controls[n].setValue(e[o]),a&&this.main.controls[n+"ID"].setValue(e._id)}convertInputDay(e,n){const o=d()(e,"DD-MM-YYYY").toDate();this.main.controls[n].setValue(o)}closeModal(){this.plus.goBack()}search(e){this.filter=e}find(e){this.items=e}checkPer(e){return this.plus.checkPer(this.api,e)}reload(){return this.plus.reload(this.dbName+"/"+this.api)}reset(){this.plus.loaded(),this.filter=[],this.getIDB(),this.main.reset({})}changePage(e){this.filter=this.items.slice(e.pageIndex*e.pageSize,(e.pageIndex+1)*e.pageSize)}ondragover(){document.getElementById("dropZone").setAttribute("drop-active","true")}trackByFn(e,n){return n}resetDB(){this.plus.resetDB(this.db,this.api)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(b.T),t.Y36(l.qu),t.Y36(Z.i),t.Y36(N.gz))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-nlmt-input-detail"]],decls:128,vars:7,consts:[[1,"container"],[3,"formGroup"],[1,"row"],["type","text","readonly","","autocomplete","off","matInput","","formControlName","KhachHang"],["matSuffix",""],["type","text","readonly","","autocomplete","off","matInput","","formControlName","DiaChi"],["type","text","readonly","","autocomplete","off","matInput","","formControlName","TenBangKe"],[1,"col-6"],["hidden","","formControlName","_id"],["required","","type","text","autocomplete","off","matInput","","formControlName","KyThanhToan"],["type","text","readonly","","autocomplete","off","matInput","","formControlName","Email"],["type","text","readonly","","autocomplete","off","matInput","","formControlName","MaKhachHang"],["type","text","readonly","","autocomplete","off","matInput","","formControlName","MaGCS"],["type","text","autocomplete","off","matInput","","formControlName","ChuTaiKhoan"],["type","text","autocomplete","off","matInput","","formControlName","SoTaiKhoan"],["type","text","autocomplete","off","matInput","","formControlName","NganHang"],["type","text","autocomplete","off","matInput","","formControlName","Nam"],["type","text","autocomplete","off","matInput","","formControlName","Thang"],["type","text","autocomplete","off","matInput","","formControlName","NgayMuaHang"],["numberFormat","","type","text","autocomplete","off","matInput","","formControlName","SanLuong"],["type","text","autocomplete","off","matInput","","formControlName","DonGia"],["type","text","autocomplete","off","matInput","","formControlName","TruocThue"],["type","text","autocomplete","off","matInput","","formControlName","Thue"],["type","text","autocomplete","off","matInput","","formControlName","TongTien"],["type","text","autocomplete","off","matInput","","formControlName","KyHieuHoaDon"],["type","text","autocomplete","off","matInput","","formControlName","SoHoaDon"],["matInput","","formControlName","NgayHoaDon","placeholder","DD/MM/YYYY","autocomplete","off",3,"matDatepicker","blur","focus"],["NgayHoaDonInput",""],["matSuffix","",3,"for"],["NgayHoaDon",""],["hidden",""],["type","text","autocomplete","off","matInput","","formControlName","ThueSuat"],["required","","formControlName","TrangThaiHoSo"],[3,"value",4,"ngFor","ngForOf"],["id","closeModal","mat-raised-button","","color","primary","data-dismiss","modal",3,"click"],[3,"value"]],template:function(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"mat-form-field")(4,"mat-label"),t._uU(5,"Kh\xe1ch h\xe0ng"),t.qZA(),t._UZ(6,"input",3)(7,"span",4),t.qZA(),t.TgZ(8,"mat-form-field")(9,"mat-label"),t._uU(10,"\u0110\u1ecba ch\u1ec9"),t.qZA(),t._UZ(11,"input",5)(12,"span",4),t.qZA(),t.TgZ(13,"mat-form-field")(14,"mat-label"),t._uU(15,"T\xean b\u1ea3ng k\xea"),t.qZA(),t._UZ(16,"input",6)(17,"span",4),t.qZA(),t.TgZ(18,"div",7),t._UZ(19,"input",8),t.TgZ(20,"mat-form-field")(21,"mat-label"),t._uU(22,"K\u1ef3 thanh to\xe1n"),t.qZA(),t._UZ(23,"input",9)(24,"span",4),t.qZA(),t.TgZ(25,"mat-form-field")(26,"mat-label"),t._uU(27,"Email"),t.qZA(),t._UZ(28,"input",10)(29,"span",4),t.qZA(),t.TgZ(30,"mat-form-field")(31,"mat-label"),t._uU(32,"M\xe3 kh\xe1ch h\xe0ng"),t.qZA(),t._UZ(33,"input",11)(34,"span",4),t.qZA(),t.TgZ(35,"mat-form-field")(36,"mat-label"),t._uU(37,"M\xe3 G C S"),t.qZA(),t._UZ(38,"input",12)(39,"span",4),t.qZA(),t.TgZ(40,"mat-form-field")(41,"mat-label"),t._uU(42,"Ch\u1ee7 t\xe0i kho\u1ea3n"),t.qZA(),t._UZ(43,"input",13)(44,"span",4),t.qZA(),t.TgZ(45,"mat-form-field")(46,"mat-label"),t._uU(47,"S\u1ed1 t\xe0i kho\u1ea3n"),t.qZA(),t._UZ(48,"input",14)(49,"span",4),t.qZA(),t.TgZ(50,"mat-form-field")(51,"mat-label"),t._uU(52,"Ng\xe2n h\xe0ng"),t.qZA(),t._UZ(53,"input",15)(54,"span",4),t.qZA(),t.TgZ(55,"mat-form-field")(56,"mat-label"),t._uU(57,"N\u0103m"),t.qZA(),t._UZ(58,"input",16)(59,"span",4),t.qZA(),t.TgZ(60,"mat-form-field")(61,"mat-label"),t._uU(62,"Th\xe1ng"),t.qZA(),t._UZ(63,"input",17)(64,"span",4),t.qZA(),t.TgZ(65,"mat-form-field")(66,"mat-label"),t._uU(67,"Ng\xe0y mua h\xe0ng"),t.qZA(),t._UZ(68,"input",18)(69,"span",4),t.qZA()(),t.TgZ(70,"div",7)(71,"mat-form-field")(72,"mat-label"),t._uU(73,"S\u1ea3n l\u01b0\u1ee3ng"),t.qZA(),t._UZ(74,"input",19)(75,"span",4),t.qZA(),t.TgZ(76,"mat-form-field")(77,"mat-label"),t._uU(78,"\u0110\u01a1n gi\xe1"),t.qZA(),t._UZ(79,"input",20)(80,"span",4),t.qZA(),t.TgZ(81,"mat-form-field")(82,"mat-label"),t._uU(83,"Tr\u01b0\u1edbc thu\u1ebf"),t.qZA(),t._UZ(84,"input",21)(85,"span",4),t.qZA(),t.TgZ(86,"mat-form-field")(87,"mat-label"),t._uU(88,"Thu\u1ebf"),t.qZA(),t._UZ(89,"input",22)(90,"span",4),t.qZA(),t.TgZ(91,"mat-form-field")(92,"mat-label"),t._uU(93,"T\u1ed5ng ti\u1ec1n"),t.qZA(),t._UZ(94,"input",23)(95,"span",4),t.qZA(),t.TgZ(96,"mat-form-field")(97,"mat-label"),t._uU(98,"K\xfd hi\u1ec7u h\xf3a \u0111\u01a1n"),t.qZA(),t._UZ(99,"input",24)(100,"span",4),t.qZA(),t.TgZ(101,"mat-form-field")(102,"mat-label"),t._uU(103,"S\u1ed1 h\xf3a \u0111\u01a1n"),t.qZA(),t._UZ(104,"input",25)(105,"span",4),t.qZA(),t.TgZ(106,"mat-form-field")(107,"mat-label"),t._uU(108,"Ng\xe0y h\xf3a \u0111\u01a1n"),t.qZA(),t.TgZ(109,"input",26,27),t.NdJ("blur",function(){t.CHM(o);const r=t.MAs(110);return n.convertInputDay(r.value,"NgayHoaDon")})("focus",function(){return t.CHM(o),t.MAs(113).open()}),t.qZA(),t._UZ(111,"mat-datepicker-toggle",28)(112,"mat-datepicker",null,29),t.qZA(),t.TgZ(114,"mat-form-field",30)(115,"mat-label"),t._uU(116,"Thu\u1ebf su\u1ea5t"),t.qZA(),t._UZ(117,"input",31)(118,"span",4),t.qZA(),t.TgZ(119,"mat-form-field")(120,"mat-label"),t._uU(121,"Tr\u1ea1ng th\xe1i h\u1ed3 s\u01a1"),t.qZA(),t.TgZ(122,"mat-select",32),t.YNc(123,z,2,2,"mat-option",33),t.ALo(124,"catalog"),t.qZA()()()()(),t.TgZ(125,"button",34),t.NdJ("click",function(){return n.closeModal()}),t.TgZ(126,"mat-icon"),t._uU(127,"undo"),t.qZA()()()}if(2&e){const o=t.MAs(113);t.xp6(1),t.Q6J("formGroup",n.main),t.xp6(108),t.Q6J("matDatepicker",o),t.xp6(2),t.Q6J("for",o),t.xp6(12),t.Q6J("ngForOf",t.lcZ(124,5,"DMTTrangThaiHoSo")),t.xp6(2),t.Q6J("@slideIn",void 0)}},directives:[l._Y,l.JL,l.sg,f.KE,f.hX,A.Nt,l.Fj,l.JJ,l.u,f.R9,l.Q7,C.hl,C.nW,C.Mq,G.gD,g.sg,R.ey,I.lW,k.Hw],pipes:[T.pW],styles:[""],data:{animation:[x.Ym]}}),i})();var B=p(9157),V=p(86805),W=p(70930);function D(i,s){const e="object"==typeof s;return new Promise((n,o)=>{const a=new W.Hp({next:r=>{n(r),a.unsubscribe()},error:o,complete:()=>{e?n(s.defaultValue):o(new V.K)}});i.subscribe(a)})}var E=p(50590),j=p(40520),S=function(i,s,e,n){return new(e||(e=Promise))(function(a,r){function h(c){try{u(n.next(c))}catch(_){r(_)}}function m(c){try{u(n.throw(c))}catch(_){r(_)}}function u(c){c.done?a(c.value):function o(a){return a instanceof e?a:new e(function(r){r(a)})}(c.value).then(h,m)}u((n=n.apply(i,s||[])).next())})};let K=(()=>{class i{constructor(e,n,o,a){this.fb=e,this.plus=n,this.rtSv=o,this.http=a,this.global=!0,this.payForm=this.fb.group({_id:[,[]],TenBangKe:[,[l.kI.required]],TrangThai:[,[l.kI.required]],LichSuCapNhat:[,[l.kI.required]],TongPhatLen:[,[l.kI.required,l.kI.pattern("^[0-9]*$")]],ThanhTienTruocThue:[,[l.kI.required,l.kI.pattern("^[0-9]*$")]],Thue:[,[l.kI.required,l.kI.pattern("^[0-9]*$")]],ThanhTienSauThue:[,[l.kI.required,l.kI.pattern("^[0-9]*$")]],DanhSach:[]})}statusMail(e){console.log("statusMail()"),this.plus.httpPut("dmt-input",{_id:e._id,DaGuiMail:1,dateModify:Date.now()},!0).subscribe(n=>{console.log(n)})}updateNameBill(e,n){return S(this,void 0,void 0,function*(){const o=d()().format("x");console.log("updateNameBill()",+o);const a=e,h=Math.ceil(e.length/200),m=[];for(let u=0;u<a.length;u++)m.push(a[u]._id);for(let u=0;u<h;u++){const c={ids:m.slice(200*u,u+200),setData:{TenBangKe:n,dateModify:+o,TrangThaiHoSo:2},dateModify:+o};yield D(this.plus.httpPut("dmt-input/update",c,!0).pipe((0,E.P)()));const _=this.geneBodyPay(e,d()(+o,"x").toDate(),"G\u1eedi b\u1ea3ng k\xea");yield D(this.plus.httpPost("dmt-pay",_,!0).pipe((0,E.P)())),this.plus.reload("dien-luc/dmt-input")}})}changeStatusList(e,n){return S(this,void 0,void 0,function*(){const o=d()().format("x");console.log("changeStatusList()",o);const a=e.DanhSach,h=Math.ceil(e.DanhSach.length/200),m=[];for(let u=0;u<a.length;u++)m.push(a[u]._id);for(let u=0;u<h;u++){const c={ids:m.slice(200*u,u+200),setData:{dateModify:+o,TrangThaiHoSo:n,NgayThanhToan:d()(o).format("M/YYYY")},dateModify:+o};yield D(this.plus.httpPut("dmt-input/update",c,!0).pipe((0,E.P)())),e.TrangThai=n,delete e.__v,yield D(this.plus.httpPut("dmt-pay",e,!0).pipe((0,E.P)())),this.plus.reload("dien-luc/dmt-pay")}})}updateQualified(e){const n=d()().format("x");console.log("updateQualified()",n),Math.ceil(e.length/200);const r=[];for(let m=0;m<e.length;m++)r.push(e[m]._id);this.plus.httpPut("dmt-input/update",{ids:r,setData:{dateModify:+n,TrangThaiHoSo:1},dateModify:+n},!0).subscribe(m=>{this.plus.reload("dien-luc/dmt-input")})}deleteList(e){const n=[];for(let o=0;o<e.length;o++)n.push(e[o]._id);this.plus.httpPost("dmt-input/multi",n,this.global).subscribe(o=>{this.plus.reload("dien-luc/dmt-input")})}geneBodyPay(e,n,o){console.log("geneBodyPay()");const a={};a.TenBangKe=d()(n).format("YYMMDDHHmm"),a.KyThanhToan=e[0].Thang+"/"+e[0].Nam,a.LichSuCapNhat=[o+": "+d()().format("HH:mm-DD/MM/YYYY")],a.TrangThai=2,a.TongPhatLen=0,a.ThanhTienTruocThue=0,a.Thue=0,a.Nam=e[0].Nam,a.Thang=e[0].Thang,a.ThanhTienSauThue=0;for(let r=0;r<e.length;r++){const h=e[r];a.DanhSach=e,a.TongPhatLen+=h.SanLuong,a.ThanhTienTruocThue+=h.TruocThue,a.Thue+=h.Thue,a.ThanhTienSauThue+=h.TongTien}return a}geneBodyMail(e,n,o){return{from:this.plus.user.value.unit,status:0,email:e.Email,title:`Th\xf4ng b\xe1o chi ti\u1ec1n \u0111i\u1ec7n NLMTMN th\xe1ng ${+n.getMonth()+1} n\u0103m ${n.getFullYear()}`,company:e.KhachHang,index:o,message:`<p>K\xednh g\u1eedi kh\xe1ch h\xe0ng: ${e.KhachHang}.</p>\n          <p>\u0110i\u1ec7n l\u1ef1c Xu\xe2n L\u1ed9c k\xednh g\u1eedi \u0111\u1ebfn qu\xfd kh\xe1ch h\xe0ng n\u1ed9i dung thanh to\xe1n ti\u1ec1n \u0111i\u1ec7n m\u1eb7t tr\u1eddi tr\xean m\xe1i nh\xe0 v\u1edbi n\u1ed9i dung nh\u01b0 sau:</p>\n          <ul> M\xe3 kh\xe1ch h\xe0ng: ${e.MaKhachHang}.</ul>\n          <ul> T\xean kh\xe1ch h\xe0ng: ${e.KhachHang}.</ul>\n          <ul> \u0110\u1ecba ch\u1ec9: ${e.DiaChi}.</ul>\n          <ul> M\xe3 ghi ch\u1ec9 s\u1ed1: ${e.MaGCS}.</ul>\n          <ul> T\xean t\xe0i kho\u1ea3n: ${e.ChuTaiKhoan}.</ul>\n          <ul> S\u1ed1 t\xe0i kho\u1ea3n: ${e.SoTaiKhoan}.</ul>\n          <ul> Ng\xe2n h\xe0ng: ${e.NganHang}.</ul>\n          <ul> N\u0103m: ${n.getFullYear()}.</ul>\n          <ul> Th\xe1ng: ${+n.getMonth()+1}.</ul>\n          <ul> \u0110i\u1ec7n ph\xe1t l\xean l\u01b0\u1edbi: ${this.plus.numberWithCommas(e.SanLuong)} kWh.</ul>\n          <ul> \u0110\u01a1n gi\xe1: ${this.plus.numberWithCommas(e.DonGia)} VND/kWh.</ul>\n          <ul> T\u1ec9 l\u1ec7 Thu\u1ebf: ${e.TiLeThue} %.</ul>\n          <ul> Th\xe0nh ti\u1ec1n ch\u01b0a thu\u1ebf VAT: ${this.plus.numberWithCommas(e.TruocThue)} VND.</ul>\n          <ul> Thu\u1ebf VAT: ${this.plus.numberWithCommas(e.Thue)} VND.</ul>\n          <ul> T\u1ed5ng ti\u1ec1n: ${this.plus.numberWithCommas(e.TongTien)} VND.</ul>\n          <p> M\u1ecdi \xfd ki\u1ebfn ph\u1ea3n h\u1ed3i vui l\xf2ng li\xean h\u1ec7 \u0110i\u1ec7n l\u1ef1c Xu\xe2n L\u1ed9c qua s\u1ed1 \u0111i\u1ec7n tho\u1ea1i Mr. \u0110\u1ea1t - <a href="tel:0937232239">0937232239 </a> ho\u1eb7c Mrs. Ph\u01b0\u1edbc Anh - <a href="tel:0583223344" >0583223344 </a> \u0111\u1ec3 \u0111\u01b0\u1ee3c gi\u1ea3i \u0111\xe1p.</p>\n          <p> Ph\u1ea3n h\u1ed3i h\xf3a \u0111\u01a1n qu\xfd kh\xe1ch vui l\xf2ng g\u1eedi email v\u1ec1 c\u1ea3 02 \u0111\u1ecba ch\u1ec9: <a href="mailto:dienlucxuanloc.nlmt@gmail.com;tckt.dlxl.pcdn@gmail.com">dienlucxuanloc.nlmt@gmail.com</a> v\xe0 <a href="mailto:dienlucxuanloc.nlmt@gmail.com;tckt.dlxl.pcdn@gmail.com">tckt.dlxl.pcdn@gmail.com</a> </p>\n          Tr\xe2n tr\u1ecdng.`}}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(l.qu),t.LFG(b.T),t.LFG(Z.i),t.LFG(j.eN))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var w=p(87238),q=p(25862);function et(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"button",27),t.NdJ("click",function(){return t.CHM(e),t.oxw().approveList()}),t.TgZ(1,"mat-icon"),t._uU(2,"done_all"),t.qZA()()}}function nt(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"button",28),t.NdJ("click",function(){return t.CHM(e),t.oxw().returnList()}),t.TgZ(1,"mat-icon"),t._uU(2,"replay_circle_filled"),t.qZA()()}}function it(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"button",29),t.NdJ("click",function(){return t.CHM(e),t.oxw().save()}),t.TgZ(1,"mat-icon"),t._uU(2,"save"),t.qZA()()}}function ot(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"button",30),t.NdJ("click",function(){return t.CHM(e),t.oxw().paidList()}),t.TgZ(1,"mat-icon"),t._uU(2,"currency_exchange"),t.qZA()()}}function at(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"mat-icon",31),t.NdJ("click",function(){return t.CHM(e),t.oxw().searchText=""}),t._uU(1,"close"),t.qZA()}}function lt(i,s){1&i&&(t.TgZ(0,"th"),t._uU(1,"Ch\u1ee7 t\xe0i kho\u1ea3n"),t.qZA())}function st(i,s){1&i&&(t.TgZ(0,"th"),t._uU(1,"S\u1ed1 t\xe0i kho\u1ea3n"),t.qZA())}function rt(i,s){1&i&&(t.TgZ(0,"th"),t._uU(1,"Ng\xe2n h\xe0ng"),t.qZA())}function ct(i,s){1&i&&(t.TgZ(0,"th"),t._uU(1,"Tr\u01b0\u1edbc thu\u1ebf"),t.qZA())}function ut(i,s){1&i&&(t.TgZ(0,"th"),t._uU(1,"Thu\u1ebf"),t.qZA())}function pt(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"td",32),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw().onEdit(o)}),t._uU(1),t.qZA()}if(2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.ChuTaiKhoan)}}function ht(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"td",32),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw().onEdit(o)}),t._uU(1),t.qZA()}if(2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.SoTaiKhoan)}}function mt(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"td",32),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw().onEdit(o)}),t._uU(1),t.qZA()}if(2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.NganHang)}}function _t(i,s){if(1&i&&(t.TgZ(0,"td",34),t._uU(1),t.ALo(2,"number"),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,e.TruocThue))}}function dt(i,s){if(1&i&&(t.TgZ(0,"td",34),t._uU(1),t.ALo(2,"number"),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,e.Thue))}}function gt(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"mat-icon",42),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw().onDelete(o)}),t._uU(1,"delete"),t.qZA()}}function ft(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"td",32),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw().onEdit(a)}),t._uU(2),t.qZA(),t.TgZ(3,"td",32),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw().onEdit(a)}),t._uU(4),t.qZA(),t.YNc(5,pt,2,1,"td",33),t.YNc(6,ht,2,1,"td",33),t.YNc(7,mt,2,1,"td",33),t.TgZ(8,"td",32),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw().onEdit(a)}),t._uU(9),t.ALo(10,"number"),t.qZA(),t.TgZ(11,"td",34),t._uU(12),t.ALo(13,"number"),t.qZA(),t.YNc(14,_t,3,3,"td",35),t.YNc(15,dt,3,3,"td",35),t.TgZ(16,"td",34),t._uU(17),t.ALo(18,"number"),t.qZA(),t.TgZ(19,"td",34)(20,"span",36),t.NdJ("blur",function(o){const r=t.CHM(e).$implicit;return t.oxw().changeLabel(o,r)}),t._uU(21),t.qZA()(),t.TgZ(22,"td",34)(23,"span",36),t.NdJ("blur",function(o){const r=t.CHM(e).$implicit;return t.oxw().changeSeri(o,r)}),t._uU(24),t.qZA()(),t.TgZ(25,"td",37)(26,"mat-form-field")(27,"input",38),t.NdJ("focus",function(){return t.CHM(e),t.MAs(30).open()})("dateChange",function(o){const r=t.CHM(e).$implicit;return t.oxw().changeDate(o,r)}),t.qZA(),t._UZ(28,"mat-datepicker-toggle",39)(29,"mat-datepicker",null,40),t.qZA()(),t.TgZ(31,"td"),t.YNc(32,gt,2,0,"mat-icon",41),t.qZA()()}if(2&i){const e=s.$implicit,n=t.MAs(30),o=t.oxw();t.xp6(2),t.Oqu(e.MaKhachHang),t.xp6(2),t.Oqu(e.KhachHang),t.xp6(1),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(2),t.Oqu(t.lcZ(10,18,e.SanLuong)),t.xp6(3),t.Oqu(t.lcZ(13,20,e.DonGia)),t.xp6(2),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(2),t.Oqu(t.lcZ(18,22,e.TongTien)),t.xp6(3),t.Q6J("contentEditable",!0),t.xp6(1),t.hij(" ",e.KyHieuHoaDon,""),t.xp6(2),t.Q6J("contentEditable",!0),t.xp6(1),t.hij(" ",e.SoHoaDon," "),t.xp6(3),t.Q6J("matDatepicker",n)("value",e.NgayHoaDon),t.xp6(1),t.Q6J("for",n),t.xp6(4),t.Q6J("ngIf",o.checkPer(4)&&e.TrangThai<2)}}function Tt(i,s){if(1&i&&(t.TgZ(0,"tr",43)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"lowercase"),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.qZA(),t.TgZ(16,"td"),t._uU(17),t.qZA(),t.TgZ(18,"td"),t._uU(19),t.qZA(),t.TgZ(20,"td"),t._uU(21),t.ALo(22,"numberPipe"),t.qZA(),t.TgZ(23,"td"),t._uU(24),t.ALo(25,"numberPipe"),t.qZA(),t.TgZ(26,"td"),t._uU(27),t.ALo(28,"numberPipe"),t.qZA(),t.TgZ(29,"td"),t._uU(30),t.ALo(31,"numberPipe"),t.qZA(),t.TgZ(32,"td")(33,"b"),t._uU(34),t.ALo(35,"numberPipe"),t.qZA()()()),2&i){const e=s.$implicit;t.xp6(2),t.Oqu(e.MaKhachHang),t.xp6(2),t.Oqu(e.KhachHang),t.xp6(2),t.Oqu(e.DiaChi),t.xp6(2),t.Oqu(e.MaGCS),t.xp6(2),t.Oqu(e.ChuTaiKhoan),t.xp6(2),t.Oqu(t.lcZ(13,14,e.SoTaiKhoan)),t.xp6(3),t.Oqu(e.NganHang),t.xp6(2),t.Oqu(e.Nam),t.xp6(2),t.Oqu(e.Thang),t.xp6(2),t.Oqu(t.lcZ(22,16,e.SanLuong)),t.xp6(3),t.Oqu(t.lcZ(25,18,e.DonGia)),t.xp6(3),t.Oqu(t.lcZ(28,20,e.TruocThue)),t.xp6(3),t.Oqu(t.lcZ(31,22,e.Thue)),t.xp6(4),t.hij(" ",t.lcZ(35,24,e.TongTien)," ")}}let xt=(()=>{class i{constructor(e,n,o,a,r,h){this.plus=e,this.fb=n,this.rtSv=o,this.docxSv=a,this.route=r,this.nlmtSv=h,this.main=this.fb.group({Email:[,[l.kI.required]],MaKhachHang:[,[l.kI.required]],KhachHang:[,[l.kI.required]],DiaChi:[,[l.kI.required]],MaGCS:[,[l.kI.required]],ChuTaiKhoan:[,[l.kI.required]],SoTaiKhoan:[,[l.kI.required]],NganHang:[,[l.kI.required]],Nam:[,[l.kI.required,l.kI.pattern("^[0-9]*$")]],Thang:[,[l.kI.required,l.kI.pattern("^[0-9]*$")]],SanLuong:[,[l.kI.required,l.kI.pattern("^[0-9]*$")]],DonGia:[,[l.kI.required,l.kI.pattern("^[0-9]*$")]],TruocThue:[,[l.kI.required,l.kI.pattern("^[0-9]*$")]],Thue:[,[l.kI.required,l.kI.pattern("^[0-9]*$")]],TongTien:[,[l.kI.required,l.kI.pattern("^[0-9]*$")]],KyHieuHoaDon:[,[l.kI.required,l.kI.minLength(3)]],SoHoaDon:[,[l.kI.required,l.kI.minLength(3)]],NgayHoaDon:[,[l.kI.required]],TrangThai:[,],DaGuiMail:[0]}),this.title="Chi ti\u1ebft b\u1ea3ng k\xea",this.global=!0,this.dbName="dien-luc",this.api="dmt-pay",this.db=null,this.userId=this.plus.userId,this.usr=this.plus.usr,this.selectedItem=null,this.filter=[],this.chart=[],this.errors=[],this.searchText=""}ngOnInit(){this.plus.setTiTle(this.title),this.plus.IDB_InitDB(this.dbName).subscribe(e=>function(i,s,e,n){return new(e||(e=Promise))(function(a,r){function h(c){try{u(n.next(c))}catch(_){r(_)}}function m(c){try{u(n.throw(c))}catch(_){r(_)}}function u(c){c.done?a(c.value):function o(a){return a instanceof e?a:new e(function(r){r(a)})}(c.value).then(h,m)}u((n=n.apply(i,s||[])).next())})}(this,void 0,void 0,function*(){this.getIDB(),this.db=e,this.plus.updateRealtime(this.db,this.api,this.global),this.plus.IDB_DB_CleanTrash(e,this.api)}))}exportXlsx(){var e=document.getElementById("my-table-id");window.open("data:application/vnd.ms-excel,"+encodeURIComponent(e.outerHTML))}getIDB(){const e=this.route.snapshot.paramMap.get("id");this.plus.load(),this.plus.httpGet(this.api+"/"+e).subscribe(n=>{this.plus.loaded();let o=this.plus.Crypt_DecryptRest(n);this.items=o,this.isBill=this.items.DanhSach[0].CoHoaDon})}changeDate(e,n){const o=this.items.DanhSach.indexOf(n);this.items.DanhSach[o].NgayHoaDon=e.value}changeLabel(e,n){const o=this.items.DanhSach.indexOf(n);this.items.DanhSach[o].KyHieuHoaDon=e.target.innerText}changeSeri(e,n){const o=this.items.DanhSach.indexOf(n);this.items.DanhSach[o].SoHoaDon=e.target.innerText}ngOnDestroy(){console.log("Destroy",this.api),this.plus.subs.unsubscribe(),this.rtSv.leaveRoom(this.api)}save(){const e=this.items;delete e.__v,this.plus.httpPut(this.api,e,this.global).subscribe(n=>{n.status&&this.plus.updateAPi.next(!0)})}completeBill(){}exportWord(){this.docxSv.loadFileUrl("https://thuctd.github.io/templates/BangKe-PTC.docx").then(e=>{this.docxSv.generateOne(this.items,e,"PTC").then(n=>{console.log(n)})})}reportKD(){1==this.isBill?this.reportKDBill():this.reportKDNoBill()}reportKDBill(){this.docxSv.loadFileUrl("https://thuctd.github.io/templates/BangKe.docx").then(e=>{this.docxSv.generateOne(this.items,e,"PKD").then(n=>{console.log(n)})})}reportKDNoBill(){this.docxSv.loadFileUrl("https://thuctd.github.io/templates/BangKeNoBill.docx").then(e=>{this.docxSv.generateOne(this.items,e,"PKD-MuaHang").then(n=>{})})}exportUNC(){this.docxSv.loadFileUrl("https://thuctd.github.io/templates/4la-UNC-HDBank.docx").then(e=>{this.docxSv.generateOne(this.items,e,"PTC").then(n=>{console.log(n)})})}returnList(){const e=prompt("L\xed do tr\u1ea3 h\u1ed3 s\u01a1?");if(0==e.length)return this.plus.alertWarning("B\u1ea1n ph\u1ea3i nh\u1eadp l\xed do tr\u1ea3 h\u1ed3 s\u01a1");const n=this.items;n.LichSuCapNhat.push(`Tr\u1ea3 l\u1ea1i h\u1ed3 s\u01a1 v\u1edbi l\xed do ${e}: ${d()().format("DD/MM/YYYY HH:mm")}`),this.nlmtSv.changeStatusList(n,0)}approveList(){const e=this.items;e.LichSuCapNhat.push(`H\u1ed3 s\u01a1 \u0111\xe3 \u0111\u01b0\u1ee3c ch\u1ea5p nh\u1eadn: ${d()().format("DD/MM/YYYY HH:mm")}`),this.nlmtSv.changeStatusList(e,3)}paidList(){const e=this.items;e.LichSuCapNhat.push(`H\u1ed3 s\u01a1 \u0111\xe3 thanh to\xe1n ${d()().format("DD/MM/YYYY HH:mm")}`),this.nlmtSv.changeStatusList(e,4)}report(){}complete(){}onEdit(e){this.selectedItem=e;const n=this.plus.dateToHtmlObj(e,[""]);this.main.patchValue(n),this.plus.clickBtn("openModal")}onDelete(e){!confirm("B\u1ea1n mu\u1ed1n x\xf3a?")||(this.plus.load(),this.plus.httpDisable(this.api,e,this.global).then(o=>{this.reload()}))}search(e){this.filter=e}find(e){this.items=e}checkPer(e){return this.plus.checkPer(this.api,e)}reload(){return this.plus.reload(this.dbName+"/"+this.api)}goBack(){this.plus.goBack()}changePage(e){}trackByFn(e,n){return n}resetDB(){this.plus.resetDB(this.db,this.api)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(b.T),t.Y36(l.qu),t.Y36(Z.i),t.Y36(B.E),t.Y36(N.gz),t.Y36(K))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-nlmt-detail"]],decls:104,vars:29,consts:[[1,"container-fluid"],["id","back-btn","mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","warn","matTooltip","Duy\u1ec7t",3,"click",4,"ngIf"],["mat-raised-button","","color","primary","matTooltip","Tr\u1ea3 l\u1ea1i",3,"click",4,"ngIf"],["mat-raised-button","","color","primary","matTooltip","B\u1ea3ng k\xea PTC ",3,"click"],["mat-raised-button","","color","primary","matTooltip","Xu\u1ea5t UNC ",3,"click"],["mat-raised-button","","color","primary","matTooltip","B\u1ea3ng k\xea PKD ",3,"click"],["mat-raised-button","","color","warn","matTooltip","L\u01b0u",3,"click",4,"ngIf"],["mat-raised-button","","color","warn","matTooltip","\u0110\xe3 thanh to\xe1n",3,"click",4,"ngIf"],["mat-raised-button","",3,"click"],["aria-hidden","true",1,"fa","fa-file-excel-o","fa-2x","text-success"],[1,"row"],["matSuffix","","color","warn",3,"click",4,"ngIf"],["matInput","","id","search-api","placeholder","T\xecm ki\u1ebfm nhanh (F2)","value","value",3,"ngModel","ngModelChange"],[1,"tit","text-center"],[1,"table","table-hover"],[1,"thead-inverse"],[4,"Device"],["color","primary",3,"click"],[4,"ngFor","ngForOf"],["id","my-table-id","hidden","",1,"table","bordered"],["colspan","14"],[2,"text-align","center","color","blue","padding","3rem","vertical-align","middle"],[2,"border-style","solid"],["style"," border-style: dotted;",4,"ngFor","ngForOf"],["colspan","2"],["colspan","6",2,"text-align","left","color","blue","padding","3rem","vertical-align","middle"],["mat-raised-button","","color","warn","matTooltip","Duy\u1ec7t",3,"click"],["mat-raised-button","","color","primary","matTooltip","Tr\u1ea3 l\u1ea1i",3,"click"],["mat-raised-button","","color","warn","matTooltip","L\u01b0u",3,"click"],["mat-raised-button","","color","warn","matTooltip","\u0110\xe3 thanh to\xe1n",3,"click"],["matSuffix","","color","warn",3,"click"],[1,"align-middle",3,"click"],["class","align-middle",3,"click",4,"Device"],[1,"align-middle"],["class","align-middle",4,"Device"],[3,"contentEditable","blur"],[1,"align-text-top"],["matInput","",3,"matDatepicker","value","focus","dateChange"],["matSuffix","",3,"for"],["picker",""],["color","warn",3,"click",4,"ngIf"],["color","warn",3,"click"],[2,"border-style","dotted"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"button",1),t.NdJ("click",function(){return n.goBack()}),t.TgZ(2,"mat-icon"),t._uU(3,"undo"),t.qZA()(),t.YNc(4,et,3,0,"button",2),t.YNc(5,nt,3,0,"button",3),t.TgZ(6,"button",4),t.NdJ("click",function(){return n.exportWord()}),t.TgZ(7,"mat-icon"),t._uU(8,"cloud_download"),t.qZA()(),t.TgZ(9,"button",5),t.NdJ("click",function(){return n.exportUNC()}),t.TgZ(10,"mat-icon"),t._uU(11,"border_color"),t.qZA()(),t.TgZ(12,"button",6),t.NdJ("click",function(){return n.reportKD()}),t.TgZ(13,"mat-icon"),t._uU(14,"format_list_bulleted"),t.qZA()(),t.YNc(15,it,3,0,"button",7),t.YNc(16,ot,3,0,"button",8),t.TgZ(17,"button",9),t.NdJ("click",function(){return n.exportXlsx()}),t._UZ(18,"i",10),t.qZA(),t.TgZ(19,"div",11)(20,"mat-form-field"),t.YNc(21,at,2,0,"mat-icon",12),t.TgZ(22,"input",13),t.NdJ("ngModelChange",function(a){return n.searchText=a}),t.qZA()(),t.TgZ(23,"h5",14),t._uU(24),t.ALo(25,"numberPipe"),t.qZA(),t.TgZ(26,"table",15)(27,"thead",16)(28,"tr")(29,"th"),t._uU(30,"M\xe3 kh\xe1ch h\xe0ng"),t.qZA(),t.TgZ(31,"th"),t._uU(32,"Kh\xe1ch h\xe0ng"),t.qZA(),t.YNc(33,lt,2,0,"th",17),t.YNc(34,st,2,0,"th",17),t.YNc(35,rt,2,0,"th",17),t.TgZ(36,"th"),t._uU(37,"S\u1ea3n l\u01b0\u1ee3ng"),t.qZA(),t.TgZ(38,"th"),t._uU(39,"\u0110\u01a1n gi\xe1"),t.qZA(),t.YNc(40,ct,2,0,"th",17),t.YNc(41,ut,2,0,"th",17),t.TgZ(42,"th"),t._uU(43,"T\u1ed5ng ti\u1ec1n"),t.qZA(),t.TgZ(44,"th"),t._uU(45,"K\xfd hi\u1ec7u h\xf3a \u0111\u01a1n"),t.qZA(),t.TgZ(46,"th"),t._uU(47,"S\u1ed1 h\xf3a \u0111\u01a1n"),t.qZA(),t.TgZ(48,"th"),t._uU(49,"Ng\xe0y h\xf3a \u0111\u01a1n"),t.qZA(),t.TgZ(50,"th")(51,"mat-icon",18),t.NdJ("click",function(){return n.reload()}),t._uU(52,"cached"),t.qZA()()()(),t.TgZ(53,"tbody"),t.YNc(54,ft,33,24,"tr",19),t.ALo(55,"filter"),t.qZA()()()(),t.TgZ(56,"table",20)(57,"tr")(58,"td",21)(59,"h5",22),t._uU(60),t.qZA()()(),t.TgZ(61,"thead",23)(62,"tr")(63,"th"),t._uU(64,"M\xe3 kh\xe1ch h\xe0ng"),t.qZA(),t.TgZ(65,"th"),t._uU(66,"Kh\xe1ch h\xe0ng"),t.qZA(),t.TgZ(67,"th"),t._uU(68,"\u0110\u1ecba ch\u1ec9"),t.qZA(),t.TgZ(69,"th"),t._uU(70,"M\xe3 GCS"),t.qZA(),t.TgZ(71,"th"),t._uU(72,"Ch\u1ee7 t\xe0i kho\u1ea3n"),t.qZA(),t.TgZ(73,"th"),t._uU(74,"S\u1ed1 t\xe0i kho\u1ea3n"),t.qZA(),t.TgZ(75,"th"),t._uU(76,"Ng\xe2n h\xe0ng"),t.qZA(),t.TgZ(77,"th"),t._uU(78,"N\u0103m"),t.qZA(),t.TgZ(79,"th"),t._uU(80,"Th\xe1ng"),t.qZA(),t.TgZ(81,"th"),t._uU(82,"S\u1ea3n l\u01b0\u1ee3ng"),t.qZA(),t.TgZ(83,"th"),t._uU(84,"\u0110\u01a1n gi\xe1"),t.qZA(),t.TgZ(85,"th"),t._uU(86,"Tr\u01b0\u1edbc thu\u1ebf"),t.qZA(),t.TgZ(87,"th"),t._uU(88,"Thu\u1ebf"),t.qZA(),t.TgZ(89,"th"),t._uU(90,"T\u1ed5ng ti\u1ec1n"),t.qZA()()(),t.TgZ(91,"tbody"),t.YNc(92,Tt,36,26,"tr",24),t.qZA(),t.TgZ(93,"tfoot")(94,"tr"),t._UZ(95,"th",25),t.qZA(),t.TgZ(96,"tr")(97,"th",26),t._uU(98),t.ALo(99,"numberPipe"),t.qZA()(),t.TgZ(100,"tr")(101,"th",26),t._uU(102),t.ALo(103,"bangChu"),t.qZA()()()()),2&e&&(t.xp6(1),t.Q6J("@slideIn",void 0),t.xp6(3),t.Q6J("ngIf",(null==n.items?null:n.items.TrangThai)>1&&(null==n.items?null:n.items.TrangThai)<3),t.xp6(1),t.Q6J("ngIf",(null==n.items?null:n.items.TrangThai)>1&&(null==n.items?null:n.items.TrangThai)<3),t.xp6(10),t.Q6J("ngIf",(null==n.items?null:n.items.TrangThai)>1),t.xp6(1),t.Q6J("ngIf",3==(null==n.items?null:n.items.TrangThai)),t.xp6(5),t.Q6J("ngIf",n.searchText.length>0),t.xp6(1),t.Q6J("ngModel",n.searchText),t.xp6(2),t.AsE("B\u1ea2NG K\xca THANH TO\xc1N TI\u1ec0N \u0110I\u1ec6N M\u1eb6T TR\u1edcI S\u1ed0 ",null==n.items?null:n.items.TenBangKe," | ",t.lcZ(25,20,null==n.items?null:n.items.ThanhTienSauThue)," "),t.xp6(2),t.Q6J("@slideIn",void 0),t.xp6(7),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(5),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(13),t.Q6J("ngForOf",t.xi3(55,22,null==n.items?null:n.items.DanhSach,n.searchText)),t.xp6(6),t.hij("B\u1ea2NG K\xca THANH TO\xc1N TI\u1ec0N \u0110I\u1ec6N M\u1eb6T TR\u1edcI S\u1ed0 ",null==n.items?null:n.items.TenBangKe," "),t.xp6(32),t.Q6J("ngForOf",null==n.items?null:n.items.DanhSach),t.xp6(6),t.hij("T\u1ed5ng c\u1ed9ng: ",t.lcZ(99,25,null==n.items?null:n.items.ThanhTienSauThue),"vnd."),t.xp6(4),t.hij("B\u1eb1ng ch\u1eef: ",t.lcZ(103,27,null==n.items?null:n.items.ThanhTienSauThue),""))},directives:[I.lW,k.Hw,g.O5,w.gM,f.KE,f.R9,A.Nt,l.Fj,l.JJ,l.On,q.HP,g.sg,C.hl,C.nW,C.Mq],pipes:[T._2,T.Cf,g.JJ,g.i8,T.ID],styles:["span[_ngcontent-%COMP%]{text-align:center;display:block;border-bottom:dotted 1px}mat-form-field[_ngcontent-%COMP%]{padding:0!important}.mat-form-field-infix[_ngcontent-%COMP%]{width:100px!important}"],data:{animation:[x.Ym]}}),i})();var U=p(68042),bt=p(21019),y=p(86087),H=p(87654),v=p(97012),Zt=p(30358);function Ct(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"app-search-api",13),t.NdJ("data",function(o){return t.CHM(e),t.oxw().find(o)}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("api",e.api)}}function It(i,s){1&i&&(t.TgZ(0,"th"),t._uU(1,"Tr\u1ea1ng th\xe1i"),t.qZA())}function kt(i,s){1&i&&(t.TgZ(0,"th"),t._uU(1,"L\u1ecbch s\u1eed c\u1eadp nh\u1eadt"),t.qZA())}function At(i,s){1&i&&(t.TgZ(0,"th"),t._uU(1,"Th\xe0nh ti\u1ec1n sau thu\u1ebf"),t.qZA())}function Dt(i,s){if(1&i&&(t.TgZ(0,"td",19),t._uU(1),t.ALo(2,"enum"),t.qZA()),2&i){const e=t.oxw().$implicit;t.s9C("routerLink",e._id),t.xp6(1),t.Oqu(t.xi3(2,2,e.TrangThai,"DMTTrangThaiHoSo"))}}function Et(i,s){if(1&i&&(t.TgZ(0,"td",19),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.s9C("routerLink",e._id),t.xp6(1),t.Oqu(e.LichSuCapNhat)}}function qt(i,s){if(1&i&&(t.TgZ(0,"td",21),t._uU(1),t.ALo(2,"numberPipe"),t.qZA()),2&i){const e=t.oxw().$implicit;t.s9C("routerLink",e._id),t.xp6(1),t.Oqu(t.lcZ(2,2,e.ThanhTienSauThue))}}function yt(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"mat-icon",24),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw(2).onDelete(o)}),t._uU(1,"delete"),t.qZA()}}function vt(i,s){if(1&i&&(t.TgZ(0,"tr")(1,"td",19),t._uU(2),t.qZA(),t.YNc(3,Dt,3,5,"td",20),t.YNc(4,Et,2,2,"td",20),t.TgZ(5,"td",21),t._uU(6),t.ALo(7,"numberPipe"),t.qZA(),t.YNc(8,qt,3,4,"td",22),t.TgZ(9,"td"),t.YNc(10,yt,2,0,"mat-icon",23),t.qZA()()),2&i){const e=s.$implicit,n=t.oxw(2);t.xp6(1),t.s9C("routerLink",e._id),t.xp6(1),t.Oqu(e.TenBangKe),t.xp6(1),t.Q6J("Device",2),t.xp6(1),t.Q6J("Device",2),t.xp6(1),t.s9C("routerLink",e._id),t.xp6(1),t.Oqu(t.lcZ(7,8,e.TongPhatLen)),t.xp6(2),t.Q6J("Device",2),t.xp6(2),t.Q6J("ngIf",n.checkPer(4)&&e.TrangThai<1)}}function Ut(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"table",14)(1,"thead",15)(2,"tr")(3,"th"),t._uU(4,"T\xean b\u1ea3ng k\xea"),t.qZA(),t.YNc(5,It,2,0,"th",16),t.YNc(6,kt,2,0,"th",16),t.TgZ(7,"th"),t._uU(8,"T\u1ed5ng ph\xe1t l\xean"),t.qZA(),t.YNc(9,At,2,0,"th",16),t.TgZ(10,"th")(11,"mat-icon",17),t.NdJ("click",function(){return t.CHM(e),t.oxw().reload()}),t._uU(12,"cached"),t.qZA()()()(),t.TgZ(13,"tbody"),t.YNc(14,vt,11,10,"tr",18),t.qZA()()}if(2&i){const e=t.oxw();t.Q6J("@slideIn",void 0),t.xp6(5),t.Q6J("Device",2),t.xp6(1),t.Q6J("Device",2),t.xp6(3),t.Q6J("Device",2),t.xp6(5),t.Q6J("ngForOf",e.filter.length>0?e.filter:e.items.slice(0,50))("ngForTrackBy",e.trackByFn)}}function Ht(i,s){if(1&i&&t._UZ(0,"app-import-database",25),2&i){const e=t.oxw();t.Q6J("api",e.api)("global",e.global)("form",e.main)}}function Mt(i,s){if(1&i&&t._UZ(0,"app-export-ecxel",26),2&i){const e=t.oxw();t.Q6J("dataJson",e.items)}}function Jt(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"button",27),t.NdJ("click",function(){return t.CHM(e),t.oxw().resetDB()}),t._uU(1,"X\xf3a to\xe0n b\u1ed9 d\u1eef li\u1ec7u"),t.qZA()}}const Bt=function(){return[5,10,25,100]};let St=(()=>{class i{constructor(e,n,o){this.plus=e,this.fb=n,this.rtSv=o,this.main=this.fb.group({keyWord:[,[]],_id:[,[]],TenBangKe:[,[l.kI.required]],TrangThai:[,[l.kI.required]],LichSuCapNhat:[,[l.kI.required]],TongPhatLen:[,[l.kI.required,l.kI.pattern("^[0-9]*$")]],ThanhTienTruocThue:[,[l.kI.required,l.kI.pattern("^[0-9]*$")]],Thue:[,[l.kI.required,l.kI.pattern("^[0-9]*$")]],ThanhTienSauThue:[,[l.kI.required,l.kI.pattern("^[0-9]*$")]],DanhSach:[,[l.kI.required]]}),this.title="L\u1eadp b\u1ea3ng k\xea",this.global=!0,this.dbName="dien-luc",this.api="dmt-pay",this.db=null,this.userId=this.plus.userId,this.usr=this.plus.usr,this.items=[],this.selectedItem=null,this.filter=[],this.itemsPay=[],this.errors=[],this.startDay=new Date}ngOnInit(){this.plus.setTiTle(this.title),this.plus.IDB_InitDB(this.dbName).subscribe(e=>function(i,s,e,n){return new(e||(e=Promise))(function(a,r){function h(c){try{u(n.next(c))}catch(_){r(_)}}function m(c){try{u(n.throw(c))}catch(_){r(_)}}function u(c){c.done?a(c.value):function o(a){return a instanceof e?a:new e(function(r){r(a)})}(c.value).then(h,m)}u((n=n.apply(i,s||[])).next())})}(this,void 0,void 0,function*(){this.db=e,this.plus.updateRealtime(this.db,this.api,this.global),this.getMonth(this.startDay),this.plus.IDB_DB_CleanTrash(e,this.api),this.plus.updateAPi.subscribe(n=>{n&&this.getIDB()})}))}getIDB(){console.log("getIDB() "),this.filter=[],this.items=[],this.plus.IDB_DB_GetAllByIndexKey(this.db,this.api,"TrangThai","<",4).subscribe(e=>{this.items=e}),this.plus.IDB_DB_GetAllByIndexKey(this.db,this.api,"Nam","=",this.year).subscribe(e=>{this.itemsPay=e,console.log(e),this.chart=this.plus.generateChart(e,"KyThanhToan","ThanhTienSauThue")})}ngOnDestroy(){console.log("Destroy",this.api),this.plus.subs.unsubscribe(),this.rtSv.leaveRoom(this.api)}getMonth(e){this.startDay=e,this.month=d()(e).month()+1,this.year=d()(e).year(),console.log(`GetMOnth:  ${this.year}${this.month}`),this.getIDB()}onDelete(e){!confirm("B\u1ea1n mu\u1ed1n x\xf3a?")||(this.plus.load(),this.plus.httpDisable(this.api,e,this.global).then(o=>{this.reload()}))}chooseOpt(e,n,o,a=!1){this.main.controls[n].setValue(e[o]),a&&this.main.controls[n+"ID"].setValue(e._id)}closeModal(){this.main.reset()}search(e){this.filter=e}find(e){this.items=e}checkPer(e){return this.plus.checkPer(this.api,e)}patchForm(){this.main.reset({_id:" "})}reload(){return this.plus.reload(this.dbName+"/"+this.api)}goBack(){this.plus.goBack()}reset(){this.plus.loaded(),this.filter=[],this.getIDB(),this.main.reset({})}changePage(e){this.filter=this.items.slice(e.pageIndex*e.pageSize,(e.pageIndex+1)*e.pageSize)}ondragover(){document.getElementById("dropZone").setAttribute("drop-active","true")}trackByFn(e,n){return n}resetDB(){this.plus.resetDB(this.db,this.api)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(b.T),t.Y36(l.qu),t.Y36(Z.i))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-nlmt-list"]],decls:17,vars:15,consts:[[1,"container"],["id","add-btn","color","accent","mat-raised-button","","routerLink","/dien-luc/dmt-input"],["id","back-btn","mat-raised-button","","color","primary",3,"click"],[3,"api","data",4,"ngIf"],[1,"py-3"],[3,"startDay","month"],[1,"row"],["class","table table-hover",4,"ngIf"],[3,"length","pageSize","pageSizeOptions","page"],[3,"api","global","form",4,"ngIf"],[3,"dataJson",4,"ngIf"],[3,"id","label","arr","type"],["mat-button","","color","warn",3,"click",4,"ngIf"],[3,"api","data"],[1,"table","table-hover"],[1,"thead-inverse"],[4,"Device"],["color","primary",3,"click"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"routerLink"],[3,"routerLink",4,"Device"],[1,"text-right",3,"routerLink"],["class","text-right",3,"routerLink",4,"Device"],["color","warn",3,"click",4,"ngIf"],["color","warn",3,"click"],[3,"api","global","form"],[3,"dataJson"],["mat-button","","color","warn",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"button",1)(2,"mat-icon"),t._uU(3,"control_point"),t.qZA()(),t.TgZ(4,"button",2),t.NdJ("click",function(){return n.goBack()}),t.TgZ(5,"mat-icon"),t._uU(6,"undo"),t.qZA()(),t.YNc(7,Ct,1,1,"app-search-api",3),t.TgZ(8,"section",4)(9,"app-month-year",5),t.NdJ("month",function(a){return n.getMonth(a)}),t.qZA()(),t.TgZ(10,"div",6),t.YNc(11,Ut,15,6,"table",7),t.TgZ(12,"mat-paginator",8),t.NdJ("page",function(a){return n.changePage(a)}),t.qZA()(),t.YNc(13,Ht,1,3,"app-import-database",9),t.YNc(14,Mt,1,1,"app-export-ecxel",10),t._UZ(15,"app-chart",11),t.qZA(),t.YNc(16,Jt,2,0,"button",12)),2&e&&(t.xp6(4),t.Q6J("@slideIn",void 0),t.xp6(3),t.Q6J("ngIf",n.checkPer(10)),t.xp6(2),t.Q6J("startDay",n.startDay),t.xp6(2),t.Q6J("ngIf",n.items.length+n.filter.length>0),t.xp6(1),t.Q6J("length",n.items.length)("pageSize",50)("pageSizeOptions",t.DdM(14,Bt)),t.xp6(1),t.Q6J("ngIf",n.checkPer(4)),t.xp6(1),t.Q6J("ngIf",n.checkPer(4)),t.xp6(1),t.Q6J("id","thu-chi")("label","Ph\xe2n lo\u1ea1i")("arr",n.chart)("type","bar"),t.xp6(1),t.Q6J("ngIf",n.checkPer(6)))},directives:[I.lW,N.rH,k.Hw,g.O5,U.W,bt.k,q.HP,g.sg,y.NW,H.y,v.t,Zt.x],pipes:[T.zZ,T._2],styles:[""],data:{animation:[x.Ym]}}),i})();var Y=p(92340),Kt=p(31409);let wt=(()=>{class i{constructor(){}generate(e){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var M=p(46936),Yt=p(77446),Ft=p(51511),F=function(i,s,e,n){return new(e||(e=Promise))(function(a,r){function h(c){try{u(n.next(c))}catch(_){r(_)}}function m(c){try{u(n.throw(c))}catch(_){r(_)}}function u(c){c.done?a(c.value):function o(a){return a instanceof e?a:new e(function(r){r(a)})}(c.value).then(h,m)}u((n=n.apply(i,s||[])).next())})};function Qt(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"button",30),t.NdJ("click",function(){return t.CHM(e),t.oxw().reload()}),t.TgZ(1,"mat-icon"),t._uU(2,"undo"),t.qZA()()}2&i&&t.Q6J("@slideIn",void 0)}function Ot(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"button",31),t.NdJ("click",function(){return t.CHM(e),t.oxw().saveList()}),t._uU(1," L\u01b0u "),t.qZA()}2&i&&t.Q6J("@slideX",void 0)}function Lt(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"button",32),t.NdJ("click",function(){return t.CHM(e),t.oxw().sendMail()}),t.TgZ(1,"mat-icon"),t._uU(2,"email"),t.qZA()()}2&i&&t.Q6J("@slideX",void 0)}function $t(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"button",33),t.NdJ("click",function(){return t.CHM(e),t.oxw().updateQualified()}),t.TgZ(1,"mat-icon"),t._uU(2,"thumb_up"),t.qZA()()}2&i&&t.Q6J("@slideX",void 0)}function Pt(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"button",34),t.NdJ("click",function(){return t.CHM(e),t.oxw().report()}),t.TgZ(1,"mat-icon"),t._uU(2,"file_download"),t.qZA()()}2&i&&t.Q6J("@slideX",void 0)}function Gt(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"button",35),t.NdJ("click",function(){return t.CHM(e),t.oxw().complete()}),t.TgZ(1,"mat-icon"),t._uU(2,"send"),t.qZA()()}2&i&&t.Q6J("@slideX",void 0)}function Rt(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"button",36),t.NdJ("click",function(){return t.CHM(e),t.oxw().reporUnqualified()}),t.TgZ(1,"mat-icon"),t._uU(2,"receipt"),t.qZA()()}2&i&&t.Q6J("@slideX",void 0)}function zt(i,s){1&i&&(t.TgZ(0,"h5",37),t._uU(1,"L\u1ed7i d\u1eef li\u1ec7u"),t.qZA())}function Xt(i,s){if(1&i&&(t.TgZ(0,"h5",38),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij("DANH S\xc1CH THANH TO\xc1N TI\u1ec0N \u0110I\u1ec6N M\u1eb6T TR\u1edcI ",e.bangKe.length," KH")}}function Vt(i,s){1&i&&(t.TgZ(0,"th"),t._uU(1,"L\u1ed7i"),t.qZA())}function Wt(i,s){if(1&i&&(t.TgZ(0,"td",44),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.err)}}function jt(i,s){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",41)(4,"a",42),t._uU(5),t.qZA()(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td",10),t._uU(11),t.ALo(12,"numberPipe"),t.qZA(),t.TgZ(13,"td",10),t._uU(14),t.ALo(15,"numberPipe"),t.qZA(),t.YNc(16,Wt,2,1,"td",43),t.qZA()),2&i){const e=s.$implicit,n=s.index,o=t.oxw(2);t.xp6(2),t.Oqu(n+1),t.xp6(2),t.s9C("routerLink",e._id),t.xp6(1),t.Oqu(e.MaKhachHang),t.xp6(2),t.Oqu(e.Email),t.xp6(2),t.Oqu(e.KhachHang),t.xp6(2),t.Oqu(t.lcZ(12,8,e.SanLuong)),t.xp6(3),t.Oqu(t.lcZ(15,10,e.TongTien)),t.xp6(2),t.Q6J("ngIf",2==o.step)}}function te(i,s){if(1&i&&(t.TgZ(0,"table",39)(1,"thead")(2,"tr")(3,"th"),t._uU(4,"TT"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"M\xe3 Kh\xe1ch h\xe0ng"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Email"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Kh\xe1ch h\xe0ng"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"S\u1ea3n l\u01b0\u1ee3ng"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"T\u1ed5ng ti\u1ec1n"),t.qZA(),t.YNc(15,Vt,2,0,"th",15),t.qZA()(),t.TgZ(16,"tbody"),t.YNc(17,jt,17,12,"tr",40),t.qZA()()),2&i){const e=t.oxw();t.xp6(15),t.Q6J("ngIf",2==e.step),t.xp6(2),t.Q6J("ngForOf",e.errors.length>0?e.errors:e.bangKe)}}function ee(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"mat-icon",47),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).searchText=""}),t._uU(1,"close"),t.qZA()}}function ne(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"mat-form-field"),t.YNc(1,ee,2,0,"mat-icon",45),t.TgZ(2,"input",46),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().searchText=o}),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.searchText.length>0),t.xp6(1),t.Q6J("ngModel",e.searchText)}}function ie(i,s){1&i&&(t.TgZ(0,"th"),t._uU(1,"G\u1eedi mail"),t.qZA())}function oe(i,s){1&i&&(t.TgZ(0,"th"),t._uU(1,"B\u1ea3ng k\xea"),t.qZA())}function ae(i,s){1&i&&(t.TgZ(0,"th"),t._uU(1,"Tr\u1ea1ng th\xe1i h\u1ed3 s\u01a1"),t.qZA())}const le=function(i){return{"bg-success text-center":i}};function se(i,s){if(1&i&&(t.TgZ(0,"td",55),t._uU(1),t.ALo(2,"enum"),t.qZA()),2&i){const e=t.oxw().$implicit;t.Q6J("ngClass",t.VKq(5,le,1==e.DaGuiMail)),t.xp6(1),t.Oqu(t.xi3(2,2,e.DaGuiMail,"TrangThaiEmail"))}}function re(i,s){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.TenBangKe)}}function ce(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"mat-icon",58),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw(2).onDelete(o)}),t._uU(1,"delete"),t.qZA()}}const ue=function(i){return{"text-info":i}},pe=function(i,s,e,n,o){return{"bg-warning text-center":i,"bg-info text-center":s,"bg-secondary text-center":e,"bg-primary text-center":n,"bg-success text-center":o}};function he(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"td")(2,"mat-checkbox",54),t.NdJ("change",function(o){const r=t.CHM(e).$implicit;return t.oxw(2).checkItem(o,r)}),t.qZA()(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td")(6,"a",42),t._uU(7),t.qZA()(),t.TgZ(8,"td",55),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.ALo(12,"number"),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.ALo(15,"number"),t.qZA(),t.YNc(16,se,3,7,"td",56),t.YNc(17,re,2,1,"td",51),t.TgZ(18,"td",55),t._uU(19),t.ALo(20,"enum"),t.qZA(),t.TgZ(21,"td"),t.YNc(22,ce,2,0,"mat-icon",57),t.qZA()()}if(2&i){const e=s.$implicit,n=s.index,o=t.oxw(2);t.xp6(2),t.Q6J("hidden",e.TrangThaiHoSo>1)("checked",o.selectedItems.indexOf(e)>-1),t.xp6(2),t.Oqu(n+1),t.xp6(2),t.s9C("routerLink",e._id),t.xp6(1),t.Oqu(e.MaKhachHang),t.xp6(1),t.Q6J("ngClass",t.VKq(21,ue,0==e.CoHoaDon)),t.xp6(1),t.Oqu(e.KhachHang),t.xp6(2),t.Oqu(t.lcZ(12,14,e.SanLuong)),t.xp6(3),t.Oqu(t.lcZ(15,16,e.TongTien)),t.xp6(2),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(1),t.Q6J("ngClass",t.qbA(23,pe,0==e.TrangThaiHoSo,1==e.TrangThaiHoSo,2==e.TrangThaiHoSo,3==e.TrangThaiHoSo,4==e.TrangThaiHoSo)),t.xp6(1),t.Oqu(t.xi3(20,18,e.TrangThaiHoSo,"DMTTrangThaiHoSo")),t.xp6(3),t.Q6J("ngIf",o.checkPer(2)&&e.TrangThaiHoSo<2||o.checkPer(7))}}function me(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"table",48)(1,"thead",49)(2,"tr")(3,"th")(4,"mat-checkbox",50),t.NdJ("change",function(o){return t.CHM(e),t.oxw().checkAll(o)}),t.qZA()(),t.TgZ(5,"th"),t._uU(6,"TT"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"M\xe3 kh\xe1ch h\xe0ng"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Kh\xe1ch h\xe0ng"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"S\u1ea3n l\u01b0\u1ee3ng"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"T\u1ed5ng ti\u1ec1n"),t.qZA(),t.YNc(15,ie,2,0,"th",51),t.YNc(16,oe,2,0,"th",51),t.YNc(17,ae,2,0,"th",51),t.TgZ(18,"th")(19,"mat-icon",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().reload()}),t._uU(20,"cached"),t.qZA()()()(),t.TgZ(21,"tbody"),t.YNc(22,he,23,29,"tr",53),t.ALo(23,"filter"),t.qZA(),t._UZ(24,"tfoot"),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("@slideIn",void 0),t.xp6(4),t.Q6J("checked",e.all),t.xp6(11),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(5),t.Q6J("ngForOf",t.xi3(23,7,e.filter.length>0?e.filter:e.items,e.searchText))("ngForTrackBy",e.trackByFn)}}const _e=function(){return[20,50,100,500]};function de(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"mat-paginator",59),t.NdJ("page",function(o){return t.CHM(e),t.oxw().changePage(o)}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("length",e.items.length)("pageSize",500)("pageSizeOptions",t.DdM(3,_e))}}function ge(i,s){if(1&i&&t._UZ(0,"app-import-database",60),2&i){const e=t.oxw();t.Q6J("api",e.api)("global",e.global)("form",e.bangKeForm)}}function fe(i,s){if(1&i&&t._UZ(0,"app-export-ecxel",61),2&i){const e=t.oxw();t.Q6J("dataJson",e.items)}}function Te(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"button",62),t.NdJ("click",function(){return t.CHM(e),t.oxw().resetDB()}),t._uU(1,"X\xf3a to\xe0n b\u1ed9 d\u1eef li\u1ec7u"),t.qZA()}}function xe(i,s){1&i&&t._UZ(0,"section",63)}function be(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"app-drop-files",64),t.NdJ("files",function(o){return t.CHM(e),t.oxw().onDropFile(o)})("ondragover",function(){return t.CHM(e),t.oxw().ondragover()}),t.qZA()}2&i&&t.Q6J("label","")}let Ze=(()=>{class i{constructor(e,n,o,a,r,h,m){this.plus=e,this.fb=n,this.rtSv=o,this.excelSv=a,this.docxSv=r,this.nlmtSv=h,this.xlsxTem=m,this.importForm=this.fb.group({keyWord:[,[]],_id:[,[]],TONG_TIEN:[,[l.kI.required,l.kI.pattern("^[0-9]*$")]],MA_DVIQLY:[,[]],TKHOAN_KHANG:[,[]],MA_NHANG:[,[]],TEN_NHANG:[,[]],MA_SOGCS:[,[l.kI.required]],TYLE_THUE:[,[]],DIEN_TTHU:[,[l.kI.required,l.kI.pattern("^[0-9]*$")]],SO_TIEN:[,[l.kI.required,l.kI.pattern("^[0-9]*$")]],DCHI_KHANG:[,[]],MA_KHANG:[,[l.kI.required]],TIEN_GTGT:[,[l.kI.required,l.kI.pattern("^[0-9]*$")]],TEN_KHANG:[,[l.kI.required]],NGAY_GCS:[,[]],DON_GIA:[,[l.kI.required,l.kI.pattern("^[0-9]*$")]]}),this.bangKeForm=this.fb.group({Email:[],MaKhachHang:[,[l.kI.required]],KhachHang:[,[l.kI.required]],DiaChi:[,[l.kI.required]],MaGCS:[,],ChuTaiKhoan:[],SoTaiKhoan:[],NganHang:[,[l.kI.required]],Nam:[,[l.kI.required,l.kI.pattern("^[0-9]*$")]],Thang:[,[l.kI.required,l.kI.pattern("^[0-9]*$")]],SanLuong:[,[l.kI.required,l.kI.pattern("^[0-9]*$")]],DonGia:[,[l.kI.required,l.kI.pattern("^[0-9]*$")]],TruocThue:[,[l.kI.required,l.kI.pattern("^[0-9]*$")]],Thue:[,[l.kI.required,l.kI.pattern("^[0-9]*$")]],TongTien:[,[l.kI.required,l.kI.pattern("^[0-9]*$")]],KyHieuHoaDon:[,[]],SoHoaDon:[,[]],NgayHoaDon:[,[]],TrangThai:[,],DaGuiMail:[0],NgayMuaHang:[,[]]}),this.searchText="",this.title="L\u1eadp b\u1ea3ng k\xea",this.global=!0,this.dbName="dien-luc",this.api="dmt-input",this.db=null,this.userId=this.plus.userId,this.usr=this.plus.usr,this.items=[],this.selectedItem=null,this.selectedItems=[],this.filter=[],this.chart=[],this.errors=[],this.dataInXls={},this.wordFile=null,this.startDay=new Date,this.bangKe=[],this.readFileDone=!1,this.step=0,this.TongPhatLen=0,this.ThanhTienTruocThue=0,this.Thue=0,this.ThanhTienSauThue=0,this.itemsReport=[],this.itemsReportNoBill=[],this.all=!1}ngOnInit(){this.plus.setTiTle(this.title),this.plus.IDB_InitDB(this.dbName).subscribe(e=>F(this,void 0,void 0,function*(){this.db=e,this.plus.updateRealtime(this.db,this.api,this.global),this.plus.IDB_DB_CleanTrash(e,this.api),this.plus.updateAPi.subscribe(n=>{n&&this.getIDB()})}))}getIDB(){this.filter=[],this.items=[],this.selectedItems=[],this.plus.IDB_DB_GetAllByIndexKey(this.db,this.api,"TrangThaiHoSo","<",4).subscribe(e=>{this.items=e})}xlsx(){this.xlsxTem.generate("t1")}ngOnDestroy(){console.log("Destroy",this.api),this.plus.subs.unsubscribe(),this.rtSv.leaveRoom(this.api)}saveList(){const e=this.bangKe;console.log(e),this.plus.httpPost(this.api+"/import",e,this.global).subscribe(n=>{console.log(n),this.reload()})}convertToList(){console.log("convertToList()");const e=this.dataInXls.data,n=Date.now();for(let o=0;o<e.length;o++){const a=e[o];if(this.importForm.patchValue(a),this.importForm.invalid)this.plus.alertError("Ki\u1ec3m tra l\u1ea1i d\u1eef li\u1ec7u file import");else{const r={MaKhachHang:a.MA_KHANG,MaGCS:a.MA_SOGCS,Nam:+d()(a.NGAY_GCS,"DD/MM/YYYY").format("YYYY"),Thang:+d()(a.NGAY_GCS,"DD/MM/YYYY").format("MM"),SanLuong:a.DIEN_TTHU,DonGia:a.DON_GIA,TruocThue:a.SO_TIEN,NgayMuaHang:a.NGAY_GCS,TiLeThue:a.TYLE_THUE,Thue:a.TIEN_GTGT,TongTien:a.TONG_TIEN,KyThanhToan:d()(a.NGAY_GCS,"DD/MM/YYYY").format("MM/YYYY"),DaGuiMail:0,TrangThaiThanhToan:0,TrangThaiHoSo:-1,dateModify:n+o};this.plus.IDB_DB_GetAllByIndexKey(this.db,"dmt-khach-hang","MaKhachHang","=",a.MA_KHANG).subscribe(h=>{const m=h[0];if(0==h.length)return this.plus.alertMatSnackBar(`B\u1ea1n ch\u01b0a c\xf3 d\u1eef li\u1ec7u kh\xe1ch h\xe0ng ${a.MA_KHANG}`,5e3);console.log(m,r);const u=Object.assign(m,r);if(delete u.__v,delete u._id,this.bangKeForm.patchValue(u),this.bangKeForm.invalid){console.log("bangKeForm.invalid");const c=this.plus.getErrValidateForm(this.bangKeForm);u.err=c,this.errors.push(u),this.step=2}else{console.log("bangKeForm.valid");for(let c=0;c<this.items.length;c++){const _=this.items[c];_.MaKhachHang==u.MaKhachHang&&_.Nam==u&&(console.log("if (el.MaKhachHang == body.MaKhachHang)"),u.err=`${_.MaKhachHang} \u0111\xe3 t\u1ed3n t\u1ea1i!`,this.errors.push(u))}console.log("else {  this.bangKe.push(body)"),this.bangKe.push(u)}e.length==this.bangKe.length&&(this.readFileDone=!0,this.step=this.errors.length>0?2:3,console.log(this.bangKe))})}}}onDropFile(e){console.log("onDropFile()"),this.reset();for(let n=0;n<e.length;n++)if("application/vnd.openxmlformats-officedocument.wordprocessingml.document"==e[n].type){const o=new FileReader;o.readAsArrayBuffer(e[n]),o.onloadend=()=>this.wordFile=o.result}else"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"==e[n].type?this.excelSv.toJsonArray(e[n]).then(o=>{this.dataInXls=o,this.convertToList()}):this.plus.alertError("File kh\xf4ng h\u1ee3p l\u1ec7")}sendMail(){return F(this,void 0,void 0,function*(){console.info("sendMail()");const e=this.itemsReport.concat(this.itemsReportNoBill);for(let n=0;n<e.length;n++){const o=e[n],a=this.items.indexOf(o),r=this.items[a];if(0==o.DaGuiMail&&o.Email.length>5){let h=this.nlmtSv.geneBodyMail(r,this.startDay,1);console.log(h),this.plus.load(),this.plus.httpPost("mail/dien-mat-troi",h).subscribe(m=>{const u=m.index;console.log("Mail sent: ",u,m.email),u>=0&&m.email?(this.plus.loaded(),this.items[a].DaGuiMail=1,this.nlmtSv.statusMail(r)):(this.items[a].DaGuiMail=0,this.plus.alertToasrt(m))}),yield this.plus.sleep(5e3)}}this.reload()})}report(){if(this.itemsReport.length>0){const e=this.nlmtSv.geneBodyPay(this.itemsReport,this.startDay);this.docxSv.loadFileUrl("https://thuctd.github.io/templates/BangKe.docx").then(n=>{this.docxSv.generateOne(e,n,`BangKeThang${this.month}-${this.year}`).then(o=>{})})}if(this.itemsReportNoBill.length>0){const e=this.nlmtSv.geneBodyPay(this.itemsReportNoBill,this.startDay);this.docxSv.loadFileUrl("https://thuctd.github.io/templates/BangKeNoBill.docx").then(n=>{this.docxSv.generateOne(e,n,`BangKeThang${this.month}-${this.year}`).then(o=>{})})}}reporUnqualified(){let e=[],n=[];for(let o=0;o<this.items.length;o++){const a=this.items[o];0==a.TrangThaiThanhToan&&(1==a.TrangThaiHoSo&&n.push(a),a.TrangThaiHoSo<1&&e.push(a))}if(e.length>0){const o=this.nlmtSv.geneBodyPay(e,this.startDay);this.docxSv.loadFileUrl(Y.N.templates+"BangKeChuaDuDieuKien.docx").then(a=>{this.docxSv.generateOne(o,a,"PKD").then(r=>{})})}if(n.length>0){const o=this.nlmtSv.geneBodyPay(n,this.startDay);this.docxSv.loadFileUrl(Y.N.templates+"BangKeDuDieuKien.docx").then(a=>{this.docxSv.generateOne(o,a,"PKD").then(r=>{})})}}updateQualified(){this.nlmtSv.updateQualified(this.selectedItems)}complete(){if(this.itemsReport.length>0){const e=d()(this.startDay).format("YYMMDDHHmm");this.nlmtSv.updateNameBill(this.itemsReport,e)}if(this.itemsReportNoBill.length>0){const e=d()(this.startDay).format("YYMMDDHHmm");this.nlmtSv.updateNameBill(this.itemsReportNoBill,e)}}showUnpaid(){this.items=this.items.filter(e=>e.TrangThaiHoSo<1)}checkItem(e,n){const o=this.itemsReport.indexOf(n),a=this.itemsReportNoBill.indexOf(n),r=this.selectedItems.indexOf(n);e.checked?(this.isHasBill(n),n.TrangThaiHoSo=1):(this.all=!1,n.TrangThaiHoSo=-1,o>0?this.itemsReport.splice(o,1):this.itemsReportNoBill.splice(a,1),this.selectedItems.splice(r,1))}checkAll(e){if(e.checked){this.all=!0;for(let n=0;n<this.items.length;n++){const o=this.items[n];o.TrangThaiHoSo<2&&(this.items[n].TrangThaiHoSo=1,this.isHasBill(o))}}else this.all=!1,this.itemsReport=[],this.itemsReportNoBill=[],this.selectedItems=[]}isHasBill(e){0==e.CoHoaDon?this.itemsReportNoBill.push(e):this.itemsReport.push(e),this.selectedItems.push(e)}ondragover(){document.getElementById("dropZone").setAttribute("drop-active","true")}getMonth(e){this.startDay=e,this.itemsReport=[],this.month=d()(e).month()+1,this.year=d()(e).year(),console.log(`GetMOnth:  ${this.year}${this.month}`),this.getIDB()}onEdit(e){}onDelete(e){if(confirm("B\u1ea1n mu\u1ed1n x\xf3a?")){if(1==e.TrangThaiHoSo)return this.plus.alertWarning("B\u1ea1n kh\xf4ng th\u1ec3 x\xf3a khi \u0111\xe3 g\u1eedi b\u1ea3ng k\xea");this.plus.load(),this.plus.httpDisable(this.api,e,this.global).then(o=>{this.reload()})}}search(e){this.items=e}find(e){this.items=e}checkPer(e){return this.plus.checkPer(this.api,e)}reload(){return this.plus.reload(this.dbName+"/"+this.api)}reset(){console.log("reset()"),this.plus.loaded(),this.filter=[],this.errors=[],this.selectedItems=[],this.plus.clickBtn("closeImportButton")}changePage(e){this.filter=this.items.slice(e.pageIndex*e.pageSize,(e.pageIndex+1)*e.pageSize)}trackByFn(e,n){return n}resetDB(){this.plus.resetDB(this.db,this.api),this.reload()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(b.T),t.Y36(l.qu),t.Y36(Z.i),t.Y36(Kt.x),t.Y36(B.E),t.Y36(K),t.Y36(wt))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-nlmt-input"]],decls:34,vars:20,consts:[[1,"container-fluid"],["id","back-btn","mat-raised-button","","color","primary",3,"click",4,"ngIf"],[1,"row"],["color","accent","mat-raised-button","","data-toggle","modal","data-target","#modalImport"],["mat-raised-button","","color","warn",3,"click",4,"ngIf"],["mat-raised-button","","color","warn","matTooltip","G\u1eedi mail",3,"click",4,"ngIf"],["mat-raised-button","","color","primary","matTooltip","KH \u0111\u1ee7 \u0110K",3,"click",4,"ngIf"],["mat-raised-button","","color","accent","matTooltip","Xu\u1ea5t B\u1ea3ng k\xea",3,"click",4,"ngIf"],["mat-raised-button","","color","warn","matTooltip","G\u1eedi b\u1ea3ng k\xea",3,"click",4,"ngIf"],["mat-raised-button","","matTooltip","B\u1ea3ng k\xea t\u1ed3n",3,"click",4,"ngIf"],[1,"text-right"],["class","tit bg-warning",4,"ngIf"],["class","tit",4,"ngIf"],["class","table",4,"ngIf"],[3,"db","api","filter"],[4,"ngIf"],["class","table table-hover",4,"ngIf"],[3,"length","pageSize","pageSizeOptions","page",4,"ngIf"],[3,"api","global","form",4,"ngIf"],[3,"dataJson",4,"ngIf"],["mat-button","","color","warn",3,"click",4,"ngIf"],["id","modalImport","tabindex","-1","role","dialog","aria-labelledby","modelTitleId","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content"],["type","button","id","closeImportButton","data-dismiss","modal","aria-label","Close",1,"close","text-danger"],["aria-hidden","true"],[1,"modal-body"],["class","py-3",4,"ngIf"],[1,"drop"],[3,"label","files","ondragover",4,"ngIf"],["id","back-btn","mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","warn","matTooltip","G\u1eedi mail",3,"click"],["mat-raised-button","","color","primary","matTooltip","KH \u0111\u1ee7 \u0110K",3,"click"],["mat-raised-button","","color","accent","matTooltip","Xu\u1ea5t B\u1ea3ng k\xea",3,"click"],["mat-raised-button","","color","warn","matTooltip","G\u1eedi b\u1ea3ng k\xea",3,"click"],["mat-raised-button","","matTooltip","B\u1ea3ng k\xea t\u1ed3n",3,"click"],[1,"tit","bg-warning"],[1,"tit"],[1,"table"],[4,"ngFor","ngForOf"],["scope","row"],[3,"routerLink"],["class","bg-danger",4,"ngIf"],[1,"bg-danger"],["matSuffix","","color","warn",3,"click",4,"ngIf"],["matInput","","id","search-api","placeholder","T\xecm ki\u1ebfm nhanh (F2)","value","value",3,"ngModel","ngModelChange"],["matSuffix","","color","warn",3,"click"],[1,"table","table-hover"],[1,"thead-inverse"],["color","warn",3,"checked","change"],[4,"Device"],["color","primary",3,"click"],[4,"ngFor","ngForOf","ngForTrackBy"],["color","primary",3,"hidden","checked","change"],[3,"ngClass"],[3,"ngClass",4,"Device"],["color","warn",3,"click",4,"ngIf"],["color","warn",3,"click"],[3,"length","pageSize","pageSizeOptions","page"],[3,"api","global","form"],[3,"dataJson"],["mat-button","","color","warn",3,"click"],[1,"py-3"],[3,"label","files","ondragover"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.YNc(1,Qt,3,1,"button",1),t.TgZ(2,"div",2)(3,"button",3)(4,"mat-icon"),t._uU(5,"control_point"),t.qZA()(),t.YNc(6,Ot,2,1,"button",4),t.YNc(7,Lt,3,1,"button",5),t.YNc(8,$t,3,1,"button",6),t.YNc(9,Pt,3,1,"button",7),t.YNc(10,Gt,3,1,"button",8),t.YNc(11,Rt,3,1,"button",9),t._UZ(12,"span",10),t.qZA(),t.YNc(13,zt,2,0,"h5",11),t.YNc(14,Xt,2,1,"h5",12),t.YNc(15,te,18,2,"table",13),t.TgZ(16,"app-search-table",14),t.NdJ("filter",function(a){return n.search(a)}),t.qZA(),t.TgZ(17,"div",2),t.YNc(18,ne,3,2,"mat-form-field",15),t.YNc(19,me,25,10,"table",16),t.YNc(20,de,1,4,"mat-paginator",17),t.qZA(),t.YNc(21,ge,1,3,"app-import-database",18),t.YNc(22,fe,1,1,"app-export-ecxel",19),t.YNc(23,Te,2,0,"button",20),t.qZA(),t.TgZ(24,"div",21)(25,"div",22)(26,"div",23)(27,"button",24)(28,"span",25),t._uU(29,"\xd7"),t.qZA()(),t.TgZ(30,"div",26),t.YNc(31,xe,1,0,"section",27),t.TgZ(32,"div",28),t.YNc(33,be,1,1,"app-drop-files",29),t.qZA()()()()()),2&e&&(t.xp6(1),t.Q6J("ngIf",n.step>1),t.xp6(5),t.Q6J("ngIf",n.bangKe.length>0&&0==n.errors.length),t.xp6(1),t.Q6J("ngIf",n.selectedItems.length>0),t.xp6(1),t.Q6J("ngIf",n.items.length>0),t.xp6(1),t.Q6J("ngIf",n.selectedItems.length>0),t.xp6(1),t.Q6J("ngIf",n.selectedItems.length>0),t.xp6(1),t.Q6J("ngIf",n.items.length>0),t.xp6(2),t.Q6J("ngIf",2==n.step),t.xp6(1),t.Q6J("ngIf",1==n.step),t.xp6(1),t.Q6J("ngIf",n.step>1),t.xp6(1),t.Q6J("db",n.db)("api",n.api),t.xp6(2),t.Q6J("ngIf",n.items.length+n.filter.length>0&&0==n.errors.length),t.xp6(1),t.Q6J("ngIf",n.items.length+n.filter.length>0&&0==n.errors.length),t.xp6(1),t.Q6J("ngIf",n.items.length+n.filter.length>0),t.xp6(1),t.Q6J("ngIf",n.checkPer(4)),t.xp6(1),t.Q6J("ngIf",n.checkPer(4)),t.xp6(1),t.Q6J("ngIf",n.checkPer(6)),t.xp6(8),t.Q6J("ngIf",0==n.step),t.xp6(2),t.Q6J("ngIf",0==n.bangKe.length||!n.wordFile))},directives:[g.O5,I.lW,k.Hw,w.gM,g.sg,N.yS,M.D,f.KE,f.R9,A.Nt,l.Fj,l.JJ,l.On,Yt.oG,q.HP,g.mk,y.NW,H.y,v.t,Ft.k],pipes:[T._2,T.Cf,g.JJ,T.zZ],styles:[""],data:{animation:[x.Ym,x.Mq]}}),i})();function Ce(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"button",10),t.NdJ("click",function(){return t.CHM(e),t.oxw().reload()}),t.TgZ(1,"mat-icon"),t._uU(2,"undo"),t.qZA()()}2&i&&t.Q6J("@slideIn",void 0)}function Ie(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"app-search-api",11),t.NdJ("data",function(o){return t.CHM(e),t.oxw().find(o)}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("api",e.api)}}function ke(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"mat-icon",18),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw(2).onDelete(o)}),t._uU(1,"delete"),t.qZA()}}function Ae(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"td",16),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw(2).onEdit(a)}),t._uU(2),t.qZA(),t.TgZ(3,"td",16),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw(2).onEdit(a)}),t._uU(4),t.qZA(),t.TgZ(5,"td",16),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw(2).onEdit(a)}),t._uU(6),t.ALo(7,"date"),t.qZA(),t.TgZ(8,"td",16),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw(2).onEdit(a)}),t._uU(9),t.qZA(),t.TgZ(10,"td"),t.YNc(11,ke,2,0,"mat-icon",17),t.qZA()()}if(2&i){const e=s.$implicit,n=t.oxw(2);t.xp6(2),t.Oqu(e.TaiKhoan),t.xp6(2),t.Oqu(e.NoiDung),t.xp6(2),t.Oqu(t.xi3(7,5,e.ThoiGian,"dd/MM/YYYY HH:mm")),t.xp6(3),t.Oqu(e.MaKhachHang),t.xp6(2),t.Q6J("ngIf",n.checkPer(4))}}function De(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"table",12)(1,"thead",13)(2,"tr")(3,"th"),t._uU(4,"T\xe0i kho\u1ea3n"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"N\u1ed9i dung thay \u0111\u1ed5i"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Th\u1eddi gian"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"M\xe3 kh\xe1ch h\xe0ng"),t.qZA(),t.TgZ(11,"th")(12,"mat-icon",14),t.NdJ("click",function(){return t.CHM(e),t.oxw().reload()}),t._uU(13,"cached"),t.qZA()()()(),t.TgZ(14,"tbody"),t.YNc(15,Ae,12,8,"tr",15),t.qZA()()}if(2&i){const e=t.oxw();t.Q6J("@slideIn",void 0),t.xp6(15),t.Q6J("ngForOf",e.filter.length>0?e.filter:e.items.slice(0,10))("ngForTrackBy",e.trackByFn)}}function Ee(i,s){if(1&i&&t._UZ(0,"app-export-ecxel",19),2&i){const e=t.oxw();t.Q6J("dataJson",e.items)}}function qe(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"button",20),t.NdJ("click",function(){return t.CHM(e),t.oxw().resetDB()}),t._uU(1,"X\xf3a to\xe0n b\u1ed9 d\u1eef li\u1ec7u"),t.qZA()}}const ye=function(){return[5,10,25,100]};let ve=(()=>{class i{constructor(e,n,o){this.plus=e,this.fb=n,this.rtSv=o,this.title="L\u1ecbch s\u1eed c\u1eadp nh\u1eadt",this.dbName="dien-luc",this.api="dmt-history",this.db=null,this.items=[],this.selectedItem=null,this.filter=[],this.chart=[],this.main=this.fb.group({keyWord:[,[]],_id:[,[]],TaiKhoan:[,[l.kI.required]],NoiDung:[,[l.kI.required]],ThoiGian:[,[l.kI.required]],MaKhachHang:[,[l.kI.required]]})}ngOnInit(){this.plus.setTiTle(this.title),this.plus.IDB_InitDB(this.dbName).subscribe(e=>function(i,s,e,n){return new(e||(e=Promise))(function(a,r){function h(c){try{u(n.next(c))}catch(_){r(_)}}function m(c){try{u(n.throw(c))}catch(_){r(_)}}function u(c){c.done?a(c.value):function o(a){return a instanceof e?a:new e(function(r){r(a)})}(c.value).then(h,m)}u((n=n.apply(i,s||[])).next())})}(this,void 0,void 0,function*(){this.db=e,this.getIDB(),this.plus.updateGlobalLocal(e,this.api),this.plus.updateAPi.subscribe(n=>{n&&this.getIDB()})}))}getIDB(){console.log("getIDB"),this.filter=[],this.plus.IDB_DB_GetAll(this.db,this.api).subscribe(e=>{this.items=e,this.plus.updateAPi.next(!1)})}ngOnDestroy(){console.log("Destroy",this.api),this.plus.subs.unsubscribe(),this.rtSv.leaveRoom(this.api)}save(){if(this.main.invalid)return;const e=this.main.value,n=this.plus.datetoNumObj(this.main.value,["ThoiGian"]);console.log(n),null==e._id?(delete e._id,this.plus.httpPost(this.api,n).subscribe(o=>{o.status&&this.plus.clickBtn("closeModal")})):this.plus.httpPut(this.api,n).subscribe(o=>{o.status&&this.plus.clickBtn("closeModal")})}onEdit(e){this.selectedItem=e;const n=this.plus.dateToHtmlObj(e,["ThoiGian"]);this.main.patchValue(n),this.plus.clickBtn("openModal")}onDelete(e){!confirm("B\u1ea1n mu\u1ed1n x\xf3a?")||(this.plus.load(),this.plus.httpDisable(this.api,e).then(o=>{console.log(o)}))}chooseOpt(e,n,o,a=!1){this.main.controls[n].setValue(e[o]),a&&this.main.controls[n+"ID"].setValue(e._id)}closeModal(){this.main.reset()}search(e){this.filter=e}find(e){this.items=e}checkPer(e){return this.plus.checkPer(this.api,e)}patchForm(){this.main.reset({_id:" "})}reload(){return this.plus.reload(this.dbName+"/"+this.api)}reset(){this.plus.loaded(),this.filter=[],this.getIDB(),this.main.reset({})}changePage(e){this.filter=this.items.slice(e.pageIndex*e.pageSize,(e.pageIndex+1)*e.pageSize)}trackByFn(e,n){return n}resetDB(){this.plus.resetDB(this.db,this.api)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(b.T),t.Y36(l.qu),t.Y36(Z.i))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-nlmt-history"]],decls:12,vars:11,consts:[[1,"container"],["id","add-btn","color","accent","mat-raised-button","","data-toggle","modal","data-target","#modelId",3,"click"],["id","back-btn","mat-raised-button","","color","primary",3,"click",4,"ngIf"],[3,"api","data",4,"ngIf"],[3,"db","api","filter"],[1,"row"],["class","table table-hover",4,"ngIf"],[3,"length","pageSize","pageSizeOptions","page"],[3,"dataJson",4,"ngIf"],["mat-button","","color","warn",3,"click",4,"ngIf"],["id","back-btn","mat-raised-button","","color","primary",3,"click"],[3,"api","data"],[1,"table","table-hover"],[1,"thead-inverse"],["color","primary",3,"click"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"click"],["color","warn",3,"click",4,"ngIf"],["color","warn",3,"click"],[3,"dataJson"],["mat-button","","color","warn",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"button",1),t.NdJ("click",function(){return n.reset()}),t.TgZ(2,"mat-icon"),t._uU(3,"control_point"),t.qZA()(),t.YNc(4,Ce,3,1,"button",2),t.YNc(5,Ie,1,1,"app-search-api",3),t.TgZ(6,"app-search-table",4),t.NdJ("filter",function(a){return n.search(a)}),t.qZA(),t.TgZ(7,"div",5),t.YNc(8,De,16,3,"table",6),t.TgZ(9,"mat-paginator",7),t.NdJ("page",function(a){return n.changePage(a)}),t.qZA()(),t.YNc(10,Ee,1,1,"app-export-ecxel",8),t.qZA(),t.YNc(11,qe,2,0,"button",9)),2&e&&(t.xp6(4),t.Q6J("ngIf",n.filter.length>0),t.xp6(1),t.Q6J("ngIf",n.checkPer(10)),t.xp6(1),t.Q6J("db",n.db)("api",n.api),t.xp6(2),t.Q6J("ngIf",n.items.length+n.filter.length>0),t.xp6(1),t.Q6J("length",n.items.length)("pageSize",10)("pageSizeOptions",t.DdM(10,ye)),t.xp6(1),t.Q6J("ngIf",n.checkPer(4)),t.xp6(1),t.Q6J("ngIf",n.checkPer(5)))},directives:[I.lW,k.Hw,g.O5,U.W,M.D,g.sg,y.NW,v.t],pipes:[g.uU],styles:[""],data:{animation:[x.Ym]}}),i})();function He(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"button",33),t.NdJ("click",function(){return t.CHM(e),t.oxw().reload()}),t.TgZ(1,"mat-icon"),t._uU(2,"undo"),t.qZA()()}2&i&&t.Q6J("@slideIn",void 0)}function Me(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"app-search-api",34),t.NdJ("data",function(o){return t.CHM(e),t.oxw().find(o)}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("api",e.api)}}function Je(i,s){1&i&&(t.TgZ(0,"th"),t._uU(1,"\u0110\u1ecba ch\u1ec9"),t.qZA())}function Be(i,s){1&i&&(t.TgZ(0,"th"),t._uU(1,"M\xe3 G C S"),t.qZA())}function Se(i,s){1&i&&(t.TgZ(0,"th"),t._uU(1,"Ch\u1ee7 t\xe0i kho\u1ea3n"),t.qZA())}function Ke(i,s){1&i&&(t.TgZ(0,"th"),t._uU(1,"S\u1ed1 t\xe0i kho\u1ea3n"),t.qZA())}function we(i,s){1&i&&(t.TgZ(0,"th"),t._uU(1,"Ng\xe2n h\xe0ng"),t.qZA())}function Ye(i,s){1&i&&(t.TgZ(0,"th"),t._uU(1,"Email"),t.qZA())}function Fe(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"td",40),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw(2).onEdit(o)}),t._uU(1),t.qZA()}if(2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.DiaChi)}}function Qe(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"td",40),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw(2).onEdit(o)}),t._uU(1),t.qZA()}if(2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.MaGCS)}}function Oe(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"td",40),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw(2).onEdit(o)}),t._uU(1),t.qZA()}if(2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.ChuTaiKhoan)}}function Le(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"td",40),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw(2).onEdit(o)}),t._uU(1),t.qZA()}if(2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.SoTaiKhoan)}}function $e(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"td",40),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw(2).onEdit(o)}),t._uU(1),t.qZA()}if(2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.NganHang)}}function Pe(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"td",40),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw(2).onEdit(o)}),t._uU(1),t.qZA()}if(2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.Email)}}function Ge(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"mat-icon",43),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw(2).onDelete(o)}),t._uU(1,"delete"),t.qZA()}}function Re(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"td",40),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw(2).onEdit(a)}),t._uU(2),t.qZA(),t.TgZ(3,"td",40),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw(2).onEdit(a)}),t._uU(4),t.qZA(),t.YNc(5,Fe,2,1,"td",41),t.YNc(6,Qe,2,1,"td",41),t.YNc(7,Oe,2,1,"td",41),t.YNc(8,Le,2,1,"td",41),t.YNc(9,$e,2,1,"td",41),t.YNc(10,Pe,2,1,"td",41),t.TgZ(11,"td"),t.YNc(12,Ge,2,0,"mat-icon",42),t.qZA()()}if(2&i){const e=s.$implicit,n=t.oxw(2);t.xp6(2),t.Oqu(e.MaKhachHang),t.xp6(2),t.Oqu(e.KhachHang),t.xp6(1),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",2),t.xp6(2),t.Q6J("ngIf",n.checkPer(4))}}function ze(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"table",35)(1,"thead",36)(2,"tr")(3,"th"),t._uU(4,"M\xe3 kh\xe1ch h\xe0ng"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Kh\xe1ch h\xe0ng"),t.qZA(),t.YNc(7,Je,2,0,"th",37),t.YNc(8,Be,2,0,"th",37),t.YNc(9,Se,2,0,"th",37),t.YNc(10,Ke,2,0,"th",37),t.YNc(11,we,2,0,"th",37),t.YNc(12,Ye,2,0,"th",37),t.TgZ(13,"th")(14,"mat-icon",38),t.NdJ("click",function(){return t.CHM(e),t.oxw().reload()}),t._uU(15,"cached"),t.qZA()()()(),t.TgZ(16,"tbody"),t.YNc(17,Re,13,9,"tr",39),t.qZA()()}if(2&i){const e=t.oxw();t.Q6J("@slideIn",void 0),t.xp6(7),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(5),t.Q6J("ngForOf",e.filter.length>0?e.filter:e.items.slice(0,10))("ngForTrackBy",e.trackByFn)}}function Xe(i,s){if(1&i&&t._UZ(0,"app-import-database",44),2&i){const e=t.oxw();t.Q6J("api",e.api)("global",e.global)("form",e.main)}}function Ve(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"button",45),t.NdJ("click",function(){return t.CHM(e),t.oxw().resetDB()}),t._uU(1,"X\xf3a to\xe0n b\u1ed9 d\u1eef li\u1ec7u"),t.qZA()}}function We(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"button",46),t.NdJ("click",function(){return t.CHM(e),t.oxw().save()}),t.TgZ(1,"mat-icon"),t._uU(2,"save"),t.qZA()()}2&i&&t.Q6J("@slideIn",void 0)}const je=function(){return[5,10,25,100]},tn=[{path:"",component:(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-dlxl"]],decls:2,vars:0,template:function(e,n){1&e&&(t.TgZ(0,"p"),t._uU(1,"dlxl works!"),t.qZA())},styles:[""]}),i})()},{path:"dmt-khach-hang",component:(()=>{class i{constructor(e,n,o){this.plus=e,this.fb=n,this.rtSv=o,this.main=this.fb.group({_id:[,[]],MaKhachHang:[,[l.kI.required,l.kI.minLength(5)]],KhachHang:[,[l.kI.required,l.kI.minLength(5)]],DiaChi:[,[l.kI.required,l.kI.minLength(5)]],MaGCS:[""],ChuTaiKhoan:[""],SoTaiKhoan:[""],NganHang:[""],Email:["",[l.kI.email]],CoHoaDon:[,[l.kI.required]],CCCD:[""]}),this.title="Kh\xe1ch h\xe0ng",this.dbName="dien-luc",this.global=!0,this.api="dmt-khach-hang",this.db=null,this.userId=this.plus.userId,this.usr=this.plus.usr,this.items=[],this.selectedItem=null,this.filter=[],this.chart=[]}ngOnInit(){this.plus.setTiTle(this.title),this.plus.IDB_InitDB(this.dbName).subscribe(e=>function(i,s,e,n){return new(e||(e=Promise))(function(a,r){function h(c){try{u(n.next(c))}catch(_){r(_)}}function m(c){try{u(n.throw(c))}catch(_){r(_)}}function u(c){c.done?a(c.value):function o(a){return a instanceof e?a:new e(function(r){r(a)})}(c.value).then(h,m)}u((n=n.apply(i,s||[])).next())})}(this,void 0,void 0,function*(){this.db=e,this.plus.updateRealtime(this.db,this.api,this.global),this.plus.IDB_DB_CleanTrash(e,this.api),this.plus.updateAPi.subscribe(n=>{n&&this.getIDB()})}))}getIDB(){this.filter=[],this.plus.IDB_DB_GetAll(this.db,this.api).subscribe(e=>{this.items=e,console.log(this.items)})}ngOnDestroy(){console.log("Destroy",this.api),this.plus.subs.unsubscribe(),this.rtSv.leaveRoom(this.api)}save(){if(this.main.invalid)return;const e=this.main.value;if(null==e._id)delete e._id,this.plus.httpPost(this.api,e,this.global).subscribe(n=>{n.status&&(this.plus.clickBtn("closeModal"),this.reload())});else{const n=this.plus.objVs(this.selectedItem,e);if(0===Object.keys(n).length)return this.plus.alertMatSnackBar("Kh\xf4ng c\xf3 n\u1ed9i dung n\xe0o thay \u0111\u1ed5i");this.plus.httpPut(this.api,e,this.global).subscribe(o=>{o.status&&(this.plus.clickBtn("closeModal"),this.addHistory(n),this.reload())})}}addHistory(e){const n=[];for(const a in e)n.push(this.selectedItem[a]+" => "+e[a]);const o={TaiKhoan:this.plus.user.value.fullName,NoiDung:n.join(", "),ThoiGian:Date.now(),MaKhachHang:this.selectedItem.MaKhachHang};0!=n.length&&this.plus.httpPost("dmt-history",o,!0).subscribe(a=>{})}onEdit(e){this.selectedItem=e,this.main.patchValue(e),this.plus.clickBtn("openModal")}onDelete(e){!confirm("B\u1ea1n mu\u1ed1n x\xf3a?")||(this.plus.load(),this.plus.httpDisable(this.api,e,!0).then(o=>{console.log(o)}))}chooseOpt(e,n,o,a=!1){this.main.controls[n].setValue(e[o]),a&&this.main.controls[n+"ID"].setValue(e._id)}closeModal(){this.main.reset()}search(e){this.filter=e}find(e){this.items=e}checkPer(e){return this.plus.checkPer(this.api,e)}reload(){return this.plus.reload(this.dbName+"/"+this.api)}reset(){this.plus.loaded(),this.filter=[],this.getIDB(),this.main.reset({})}changePage(e){this.filter=this.items.slice(e.pageIndex*e.pageSize,(e.pageIndex+1)*e.pageSize)}trackByFn(e,n){return n}resetDB(){this.plus.resetDB(this.db,this.api)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(b.T),t.Y36(l.qu),t.Y36(Z.i))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-nlmt-kh"]],decls:76,vars:15,consts:[[1,"container"],["id","add-btn","color","accent","mat-raised-button","","data-toggle","modal","data-target","#modelId",3,"click"],["id","back-btn","mat-raised-button","","color","primary",3,"click",4,"ngIf"],[3,"api","data",4,"ngIf"],[3,"db","api","filter"],[1,"row"],["class","table table-hover",4,"ngIf"],[3,"length","pageSize","pageSizeOptions","page"],[3,"api","global","form",4,"ngIf"],["mat-button","","color","warn",3,"click",4,"ngIf"],[3,"dataJson"],["id","openModal","type","button","data-toggle","modal","data-target","#modelId",1,"d-none"],["id","modelId","data-backdrop","static","tabindex","-1","role","dialog","aria-labelledby","modelTitleId","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-body"],[1,"container-fluid"],[3,"formGroup"],["hidden","","formControlName","_id"],["required","","type","text","autocomplete","off","matInput","","formControlName","MaKhachHang"],["matSuffix",""],["required","","type","text","autocomplete","off","matInput","","formControlName","KhachHang"],["required","","type","text","autocomplete","off","matInput","","formControlName","DiaChi"],["type","text","autocomplete","off","matInput","","formControlName","MaGCS"],["type","text","autocomplete","off","matInput","","formControlName","ChuTaiKhoan"],["type","text","autocomplete","off","matInput","","formControlName","SoTaiKhoan"],["type","text","autocomplete","off","matInput","","formControlName","NganHang"],["type","text","autocomplete","off","matInput","","formControlName","Email"],["type","text","autocomplete","off","matInput","","formControlName","CoHoaDon"],["type","text","autocomplete","off","matInput","","formControlName","CCCD"],[1,"modal-footer"],["id","closeModal","mat-raised-button","","color","primary","data-dismiss","modal",3,"click"],["mat-raised-button","","color","warn",3,"click",4,"ngIf"],["id","back-btn","mat-raised-button","","color","primary",3,"click"],[3,"api","data"],[1,"table","table-hover"],[1,"thead-inverse"],[4,"Device"],["color","primary",3,"click"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"click"],[3,"click",4,"Device"],["color","warn",3,"click",4,"ngIf"],["color","warn",3,"click"],[3,"api","global","form"],["mat-button","","color","warn",3,"click"],["mat-raised-button","","color","warn",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"button",1),t.NdJ("click",function(){return n.reset()}),t.TgZ(2,"mat-icon"),t._uU(3,"control_point"),t.qZA()(),t.YNc(4,He,3,1,"button",2),t.YNc(5,Me,1,1,"app-search-api",3),t.TgZ(6,"app-search-table",4),t.NdJ("filter",function(a){return n.search(a)}),t.qZA(),t.TgZ(7,"div",5),t.YNc(8,ze,18,9,"table",6),t.TgZ(9,"mat-paginator",7),t.NdJ("page",function(a){return n.changePage(a)}),t.qZA()(),t.YNc(10,Xe,1,3,"app-import-database",8),t.qZA(),t.YNc(11,Ve,2,0,"button",9),t._UZ(12,"app-export-ecxel",10)(13,"button",11),t.TgZ(14,"div",12)(15,"div",13)(16,"div",14)(17,"div",15)(18,"div",16)(19,"form",17),t._UZ(20,"input",18),t.TgZ(21,"mat-form-field")(22,"mat-label"),t._uU(23,"M\xe3 kh\xe1ch h\xe0ng"),t.qZA(),t._UZ(24,"input",19)(25,"span",20),t.qZA(),t.TgZ(26,"mat-form-field")(27,"mat-label"),t._uU(28,"Kh\xe1ch h\xe0ng"),t.qZA(),t._UZ(29,"input",21)(30,"span",20),t.qZA(),t.TgZ(31,"mat-form-field")(32,"mat-label"),t._uU(33,"\u0110\u1ecba ch\u1ec9"),t.qZA(),t._UZ(34,"input",22)(35,"span",20),t.qZA(),t.TgZ(36,"mat-form-field")(37,"mat-label"),t._uU(38,"M\xe3 Ghi ch\u1ec9 s\u1ed1"),t.qZA(),t._UZ(39,"input",23)(40,"span",20),t.qZA(),t.TgZ(41,"mat-form-field")(42,"mat-label"),t._uU(43,"Ch\u1ee7 t\xe0i kho\u1ea3n"),t.qZA(),t._UZ(44,"input",24)(45,"span",20),t.qZA(),t.TgZ(46,"mat-form-field")(47,"mat-label"),t._uU(48,"S\u1ed1 t\xe0i kho\u1ea3n"),t.qZA(),t._UZ(49,"input",25)(50,"span",20),t.qZA(),t.TgZ(51,"mat-form-field")(52,"mat-label"),t._uU(53,"Ng\xe2n h\xe0ng"),t.qZA(),t._UZ(54,"input",26)(55,"span",20),t.qZA(),t.TgZ(56,"mat-form-field")(57,"mat-label"),t._uU(58,"Email"),t.qZA(),t._UZ(59,"input",27)(60,"span",20),t.qZA(),t.TgZ(61,"mat-form-field")(62,"mat-label"),t._uU(63,"C\xf3 h\xf3a \u0111\u01a1n"),t.qZA(),t._UZ(64,"input",28)(65,"span",20),t.qZA(),t.TgZ(66,"mat-form-field")(67,"mat-label"),t._uU(68,"CCCD"),t.qZA(),t._UZ(69,"input",29)(70,"span",20),t.qZA()()()(),t.TgZ(71,"div",30)(72,"button",31),t.NdJ("click",function(){return n.closeModal()}),t.TgZ(73,"mat-icon"),t._uU(74,"close"),t.qZA()(),t.YNc(75,We,3,1,"button",32),t.qZA()()()()),2&e&&(t.xp6(4),t.Q6J("ngIf",n.filter.length>0),t.xp6(1),t.Q6J("ngIf",n.checkPer(10)),t.xp6(1),t.Q6J("db",n.db)("api",n.api),t.xp6(2),t.Q6J("ngIf",n.items.length+n.filter.length>0),t.xp6(1),t.Q6J("length",n.items.length)("pageSize",10)("pageSizeOptions",t.DdM(14,je)),t.xp6(1),t.Q6J("ngIf",n.checkPer(4)),t.xp6(1),t.Q6J("ngIf",n.checkPer(5)),t.xp6(1),t.Q6J("dataJson",n.items),t.xp6(7),t.Q6J("formGroup",n.main),t.xp6(53),t.Q6J("@slideIn",void 0),t.xp6(3),t.Q6J("ngIf",n.checkPer(2)&&n.main.valid))},directives:[I.lW,k.Hw,g.O5,U.W,M.D,q.HP,g.sg,y.NW,H.y,v.t,l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,f.KE,f.hX,A.Nt,l.Q7,f.R9],styles:[""],data:{animation:[x.Ym]}}),i})()},{path:"dmt-history",component:ve},{path:"dmt-input",component:Ze},{path:"dmt-input/:id",component:X},{path:"dmt-pay",component:St},{path:"dmt-pay/:id",component:xt}];let en=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[N.Bz.forChild(tn)],N.Bz]}),i})();var nn=p(83886);let on=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[g.ez,en,$.ShareModule,L.m,O.D,Q.X,nn.N]]}),i})()}}]);