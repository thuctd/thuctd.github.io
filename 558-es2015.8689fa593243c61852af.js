(self.webpackChunk_4la=self.webpackChunk_4la||[]).push([[558],{97534:function(t,i,e){"use strict";e.d(i,{F:function(){return a}});var n=e(61511),o=e(35366);let a=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[n.ez]]}),t})()},38558:function(t,i,e){"use strict";e.r(i),e.d(i,{ThuChiModule:function(){return Q}});var n=e(41007),o=e(94803),a=e(99594),r=e(35180),s=e(61511),h=e(68591),u=e(7171),c=e(16073),l=e(82393),p=e(29609),d=e.n(p),m=e(35366),g=e(66283),f=e(26756),Z=e(15812),T=e(40084),y=e(4786),A=e(27521),q=e(84521),b=e(99194),D=e(60635),k=e(71522),x=e(15980),C=e(43691),N=e(85354);function v(t,i){if(1&t&&(m.TgZ(0,"mat-option",29),m._uU(1),m.qZA()),2&t){const t=i.$implicit;m.s9C("value",t),m.xp6(1),m.hij(" ",t," ")}}function _(t,i){if(1&t&&(m.TgZ(0,"mat-option",29),m._uU(1),m.qZA()),2&t){const t=i.$implicit;m.s9C("value",t.NoiDung),m.xp6(1),m.hij("",t.NoiDung," ")}}function w(t,i){if(1&t){const t=m.EpF();m.TgZ(0,"button",30),m.NdJ("click",function(){return m.CHM(t),m.oxw().save()}),m.TgZ(1,"mat-icon"),m._uU(2,"save"),m.qZA(),m.qZA()}2&t&&m.Q6J("@slideIn",void 0)}function I(t,i){if(1&t){const t=m.EpF();m.TgZ(0,"button",31),m.NdJ("click",function(){return m.CHM(t),m.oxw().reload()}),m.TgZ(1,"mat-icon"),m._uU(2,"undo"),m.qZA(),m.qZA()}2&t&&m.Q6J("@slideIn",void 0)}function J(t,i){if(1&t){const t=m.EpF();m.TgZ(0,"mat-icon",35),m.NdJ("click",function(){m.CHM(t);const i=m.oxw().$implicit;return m.oxw().onDelete(i)}),m._uU(1,"delete"),m.qZA()}}const U=function(t){return{"text-primary":t}};function Y(t,i){if(1&t){const t=m.EpF();m.TgZ(0,"tr"),m.TgZ(1,"td",32),m.NdJ("click",function(){const i=m.CHM(t).$implicit;return m.oxw().onEdit(i)}),m._uU(2),m.ALo(3,"date"),m.qZA(),m.TgZ(4,"td",32),m.NdJ("click",function(){const i=m.CHM(t).$implicit;return m.oxw().onEdit(i)}),m._uU(5),m.qZA(),m.TgZ(6,"td",33),m.NdJ("click",function(){const i=m.CHM(t).$implicit;return m.oxw().onEdit(i)}),m._uU(7),m.ALo(8,"commas"),m.qZA(),m.TgZ(9,"td",19),m.YNc(10,J,2,0,"mat-icon",34),m.qZA(),m.qZA()}if(2&t){const t=i.$implicit,e=m.oxw();m.Q6J("@slideIn",0==e.filter.length),m.xp6(2),m.Oqu(m.xi3(3,6,t.Ngay,"dd/MM/yyyy")),m.xp6(3),m.Oqu(t.DienGiai),m.xp6(1),m.Q6J("ngClass",m.VKq(11,U,t.ThuChi)),m.xp6(1),m.hij(" ",m.lcZ(8,9,t.SoTien),""),m.xp6(3),m.Q6J("ngIf",e.checkPer(4))}}const F=[{path:"thu-chi",component:(()=>{class t{constructor(t,i){this.plus=t,this.fb=i,this.chart=[],this.ThuChiChart=[],this.main=this.fb.group({_id:[,[]],Ngay:[this.plus.dateFormat(Date.now(),"YYYY-MM-DD","x"),[c.kI.required]],DienGiai:[,[c.kI.required,c.kI.minLength(2)]],PhanLoai:["Thi\u1ebft y\u1ebfu",[c.kI.required]],SoTien:[,[c.kI.required]],ThuChi:[!1,[c.kI.required]]}),this.searchForm=this.fb.group({input:[,[c.kI.minLength(3),c.kI.maxLength(50)]]}),this.title="Thu-Chi",this.dbName="user",this.api="thu-chi",this.db=null,this.items=[],this.filter=[],this.keyWord=[],this.showForm=!1}ngOnInit(){this.plus.setTiTle(this.title),this.plus.IDB_InitDB(this.dbName).subscribe(t=>{return i=this,void 0,n=function*(){this.db=t,this.getIDB(),this.plus.updateUserLocal(t,this.api),this.plus.updateAPi.subscribe(t=>{t&&this.getIDB()})},new((e=void 0)||(e=Promise))(function(t,o){function a(t){try{s(n.next(t))}catch(i){o(i)}}function r(t){try{s(n.throw(t))}catch(i){o(i)}}function s(i){var n;i.done?t(i.value):(n=i.value,n instanceof e?n:new e(function(t){t(n)})).then(a,r)}s((n=n.apply(i,[])).next())});var i,e,n}),this.getKeyWord()}getIDB(){console.log("getIDB"),this.filter=[],this.plus.IDB_DB_GetAll(this.db,this.api).subscribe(t=>{this.items=t,this.thuChiNgay(7)})}thuChiNgay(t=1){const i=this.filter.length>0?this.filter:this.items,e=Date.now()-24*t*60*60*1e3,n=[];for(let o=0;o<i.length;o++)if(i[o].Ngay>e){const t={ThuChi:i[o].ThuChi?"Thu":"Chi",SoTien:i[o].SoTien,Ngay:d()(i[o].Ngay).format("DD/MM"),PhanLoai:i[o].PhanLoai};n.push(t)}this.ThuChiChart=this.plus.generateChart(n,"ThuChi","SoTien"),this.chart=this.plus.generateChart(n,"PhanLoai","SoTien")}ngOnDestroy(){console.log("Destroy thu-chi"),this.plus.subs.unsubscribe()}save(){if(this.main.invalid)return;let t=this.main.value;t.Ngay=Date.parse(t.Ngay),t.SoTien=1e3*t.SoTien,null!==t._id?this.plus.httpPut(this.api,t).subscribe(t=>{this.showForm=!1,this.getIDB()}):(delete t._id,this.plus.httpPost(this.api,t).subscribe(t=>{this.showForm=!1,this.getIDB()})),this.main.reset({Ngay:this.plus.dateFormat(Date.now(),"YYYY-MM-DD","x"),ThuChi:!1,PhanLoai:"Thi\u1ebft y\u1ebfu"}),this.main.updateValueAndValidity()}onEdit(t){this.main.valid||(this.showForm=!0,t.Ngay=this.plus.dateFormat(t.Ngay,"YYYY-MM-DD","x"),t.SoTien=t.SoTien/1e3,this.items=[],this.plus.scrollTop(),this.main.patchValue(t),this.filter[0]=t)}onDelete(t){confirm("B\u1ea1n mu\u1ed1n x\xf3a?")&&(this.plus.load(),this.plus.httpDisable(this.api,t).then(t=>{console.log(t)}))}selectMat(t){this.main.controls.DienGiai.setValue(t.DienGiai)}search(t){this.filter=t,this.thuChiNgay(365)}getKeyWord(){this.keyWord=[],this.main.valueChanges.subscribe(t=>{this.plus.IDB_DB_GetAll(this.db,this.api).subscribe(i=>{this.keyWord=this.plus.getKeyWord(i,"DienGiai",t.DienGiai)})})}keyWordF2(){this.keyWord=[],this.searchForm.valueChanges.subscribe(t=>{this.plus.IDB_DB_GetAll(this.db,this.api).subscribe(i=>{this.keyWord=this.plus.getKeyWord(i,"DienGiai",t.DienGiai)})})}find(t){this.items=t}checkPer(t){return this.plus.checkPer(this.api,t)}reload(){return this.plus.reload(this.dbName+"/"+this.api)}reset(){this.plus.loaded(),this.filter=[],this.getIDB(),this.main.reset({Ngay:this.plus.dateFormat(Date.now(),"YYYY-MM-DD","x"),ThuChi:!1,PhanLoai:"Thi\u1ebft y\u1ebfu"})}}return t.\u0275fac=function(i){return new(i||t)(m.Y36(l.T),m.Y36(c.qu))},t.\u0275cmp=m.Xpm({type:t,selectors:[["app-thu-chi"]],decls:60,vars:26,consts:[[1,"container"],[1,"row","justify-content-center"],[1,"col-lg-8"],[1,"card"],[3,"formGroup"],["type","text","hidden","","formControlName","_id"],[1,"row"],[1,"col-sm-6"],["required","","type","text","matInput","","formControlName","Ngay",3,"matDatepicker"],["matSuffix","",3,"for"],["Ngay",""],["required","","type","text","autocomplete","off","matInput","","formControlName","DienGiai",3,"matAutocomplete"],["autoActiveFirstOption",""],["DienGiai","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["formControlName","PhanLoai","required",""],["required","","type","number","autocomplete","off","matInput","","formControlName","SoTien",2,"text-align","right",3,"keyup.enter"],["matSuffix",""],["matPrefix","","formControlName","ThuChi","checked","false","color","warn",1,"mx-2"],[1,"text-center"],["mat-raised-button","","color","warn",3,"click",4,"ngIf"],["mat-raised-button","","color","primary","id","back-btn",3,"click",4,"ngIf"],[1,"col-md-6"],[3,"day"],[3,"id","arr","type"],[1,"table","table-hover","card","table-responsive"],[3,"db","api","keySearch","filter"],[1,"fa","fa-refresh","mx-2","text-info",3,"click"],[4,"ngFor","ngForOf"],[3,"value"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","primary","id","back-btn",3,"click"],[3,"click"],[1,"text-right",3,"ngClass","click"],["color","warn",3,"click",4,"ngIf"],["color","warn",3,"click"]],template:function(t,i){if(1&t&&(m.TgZ(0,"div",0),m.TgZ(1,"div",1),m.TgZ(2,"div",2),m.TgZ(3,"div",3),m.TgZ(4,"form",4),m._UZ(5,"input",5),m.TgZ(6,"div",6),m.TgZ(7,"div",7),m.TgZ(8,"mat-form-field"),m.TgZ(9,"mat-label"),m._uU(10,"Ng\xe0y"),m.qZA(),m._UZ(11,"input",8),m._UZ(12,"mat-datepicker-toggle",9),m._UZ(13,"mat-datepicker",null,10),m.qZA(),m.TgZ(15,"mat-form-field"),m.TgZ(16,"mat-label"),m._uU(17,"Di\u1ec5n gi\u1ea3i"),m.qZA(),m._UZ(18,"input",11),m.qZA(),m.TgZ(19,"mat-autocomplete",12,13),m.YNc(21,v,2,2,"mat-option",14),m.qZA(),m.qZA(),m.TgZ(22,"div",7),m.TgZ(23,"mat-form-field"),m.TgZ(24,"mat-label"),m._uU(25,"Ph\xe2n lo\u1ea1i"),m.qZA(),m.TgZ(26,"mat-select",15),m.YNc(27,_,2,2,"mat-option",14),m.ALo(28,"catalog"),m.qZA(),m.qZA(),m.TgZ(29,"mat-form-field"),m.TgZ(30,"mat-label"),m._uU(31),m.qZA(),m.TgZ(32,"input",16),m.NdJ("keyup.enter",function(){return i.save()}),m.qZA(),m.TgZ(33,"span",17),m._uU(34,".000"),m.qZA(),m._UZ(35,"mat-slide-toggle",18),m.qZA(),m.qZA(),m.qZA(),m.TgZ(36,"div",19),m.YNc(37,w,3,1,"button",20),m.YNc(38,I,3,1,"button",21),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(39,"div",6),m.TgZ(40,"div",22),m.TgZ(41,"app-chip",23),m.NdJ("day",function(t){return i.thuChiNgay(t)}),m.qZA(),m._UZ(42,"app-chart",24),m._UZ(43,"app-chart",24),m.qZA(),m.TgZ(44,"div",22),m.TgZ(45,"table",25),m.TgZ(46,"thead"),m.TgZ(47,"app-search-idb",26),m.NdJ("filter",function(t){return i.search(t)}),m.qZA(),m.TgZ(48,"tr"),m.TgZ(49,"th"),m._uU(50,"Ng\xe0y"),m.qZA(),m.TgZ(51,"th"),m._uU(52,"Di\u1ec5n gi\u1ea3i"),m.qZA(),m.TgZ(53,"th"),m._uU(54,"S\u1ed1 ti\u1ec1n"),m.qZA(),m.TgZ(55,"th"),m.TgZ(56,"i",27),m.NdJ("click",function(){return i.reload()}),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(57,"tbody"),m.YNc(58,Y,11,13,"tr",28),m.ALo(59,"slice"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA()),2&t){const t=m.MAs(14),e=m.MAs(20);m.xp6(2),m.Q6J("@slideIn",void 0),m.xp6(2),m.Q6J("formGroup",i.main),m.xp6(7),m.Q6J("matDatepicker",t),m.xp6(1),m.Q6J("for",t),m.xp6(6),m.Q6J("matAutocomplete",e),m.xp6(3),m.Q6J("ngForOf",i.keyWord),m.xp6(6),m.Q6J("ngForOf",m.lcZ(28,20,"ThuChi")),m.xp6(4),m.hij("S\u1ed1 ti\u1ec1n ",i.main.controls.ThuChi.value?"Thu ":"Chi",""),m.xp6(6),m.Q6J("ngIf",i.checkPer(2)&&i.main.valid),m.xp6(1),m.Q6J("ngIf",i.checkPer(2)&&i.main.valid),m.xp6(4),m.Q6J("id","thu-chi")("arr",i.chart)("type","bar"),m.xp6(1),m.Q6J("id","ThuChiChart")("arr",i.ThuChiChart)("type","doughnut"),m.xp6(4),m.Q6J("db",i.db)("api",i.api)("keySearch","DienGiai"),m.xp6(11),m.Q6J("ngForOf",m.Dn7(59,22,i.filter.length>0?i.filter:i.items,0,20))}},directives:[c._Y,c.JL,c.sg,c.Fj,c.JJ,c.u,g.KE,g.hX,f.Nt,Z.hl,c.Q7,Z.nW,g.R9,Z.Mq,T.ZL,T.XC,s.sg,y.gD,c.wV,A.Rr,g.qo,s.O5,q.Y,b.x,D.$,k.ey,x.lW,C.Hw,s.mk],pipes:[N.pW,s.OU,s.uU,N.W],styles:[""],data:{animation:[u.Y]}}),t})()}];let M=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=m.oAB({type:t}),t.\u0275inj=m.cJS({imports:[[h.Bz.forChild(F)],h.Bz]}),t})();var B=e(97534),S=e(52923);let Q=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=m.oAB({type:t}),t.\u0275inj=m.cJS({imports:[[s.ez,r.ShareModule,B.F,a.q,M,o.N,S.k,n.m]]}),t})()}}]);