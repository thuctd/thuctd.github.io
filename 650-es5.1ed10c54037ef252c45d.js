!function(){function t(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function n(t,n){for(var a=0;a<n.length;a++){var e=n[a];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function a(t,a,e){return a&&n(t.prototype,a),e&&n(t,e),t}(self.webpackChunk_4la=self.webpackChunk_4la||[]).push([[650],{66650:function(n,e,o){"use strict";o.r(e),o.d(e,{KhenThuongModule:function(){return et}});var i=o(35180),r=o(43552),l=o(52923),u=o(99594),c=o(16073),s=o(61511),p=o(7171),g=o(82393),h=o(35366),d=o(15980),f=o(43691),m=o(89274),Z=o(60635),y=o(66283),D=o(26756),v=o(15812),b=o(4786),k=o(71522),T=o(94592),x=o(69121),A=o(5047),N=o(85354);function q(t,n){if(1&t){var a=h.EpF();h.TgZ(0,"button",19),h.NdJ("click",function(){return h.CHM(a),h.oxw().reload()}),h.TgZ(1,"mat-icon"),h._uU(2,"undo"),h.qZA(),h.qZA()}2&t&&h.Q6J("@slideIn",void 0)}function _(t,n){if(1&t){var a=h.EpF();h.TgZ(0,"div",11),h.TgZ(1,"div",20),h.TgZ(2,"app-search-api",21),h.NdJ("data",function(t){return h.CHM(a),h.oxw().find(t)}),h.qZA(),h.qZA(),h.qZA()}if(2&t){var e=h.oxw();h.xp6(2),h.Q6J("api",e.api)}}function J(t,n){if(1&t){var a=h.EpF();h.TgZ(0,"button",25),h.NdJ("click",function(){return h.CHM(a),h.oxw(2).reload()}),h._uU(1,"Quay l\u1ea1i"),h.qZA()}}function I(t,n){if(1&t){var a=h.EpF();h.TgZ(0,"div",22),h.TgZ(1,"button",23),h.NdJ("click",function(){return h.CHM(a),h.oxw().chuaDangKy()}),h._uU(2,"Ch\u01b0a \u0111\u0103ng k\xfd"),h.qZA(),h.TgZ(3,"button",23),h.NdJ("click",function(){return h.CHM(a),h.oxw().chuaPhatDong()}),h._uU(4,"Ch\u01b0a ph\xe1t \u0111\u1ed9ng"),h.qZA(),h.YNc(5,J,2,0,"button",24),h.qZA()}if(2&t){var e=h.oxw();h.xp6(5),h.Q6J("ngIf",e.filter.length>0)}}function U(t,n){1&t&&(h.TgZ(0,"th"),h._uU(1,"Ng\xe0y ph\xe1t \u0111\u1ed9ng"),h.qZA())}function P(t,n){1&t&&(h.TgZ(0,"th"),h._uU(1,"H\u1ea1n \u0111\u0103ng k\xfd"),h.qZA())}function C(t,n){1&t&&(h.TgZ(0,"th"),h._uU(1,"Ng\xe0y \u0111\u0103ng k\xfd"),h.qZA())}function w(t,n){1&t&&(h.TgZ(0,"th"),h._uU(1,"Ng\xe0y \u0110L ph\xe1t \u0111\u1ed9ng"),h.qZA())}function Q(t,n){if(1&t&&(h.TgZ(0,"td"),h._uU(1),h.ALo(2,"excelDay"),h.qZA()),2&t){var a=h.oxw().$implicit;h.xp6(1),h.Oqu(h.lcZ(2,1,a.NgayPhatDong))}}function H(t,n){if(1&t&&(h.TgZ(0,"td"),h._uU(1),h.ALo(2,"excelDay"),h.qZA()),2&t){var a=h.oxw().$implicit;h.xp6(1),h.Oqu(h.lcZ(2,1,a.HanDangKy))}}function B(t,n){if(1&t&&(h.TgZ(0,"td"),h._uU(1),h.ALo(2,"excelDay"),h.qZA()),2&t){var a=h.oxw().$implicit;h.xp6(1),h.Oqu(h.lcZ(2,1,a.NgayDLDangKy))}}function L(t,n){if(1&t&&(h.TgZ(0,"td"),h._uU(1),h.ALo(2,"excelDay"),h.qZA()),2&t){var a=h.oxw().$implicit;h.xp6(1),h.Oqu(h.lcZ(2,1,a.NgayDLPhatDong))}}function Y(t,n){if(1&t){var a=h.EpF();h.TgZ(0,"tr",30),h.NdJ("click",function(){var t=h.CHM(a).$implicit;return h.oxw(2).onEdit(t)}),h.TgZ(1,"td"),h._uU(2),h.qZA(),h.YNc(3,Q,3,3,"td",13),h.TgZ(4,"td"),h._uU(5),h.qZA(),h.YNc(6,H,3,3,"td",13),h.YNc(7,B,3,3,"td",13),h.YNc(8,L,3,3,"td",13),h.qZA()}if(2&t){var e=n.$implicit,o=h.oxw(2);h.Q6J("@slideIn",void 0),h.xp6(2),h.hij(" ",e.PhongTrao,""),h.xp6(1),h.Q6J("ngIf",o.device),h.xp6(2),h.Oqu(e.PhongChuTri),h.xp6(1),h.Q6J("ngIf",o.device),h.xp6(1),h.Q6J("ngIf",o.device),h.xp6(1),h.Q6J("ngIf",o.device)}}function F(t,n){if(1&t){var a=h.EpF();h.TgZ(0,"div",11),h.TgZ(1,"table",26),h.TgZ(2,"thead",27),h.TgZ(3,"app-search-idb",28),h.NdJ("filter",function(t){return h.CHM(a),h.oxw().search(t)}),h.qZA(),h.TgZ(4,"tr"),h.TgZ(5,"th"),h._uU(6,"Phong tr\xe0o"),h.qZA(),h.YNc(7,U,2,0,"th",13),h.TgZ(8,"th"),h._uU(9,"Ph\xf2ng ch\u1ee7 tr\xec"),h.qZA(),h.YNc(10,P,2,0,"th",13),h.YNc(11,C,2,0,"th",13),h.YNc(12,w,2,0,"th",13),h.qZA(),h.qZA(),h.TgZ(13,"tbody"),h.YNc(14,Y,9,7,"tr",29),h.qZA(),h.qZA(),h.qZA()}if(2&t){var e=h.oxw();h.Q6J("@slideIn",void 0),h.xp6(3),h.Q6J("db",e.db)("api",e.api)("keySearch","PhongTrao"),h.xp6(4),h.Q6J("ngIf",e.device),h.xp6(3),h.Q6J("ngIf",e.device),h.xp6(1),h.Q6J("ngIf",e.device),h.xp6(1),h.Q6J("ngIf",e.device),h.xp6(2),h.Q6J("ngForOf",e.filter.length>0?e.filter:e.items.slice(0,10))}}function M(t,n){if(1&t&&(h.TgZ(0,"mat-option",53),h._uU(1),h.qZA()),2&t){var a=n.$implicit;h.s9C("value",a.NoiDung),h.xp6(1),h.hij("",a.NoiDung," ")}}function K(t,n){if(1&t&&(h.TgZ(0,"div"),h.TgZ(1,"mat-form-field",31),h.TgZ(2,"mat-label"),h._uU(3,"_id"),h.qZA(),h._UZ(4,"input",32),h.qZA(),h.TgZ(5,"mat-form-field"),h.TgZ(6,"mat-label"),h._uU(7,"Phong tr\xe0o"),h.qZA(),h._UZ(8,"textarea",33),h.qZA(),h.TgZ(9,"div",11),h.TgZ(10,"div",34),h.TgZ(11,"mat-form-field"),h.TgZ(12,"mat-label"),h._uU(13,"S\u1ed1 ph\xe1t \u0111\u1ed9ng"),h.qZA(),h._UZ(14,"input",35),h.qZA(),h.TgZ(15,"mat-form-field"),h.TgZ(16,"mat-label"),h._uU(17,"Ng\xe0y ph\xe1t \u0111\u1ed9ng"),h.qZA(),h._UZ(18,"input",36),h._UZ(19,"mat-datepicker-toggle",37),h._UZ(20,"mat-datepicker",null,38),h.qZA(),h.TgZ(22,"mat-form-field"),h.TgZ(23,"mat-label"),h._uU(24,"Ph\xf2ng ch\u1ee7 tr\xec"),h.qZA(),h.TgZ(25,"mat-select",39),h.YNc(26,M,2,2,"mat-option",40),h.ALo(27,"catalog"),h.qZA(),h.qZA(),h.TgZ(28,"mat-form-field"),h.TgZ(29,"mat-label"),h._uU(30,"H\u1ea1n \u0111\u0103ng k\xfd"),h.qZA(),h._UZ(31,"input",41),h._UZ(32,"mat-datepicker-toggle",37),h._UZ(33,"mat-datepicker",null,42),h.qZA(),h.TgZ(35,"mat-form-field"),h.TgZ(36,"mat-label"),h._uU(37,"H\u1ea1n b\xe1o c\xe1o"),h.qZA(),h._UZ(38,"input",43),h._UZ(39,"mat-datepicker-toggle",37),h._UZ(40,"mat-datepicker",null,44),h.qZA(),h.qZA(),h.TgZ(42,"div",34),h.TgZ(43,"mat-form-field"),h.TgZ(44,"mat-label"),h._uU(45,"Ng\xe0y \u0110L \u0111\u0103ng k\xfd"),h.qZA(),h._UZ(46,"input",45),h._UZ(47,"mat-datepicker-toggle",37),h._UZ(48,"mat-datepicker",null,46),h.qZA(),h.TgZ(50,"mat-form-field"),h.TgZ(51,"mat-label"),h._uU(52,"S\u1ed1 \u0110L \u0111\u0103ng k\xfd"),h.qZA(),h._UZ(53,"input",47),h.qZA(),h.TgZ(54,"mat-form-field"),h.TgZ(55,"mat-label"),h._uU(56,"Ng\xe0y \u0110L ph\xe1t \u0111\u1ed9ng"),h.qZA(),h._UZ(57,"input",48),h._UZ(58,"mat-datepicker-toggle",37),h._UZ(59,"mat-datepicker",null,49),h.qZA(),h.TgZ(61,"mat-form-field"),h.TgZ(62,"mat-label"),h._uU(63,"S\u1ed1 \u0110L ph\xe1t \u0111\u1ed9ng"),h.qZA(),h._UZ(64,"input",50),h.qZA(),h.TgZ(65,"mat-form-field"),h.TgZ(66,"mat-label"),h._uU(67,"Ng\xe0y \u0110L b\xe1o c\xe1o"),h.qZA(),h._UZ(68,"input",51),h._UZ(69,"mat-datepicker-toggle",37),h._UZ(70,"mat-datepicker",null,52),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&t){var a=h.MAs(21),e=h.MAs(34),o=h.MAs(41),i=h.MAs(49),r=h.MAs(60),l=h.MAs(71);h.Q6J("@slideIn",void 0),h.xp6(18),h.Q6J("matDatepicker",a),h.xp6(1),h.Q6J("for",a),h.xp6(7),h.Q6J("ngForOf",h.lcZ(27,14,"phongban")),h.xp6(5),h.Q6J("matDatepicker",e),h.xp6(1),h.Q6J("for",e),h.xp6(6),h.Q6J("matDatepicker",o),h.xp6(1),h.Q6J("for",o),h.xp6(7),h.Q6J("matDatepicker",i),h.xp6(1),h.Q6J("for",i),h.xp6(10),h.Q6J("matDatepicker",r),h.xp6(1),h.Q6J("for",r),h.xp6(10),h.Q6J("matDatepicker",l),h.xp6(1),h.Q6J("for",l)}}function S(t,n){if(1&t){var a=h.EpF();h.TgZ(0,"button",58),h.NdJ("click",function(){return h.CHM(a),h.oxw(2).import()}),h._uU(1,"Import"),h.qZA()}}function E(t,n){if(1&t){var a=h.EpF();h.TgZ(0,"div",54),h._UZ(1,"app-office3"),h.TgZ(2,"app-export-ecxel",55),h.NdJ("click",function(){return h.CHM(a),h.oxw().export()}),h.qZA(),h.TgZ(3,"app-import-excel",56),h.NdJ("xls",function(t){return h.CHM(a),h.oxw().selectedFile(t)}),h.qZA(),h.YNc(4,S,2,0,"button",57),h.qZA()}if(2&t){var e=h.oxw();h.xp6(2),h.Q6J("dataJson",e.items),h.xp6(1),h.Q6J("dbName",e.dbName)("api",e.api)("form",e.main),h.xp6(1),h.Q6J("ngIf",e.checkPer(2)&&e.main.valid)}}function O(t,n){if(1&t){var a=h.EpF();h.TgZ(0,"button",59),h.NdJ("click",function(){return h.CHM(a),h.oxw().save()}),h.TgZ(1,"mat-icon"),h._uU(2,"save"),h.qZA(),h.qZA()}2&t&&h.Q6J("@slideIn",void 0)}var j=function(){var n=function(){function n(a,e){t(this,n),this.plus=a,this.fb=e,this.searchForm=this.fb.group({input:[,[c.kI.minLength(3),c.kI.maxLength(50)]]}),this.main=this.fb.group({_id:[,[]],PhongTrao:[,[c.kI.required]],SoPhatDong:[,[c.kI.required]],NgayPhatDong:[this.plus.dateFormat(Date.now(),"YYYY-MM-DD","x"),[c.kI.required]],PhongChuTri:[,[c.kI.required]],HanDangKy:[this.plus.dateFormat(Date.now()+10368e5,"YYYY-MM-DD","x"),[c.kI.required]],NgayDLPhatDong:[,[]],SoDLPhatDong:[,[]],NgayDLDangKy:[,[]],SoDLDangKy:[,[]],HanBaoCao:[,[]],SoBaoCao:[,[]],NgayBaoCao:[,[]]}),this.title="Phong tr\xe0o thi \u0111ua",this.dbName="khen-thuong",this.api="phong-trao",this.db=null,this.global=!0,this.items=[],this.filter=[],this.chart=[],this.importData=[],this.errorData=[],this.showInput=!1,this.device=this.plus.fullScreen}return a(n,[{key:"ngOnInit",value:function(){var t=this;console.log(this.device,screen.width),this.plus.setTiTle(this.title),this.plus.IDB_InitDB(this.dbName,this.global).subscribe(function(n){console.log(n),t.db=n,t.plus.updateGlobalLocal(n,t.api),t.plus.updateAPi.subscribe(function(n){t.getData()})})}},{key:"ngOnDestroy",value:function(){console.log("Destroy "+this.api),this.plus.subs.unsubscribe()}},{key:"getData",value:function(){var t=this;this.plus.IDB_DB_GetAll(this.db,this.api).subscribe(function(n){t.items=n})}},{key:"save",value:function(){var t=this,n=this.main.value;n.NgayPhatDong=this.plus.dateHtmlToXls(n.NgayPhatDong),n.HanDangKy=this.plus.dateHtmlToXls(n.HanDangKy),n.NgayDLPhatDong=this.plus.dateHtmlToXls(n.NgayDLPhatDong),n.NgayDLDangKy=this.plus.dateHtmlToXls(n.NgayDLDangKy),n.HanBaoCao=this.plus.dateHtmlToXls(n.HanBaoCao),n.NgayBaoCao=this.plus.dateHtmlToXls(n.NgayBaoCao),null!==n._id?this.plus.httpPut(this.api,n,this.global).subscribe(function(n){t.reset()}):(delete n._id,this.plus.httpPost(this.api,n,this.global).subscribe(function(n){t.reset()}))}},{key:"onEdit",value:function(t){var n=Object.assign({},t);n.NgayPhatDong=this.plus.datexlsToHtml(n.NgayPhatDong),n.HanDangKy=this.plus.datexlsToHtml(n.HanDangKy),n.NgayDLPhatDong=this.plus.datexlsToHtml(n.NgayDLPhatDong),n.NgayDLDangKy=this.plus.datexlsToHtml(n.NgayDLDangKy),n.HanBaoCao=this.plus.datexlsToHtml(n.HanBaoCao),n.NgayBaoCao=this.plus.datexlsToHtml(n.NgayBaoCao),this.item=n,this.main.patchValue(n),this.plus.clickBtn("modal"),this.plus.scrollTop()}},{key:"onDelete",value:function(t){confirm("B\u1ea1n mu\u1ed1n x\xf3a?")&&(this.plus.load(),this.plus.httpDisable(this.api,t,this.global).then(function(t){console.log(t)}))}},{key:"initForm",value:function(){this.main.reset({NgayPhatDong:this.plus.dateFormat(Date.now(),"YYYY-MM-DD","x"),HanDangKy:this.plus.dateFormat(Date.now()+10368e5,"YYYY-MM-DD","x")})}},{key:"find",value:function(t){this.items=t}},{key:"checkPer",value:function(t){return this.plus.checkPer(this.api,t)}},{key:"reload",value:function(){return this.plus.reload(this.dbName+"/"+this.api)}},{key:"report",value:function(){}},{key:"search",value:function(t){this.filter=t}},{key:"selectedFile",value:function(t){var n=this;t.forEach(function(t){n.importData.push(t)}),this.items=this.importData}},{key:"import",value:function(){var t=this;console.log(this.importData),this.plus.httpImport(this.api,this.importData).then(function(n){t.plus.alertSuccess("Import th\xe0nh c\xf4ng!"),t.reload()})}},{key:"export",value:function(){console.log("x")}},{key:"reset",value:function(){this.plus.loaded(),this.filter=[],this.importData=[],this.errorData=[],this.main.reset(),this.showInput=!1,this.plus.clickBtn("closeModal")}},{key:"chuaDangKy",value:function(){this.showInput=!1,this.filter=this.items.filter(function(t){return null==t.NgayDLDangKy||t.NgayDLDangKy<t.NgayPhatDong}),0==this.filter.length&&this.plus.alertMatSnackBar("\u0110\xe3 th\u1ef1c hi\u1ec7n \u0111\u0103ng k\xfd xong!")}},{key:"chuaPhatDong",value:function(){this.showInput=!1,this.filter=this.items.filter(function(t){return null==t.NgayDLPhatDong||t.NgayDLPhatDong<44e3}),0==this.filter.length&&this.plus.alertMatSnackBar("\u0110\xe3 th\u1ef1c hi\u1ec7n ph\xe1t \u0111\u1ed9ng xong!")}}]),n}();return n.\u0275fac=function(t){return new(t||n)(h.Y36(g.T),h.Y36(c.qu))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-phong-trao"]],decls:25,vars:11,consts:[[1,"container"],["id","add-btn","color","accent","mat-raised-button","","data-toggle","modal","data-target","#modelId",3,"click"],["id","back-btn","mat-raised-button","","color","primary",3,"click",4,"ngIf"],["class","row",4,"ngIf"],["class","row justify-content-center",4,"ngIf"],["type","button","id","modal","data-toggle","modal","data-target","#modelId",1,"d-none"],["id","modelId","tabindex","1","role","dialog","aria-labelledby","modelTitleId","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-body"],[1,"container-fluid"],[1,"row"],[3,"formGroup"],[4,"ngIf"],["class","import",4,"ngIf"],[1,"text-center","example-button-row"],[1,"modal-footer","justify-content-center"],["id","closeModal","mat-raised-button","","color","primary","data-dismiss","modal"],["mat-raised-button","","color","warn",3,"click",4,"ngIf"],["id","back-btn","mat-raised-button","","color","primary",3,"click"],[1,"col"],[3,"api","data"],[1,"row","justify-content-center"],["mat-raised-button","","color","accent",3,"click"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",3,"click"],[1,"table","card","table-hover","table-responsive"],[1,"thead-inverse"],[3,"db","api","keySearch","filter"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["hidden",""],["type","0","autocomplete","off","matInput","","formControlName","_id"],["matInput","","formControlName","PhongTrao"],[1,"col-sm-6"],["type","true ","autocomplete","off","matInput","","formControlName","SoPhatDong"],["matInput","","formControlName","NgayPhatDong",3,"matDatepicker"],["matSuffix","",3,"for"],["NgayPhatDong",""],["formControlName","PhongChuTri"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","HanDangKy",3,"matDatepicker"],["HanDangKy",""],["matInput","","formControlName","HanBaoCao",3,"matDatepicker"],["HanBaoCao",""],["matInput","","formControlName","NgayDLDangKy",3,"matDatepicker"],["NgayDLDangKy",""],["type","0","autocomplete","off","matInput","","formControlName","SoDLDangKy"],["matInput","","formControlName","NgayDLPhatDong",3,"matDatepicker"],["NgayDLPhatDong",""],["type","0","autocomplete","off","matInput","","formControlName","SoDLPhatDong"],["matInput","","formControlName","NgayBaoCao",3,"matDatepicker"],["NgayBaoCao",""],[3,"value"],[1,"import"],[3,"dataJson","click"],[3,"dbName","api","form","xls"],["style","margin: 8px 8px 8px 0;","mat-raised-button","","color","warn",3,"click",4,"ngIf"],["mat-raised-button","","color","warn",2,"margin","8px 8px 8px 0",3,"click"],["mat-raised-button","","color","warn",3,"click"]],template:function(t,n){1&t&&(h.TgZ(0,"div",0),h.TgZ(1,"button",1),h.NdJ("click",function(){return n.initForm()}),h.TgZ(2,"mat-icon"),h._uU(3,"control_point"),h.qZA(),h.qZA(),h.YNc(4,q,3,1,"button",2),h.YNc(5,_,3,1,"div",3),h.YNc(6,I,6,1,"div",4),h.YNc(7,F,15,9,"div",3),h.qZA(),h.TgZ(8,"button",5),h._uU(9," Launch "),h.qZA(),h.TgZ(10,"div",6),h.TgZ(11,"div",7),h.TgZ(12,"div",8),h.TgZ(13,"div",9),h.TgZ(14,"div",10),h.TgZ(15,"div",11),h.TgZ(16,"form",12),h.YNc(17,K,72,16,"div",13),h.qZA(),h.YNc(18,E,5,5,"div",14),h._UZ(19,"div",15),h.qZA(),h.qZA(),h.qZA(),h.TgZ(20,"div",16),h.TgZ(21,"button",17),h.TgZ(22,"mat-icon"),h._uU(23,"close"),h.qZA(),h.qZA(),h.YNc(24,O,3,1,"button",18),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&t&&(h.xp6(4),h.Q6J("ngIf",n.filter.length>0),h.xp6(1),h.Q6J("ngIf",n.checkPer(4)),h.xp6(1),h.Q6J("ngIf",0==n.filter.length),h.xp6(1),h.Q6J("ngIf",n.items.length+n.filter.length>0),h.xp6(8),h.Q6J("@slideIn",void 0),h.xp6(1),h.Q6J("formGroup",n.main),h.xp6(1),h.Q6J("ngIf",n.items.length>0||n.filter.length>0),h.xp6(1),h.Q6J("ngIf",n.checkPer(4)),h.xp6(2),h.Q6J("@slideIn",void 0),h.xp6(1),h.Q6J("@slideIn",void 0),h.xp6(3),h.Q6J("ngIf",n.checkPer(2)&&n.main.valid))},directives:[d.lW,f.Hw,s.O5,c._Y,c.JL,c.sg,m.W,Z.$,s.sg,y.KE,y.hX,D.Nt,c.Fj,c.JJ,c.u,v.hl,v.nW,y.R9,v.Mq,b.gD,k.ey,T.l,x.t,A.a],pipes:[N.cf,N.pW],styles:[""],data:{animation:[p.Y,p.M]}}),n}(),X=o(68591),W=o(99194);function $(t,n){if(1&t){var a=h.EpF();h.TgZ(0,"div",2),h.TgZ(1,"button",5),h.NdJ("click",function(){return h.CHM(a),h.oxw().resetPhongTrao()}),h._uU(2,"PhongTrao"),h.qZA(),h.qZA()}}var G,R,z=[{path:"",component:(G=function(){function n(a){t(this,n),this.plus=a,this.db=null,this.dbName="khen-thuong",this.isAdmin=this.plus.isAdmin(),this.chart=[],this.chuaPhatDong=[],this.chuaDangKy=[]}return a(n,[{key:"ngOnInit",value:function(){var t=this;this.plus.IDB_InitDB(this.dbName,!0).subscribe(function(n){t.db=n,t.getData()})}},{key:"getData",value:function(){var t=this;this.plus.IDB_DB_GetAll(this.db,"phong-trao").subscribe(function(n){t.chart=t.plus.generateChart(n,"PhongChuTri","SoPhatDong",!0),t.chuaDangKy=t.plus.generateChart(n.filter(function(t){return null==t.NgayDLDangKy||t.NgayDLDangKy<t.NgayPhatDong}),"PhongChuTri","SoPhatDong",!0),t.chuaPhatDong=t.plus.generateChart(n.filter(function(t){return null==t.NgayDLPhatDong||t.NgayDLPhatDong<44e3}),"PhongChuTri","SoPhatDong",!0)})}},{key:"resetPhongTrao",value:function(){var t=this;if(confirm("Reset DB?")){var n="phong-trao";this.plus.httpDelete(n,"del").subscribe(function(a){console.log("Clear DB"),t.plus.FBS_PostByUser(n,0).then(function(a){console.log("Clear FBS"),console.log(a),t.plus.IDB_DB_ClearCollection(t.db,n).subscribe(function(t){console.log("Clear IDB")})})})}}},{key:"resetHangHoa",value:function(){var t=this;if(confirm("Reset DB?")){var n="hang-hoa";this.plus.httpDelete(n,"del").subscribe(function(a){console.log("Clear DB"),t.plus.FBS_PostByUser(n,0).then(function(a){console.log("Clear FBS"),console.log(a),t.plus.IDB_DB_ClearCollection(t.db,n).subscribe(function(t){console.log("Clear IDB")})})})}}},{key:"checkPer",value:function(t,n){return this.plus.checkPer(t,n)}}]),n}(),G.\u0275fac=function(t){return new(t||G)(h.Y36(g.T))},G.\u0275cmp=h.Xpm({type:G,selectors:[["app-khen-thuong"]],decls:11,vars:13,consts:[[1,"container"],["class","row",4,"ngIf"],[1,"row"],[1,"col-lg-"],[3,"id","arr","type"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(t,n){1&t&&(h.TgZ(0,"div",0),h.YNc(1,$,3,0,"div",1),h.qZA(),h.TgZ(2,"div",2),h.TgZ(3,"div",3),h._UZ(4,"app-chart",4),h.qZA(),h.TgZ(5,"div",3),h._UZ(6,"app-chart",4),h.qZA(),h.TgZ(7,"div",3),h._UZ(8,"app-chart",4),h.qZA(),h.TgZ(9,"div",3),h._UZ(10,"app-chart",4),h.qZA(),h.qZA()),2&t&&(h.xp6(1),h.Q6J("ngIf",n.isAdmin),h.xp6(3),h.Q6J("id","PhongTrao")("arr",n.chart)("type","bar"),h.xp6(2),h.Q6J("id","PhongTrao2")("arr",n.chart)("type","doughnut"),h.xp6(2),h.Q6J("id","chuaDangKy")("arr",n.chuaDangKy)("type","doughnut"),h.xp6(2),h.Q6J("id","chuaPhatDong")("arr",n.chuaPhatDong)("type","doughnut"))},directives:[s.O5,W.x],styles:[""]}),G)},{path:"phong-trao",component:j}],V=function(){var n=function n(){t(this,n)};return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[X.Bz.forChild(z)],X.Bz]}),n}(),tt=o(41007),nt=o(14083),at=o(94803),et=((R=function n(){t(this,n)}).\u0275fac=function(t){return new(t||R)},R.\u0275mod=h.oAB({type:R}),R.\u0275inj=h.cJS({providers:[],imports:[[s.ez,i.ShareModule,V,c.UX,u.q,tt.m,l.k,r.D,nt.UltisModule,at.N]]}),R)},69121:function(n,e,o){"use strict";o.d(e,{t:function(){return p}});var i=o(82393),r=o(31153),l=o(35366),u=o(15980),c=o(61511);function s(t,n){if(1&t){var a=l.EpF();l.TgZ(0,"button",0),l.NdJ("click",function(){return l.CHM(a),l.oxw().exportToJsonFile()}),l._uU(1,"Export Json"),l.qZA()}}var p=function(){var n=function(){function n(a){t(this,n),this.plus=a}return a(n,[{key:"ngOnInit",value:function(){}},{key:"export",value:function(){var t=[];this.dataJson.forEach(function(n){delete n.dateModify,delete n.status,delete n.sync,delete n.canEdit,delete n.keyWord,delete n.__v,t.push(n)});var n=r.utils.json_to_sheet(t),a=r.utils.book_new();r.utils.book_append_sheet(a,n,"Sheet1"),r.writeFile(a,"4la-"+Date.now()+".xlsx")}},{key:"exportToJsonFile",value:function(){for(var t=0;t<this.dataJson.length;t++)delete this.dataJson[t].dateModify,delete this.dataJson[t].canEdit,delete this.dataJson[t].keyWord;var n=JSON.stringify(this.dataJson),a="data:application/json;charset=utf-8,"+encodeURIComponent(n),e="4la-"+Date.now()+".json",o=document.createElement("a");o.setAttribute("href",a),o.setAttribute("download",e),o.click()}},{key:"check",value:function(){return this.plus.checkPer("admin",4)}}]),n}();return n.\u0275fac=function(t){return new(t||n)(l.Y36(i.T))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-export-ecxel"]],inputs:{dataJson:"dataJson"},decls:3,vars:1,consts:[["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"]],template:function(t,n){1&t&&(l.TgZ(0,"button",0),l.NdJ("click",function(){return n.export()}),l._uU(1,"Export"),l.qZA(),l.YNc(2,s,2,0,"button",1)),2&t&&(l.xp6(2),l.Q6J("ngIf",n.check()))},directives:[u.lW,c.O5],styles:[""]}),n}()},43552:function(n,a,e){"use strict";e.d(a,{D:function(){return u}});var o=e(99594),i=e(61511),r=e(16073),l=e(35366),u=function(){var n=function n(){t(this,n)};return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[i.ez,r.u5,o.q]]}),n}()},89274:function(n,e,o){"use strict";o.d(e,{W:function(){return D}});var i=o(35366),r=o(16073),l=o(47701),u=o(79996),c=o(56998),s=o(47727),p=o(82393),g=o(29063),h=o(66283),d=o(26756),f=o(61511),m=o(15980),Z=o(43691);function y(t,n){if(1&t){var a=i.EpF();i.TgZ(0,"button",4),i.NdJ("click",function(){return i.CHM(a),i.oxw().reset()}),i.TgZ(1,"mat-icon"),i._uU(2,"x"),i.qZA(),i.qZA()}}var D=function(){var n=function(){function n(a,e,o){t(this,n),this.plus=a,this.fb=e,this.http=o,this.data=new i.vpe,this.searchtxt=this.plus.search.getValue().what,this.searchForm=this.fb.group({what:["",[r.kI.required,r.kI.minLength(3),r.kI.maxLength(100)]]})}return a(n,[{key:"ngOnInit",value:function(){this.find()}},{key:"find",value:function(){var t=this;this.searchForm.valueChanges.pipe((0,l.b)(1e3)).subscribe(function(n){t.searchForm.valid?(t.plus.load(),n.what=t.plus.removeAccents(n.what),t.plus.search.next(n),t.httpPost(t.api+"/find",n).subscribe(function(n){n.data&&t.data.emit(t.plus.Crypt_DecryptRest(n)),t.plus.alertToasrt(n)},function(n){return t.reset()})):t.plus.loaded()})}},{key:"reset",value:function(){this.plus.loaded(),this.searchForm.reset()}},{key:"httpPost",value:function(t,n){var a=this;return console.log("%FIND -> "+t,"font-style: italic; color:green",n),this.http.post(this.plus.getApiUrl(t),n,this.plus.getHeader()).pipe((0,u.U)(function(e){return a.plus.logger(t+"PUT",n),e}),(0,c.X)(1),(0,s.K)(function(e){throw a.plus.loaded(),a.plus.alertError("Kh\xf4ng c\xf3 ph\u1ea3n h\u1ed3i!"),a.plus.logger(t+"POST",n,!1),e}))}}]),n}();return n.\u0275fac=function(t){return new(t||n)(i.Y36(p.T),i.Y36(r.qu),i.Y36(g.eN))},n.\u0275cmp=i.Xpm({type:n,selectors:[["app-search-api"]],inputs:{api:"api"},outputs:{data:"data"},decls:6,vars:2,consts:[[1,"form-group","search",3,"formGroup"],[1,"example-form-field"],["matInput","","type","text","formControlName","what"],["mat-button","","matSuffix","","mat-icon-button","",3,"click",4,"ngIf"],["mat-button","","matSuffix","","mat-icon-button","",3,"click"]],template:function(t,n){1&t&&(i.TgZ(0,"div",0),i.TgZ(1,"mat-form-field",1),i.TgZ(2,"mat-label"),i._uU(3,"T\xecm ki\u1ebfm n\xe2ng cao"),i.qZA(),i._UZ(4,"input",2),i.YNc(5,y,3,0,"button",3),i.qZA(),i.qZA()),2&t&&(i.Q6J("formGroup",n.searchForm),i.xp6(5),i.Q6J("ngIf",n.searchForm.dirty))},directives:[r.JL,r.sg,h.KE,h.hX,d.Nt,r.Fj,r.JJ,r.u,f.O5,m.lW,h.R9,Z.Hw],styles:[".search[_ngcontent-%COMP%]{width:300px;transition:width .4s ease-in-out}"]}),n}()}}])}();