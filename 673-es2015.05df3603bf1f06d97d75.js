"use strict";(self.webpackChunk_4la=self.webpackChunk_4la||[]).push([[673],{12940:function(t,n,i){i.r(n),i.d(n,{BanHangModule:function(){return Wt}});var o=i(83886),e=i(87841),a=i(11596),s=i(39609),c=i(48387),r=i(12057),u=i(16738),h=i.n(u),l=i(74788),d=i(57922),g=i(2895),p=i(18849),m=i(46926),f=i(73888);let Z=(()=>{class t{constructor(t){this.plus=t,this.db=null,this.title="B\xe1o c\xe1o b\xe1n h\xe0ng",this.dbName="ban-hang",this.items=[],this.DoanhThu=0,this.LoiNhuan=0,this.DoanhThuThang=[],this.LoiNhuanThang=[],this.BanChay=[],this.BanNgoiNhieu=[]}ngOnDestroy(){console.log("Destroy bao-cao"),this.plus.subs.unsubscribe()}ngOnInit(){this.plus.setTiTle(this.title),this.plus.IDB_InitDB(this.dbName).subscribe(t=>{this.plus.updateUserLocal(t,"thanh-toan"),this.db=t,this.plus.updateAPi.subscribe(t=>{this.getNhanDon()})})}getNhanDon(){this.plus.subs.add(this.plus.IDB_DB_GetAll(this.db,"thanh-toan").subscribe(t=>{null==t&&(t=[]),this.items=t,this.doanhThuNgay(1)}))}doanhThuNgay(t){const n=this.items,i=Date.now()-24*t*60*60*1e3,o=[];let e=[],a=[];for(let r=0;r<n.length;r++)if(n[r].dateModify>i&&n[r].LoiNhuan>0&&1==n[r].DaThanhToan){const t={LoiNhuan:1e3*n[r].LoiNhuan,ThanhTien:n[r].ThanhTien,Ngay:h()(n[r].dateModify).format("DD/MM")};o.push(t),n[r].DonMua.forEach(t=>{e.push({TenHangHoa:t.TenHangHoa,TongCong:t.TongCong})}),a.push({TenBan:n[r].TenBan,SoKH:n[r].SoKH})}this.DoanhThuThang=this.plus.generateChart(o,"Ngay","ThanhTien"),this.LoiNhuanThang=this.plus.generateChart(o,"Ngay","LoiNhuan"),this.DoanhThu=this.plus.sumByKey(o,"ThanhTien"),this.LoiNhuan=this.plus.sumByKey(o,"LoiNhuan");const s=this.plus.sortArr(e,"TongCong"),c=this.plus.generateChart(s,"TenHangHoa","TongCong");this.BanChay=this.plus.generateChart(c.slice(0,5),"x","y"),this.BanNgoiNhieu=this.plus.generateChart(a,"TenBan","SoKH")}}return t.\u0275fac=function(n){return new(n||t)(l.Y36(d.T))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-bao-cao"]],decls:30,vars:30,consts:[[1,"container"],[1,"tit"],[1,"row","text-center"],["mat-raised-button","","color","warn"],[1,"row"],[3,"day"],[1,"row","my-3"],[1,"col-md-6"],[3,"id","arr","label","type"],[3,"id","label","arr","type"],[1,"col-md-4"],[1,"col-md-8"],[3,"id","arr","type","label"]],template:function(t,n){1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"h5",1),l._uU(2,"B\xc1O C\xc1O B\xc1N H\xc0NG"),l.qZA(),l.TgZ(3,"div",2),l.TgZ(4,"button",3),l._uU(5),l.ALo(6,"commas"),l.qZA(),l.TgZ(7,"button",3),l._uU(8),l.ALo(9,"commas"),l.qZA(),l.qZA(),l.TgZ(10,"div",4),l.TgZ(11,"app-chip",5),l.NdJ("day",function(t){return n.doanhThuNgay(t)}),l.qZA(),l.qZA(),l.TgZ(12,"div",6),l.TgZ(13,"div",7),l._UZ(14,"app-chart",8),l.qZA(),l.TgZ(15,"div",7),l._UZ(16,"app-chart",9),l.qZA(),l.qZA(),l._UZ(17,"hr"),l._UZ(18,"h6",1),l.TgZ(19,"div",6),l.TgZ(20,"div",10),l._UZ(21,"app-chart",8),l.qZA(),l.TgZ(22,"div",11),l._UZ(23,"app-chart",8),l.qZA(),l.qZA(),l._UZ(24,"hr"),l.TgZ(25,"div",6),l.TgZ(26,"div",10),l._UZ(27,"app-chart",8),l.qZA(),l.TgZ(28,"div",11),l._UZ(29,"app-chart",12),l.qZA(),l.qZA(),l.qZA()),2&t&&(l.xp6(5),l.hij(" Doanh thu: ",l.lcZ(6,26,n.DoanhThu),""),l.xp6(3),l.hij(" L\u1ee3i nhu\u1eadn: ",l.lcZ(9,28,n.LoiNhuan),""),l.xp6(6),l.Q6J("id","doanhthuthang")("arr",n.DoanhThuThang)("label","B\u1ea3ng Doanh thu")("type","line"),l.xp6(2),l.Q6J("id","LoinhuanThan")("label","B\u1ea3ng L\u1ee3i nhu\u1eadn")("arr",n.LoiNhuanThang)("type","bar"),l.xp6(5),l.Q6J("id","BanChay")("arr",n.BanChay)("label","Top b\xe1n ch\u1ea1y")("type","doughnut"),l.xp6(2),l.Q6J("id","BanChayBar")("arr",n.BanChay)("label","Top b\xe1n ch\u1ea1y")("type","bar"),l.xp6(4),l.Q6J("id","BanNgoiNhieu")("arr",n.BanNgoiNhieu)("label","Top B\xe0n kh\xe1ch ch\u1ecdn")("type","doughnut"),l.xp6(2),l.Q6J("id","BanNgoiNhieuBar")("arr",n.BanNgoiNhieu)("type","bar")("label","Top B\xe0n kh\xe1ch ch\u1ecdn"))},directives:[g.lW,p.Y,m.x],pipes:[f.W],styles:["mat-chip[_ngcontent-%COMP%]{max-width:200px}"]}),t})();var T=i(15228),b=i(24751),A=i(49356);function q(t,n){1&t&&(l.TgZ(0,"h4",4),l._uU(1,"\u0110\xe3 ho\xe0n th\xe0nh "),l.qZA())}function x(t,n){if(1&t){const t=l.EpF();l.TgZ(0,"button",15),l.NdJ("click",function(){l.CHM(t);const n=l.oxw().index,i=l.oxw().$implicit;return l.oxw().onComplete(i,n)}),l.TgZ(1,"mat-icon"),l._uU(2,"done"),l.qZA(),l.qZA()}}function _(t,n){if(1&t&&(l.TgZ(0,"div",9),l.TgZ(1,"b",10),l._uU(2),l.TgZ(3,"b",11),l._uU(4),l.qZA(),l.qZA(),l.TgZ(5,"i",12),l._uU(6),l.qZA(),l._UZ(7,"br"),l.TgZ(8,"i",13),l._uU(9),l.ALo(10,"fromNow"),l.qZA(),l.YNc(11,x,3,0,"button",14),l.qZA()),2&t){const t=n.$implicit,i=l.oxw(2);l.Q6J("@slideIn",void 0),l.xp6(2),l.hij("",t.TenHangHoa,": "),l.xp6(2),l.AsE(" ",t.TongCong," ",t.DVT," "),l.xp6(2),l.Oqu(t.GhiChu),l.xp6(3),l.Oqu(l.lcZ(10,7,t.GioVao)),l.xp6(2),l.Q6J("ngIf",i.checkPer(2)&&0==t.DaLam)}}function D(t,n){if(1&t){const t=l.EpF();l.TgZ(0,"div"),l.TgZ(1,"div",5),l.TgZ(2,"h4",6),l._uU(3),l.qZA(),l.YNc(4,_,12,9,"div",7),l.TgZ(5,"button",8),l.NdJ("click",function(){const n=l.CHM(t).$implicit;return l.oxw().onCompleteAll(n)}),l.TgZ(6,"mat-icon"),l._uU(7,"done_all"),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&t){const t=n.$implicit;l.xp6(3),l.Oqu(t.TenBan),l.xp6(1),l.Q6J("ngForOf",t.DonMua)}}let v=(()=>{class t{constructor(t,n){this.plus=t,this.fb=n,this.dbName="ban-hang",this.db=null,this.api="an-uong",this.items=[],this.tittle="Pha ch\u1ebf",this.DonMua=[],this.groups=[],this.main=this.fb.group({_id:[,[]],idHangHoa:[,[b.kI.required]],TrangThai:[0,[b.kI.required]]})}ngOnDestroy(){this.plus.subs.unsubscribe(),console.log("Destroy pha-che")}ngOnInit(){this.plus.setTiTle(this.tittle),this.plus.IDB_InitDB(this.dbName).subscribe(t=>{this.db=t,this.plus.updateUserLocal(t,this.api),this.plus.updateAPi.subscribe(n=>{this.getIDB(t)})})}getIDB(t){this.groups=[],this.plus.IDB_DB_GetAll(t,this.api).subscribe(t=>{let n=[];for(let i=0;i<t.length;i++)if(0==t[i].DaThanhToan){const o=t[i].DonMua.filter(t=>(0==t.DaLam&&(this.addNewItem(t),this.groups.push(t),this.plus.notify_send("C\xf3 kh\xe1ch v\xe0o!"),this.plus.playUpdate()),0==t.DaLam));o.length>0&&(t[i].DonMua=o,n.push(t[i]))}this.items=n,console.log(this.groups),this.groupItems()})}groupItems(){const t=this.plus.obj_GroupByKey(this.groups,"TenHangHoa");console.log(t)}addNewItem(t){const n=this.DonMua.find(n=>n._id==t._id);if(window.navigator.vibrate(200),n){const i=this.DonMua.findIndex(t=>t._id==n._id);this.DonMua[i].TongCong+=t.TongCong}else t.TongCong=1,t.GioVao=Date.now(),t.DaLam=!1,this.DonMua.push(t)}onComplete(t,n){console.log(t,n);const i=t;delete i.__v,i.DonMua[n].DaLam=!0,console.log(i),this.plus.httpPut(this.api,i).subscribe(t=>{console.log(t),this.getIDB(this.db)})}onCompleteAll(t){const n=t;delete n.__v;for(let i=0;i<n.DonMua.length;i++)n.DonMua[i].DaLam=!0;console.log(n),this.plus.httpPut(this.api,n).subscribe(t=>{console.log(t),this.plus.IDB_DB_Add(this.db,this.api,n),this.getIDB(this.db)})}reload(){this.plus.reload("ban-hang/pha-che")}checkPer(t){return this.plus.checkPer(this.api,t)}}return t.\u0275fac=function(n){return new(n||t)(l.Y36(d.T),l.Y36(b.qu))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-pha-che"]],decls:4,vars:2,consts:[[1,"container"],["class","text-center text-primary",4,"ngIf"],[1,"card-group"],[4,"ngFor","ngForOf"],[1,"text-center","text-primary"],[1,"card","text-center","mx-3","mb-3"],[1,"card-title","bg-success"],["class","card-body text-left",4,"ngFor","ngForOf"],["mat-raised-button","","color","accent",3,"click"],[1,"card-body","text-left"],[1,"font-blue"],[1,"text-danger","mx-3"],[1,"font-red","font-note"],[1,"mx-3"],["hidden","","mat-raised-button","","color","accent",3,"click",4,"ngIf"],["hidden","","mat-raised-button","","color","accent",3,"click"]],template:function(t,n){1&t&&(l.TgZ(0,"div",0),l.YNc(1,q,2,0,"h4",1),l.TgZ(2,"div",2),l.YNc(3,D,8,2,"div",3),l.qZA(),l.qZA()),2&t&&(l.xp6(1),l.Q6J("ngIf",0==n.items.length),l.xp6(2),l.Q6J("ngForOf",n.items))},directives:[r.O5,r.sg,g.lW,A.Hw],pipes:[f.dw],styles:[".card[_ngcontent-%COMP%]{border-radius:1rem}.card-title[_ngcontent-%COMP%]{border-radius:1rem}"],data:{animation:[T.Ym]}}),t})();var N=i(33982),y=i(84875);let B=(()=>{class t{constructor(t,n){this.plus=t,this.fb=n,this.dbName="ban-hang",this.db=null,this.user=this.plus.user.getValue(),this.main=this.fb.group({}),this.initDB()}initDB(){this.plus.IDB_InitDB(this.dbName).subscribe(t=>{this.db=t})}creatTable(t){"guest"!=t._id&&this.plus.IDB_InitDB(this.dbName).subscribe(n=>{const i=this.plus.sortArr(t.NhomBan,"ThuTu",1);for(let o=0;o<i.length;o++){const e=i[o];this.plus.IDB_DB_Add(this.db,"an-uong",{_id:e.NoiDung+"- MV",status:1,dateModify:t.dateModify,TenBan:e.NoiDung+"- MV",NhomBan:e.NoiDung,DonMua:[],ThanhTien:0,GioVao:0,SoKH:0,DaThanhToan:y.gp.unpaid});for(let i=1;i<e.SoLuong;i++)this.plus.IDB_DB_Add(n,"an-uong",{_id:e.NoiDung+"-"+i,status:1,dateModify:t.dateModify,TenBan:e.NoiDung+"-"+i,NhomBan:e.NoiDung,DonMua:[],ThanhTien:0,GioVao:0,SoKH:0,DaThanhToan:y.gp.unpaid})}this.plus.reload("/ban-hang/an-uong")})}clearAnUong(){this.plus.IDB_InitDB(this.dbName).subscribe(t=>{this.plus.IDB_DB_ClearCollection(t,"an-uong").subscribe(t=>console.log("clearAnUong",t))})}thanhToan(t){if(delete t.__v,t.DaThanhToan=y.hg.DaThanhToan,t.NguonThu=y.rP.AnUong,0==t.ThanhTien&&(this.main.patchValue(t),this.main.invalid)){const t=this.plus.getErrValidateForm(this.main);console.log(t)}void 0!==t._id?(delete t.__v,this.plus.httpPut("thanh-toan",t).subscribe(t=>{const n=this.plus.Crypt_DecryptRest(t);this.plus.IDB_DB_Add(this.db,"thanh-toan",n),this.plus.FBS_PostByUser("hang-hoa",n.dateModify).then(()=>{this.reload()})})):this.plus.httpPost("thanh-toan",t).subscribe(t=>{this.plus.IDB_DB_Add(this.db,"thanh-toan",this.plus.Crypt_DecryptRest(t))})}printBill(){if(confirm("B\u1ea1n c\xf3 mu\u1ed1n in h\xf3a \u0111\u01a1n ko?")){let n=window.document.getElementById("bill");var t=window.open("","PRINT");t.document.write(document.documentElement.innerHTML),setTimeout(()=>{t.document.body.innerHTML=n.outerHTML,t.document.close(),t.focus(),t.print(),t.close()},1e3)}}reload(){this.plus.reload("/ban-hang/an-uong")}}return t.\u0275fac=function(n){return new(n||t)(l.LFG(d.T),l.LFG(b.qu))},t.\u0275prov=l.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var C=i(23202),w=i(13269),I=i(61260),M=i(46833),k=i(46113),U=i(17935);function H(t,n){if(1&t){const t=l.EpF();l.TgZ(0,"mat-chip",21),l.NdJ("click",function(){const n=l.CHM(t).$implicit;return l.oxw(2).showArea(n.NoiDung)}),l._uU(1),l.qZA()}if(2&t){const t=n.$implicit,i=l.oxw(2);l.Q6J("selected",i.area==t.NoiDung),l.xp6(1),l.hij("Khu ",t.NoiDung,"")}}function J(t,n){if(1&t&&(l.TgZ(0,"button",27),l._uU(1),l.ALo(2,"commas"),l.qZA()),2&t){const t=l.oxw().$implicit;l.xp6(1),l.Oqu(l.lcZ(2,1,t.ThanhTien))}}function O(t,n){if(1&t&&(l.TgZ(0,"span",28),l._uU(1),l.ALo(2,"fromNow"),l.qZA()),2&t){const t=l.oxw().$implicit;l.xp6(1),l.hij(" ",l.lcZ(2,1,t.GioVao),"")}}const F=function(t){return{"border-danger":t}};function G(t,n){if(1&t){const t=l.EpF();l.TgZ(0,"div"),l.TgZ(1,"div",22),l.TgZ(2,"div",23),l.NdJ("click",function(){const n=l.CHM(t).$implicit;return l.oxw(2).chooseTable(n)}),l.TgZ(3,"h4",24),l._uU(4),l.qZA(),l.YNc(5,J,3,3,"button",25),l.YNc(6,O,3,3,"span",26),l.qZA(),l.qZA(),l.qZA()}if(2&t){const t=n.$implicit;l.xp6(2),l.Q6J("ngClass",l.VKq(4,F,t.ThanhTien>0)),l.xp6(2),l.Oqu(t.TenBan),l.xp6(1),l.Q6J("ngIf",t.ThanhTien>0),l.xp6(1),l.Q6J("ngIf",t.GioVao>0)}}function L(t,n){if(1&t&&(l.TgZ(0,"div",17),l.TgZ(1,"div",1),l.TgZ(2,"mat-chip-list"),l.YNc(3,H,2,2,"mat-chip",18),l.TgZ(4,"button",19),l._uU(5,"+"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(6,"div",1),l.YNc(7,G,7,6,"div",20),l.qZA(),l.qZA()),2&t){const t=l.oxw();l.xp6(3),l.Q6J("ngForOf",t.TabBan),l.xp6(4),l.Q6J("ngForOf",t.ChiaBan)}}function P(t,n){if(1&t){const t=l.EpF();l.TgZ(0,"mat-chip",21),l.NdJ("click",function(){const n=l.CHM(t).$implicit;return l.oxw(2).orderByGroup(n)}),l._uU(1),l.qZA()}if(2&t){const t=n.$implicit,i=n.index,o=l.oxw(2);l.Q6J("selected",o.indexNhomHang==i),l.xp6(1),l.Oqu(t.NoiDung)}}function Q(t,n){if(1&t){const t=l.EpF();l.TgZ(0,"div",37),l.NdJ("click",function(){l.CHM(t);const n=l.oxw().$implicit;return l.oxw(2).chooseProduct(n)}),l.TgZ(1,"div",33),l.TgZ(2,"h4",34),l._uU(3),l.qZA(),l.qZA(),l.qZA()}if(2&t){const t=l.oxw().$implicit;l.xp6(1),l.Udp("border-bottom-color",t.HinhAnh),l.xp6(2),l.hij("",t.TenHangHoa," ")}}function Y(t,n){if(1&t&&(l.TgZ(0,"div",35),l.YNc(1,Q,4,3,"div",36),l.qZA()),2&t){const t=n.$implicit;l.xp6(1),l.Q6J("ngIf",t.TrangThai)}}function S(t,n){if(1&t){const t=l.EpF();l.TgZ(0,"div"),l.TgZ(1,"button",29),l.NdJ("click",function(){return l.CHM(t),l.oxw().reload()}),l._uU(2,"Ch\u1ecdn b\xe0n"),l.qZA(),l.TgZ(3,"button",30),l.NdJ("click",function(){return l.CHM(t),l.oxw().saveBill()}),l._uU(4,"L\u01b0u"),l.qZA(),l.TgZ(5,"mat-chip-list"),l.YNc(6,P,2,2,"mat-chip",18),l.qZA(),l._UZ(7,"hr"),l.TgZ(8,"div",1),l.YNc(9,Y,2,1,"div",31),l.TgZ(10,"div",32),l.TgZ(11,"div"),l.TgZ(12,"div",33),l.TgZ(13,"h4",34),l._uU(14,"+casdas "),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&t){const t=l.oxw();l.xp6(6),l.Q6J("ngForOf",t.NhomHang),l.xp6(3),l.Q6J("ngForOf",t.products)}}function V(t,n){if(1&t&&(l.TgZ(0,"h6"),l._uU(1),l.ALo(2,"commas"),l.qZA()),2&t){const t=l.oxw(2);l.xp6(1),l.hij("T\u1ea1m t\xednh ",l.lcZ(2,1,t.table.ThanhTien)," K")}}function E(t,n){if(1&t&&(l.TgZ(0,"span"),l._uU(1),l.qZA()),2&t){const t=l.oxw().$implicit;l.xp6(1),l.hij(" (+ ",t.GhiChu.length-1,") ")}}function $(t,n){if(1&t){const t=l.EpF();l.TgZ(0,"mat-option",48),l.NdJ("click",function(){const n=l.CHM(t).$implicit,i=l.oxw().$implicit;return l.oxw(2).addNote(i._id,n)}),l._uU(1),l.qZA()}if(2&t){const t=n.$implicit;l.Q6J("value",t.NoiDung),l.xp6(1),l.hij("",t.NoiDung," ")}}function K(t,n){if(1&t){const t=l.EpF();l.TgZ(0,"mat-list-option",42),l._uU(1),l.ALo(2,"number"),l.TgZ(3,"mat-select",43),l.TgZ(4,"mat-select-trigger"),l._uU(5),l.YNc(6,E,2,1,"span",4),l.qZA(),l.YNc(7,$,2,2,"mat-option",44),l.ALo(8,"catalog"),l.TgZ(9,"mat-form-field"),l._UZ(10,"input",45,46),l.TgZ(12,"mat-icon",47),l.NdJ("click",function(){const n=l.CHM(t).$implicit,i=l.MAs(11);return n.GhiChu[0]=i.value}),l._uU(13,"save"),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&t){const t=n.$implicit;l.xp6(1),l.AsE(" ",l.lcZ(2,7,t.SoLuong)," - ",t.TenHangHoa," "),l.xp6(2),l.Q6J("placeholder","\u270e"),l.xp6(2),l.hij("",t.GhiChu[1]," "),l.xp6(1),l.Q6J("ngIf",t.GhiChu.length>1),l.xp6(1),l.Q6J("ngForOf",l.lcZ(8,9,"GhiChuMon")),l.xp6(3),l.s9C("value",t.GhiChu[0])}}function j(t,n){if(1&t){const t=l.EpF();l.TgZ(0,"div",38),l.TgZ(1,"button",39),l.NdJ("click",function(){return l.CHM(t),l.oxw().thanhToan()}),l._uU(2),l.ALo(3,"uppercase"),l.qZA(),l.YNc(4,V,3,3,"h6",4),l._UZ(5,"hr"),l.TgZ(6,"mat-selection-list",40),l.YNc(7,K,14,11,"mat-list-option",41),l.qZA(),l.qZA()}if(2&t){const t=l.oxw();l.xp6(2),l.hij("Th\u1ef1c \u0111\u01a1n b\xe0n ",l.lcZ(3,4,null==t.table?null:t.table.TenBan),""),l.xp6(2),l.Q6J("ngIf",t.table.ThanhTien>0),l.xp6(2),l.Q6J("multiple",!1),l.xp6(1),l.Q6J("ngForOf",null==t.table?null:t.table.DonMua)}}let z=(()=>{class t{constructor(t,n,i,o){this.plus=t,this.route=n,this.fb=i,this.bhsv=o,this.DonMua=[],this.ThanhTien=0,this.donHang=[],this.filter=[],this.ChiaBan=[],this.ban=0,this.xemBan=!0,this.xemMon=!1,this.db=null,this.title="D\u1ecbch v\u1ee5 \u0103n u\u1ed1ng",this.dbName="ban-hang",this.api="thanh-toan",this.user=this.plus.user.getValue(),this.items=[],this.TabBan=this.plus.sortArr(this.plus.user.getValue().NhomBan,"ThuTu",1),this.NhomHang=this.plus.user.getValue().NhomHang,this.step=0,this.area=this.TabBan[0].NoiDung,this.group=this.NhomHang[0],this.products=[],this.printTime=Date.now(),this.total=0}ngOnDestroy(){console.log("Destroy an-uong"),this.plus.subs.unsubscribe()}ngOnInit(){this.plus.setTiTle(this.title),this.plus.IDB_InitDB(this.dbName).subscribe(t=>{this.db=t,this.showArea(this.area),this.plus.updateUserLocal(t,this.api),this.plus.updateAPi.subscribe(t=>{this.showArea(this.area)})})}print(){this.bhsv.printBill()}showArea(t){this.step=0,this.plus.IDB_DB_GetAllByIndexKey(this.bhsv.db,"an-uong","NhomBan",t).subscribe(n=>{0==n.length&&this.bhsv.creatTable(this.user),this.ChiaBan=n,this.area=t})}chooseTable(t){this.step=1,this.table=t,this.table.GioVao=Date.now(),this.orderByGroup(this.group)}orderByGroup(t){this.plus.IDB_DB_GetAllByIndexKey(this.db,"hang-hoa","NhomHang",t.NoiDung).subscribe(t=>{this.products=t})}chooseProduct(t){let n=0,i=0;const o={_id:t._id,TenHangHoa:t.TenHangHoa,GiaBan:t.GiaBan,GiaVon:t.GiaVon,KhuyenMai:t.KhuyenMai,DaLam:0,SoLuong:0,GhiChu:[" "]},e=this.table.DonMua.findIndex(n=>n._id==t._id);-1==e?(o.SoLuong=1,this.table.DonMua.push(o)):this.table.DonMua[e].SoLuong+=1;const a=this.table.DonMua;for(let s=0;s<a.length;s++)n+=(a[s].GiaBan-a[s].GiaVon)*a[s].SoLuong,i+=a[s].GiaBan*a[s].SoLuong,this.table.SoKH+=a[s].SoLuong;this.table.ThanhTien=i,this.table.LoiNhuan=n}addNote(t,n){const i=this.table.DonMua.findIndex(n=>n._id==t),o=this.table.DonMua[i].GhiChu.findIndex(t=>t==n);this.table.DonMua[i].GhiChu.includes(n.NoiDung)?this.table.DonMua[i].GhiChu.splice(o,1):this.table.DonMua[i].GhiChu.push(n.NoiDung)}saveBill(){console.log(this.table)}addArea(){}thanhToan(){}removeItem(t){}addItem(t,n){}delItem(t){}updateList(t,n,i){const o=+i.target.textContent;if(console.log(o),"Enter"===i.key&&i.preventDefault(),"number"!=typeof o)return this.plus.alertError("Sai \u0111\u1ecbnh d\u1ea1ng"),this.DonMua[t][n]=0;this.DonMua[t][n]=+o}back(){this.step=this.step-1}reload(){this.plus.reload("ban-hang/an-uong")}}return t.\u0275fac=function(n){return new(n||t)(l.Y36(d.T),l.Y36(N.gz),l.Y36(b.qu),l.Y36(B))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-an-uong"]],decls:22,vars:3,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-9"],["class","step0",4,"ngIf"],[4,"ngIf"],["class","col-sm-3 border rounded",4,"ngIf"],["id","addArea","tabindex","-1","role","dialog","aria-labelledby","modelTitleId","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],["type","button",1,"btn","btn-primary"],[1,"step0"],["color","accent",3,"selected","click",4,"ngFor","ngForOf"],["mat-mini-fab","","data-toggle","modal","color","","data-target","#addArea"],[4,"ngFor","ngForOf"],["color","accent",3,"selected","click"],[1,"card-group"],[1,"card","hangHoa",3,"ngClass","click"],[1,"text-center","pt-3"],["class","badge badge-warning",4,"ngIf"],["class","badge badge-light",4,"ngIf"],[1,"badge","badge-warning"],[1,"badge","badge-light"],["mat-raised-button","",3,"click"],["mat-raised-button","","color","accent",3,"click"],["class","card-group clearfix","id","item",4,"ngFor","ngForOf"],[1,"card-group","clearfix"],[1,"card","hangHoa"],[1,"text-center","py-3"],["id","item",1,"card-group","clearfix"],[3,"click",4,"ngIf"],[3,"click"],[1,"col-sm-3","border","rounded"],["mat-raised-button","","color","primary",3,"click"],[3,"multiple"],["style","font-weight: 500;",4,"ngFor","ngForOf"],[2,"font-weight","500"],["multiple","",1,"mat-select-red",3,"placeholder"],[3,"value","click",4,"ngFor","ngForOf"],["matInput","","placeholder","Ghi ch\xfa kh\xe1c",3,"value"],["note",""],["matSuffix","",3,"click"],[3,"value","click"]],template:function(t,n){1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l.YNc(3,L,8,2,"div",3),l.YNc(4,S,15,2,"div",4),l.qZA(),l.YNc(5,j,8,6,"div",5),l.qZA(),l.qZA(),l.TgZ(6,"div",6),l.TgZ(7,"div",7),l.TgZ(8,"div",8),l.TgZ(9,"div",9),l.TgZ(10,"h5",10),l._uU(11,"Modal title"),l.qZA(),l.TgZ(12,"button",11),l.TgZ(13,"span",12),l._uU(14,"\xd7"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(15,"div",13),l._uU(16," Body "),l.qZA(),l.TgZ(17,"div",14),l.TgZ(18,"button",15),l._uU(19,"Close"),l.qZA(),l.TgZ(20,"button",16),l._uU(21,"Save"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&t&&(l.xp6(3),l.Q6J("ngIf",n.step<1),l.xp6(1),l.Q6J("ngIf",1==n.step),l.xp6(1),l.Q6J("ngIf",n.table))},directives:[r.O5,C.qn,r.sg,g.lW,C.HS,r.mk,w.Ub,w.vS,I.gD,I.$L,M.KE,k.Nt,A.Hw,M.R9,U.ey],pipes:[f.W,f.dw,r.gd,r.JJ,f.pW],styles:[".hangHoa[_ngcontent-%COMP%]{height:10rem;width:10rem;border-radius:1rem;border-bottom-width:3rem;border-color:#90ee90;color:#00f;float:none;align-items:center;justify-content:center}.hangHoa[_ngcontent-%COMP%]:active{transform:scale(1.1);opacity:50%;background-color:tomato}.hoadon[_ngcontent-%COMP%]{width:200px}.mat-list-text[_ngcontent-%COMP%]{color:#00f!important;font-weight:bold;padding-bottom:3px;padding-top:3px}.mat-select-placeholder[_ngcontent-%COMP%]{color:#007bff}  .mat-pseudo-checkbox-checked, .mat-pseudo-checkbox-indeterminate[_ngcontent-%COMP%], .mat-accent[_ngcontent-%COMP%]   .mat-pseudo-checkbox-checked[_ngcontent-%COMP%], .mat-accent[_ngcontent-%COMP%]   .mat-pseudo-checkbox-indeterminate[_ngcontent-%COMP%]{background:tomato!important}.mat-select-red[_ngcontent-%COMP%]{color:tomato!important}  .mat-select-value{color:#00f!important;font-style:italic!important;font-size:small!important}  .mat-select-content{width:20px;background-color:red;font-size:10px}  .mat-select-placeholder{color:#00f!important;font-size:17px}"],data:{animation:[T.Ym,T.Mq]}}),t})();var R=i(46936),W=i(23487),X=i(97012),tt=i(15265),nt=i(73624),it=i(25862),ot=i(55352);function et(t,n){if(1&t){const t=l.EpF();l.TgZ(0,"button",36),l.NdJ("click",function(){return l.CHM(t),l.oxw().reload()}),l.TgZ(1,"mat-icon"),l._uU(2,"undo"),l.qZA(),l.qZA()}2&t&&l.Q6J("@slideIn",void 0)}function at(t,n){1&t&&(l.TgZ(0,"th"),l._uU(1,"M\xe3 v\u1ea1ch"),l.qZA())}function st(t,n){1&t&&(l.TgZ(0,"th"),l._uU(1,"Nh\xf3m h\xe0ng"),l.qZA())}function ct(t,n){1&t&&(l.TgZ(0,"th"),l._uU(1,"Khuy\u1ebfn m\xe3i"),l.qZA())}function rt(t,n){1&t&&(l.TgZ(0,"th"),l._uU(1,"\u0110\u01a1n v\u1ecb t\xednh"),l.qZA())}function ut(t,n){1&t&&(l.TgZ(0,"th"),l._uU(1,"Gi\xe1 v\u1ed1n"),l.qZA())}function ht(t,n){1&t&&(l.TgZ(0,"th"),l._uU(1,"Quy \u0111\u1ed5i \u0111\u01a1n v\u1ecb"),l.qZA())}function lt(t,n){1&t&&(l.TgZ(0,"th"),l._uU(1,"H\xecnh \u1ea3nh"),l.qZA())}function dt(t,n){if(1&t){const t=l.EpF();l.TgZ(0,"td",44),l.NdJ("click",function(){l.CHM(t);const n=l.oxw().$implicit;return l.oxw(2).onEdit(n)}),l._uU(1),l.qZA()}if(2&t){const t=l.oxw().$implicit;l.xp6(1),l.Oqu(t.Barcode)}}function gt(t,n){if(1&t){const t=l.EpF();l.TgZ(0,"td",44),l.NdJ("click",function(){l.CHM(t);const n=l.oxw().$implicit;return l.oxw(2).onEdit(n)}),l._uU(1),l.qZA()}if(2&t){const t=l.oxw().$implicit;l.xp6(1),l.Oqu(t.NhomHang)}}function pt(t,n){if(1&t&&(l.TgZ(0,"td"),l._uU(1),l.qZA()),2&t){const t=l.oxw().$implicit;l.xp6(1),l.Oqu(t.KhuyenMai)}}function mt(t,n){if(1&t&&(l.TgZ(0,"td"),l._uU(1),l.qZA()),2&t){const t=l.oxw().$implicit;l.xp6(1),l.Oqu(t.DVT)}}function ft(t,n){if(1&t&&(l.TgZ(0,"td"),l._uU(1),l.qZA()),2&t){const t=l.oxw().$implicit;l.xp6(1),l.Oqu(t.GiaVon)}}function Zt(t,n){if(1&t&&(l.TgZ(0,"td"),l._uU(1),l.qZA()),2&t){const t=l.oxw().$implicit;l.xp6(1),l.Oqu(t.QuyDoi)}}function Tt(t,n){if(1&t&&(l.TgZ(0,"td"),l._uU(1),l.qZA()),2&t){const t=l.oxw().$implicit;l.xp6(1),l.Oqu(t.HinhAnh)}}function bt(t,n){if(1&t){const t=l.EpF();l.TgZ(0,"mat-icon",47),l.NdJ("click",function(){l.CHM(t);const n=l.oxw().$implicit;return l.oxw(2).onDelete(n)}),l._uU(1,"delete"),l.qZA()}}function At(t,n){if(1&t){const t=l.EpF();l.TgZ(0,"tr"),l.YNc(1,dt,2,1,"td",42),l.YNc(2,gt,2,1,"td",43),l.TgZ(3,"td",44),l.NdJ("click",function(){const n=l.CHM(t).$implicit;return l.oxw(2).onEdit(n)}),l._uU(4),l.qZA(),l.TgZ(5,"td",44),l.NdJ("click",function(){const n=l.CHM(t).$implicit;return l.oxw(2).onEdit(n)}),l._uU(6),l.qZA(),l.TgZ(7,"td",44),l.NdJ("click",function(){const n=l.CHM(t).$implicit;return l.oxw(2).onEdit(n)}),l._uU(8),l.qZA(),l.YNc(9,pt,2,1,"td",38),l.YNc(10,mt,2,1,"td",39),l.TgZ(11,"td"),l.TgZ(12,"mat-slide-toggle",45),l.NdJ("change",function(){const n=l.CHM(t).$implicit;return l.oxw(2).updateStatus(n)}),l.qZA(),l.qZA(),l.YNc(13,ft,2,1,"td",38),l.YNc(14,Zt,2,1,"td",38),l.YNc(15,Tt,2,1,"td",38),l.TgZ(16,"td"),l.YNc(17,bt,2,0,"mat-icon",46),l.qZA(),l.qZA()}if(2&t){const t=n.$implicit,i=l.oxw(2);l.xp6(1),l.Q6J("ngIf",i.device),l.xp6(1),l.Q6J("Device",2),l.xp6(2),l.Oqu(t.TenHangHoa),l.xp6(2),l.Oqu(t.TonKho),l.xp6(2),l.Oqu(t.GiaBan),l.xp6(1),l.Q6J("ngIf",i.device),l.xp6(1),l.Q6J("Device",2),l.xp6(2),l.Q6J("checked",t.TrangThai),l.xp6(1),l.Q6J("ngIf",i.device),l.xp6(1),l.Q6J("ngIf",i.device),l.xp6(1),l.Q6J("ngIf",i.device),l.xp6(2),l.Q6J("ngIf",i.checkPer(4))}}function qt(t,n){if(1&t){const t=l.EpF();l.TgZ(0,"table",37),l.TgZ(1,"thead"),l.YNc(2,at,2,0,"th",38),l.YNc(3,st,2,0,"th",39),l.TgZ(4,"th"),l._uU(5,"T\xean"),l.qZA(),l.TgZ(6,"th"),l._uU(7,"T\u1ed3n kho"),l.qZA(),l.TgZ(8,"th"),l._uU(9,"Gi\xe1n B\xe1n"),l.qZA(),l.YNc(10,ct,2,0,"th",38),l.YNc(11,rt,2,0,"th",39),l.TgZ(12,"th"),l._uU(13,"Cho b\xe1n"),l.qZA(),l.YNc(14,ut,2,0,"th",38),l.YNc(15,ht,2,0,"th",38),l.YNc(16,lt,2,0,"th",38),l.TgZ(17,"th"),l.TgZ(18,"mat-icon",40),l.NdJ("click",function(){return l.CHM(t),l.oxw().reload()}),l._uU(19,"cached"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(20,"tbody"),l.YNc(21,At,18,12,"tr",41),l.qZA(),l.qZA()}if(2&t){const t=l.oxw();l.Q6J("@slideIn",void 0),l.xp6(2),l.Q6J("ngIf",t.device),l.xp6(1),l.Q6J("Device",2),l.xp6(7),l.Q6J("ngIf",t.device),l.xp6(1),l.Q6J("Device",2),l.xp6(3),l.Q6J("ngIf",t.device),l.xp6(1),l.Q6J("ngIf",t.device),l.xp6(1),l.Q6J("ngIf",t.device),l.xp6(5),l.Q6J("ngForOf",t.filter.length>0?t.filter:t.items.slice(0,10))}}function xt(t,n){if(1&t&&l._UZ(0,"app-import-database",48),2&t){const t=l.oxw();l.Q6J("api",t.api)("form",t.main)("global",!1)}}function _t(t,n){if(1&t){const t=l.EpF();l.TgZ(0,"button",49),l.NdJ("click",function(){return l.CHM(t),l.oxw().resetDB()}),l._uU(1,"X\xf3a to\xe0n b\u1ed9 d\u1eef li\u1ec7u"),l.qZA()}}function Dt(t,n){if(1&t&&(l.TgZ(0,"mat-option",50),l._uU(1),l.qZA()),2&t){const t=n.$implicit;l.s9C("value",t.NoiDung),l.xp6(1),l.hij("",t.NoiDung," ")}}function vt(t,n){if(1&t&&(l.TgZ(0,"mat-option",50),l._uU(1),l.qZA()),2&t){const t=n.$implicit;l.s9C("value",t.NoiDung),l.xp6(1),l.hij("",t.NoiDung," ")}}function Nt(t,n){if(1&t){const t=l.EpF();l.TgZ(0,"button",51),l.NdJ("click",function(){return l.CHM(t),l.oxw().save()}),l.TgZ(1,"mat-icon"),l._uU(2,"save"),l.qZA(),l.qZA()}2&t&&l.Q6J("@slideIn",void 0)}const yt=function(){return[5,10,25,100]};let Bt=(()=>{class t{constructor(t,n){this.plus=t,this.fb=n,this.chart=[],this.nhomHang=this.plus.sortArr(this.plus.user.getValue().NhomHang,"ThuTu",1),this.main=this.fb.group({_id:[],Barcode:[""],NhomHang:[,[b.kI.required]],TenHangHoa:[,[b.kI.required]],TonKho:[0],GiaBan:[0,[b.kI.required]],KhuyenMai:[0],DVT:[,[b.kI.required]],TrangThai:[!0],GiaVon:[0,[b.kI.required]],QuyDoi:[],HinhAnh:[]}),this.device=window.innerWidth>1200,this.title="H\xe0ng h\xf3a",this.dbName="ban-hang",this.api="hang-hoa",this.db=null,this.items=[],this.selectedItem=null,this.filter=[],this.itemsAuto=[]}ngOnInit(){this.plus.setTiTle(this.title),this.plus.IDB_InitDB(this.dbName).subscribe(t=>function(t,n,i,o){return new(i||(i=Promise))(function(e,a){function s(t){try{r(o.next(t))}catch(n){a(n)}}function c(t){try{r(o.throw(t))}catch(n){a(n)}}function r(t){t.done?e(t.value):function(t){return t instanceof i?t:new i(function(n){n(t)})}(t.value).then(s,c)}r((o=o.apply(t,n||[])).next())})}(this,void 0,void 0,function*(){this.db=t,this.plus.syncOffline(this.api),this.getIDB(),this.plus.updateUserLocal(t,this.api),this.plus.updateAPi.subscribe(t=>{t&&this.getIDB()})}))}getIDB(){console.log("getIDB"),this.filter=[],this.plus.IDB_DB_GetAll(this.db,this.api).subscribe(t=>{this.items=t,this.plus.updateAPi.next(!1)})}ngOnDestroy(){console.log("Destroy",this.api),this.plus.subs.unsubscribe()}save(){if(this.main.invalid)return;const t=Object.assign({},this.main.value);if(0==this.plus.online.value){const n=[];return n.push(t),this.plus.IDB_DB_AddOff(this.db,this.api,n).subscribe(t=>{this.plus.clickBtn("closeModal")})}null==t._id?(delete t._id,this.plus.httpPost(this.api,t).subscribe(t=>{t.status&&this.plus.clickBtn("closeModal")})):this.plus.httpPut(this.api,t).subscribe(t=>{t.status&&this.plus.clickBtn("closeModal")})}onEdit(t){this.selectedItem=t;const n=this.plus.dateToHtmlObj(t,[""]);this.main.patchValue(n),this.plus.clickBtn("openModal")}onDelete(t){!confirm("B\u1ea1n mu\u1ed1n x\xf3a?")||(this.plus.load(),this.plus.httpDisable(this.api,t).then(t=>{console.log(t)}))}getAuto(t,n){!this.db||n.length<2||(this.itemsAuto=[],this.plus.IDB_DB_Search(this.db,t,n,4).subscribe(t=>{this.itemsAuto=t}))}getBarcode(t){this.main.patchValue({Barcode:t})}chooseOpt(t,n,i,o=!1){this.main.controls[n].setValue(t[i]),o&&this.main.controls[n+"ID"].setValue(t._id)}updateStatus(t){t.TrangThai=!t.TrangThai,delete t.__v,this.plus.httpPost(this.api+"/updateStatus",t).subscribe(t=>{})}closeModal(){this.main.reset()}search(t){this.filter=t}find(t){this.items=t}checkPer(t){return this.plus.checkPer(this.api,t)}patchForm(){}reload(){return this.plus.reload(this.dbName+"/"+this.api)}reset(){this.plus.loaded(),this.filter=[],this.getIDB(),this.main.reset({TonKho:0,TrangThai:!0,KhuyenMai:0,QuyDoi:1,HinhAnh:"#ffffff"})}changePage(t){this.filter=this.items.slice(t.pageIndex*t.pageSize,(t.pageIndex+1)*t.pageSize)}resetDB(){this.plus.resetDB(this.db,this.api)}}return t.\u0275fac=function(n){return new(n||t)(l.Y36(d.T),l.Y36(b.qu))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-hang-hoa"]],decls:82,vars:19,consts:[[1,"container"],["id","add-btn","color","accent","mat-raised-button","","data-toggle","modal","data-target","#modelId",3,"click"],["id","back-btn","mat-raised-button","","color","primary",3,"click",4,"ngIf"],[3,"db","api","filter"],[1,"row"],["class","table table-hover ",4,"ngIf"],[3,"length","pageSize","pageSizeOptions","page"],[3,"api","form","global",4,"ngIf"],[3,"dataJson"],["mat-button","","color","warn",3,"click",4,"ngIf"],["id","openModal","type","button","data-toggle","modal","data-target","#modelId",1,"d-none"],["id","modelId","data-backdrop","static","tabindex","-1","role","dialog","aria-labelledby","modelTitleId","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-body"],[1,"container-fluid"],[3,"formGroup"],["hidden","","formControlName","_id"],["required","","matInput","","formControlName","TenHangHoa"],[1,"col-6"],["required","","formControlName","NhomHang"],[3,"value",4,"ngFor","ngForOf"],["required","","formControlName","DVT"],["type","number","autocomplete","off","matInput","","formControlName","GiaVon",2,"float","right"],["matSuffix",""],["type","number","autocomplete","off","matInput","","formControlName","TonKho",2,"float","right"],["required","","type","number","autocomplete","off","matInput","","formControlName","GiaBan",2,"float","right"],["type","number","autocomplete","off","matInput","","formControlName","KhuyenMai",2,"float","right"],["type","text","autocomplete","off","matInput","","formControlName","QuyDoi"],["type","color","matInput","","formControlName","HinhAnh"],["type","text","autocomplete","off","matInput","","formControlName","Barcode"],[3,"barcodeResult"],["matPrefix","","formControlName","TrangThai","color","primary",1,"mx-2"],[1,"modal-footer"],["id","closeModal","mat-raised-button","","color","primary","data-dismiss","modal",3,"click"],["mat-raised-button","","color","warn",3,"click",4,"ngIf"],["id","back-btn","mat-raised-button","","color","primary",3,"click"],[1,"table","table-hover"],[4,"ngIf"],[4,"Device"],["color","primary",3,"click"],[4,"ngFor","ngForOf"],[3,"click",4,"ngIf"],[3,"click",4,"Device"],[3,"click"],["matPrefix","","color","primary",1,"mx-2",3,"checked","change"],["color","warn",3,"click",4,"ngIf"],["color","warn",3,"click"],[3,"api","form","global"],["mat-button","","color","warn",3,"click"],[3,"value"],["mat-raised-button","","color","warn",3,"click"]],template:function(t,n){1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"button",1),l.NdJ("click",function(){return n.reset()}),l.TgZ(2,"mat-icon"),l._uU(3,"control_point"),l.qZA(),l.qZA(),l.YNc(4,et,3,1,"button",2),l.TgZ(5,"app-search-table",3),l.NdJ("filter",function(t){return n.search(t)}),l.qZA(),l.TgZ(6,"div",4),l.YNc(7,qt,22,9,"table",5),l.qZA(),l.TgZ(8,"mat-paginator",6),l.NdJ("page",function(t){return n.changePage(t)}),l.qZA(),l.YNc(9,xt,1,3,"app-import-database",7),l._UZ(10,"app-export-ecxel",8),l.qZA(),l.YNc(11,_t,2,0,"button",9),l._UZ(12,"button",10),l.TgZ(13,"div",11),l.TgZ(14,"div",12),l.TgZ(15,"div",13),l.TgZ(16,"div",14),l.TgZ(17,"div",15),l.TgZ(18,"form",16),l._UZ(19,"input",17),l.TgZ(20,"mat-form-field"),l.TgZ(21,"mat-label"),l._uU(22,"T\xean"),l.qZA(),l._UZ(23,"textarea",18),l.qZA(),l.TgZ(24,"div",4),l.TgZ(25,"div",19),l.TgZ(26,"mat-form-field"),l.TgZ(27,"mat-label"),l._uU(28,"Nh\xf3m h\xe0ng"),l.qZA(),l.TgZ(29,"mat-select",20),l.YNc(30,Dt,2,2,"mat-option",21),l.qZA(),l.qZA(),l.TgZ(31,"mat-form-field"),l.TgZ(32,"mat-label"),l._uU(33,"\u0110\u01a1n v\u1ecb t\xednh"),l.qZA(),l.TgZ(34,"mat-select",22),l.YNc(35,vt,2,2,"mat-option",21),l.ALo(36,"catalog"),l.qZA(),l.qZA(),l.TgZ(37,"mat-form-field"),l.TgZ(38,"mat-label"),l._uU(39,"Gi\xe1 v\u1ed1n"),l.qZA(),l._UZ(40,"input",23),l.TgZ(41,"span",24),l._uU(42,".000"),l.qZA(),l.qZA(),l.TgZ(43,"mat-form-field"),l.TgZ(44,"mat-label"),l._uU(45,"T\u1ed3n kho"),l.qZA(),l._UZ(46,"input",25),l._UZ(47,"span",24),l.qZA(),l.TgZ(48,"mat-form-field"),l.TgZ(49,"mat-label"),l._uU(50,"Gi\xe1n B\xe1n"),l.qZA(),l._UZ(51,"input",26),l._UZ(52,"span",24),l.qZA(),l.qZA(),l.TgZ(53,"div",19),l.TgZ(54,"mat-form-field"),l.TgZ(55,"mat-label"),l._uU(56,"Khuy\u1ebfn m\xe3i"),l.qZA(),l._UZ(57,"input",27),l.TgZ(58,"span",24),l._uU(59,"%"),l.qZA(),l.qZA(),l.TgZ(60,"mat-form-field"),l.TgZ(61,"mat-label"),l._uU(62,"Quy \u0111\u1ed5i \u0111\u01a1n v\u1ecb"),l.qZA(),l._UZ(63,"input",28),l._UZ(64,"span",24),l.qZA(),l.TgZ(65,"mat-form-field"),l.TgZ(66,"mat-label"),l._uU(67,"M\xe0u \u0111\u1ea1i di\u1ec7n"),l.qZA(),l._UZ(68,"input",29),l.qZA(),l.TgZ(69,"mat-form-field"),l.TgZ(70,"mat-label"),l._uU(71,"M\xe3 v\u1ea1ch"),l.qZA(),l._UZ(72,"input",30),l.qZA(),l.TgZ(73,"app-barcode-scanner",31),l.NdJ("barcodeResult",function(t){return n.getBarcode(t)}),l.qZA(),l._UZ(74,"hr"),l.TgZ(75,"mat-slide-toggle",32),l._uU(76),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(77,"div",33),l.TgZ(78,"button",34),l.NdJ("click",function(){return n.closeModal()}),l.TgZ(79,"mat-icon"),l._uU(80,"close"),l.qZA(),l.qZA(),l.YNc(81,Nt,3,1,"button",35),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&t&&(l.xp6(4),l.Q6J("ngIf",n.filter.length>0),l.xp6(1),l.Q6J("db",n.db)("api",n.api),l.xp6(2),l.Q6J("ngIf",n.items.length+n.filter.length>0),l.xp6(1),l.Q6J("length",n.items.length)("pageSize",10)("pageSizeOptions",l.DdM(18,yt)),l.xp6(1),l.Q6J("ngIf",n.checkPer(4)),l.xp6(1),l.Q6J("dataJson",n.items),l.xp6(1),l.Q6J("ngIf",n.checkPer(5)),l.xp6(7),l.Q6J("formGroup",n.main),l.xp6(12),l.Q6J("ngForOf",n.nhomHang),l.xp6(5),l.Q6J("ngForOf",l.lcZ(36,16,"DVT")),l.xp6(41),l.hij(" ",n.main.controls.TrangThai.value?"C\xf2n h\xe0ng":"H\u1ebft h\xe0ng",""),l.xp6(2),l.Q6J("@slideIn",void 0),l.xp6(3),l.Q6J("ngIf",n.checkPer(2)&&n.main.valid))},directives:[g.lW,A.Hw,r.O5,R.D,W.NW,X.t,b._Y,b.JL,b.sg,b.Fj,b.JJ,b.u,M.KE,M.hX,k.Nt,b.Q7,I.gD,r.sg,b.wV,M.R9,tt.O,nt.Rr,M.qo,it.HP,ot.y,U.ey],pipes:[f.pW],styles:[""],data:{animation:[T.Ym,T.Mq]}}),t})();function Ct(t,n){if(1&t){const t=l.EpF();l.TgZ(0,"div",2),l.TgZ(1,"button",3),l.NdJ("click",function(){return l.CHM(t),l.oxw().resetNhanDon()}),l._uU(2,"nhan-don"),l.qZA(),l.TgZ(3,"button",3),l.NdJ("click",function(){return l.CHM(t),l.oxw().resetHangHoa()}),l._uU(4,"hang-hoa"),l.qZA(),l.qZA()}}let wt=(()=>{class t{constructor(t){this.plus=t,this.db=null,this.dbName="ban-hang",this.isAdmin=this.plus.isAdmin()}ngOnInit(){this.plus.IDB_InitDB(this.dbName).subscribe(t=>{this.db=t})}resetNhanDon(){const t="an-uong";!confirm("Reset DB"+t)||this.plus.httpDelete(t,"del").subscribe(n=>{console.log("Clear DB"),this.plus.FBS_PostByUser(t,0).then(n=>{console.log("Clear FBS"),console.log(n),this.plus.IDB_DB_ClearCollection(this.db,t).subscribe(t=>{console.log("Clear IDB")})})})}resetHangHoa(){const t="hang-hoa";!confirm("Reset DB"+t)||this.plus.httpDelete(t,"del").subscribe(n=>{console.log("Clear DB"),this.plus.FBS_PostByUser(t,0).then(n=>{console.log("Clear FBS"),console.log(n),this.plus.IDB_DB_ClearCollection(this.db,t).subscribe(t=>{console.log("Clear IDB")})})})}checkPer(t,n){return this.plus.checkPer(t,n)}onDetect(t){console.log(t)}}return t.\u0275fac=function(n){return new(n||t)(l.Y36(d.T))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-ban-hang"]],decls:2,vars:1,consts:[[1,"container"],["class","row",4,"ngIf"],[1,"row"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(t,n){1&t&&(l.TgZ(0,"div",0),l.YNc(1,Ct,5,0,"div",1),l.qZA()),2&t&&(l.xp6(1),l.Q6J("ngIf",n.checkPer("hang-hoa",7)))},directives:[r.O5],styles:[""]}),t})();var It=i(83550),Mt=i(50296);function kt(t,n){if(1&t&&(l.TgZ(0,"b"),l._uU(1),l.qZA()),2&t){const t=l.oxw().$implicit;l.xp6(1),l.lnq(" ",t.TenHangHoa," [",t.GiaBan,"k/",t.DVT,"]")}}function Ut(t,n){if(1&t){const t=l.EpF();l.TgZ(0,"mat-option",34),l.NdJ("click",function(){const n=l.CHM(t).$implicit;return l.oxw().addNewItem(n)})("keyup.enter",function(){const n=l.CHM(t).$implicit;return l.oxw().addNewItem(n)})("onSelectionChange",function(){const n=l.CHM(t).$implicit;return l.oxw().addNewItem(n)}),l.YNc(1,kt,2,3,"b",8),l.qZA()}if(2&t){const t=n.$implicit;l.xp6(1),l.Q6J("ngIf",t.TrangThai)}}function Ht(t,n){1&t&&(l.TgZ(0,"mat-option"),l._uU(1," Kh\xf4ng c\xf2n k\u1ebft qu\u1ea3 ph\xf9 h\u1ee3p! "),l.qZA())}function Jt(t,n){if(1&t&&(l.TgZ(0,"b",35),l._uU(1),l.ALo(2,"commas"),l.qZA()),2&t){const t=l.oxw();l.xp6(1),l.hij("Ti\u1ec1n th\u1eeba: ",l.lcZ(2,1,1e3*+t.khachDua-t.ThanhTien),"")}}function Ot(t,n){if(1&t){const t=l.EpF();l.TgZ(0,"tr"),l.TgZ(1,"td",36),l._uU(2),l.qZA(),l.TgZ(3,"td",37),l._uU(4),l._UZ(5,"br"),l.TgZ(6,"b",38),l.NdJ("blur",function(n){const i=l.CHM(t).index;return l.oxw().updateGiaBan(i,"GiaBan",n)})("keydown.enter",function(n){const i=l.CHM(t).index;return l.oxw().updateGiaBan(i,"GiaBan",n)})("keydown.enter",function(n){const i=l.CHM(t).index;return l.oxw().updateList(i,"GiaBan",n)})("blur",function(n){const i=l.CHM(t).index;return l.oxw().updateList(i,"GiaBan",n)}),l._uU(7),l.ALo(8,"number"),l.qZA(),l._uU(9),l.qZA(),l.TgZ(10,"td",17),l.TgZ(11,"mat-icon",39),l.NdJ("click",function(){const n=l.CHM(t).index;return l.oxw().removeItem(n)}),l._uU(12,"arrow_left"),l.qZA(),l.TgZ(13,"b",40),l.NdJ("keydown.enter",function(n){const i=l.CHM(t).index;return l.oxw().updateList(i,"TongCong",n)})("blur",function(n){const i=l.CHM(t).index;return l.oxw().updateList(i,"TongCong",n)}),l._uU(14),l.ALo(15,"number"),l.qZA(),l.TgZ(16,"mat-icon",41),l.NdJ("click",function(){const n=l.CHM(t),i=n.$implicit,o=n.index;return l.oxw().addItem(i,o)}),l._uU(17,"arrow_right"),l.qZA(),l.qZA(),l.TgZ(18,"td",42),l.TgZ(19,"b"),l._uU(20),l.ALo(21,"commas"),l.qZA(),l.TgZ(22,"span",43),l.NdJ("click",function(){const n=l.CHM(t).index;return l.oxw().delItem(n)}),l.TgZ(23,"mat-icon",44),l._uU(24,"delete"),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&t){const t=n.$implicit,i=n.index;l.xp6(2),l.Oqu(i+1),l.xp6(2),l.Oqu(t.TenHangHoa),l.xp6(3),l.Oqu(l.lcZ(8,6,t.GiaBan)),l.xp6(2),l.hij("k/",t.DVT," "),l.xp6(5),l.hij(" ",l.lcZ(15,8,t.TongCong)," "),l.xp6(6),l.Oqu(l.lcZ(21,10,t.TongCong*t.GiaBan*1e3))}}function Ft(t,n){if(1&t&&(l.TgZ(0,"tr"),l.TgZ(1,"td"),l._uU(2),l.qZA(),l.TgZ(3,"td"),l._uU(4),l._UZ(5,"br"),l._uU(6),l.ALo(7,"commas"),l.qZA(),l.TgZ(8,"td",46),l._uU(9),l.qZA(),l.TgZ(10,"td",48),l._uU(11),l.ALo(12,"commas"),l.qZA(),l.qZA()),2&t){const t=n.$implicit,i=n.index;l.xp6(2),l.hij("",i+1," "),l.xp6(2),l.hij("",t.TenHangHoa," "),l.xp6(2),l.hij(" ",l.lcZ(7,5,1e3*t.GiaBan)," "),l.xp6(3),l.Oqu(t.TongCong),l.xp6(2),l.Oqu(l.lcZ(12,7,t.TongCong*t.GiaBan*1e3))}}function Gt(t,n){if(1&t&&(l.TgZ(0,"tbody"),l.YNc(1,Ft,13,9,"tr",19),l.TgZ(2,"tr"),l.TgZ(3,"td",45),l.TgZ(4,"h5"),l._uU(5,"T\u1ed5ng c\u1ed9ng:"),l.qZA(),l.qZA(),l.TgZ(6,"td"),l.TgZ(7,"h5"),l._uU(8),l.qZA(),l.qZA(),l.TgZ(9,"td",46),l.TgZ(10,"h5"),l._uU(11),l.ALo(12,"commas"),l.qZA(),l.TgZ(13,"h6"),l.TgZ(14,"i"),l._uU(15),l.ALo(16,"titlecase"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(17,"td",47),l.TgZ(18,"h6"),l._uU(19,"Xin c\u1ea3m \u01a1n qu\xfd kh\xe1ch"),l.qZA(),l.TgZ(20,"h6"),l._uU(21,"S\u1ea3n ph\u1ea9m c\u1ee7a 4la.vn"),l.qZA(),l.qZA(),l.qZA()),2&t){const t=l.oxw();l.xp6(1),l.Q6J("ngForOf",t.DonMua),l.xp6(7),l.hij("",t.total," m\xf3n"),l.xp6(3),l.hij(" ",l.lcZ(12,4,t.ThanhTien),""),l.xp6(4),l.Oqu(l.lcZ(16,6,t.bangchu))}}const Lt=function(t){return{loading:t}};let Pt=(()=>{class t{constructor(t,n,i){this.plus=t,this.route=n,this.fb=i,this.subs=(new It.y).subscribe(),this.db=null,this.title="B\xe1n h\xe0ng t\u1ea1p h\xf3a",this.dbName="ban-hang",this.api="tap-hoa",this.tabs=[],this.items=[],this.DonMua=[],this.total=0,this.ThanhTien=0,this.donHang=[],this.bangchu="",this.filter=[],this.audio=new Audio,this.nhapThuCong=!1,this.xemHoaDon=!0,this.user=this.plus.user.getValue(),this.printTime=Date.now(),this.NhomHang=this.plus.user.getValue().NhomHang,this.TabBan=this.plus.sortArr(this.plus.user.getValue().NhomBan,"ThuTu",1),this.ChiaBan=[],this.ban=0,this.width=window.innerWidth,this.count=0,this.now=Date.now(),this.xemBan=!0,this.xemMon=!1,this.donHangFB=this.fb.group({ThanhTien:[,[b.kI.required]],LoiNhuan:[,[b.kI.required]],SoKH:[,[b.kI.required]],GioVao:[,[b.kI.required]],DaThanhToan:[,[b.kI.required]],DonMua:this.fb.array([this.fb.group({idHangHoa:[,[b.kI.required]],DVT:[,[b.kI.required]],GiaBan:[,[b.kI.required]],GiaVon:[,[b.kI.required]],KhuyenMai:[,[b.kI.required]],TenHangHoa:[,[b.kI.required]],TongCong:[,[b.kI.required]]})])}),this.searchForm=this.fb.group({input:[,[b.kI.minLength(3),b.kI.maxLength(50)]]})}ngOnDestroy(){console.log("Destroy an-uong"),this.plus.subs.unsubscribe()}test(t){console.log(+t.replace(/\D/g,"")),this.khachDua=+t}ngOnInit(){this.plus.setTiTle(this.title),this.getBillLocal(),this.plus.IDB_InitDB(this.dbName).subscribe(t=>{this.db=t,document.getElementById("search-api").focus(),this.plus.updateUserLocal(t,"hang-hoa")}),this.search(),this.audio.src="assets/audio/beep.mp3",this.audio.load()}getBillLocal(){const t=JSON.parse(localStorage.getItem("tapHoaBill"));console.log("getBillLocal",t),null==t?this.DonMua=[]:(this.DonMua=t,this.getTongCong())}search(){this.subs.add(this.searchForm.valueChanges.subscribe(t=>{const n=this.plus.removeAccents(t.input);n.trim().length<2||this.plus.IDB_DB_GetByBarCode(this.db,"hang-hoa",n).subscribe(t=>{t?(this.searchForm.reset(),t.TrangThai?this.addNewItem(t):this.plus.alertMatSnackBar("T\u1ea1m h\u1ebft h\xe0ng")):(this.filter=[],this.plus.IDB_DB_Search(this.db,"hang-hoa",n,5).subscribe(t=>{this.filter=t}))})}))}thanhToan(){const t=confirm("In h\xf3a \u0111\u01a1n?");let n=Object.assign({DonMua:this.DonMua.map(t=>({idHangHoa:t._id,TenHangHoa:t.TenHangHoa,GiaBan:t.GiaBan,GiaVon:t.GiaVon,KhuyenMai:t.KhuyenMai,DVT:t.DVT,TongCong:t.TongCong})),LoiNhuan:this.DonMua.map(t=>t.GiaBan-t.GiaVon-t.GiaBan*t.KhuyenMai/100).reduce((t,n)=>t+n),ThanhTien:this.ThanhTien,GioVao:Date.now(),SoKH:this.total,DaThanhToan:!0});if(this.donHangFB.patchValue(n),this.donHangFB.invalid){const t=this.plus.getErrValidateForm(this.donHangFB);console.log(t,this.donHangFB.status)}else this.plus.httpPost("thanh-toan/new",n).subscribe(t=>{const n=this.plus.Crypt_DecryptRest(t);this.plus.FBS_PostByUser("hang-hoa",n.dateModify),this.DonMua=[],this.reload()});localStorage.removeItem("tapHoaBill"),t?(this.PrintDiv("HoaDon"),console.log(0,n)):console.log(1,n)}addNewItem(t){this.filter=[],this.playAudio(),this.xemHoaDon=!0,window.navigator.vibrate(100);const n=this.DonMua.find(n=>n._id==t._id);if(!n)return t.TongCong=1,this.DonMua.unshift(t),this.getTongCong();{const t=this.DonMua.findIndex(t=>t._id==n._id);this.DonMua[t].TongCong+=1}this.getTongCong(),this.filter=[],this.searchForm.controls.input.setValue("")}removeItem(t){this.playAudio(),this.DonMua[t].TongCong>0&&(this.DonMua[t].TongCong-=1),this.getTongCong()}addItem(t,n){this.playAudio(),this.DonMua[n].TongCong+=1,this.getTongCong()}delItem(t){this.DonMua.splice(t,1),this.getTongCong()}getTongCong(){this.total=this.plus.sumByKey(this.DonMua,"TongCong"),this.getThanhTien()}getThanhTien(){let t=0;return this.DonMua.forEach(n=>{t+=n.GiaBan*n.TongCong*1e3}),this.bangchu=this.plus.numToVi(t),localStorage.setItem("tapHoaBill",JSON.stringify(this.DonMua)),this.ThanhTien=t}PrintDiv(t){this.plus.load();let n=window.document.getElementById(t);var i=window.open("","PRINT");i.document.write(document.documentElement.innerHTML),setTimeout(()=>{i.document.body.innerHTML=n.outerHTML,i.document.close(),i.focus(),i.print(),i.close()},1e3),this.plus.loaded()}getBarcode(t){this.searchForm.controls.input.setValue(t)}find(t){this.filter=t}getByBarcode(t){}reload(){this.plus.reload("ban-hang/tap-hoa")}updateList(t,n,i){const o=+i.target.textContent;if(console.log(o),"Enter"===i.key&&i.preventDefault(),"number"!=typeof o)return this.plus.alertError("Sai \u0111\u1ecbnh d\u1ea1ng"),this.DonMua[t][n]=0;this.DonMua[t][n]=+o,this.getTongCong()}updateGiaBan(t,n,i){if(this.DonMua[t][n]==+i.target.textContent)return;const o=this.DonMua[t].TongCong,e=this.DonMua[t];delete e.__v,delete e.TongCong,e.GiaBan=+i.target.textContent,this.plus.httpPut("hang-hoa",e).subscribe(n=>{document.getElementById("search-api").focus(),console.log(this.DonMua[t])}),this.DonMua[t][n]=+i.target.textContent,this.DonMua[t].TongCong=+o,this.getTongCong()}updateKhachDua(t){const n=+t.target.textContent;console.log(n,typeof n),"Enter"===t.key&&t.preventDefault(),("number"!=typeof n||Number.isNaN(n))&&this.plus.alertError("B\u1ea1n ph\u1ea3i nh\u1eadp s\u1ed1 ti\u1ec1n"),this.khachDua=+n}playAudio(){this.audio.play()}}return t.\u0275fac=function(n){return new(n||t)(l.Y36(d.T),l.Y36(N.gz),l.Y36(b.qu))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-tap-hoa"]],decls:69,vars:22,consts:[[1,"container-fluid"],[1,"row",2,"padding-top","10px"],[1,"col-lg-6"],[1,"form-group",3,"formGroup"],["type","text","id","search-api","autocomplete","off","formControlName","input","placeholder","T\xecm ki\u1ebfm (F2)",1,"form-control",3,"readonly","matAutocomplete","ngClass"],["autoActiveFirstOption",""],["auto","matAutocomplete"],[3,"click","keyup.enter","onSelectionChange",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"barcodeResult"],["id","thanh-toan","mat-raised-button","","color","warn",1,"float-rigth",3,"disabled","click"],["contentEditable","true",1,"font-blue","inputSpan",3,"keydown.enter","blur"],["style","padding-left: 15px; color: blue;",4,"ngIf"],[1,"row"],[1,"table","table-hover"],["width","10%"],["width","35%"],["width","30%"],["width","25%",2,"text-align","center"],[4,"ngFor","ngForOf"],["id","modelId","tabindex","-1","role","dialog","aria-labelledby","modelTitleId","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body","hoadon"],["id","HoaDon",1,"div"],[1,"text-left"],[1,"thead-inverse"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],["type","button",1,"btn","btn-primary"],[3,"click","keyup.enter","onSelectionChange"],[2,"padding-left","15px","color","blue"],["width","10%",2,"padding-left","5px"],["width","35%",2,"font-size","16px"],["contenteditable","true",1,"px-2","font-blue",3,"blur","keydown.enter"],["matPrefix","",1,"ar",3,"click"],["contenteditable","true",1,"font-blue",3,"keydown.enter","blur"],["matSuffix","",1,"ar",3,"click"],["width","25%",1,"text-right"],[2,"margin-left","20px",3,"click"],["color","warn"],["colspan","2",1,"text-center"],[1,"text-center"],["colspan","4",1,"text-center"],[1,"text-rigth"]],template:function(t,n){if(1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l.TgZ(3,"div",3),l._UZ(4,"input",4),l.TgZ(5,"mat-autocomplete",5,6),l.YNc(7,Ut,2,1,"mat-option",7),l.YNc(8,Ht,2,0,"mat-option",8),l.qZA(),l.qZA(),l.qZA(),l.TgZ(9,"div",2),l.TgZ(10,"app-barcode-scanner",9),l.NdJ("barcodeResult",function(t){return n.getBarcode(t)}),l.qZA(),l.TgZ(11,"button",10),l.NdJ("click",function(){return n.thanhToan()}),l._uU(12),l.ALo(13,"commas"),l.qZA(),l.TgZ(14,"b"),l._uU(15,"Kh\xe1ch \u0111\u01b0a: "),l.TgZ(16,"span",11),l.NdJ("keydown.enter",function(t){return n.updateKhachDua(t)})("blur",function(t){return n.updateKhachDua(t)}),l.qZA(),l._uU(17,".000\u0111"),l.qZA(),l.YNc(18,Jt,3,3,"b",12),l.qZA(),l.qZA(),l.TgZ(19,"div",13),l.TgZ(20,"table",14),l.TgZ(21,"thead"),l.TgZ(22,"tr"),l.TgZ(23,"th",15),l._uU(24,"TT "),l.qZA(),l.TgZ(25,"th",16),l._uU(26,"H\u1ea1ng m\u1ee5c"),l.qZA(),l.TgZ(27,"th",17),l._uU(28,"S\u1ed1 l\u01b0\u1ee3ng"),l.qZA(),l.TgZ(29,"th",18),l._uU(30,"Th\xe0nh ti\u1ec1n"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(31,"tbody"),l.YNc(32,Ot,25,12,"tr",19),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(33,"div",20),l.TgZ(34,"div",21),l.TgZ(35,"div",22),l.TgZ(36,"div",23),l.TgZ(37,"h5",24),l._uU(38,"Modal title"),l.qZA(),l.TgZ(39,"button",25),l.TgZ(40,"span",26),l._uU(41,"\xd7"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(42,"div",27),l.TgZ(43,"div",28),l.TgZ(44,"div",29),l.TgZ(45,"h6"),l._uU(46),l.qZA(),l.TgZ(47,"h6"),l._uU(48),l.qZA(),l.TgZ(49,"h6"),l._uU(50),l.ALo(51,"date"),l.qZA(),l.qZA(),l.TgZ(52,"table",14),l.TgZ(53,"thead",30),l.TgZ(54,"tr"),l.TgZ(55,"th"),l._uU(56,"TT"),l.qZA(),l.TgZ(57,"th"),l._uU(58,"H\u1ea1ng m\u1ee5c"),l.qZA(),l.TgZ(59,"th"),l._uU(60,"S\u1ed1 l\u01b0\u1ee3ng"),l.qZA(),l.TgZ(61,"th"),l._uU(62,"Th\xe0nh ti\u1ec1n"),l.qZA(),l.qZA(),l.qZA(),l.YNc(63,Gt,22,8,"tbody",8),l.qZA(),l.qZA(),l.qZA(),l.TgZ(64,"div",31),l.TgZ(65,"button",32),l._uU(66,"Close"),l.qZA(),l.TgZ(67,"button",33),l._uU(68,"Save"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&t){const t=l.MAs(6);l.xp6(3),l.Q6J("formGroup",n.searchForm),l.xp6(1),l.Q6J("readonly",!1)("matAutocomplete",t)("ngClass",l.VKq(20,Lt,n.filter.length>1&&n.filter.length<5)),l.xp6(3),l.Q6J("ngForOf",n.filter),l.xp6(1),l.Q6J("ngIf",0==n.filter.length&&n.searchForm.value.input),l.xp6(3),l.Q6J("disabled",0==n.ThanhTien),l.xp6(1),l.AsE(" ",n.DonMua.length," | ",l.lcZ(13,15,n.ThanhTien)," "),l.xp6(6),l.Q6J("ngIf",n.khachDua>0&&1e3*n.khachDua>n.ThanhTien),l.xp6(14),l.Q6J("ngForOf",n.DonMua),l.xp6(14),l.Oqu(n.user.title),l.xp6(2),l.Oqu(n.user.phoneNumber),l.xp6(2),l.hij("Gi\u1edd in:",l.xi3(51,17,n.printTime,"hh:mm dd/MM/yyyy"),""),l.xp6(13),l.Q6J("ngIf",n.DonMua)}},directives:[b.JL,b.sg,b.Fj,Mt.ZL,b.JJ,b.u,r.mk,Mt.XC,r.sg,r.O5,tt.O,g.lW,U.ey,A.Hw,M.qo,M.R9],pipes:[f.W,r.uU,r.JJ,r.rS],styles:[".hangHoa[_ngcontent-%COMP%]{height:8rem;width:8rem;border-radius:1rem;margin:.2rem;border-bottom-width:1rem;border-color:#90ee90;color:#00f;float:left;display:flex;align-items:center;justify-content:center}.hangHoa[_ngcontent-%COMP%]:active{transform:scale(1.1);opacity:50%}.hoadon[_ngcontent-%COMP%]{width:200px}.font-mat[_ngcontent-%COMP%]{color:#fff;font-size:medium}.font-blue[_ngcontent-%COMP%]{font-size:16px;padding-left:10px;padding-right:10px}.arrow-bt[_ngcontent-%COMP%]{font-size:larger;color:#00f;font-weight:700;padding:.5rem}.arrow-bt[_ngcontent-%COMP%]:hover{border:brown;border-radius:.5rem;background-color:#0ff}.example-form-field[_ngcontent-%COMP%]{max-width:8rem}.row[_ngcontent-%COMP%]{margin-left:5px!important;margin-right:5px!important}td[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{padding:0;vertical-align:middle}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding-bottom:0!important}.ar[_ngcontent-%COMP%]{transform:scale(1.5);color:tomato}.ar[_ngcontent-%COMP%]:active{transform:scale(2.2);color:#00f}.inputSpan[_ngcontent-%COMP%]{border-bottom:solid;border-color:#00f;padding-left:10px;text-align:right}.inputSpan[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:focus{border:rgb(255,0,0)}"],data:{animation:[T.Ym]}}),t})(),Qt=(()=>{class t{constructor(t){this.plus=t}canActivate(){return this.plus.checkPer("hang-hoa")}}return t.\u0275fac=function(n){return new(n||t)(l.LFG(d.T))},t.\u0275prov=l.Yz7({token:t,factory:t.\u0275fac}),t})(),Yt=(()=>{class t{constructor(t){this.plus=t}canActivate(){return this.plus.checkPer("an-uong")}}return t.\u0275fac=function(n){return new(n||t)(l.LFG(d.T))},t.\u0275prov=l.Yz7({token:t,factory:t.\u0275fac}),t})(),St=(()=>{class t{constructor(t){this.plus=t}canActivate(){return this.plus.checkPer("pha-che")}}return t.\u0275fac=function(n){return new(n||t)(l.LFG(d.T))},t.\u0275prov=l.Yz7({token:t,factory:t.\u0275fac}),t})(),Vt=(()=>{class t{constructor(t){this.plus=t}canActivate(){return this.plus.checkPer("tap-hoa")}}return t.\u0275fac=function(n){return new(n||t)(l.LFG(d.T))},t.\u0275prov=l.Yz7({token:t,factory:t.\u0275fac}),t})(),Et=(()=>{class t{constructor(t){this.plus=t}canActivate(){return this.plus.checkPer("thanh-toan")}}return t.\u0275fac=function(n){return new(n||t)(l.LFG(d.T))},t.\u0275prov=l.Yz7({token:t,factory:t.\u0275fac}),t})();const $t=[{path:"",component:wt},{path:"hang-hoa",component:Bt,canActivate:[Qt]},{path:"an-uong/:ten-ban",component:z,canActivate:[Yt]},{path:"an-uong",component:z,canActivate:[Yt]},{path:"pha-che",component:v,canActivate:[St]},{path:"tap-hoa",component:Pt,canActivate:[Vt]},{path:"bao-cao",component:Z,canActivate:[Et]}];let Kt=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({providers:[Qt,Yt,St,Vt,Et],imports:[[N.Bz.forChild($t)],N.Bz]}),t})();var jt=i(85913),zt=i(24561),Rt=i(60929);let Wt=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({providers:[Rt.F],imports:[[r.ez,e.ShareModule,s.qX,Kt,c.D,jt.m,Rt.F,zt.k,a.k,o.N]]}),t})()},64762:function(t,n,i){function o(t,n,i,o){return new(i||(i=Promise))(function(e,a){function s(t){try{r(o.next(t))}catch(n){a(n)}}function c(t){try{r(o.throw(t))}catch(n){a(n)}}function r(t){t.done?e(t.value):function(t){return t instanceof i?t:new i(function(n){n(t)})}(t.value).then(s,c)}r((o=o.apply(t,n||[])).next())})}i.d(n,{mG:function(){return o}})}}]);