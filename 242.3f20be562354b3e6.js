"use strict";(self.webpackChunkdlxl=self.webpackChunkdlxl||[]).push([[242],{41258:(Bt,Y,h)=>{h.d(Y,{K:()=>C});var T=h(94650),I=h(25555),t=h(5383);let C=(()=>{class F{constructor(b,E){this.plus=b,this.excelSV=E,this.excel=new T.vpe,this.json=new T.vpe,this.label="Copy v\xe0 d\xe1n n\u1ed9i dung v\xe0o \u0111\xe2y",this.output=[],this.table=""}ngOnInit(){}convertJson(b){let E=[];for(let y=1;y<b.length;y++){let f={};const Z=b[y];for(let[v,D]of Object.entries(b[0]))f[`${D}`]=Z[v];E.push(f)}this.json.emit(E)}parseExcel(b){let E=b.target.value.trim(),y=[],f=[];const Z=E.split("\n");for(let v=0;v<Z.length;v++)y[v]=Z[v].split("\t");return y.forEach(v=>{let w={};v.forEach((B,z)=>{w[z]=B}),f.push(w)}),this.output=f,this.json.emit(f),this.table=this.exportTbale(f),localStorage.setItem("parser",JSON.stringify(f)),this.excel.emit(f),this.convertJson(f),f}parseExcel2(b){let E=b.target.value.trim(),y=[],f=[];const Z=E.split("\n");for(let v=0;v<Z.length;v++)y[v]=Z[v].split("\t");return y.forEach(v=>{const D=y[0];let w={};v.forEach((B,z)=>{w[this.plus.generateKey(D[z])]=B}),f.push(w)}),this.output=f,this.table=this.exportTbale(f),localStorage.setItem("parser",JSON.stringify(f)),this.excel.emit(f),f}exportTbale(b){let E="<th>STT</th>",y="";for(let Z in b[0])b[0].hasOwnProperty(Z)&&(E+="<th>"+this.plus.generateKey(b[0][Z])+"</th>");return b.forEach((Z,v)=>{y+=`<tr><td>${v+1}</td>`;for(const D in Z)Z.hasOwnProperty(D)&&(y+="<td>"+Z[D]+"</td>");y+="</tr>"}),`\n    <table class="table table-bordered table-hover ">\n      <thead>\n        <tr class="text-center">\n         ${E}\n        </tr>\n      <thead>\n      <tbody style = "border: 1px solid black;">\n         ${y}\n      <tbody>\n    <table>\n    `}reset(b){return b.target.value=""}save(){const b=JSON.stringify(this.output);localStorage.setItem("parser",b)}}return F.\u0275fac=function(b){return new(b||F)(T.Y36(I.T),T.Y36(t.x))},F.\u0275cmp=T.Xpm({type:F,selectors:[["app-parse-excel-clipboard"]],inputs:{label:"label"},outputs:{excel:"excel",json:"json"},decls:6,vars:1,consts:[[1,"container"],[1,"form-group"],[1,"text-center"],["rows","2",1,"form-control",3,"placeholder","click","change"],["input1",""]],template:function(b,E){1&b&&(T.TgZ(0,"div",0)(1,"div",1),T._UZ(2,"div",2),T.TgZ(3,"textarea",3,4),T.NdJ("click",function(f){return E.reset(f)})("change",function(f){return E.parseExcel(f)}),T._uU(5,"  "),T.qZA()()()),2&b&&(T.xp6(3),T.s9C("placeholder",E.label))}}),F})()},36242:(Bt,Y,h)=>{h.r(Y),h.d(Y,{UltisModule:()=>mn});var T=h(24006),I=h(36895),t=h(94650),C=h(15861),F=h(15228),b=(h(14545),h(80574)),E=h(15439),y=h.n(E),f=h(25555),Z=h(5383),v=h(9157),D=h(94559),w=h(70511),B=h(94327),z=h.n(B),zt=h(25650),qt=h.n(zt);let Pt=(()=>{class s{constructor(e){this.plus=e}createZip(e,n="4la"){const i=new(qt());let r=i.folder("");const l=this.plus.cleanToString(n)+".zip";for(let a=0;a<e.length;a++){const c=e[a];r.file(c.name,c)}i.generateAsync({type:"blob"}).then(a=>{a&&(console.log(a),z()(a,l))})}}return s.\u0275fac=function(e){return new(e||s)(t.LFG(f.T))},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();var Ht=h(36973),xt=h(90455),N=h(4859),G=h(97392),nt=h(284),K=h(59549),Yt=h(3238),Gt=h(84385),ot=h(10266),O=h(49652),jt=h(15194);function Rt(s,o){if(1&s){const e=t.EpF();t.TgZ(0,"button",42),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.getSheetAPI())}),t.TgZ(1,"mat-icon",43),t._uU(2,"download"),t.qZA()()}}function Qt(s,o){1&s&&(t.TgZ(0,"mat-icon",44),t._uU(1,"done"),t.qZA()),2&s&&t.Q6J("@slideX",void 0)}function Wt(s,o){1&s&&(t.TgZ(0,"mat-icon",44),t._uU(1,"done"),t.qZA()),2&s&&t.Q6J("@slideX",void 0)}function $t(s,o){if(1&s){const e=t.EpF();t.TgZ(0,"button",45),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.generate())}),t.TgZ(1,"mat-icon"),t._uU(2,"file_download"),t.qZA()()}}function Xt(s,o){if(1&s){const e=t.EpF();t.TgZ(0,"button",46),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.generateZipFile())}),t.TgZ(1,"mat-icon"),t._uU(2,"folder_zip"),t.qZA()()}}function te(s,o){if(1&s){const e=t.EpF();t.TgZ(0,"button",46),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.convertByKeyTC())}),t.TgZ(1,"mat-icon"),t._uU(2,"extension"),t.qZA()()}}function ee(s,o){if(1&s){const e=t.EpF();t.TgZ(0,"button",47),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.createZipByKeyTC())}),t.TgZ(1,"mat-icon"),t._uU(2,"pix"),t.qZA()()}}function ne(s,o){if(1&s){const e=t.EpF();t.TgZ(0,"button",48),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.createZipMergeByKeyTC())}),t.TgZ(1,"mat-icon"),t._uU(2,"pix"),t.qZA()()}}function oe(s,o){if(1&s){const e=t.EpF();t.TgZ(0,"button",49),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.reload())}),t.TgZ(1,"mat-icon"),t._uU(2,"autorenew"),t.qZA()()}}function ie(s,o){if(1&s){const e=t.EpF();t.TgZ(0,"mat-option",57),t.NdJ("onSelectionChange",function(){const r=t.CHM(e).$implicit,l=t.oxw().index,a=t.oxw(2);return t.KtG(a.pipe(r,l))}),t._uU(1),t.qZA()}if(2&s){const e=o.$implicit;t.s9C("value",e.key),t.xp6(1),t.hij(" ",e.val," ")}}function se(s,o){if(1&s){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td")(6,"mat-select"),t.YNc(7,ie,2,2,"mat-option",55),t.qZA()(),t.TgZ(8,"td",56),t.NdJ("click",function(){const r=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.copy(r))}),t._uU(9),t.qZA()()}if(2&s){const e=o.$implicit,n=t.oxw(2);t.xp6(2),t.hij(" ",e.key,""),t.xp6(2),t.hij(" ",e.value,""),t.xp6(3),t.Q6J("ngForOf",n.pipes),t.xp6(2),t.HOy(" ","{","",e.key,"",e.pipe,"","}"," ")}}function re(s,o){if(1&s&&(t.TgZ(0,"div",1)(1,"table",50)(2,"thead")(3,"tr")(4,"th",51),t._uU(5,"Excel"),t.qZA(),t.TgZ(6,"th",52),t._uU(7,"Word"),t.qZA(),t.TgZ(8,"th",53),t._uU(9,"Pipe"),t.qZA(),t.TgZ(10,"th",53),t._uU(11,"Result"),t.qZA()()(),t.TgZ(12,"tbody"),t.YNc(13,se,10,7,"tr",54),t.qZA()()()),2&s){const e=t.oxw();t.xp6(13),t.Q6J("ngForOf",e.temp)}}function le(s,o){if(1&s){const e=t.EpF();t.TgZ(0,"td",60),t.NdJ("click",function(){const r=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.copyCol(r))}),t._uU(1),t.qZA()}if(2&s){const e=o.$implicit;t.xp6(1),t.Oqu(e)}}function ae(s,o){if(1&s&&(t.TgZ(0,"table",58)(1,"tbody")(2,"h6",39),t._uU(3),t.qZA(),t.TgZ(4,"tr"),t.YNc(5,le,2,1,"td",59),t.qZA()()()),2&s){const e=o.$implicit;t.xp6(3),t.hij(" T\xean sheet: ",e.name,""),t.xp6(2),t.Q6J("ngForOf",e.cols)}}let ce=(()=>{class s{constructor(e,n,i,r,l,a){this.plus=e,this.excel=n,this.docxSV=i,this.loadSV=r,this.httpSV=l,this.zipSV=a,this.wordFile=null,this.excelFile=null,this.chunkSize=100,this.numSheetRead=localStorage.getItem("numSheetRead")?+localStorage.getItem("numSheetRead"):5,this.fileName="",this.items={},this.ok=!1,this.temp=[],this.table=[],this.pipes=[{key:"lower",val:"Ch\u1eef th\u01b0\u1eddng"},{key:"upper",val:"Ch\u1eef in hoa"},{key:"title",val:"Ch\u1eef hoa \u0111\u1ea7u d\xf2ng"},{key:"number",val:"S\u1ed1"},{key:"vnd",val:"S\u1ed1 th\xe0nh ch\u1eef"},{key:"dd",val:"Ng\xe0y"},{key:"mm",val:"Th\xe1ng"},{key:"yyyy",val:"N\u0103m"},{key:"dmy",val:"Ng\xe0y & th\xe1ng & n\u0103m"},{key:"dt",val:"Gi\u1edd & ph\xfat & ng\xe0y & th\xe1ng & n\u0103m"}],this.keyThamChieu="",this.templateName=localStorage.getItem("templateName")||"",this.SheetId=localStorage.getItem("sheetId")||"",this.SheetName=localStorage.getItem("sheetName")||"",this.outDataByKeyTC=[]}ngOnInit(){this.link&&this.docxSV.loadFileUrl(this.link).then(e=>{this.wordFile=e}),this.merge=JSON.parse(localStorage.getItem("merge")),this.plus.setTiTle("Ti\u1ec7n \xedch")}getDocxFile(){this.templateName.length<3||(localStorage.setItem("templateName",this.templateName),this.docxSV.loadFileUrl(`https://thuctd.github.io/templates/${this.templateName}.docx`).then(e=>{this.wordFile=e}))}getSheetAPI(){if(!this.SheetName)return;let e={_Merge:[]},n={sheetId:this.SheetId,sheetName:this.SheetName};localStorage.setItem("sheetId",this.SheetId),localStorage.setItem("sheetName",this.SheetName),this.httpSV.post("sheet",n,"").subscribe(i=>{let r=i.data;for(let l=0;l<r.length;l++){const a=r[l];("x"==a.Chon||"X"==a.Chon)&&e._Merge.push(a)}this.items=e,this.chunkSize=e._Merge.length,this.convertToTemp(e)})}selectedFile(e){console.log(e),this.items=e,this.chunkSize=e.length,this.convertToTemp(e)}convertToTemp(e){if(0==e._Merge.length)return this.plus.alertWarning("B\u1ea1n ch\u01b0a ch\u1ecdn d\xf2ng n\xe0o \u0111\u1ec3 s\u1eed d\u1ee5ng");this.loadSV.load("convertToTemp");let n=e._Merge[0],i=[];for(const r in n){let l={key:r,value:"object"==typeof n[r]?y()(n[r]).add(7,"hours").format("DD/MM/YYYY"):n[r]};i.push(l)}this.temp=i;for(const r in this.items){let l=this.items[r][0],a={name:r,cols:[]};for(const u in l)a.cols.push(`{${u}}`);a.cols[0]=`{#${r}}${a.cols[0]}`;let c=a.cols.length-1;a.cols[c]=`${a.cols[c]}{/${r}}`,this.table.push(a)}this.loadSV.loaded("convertToTemp")}pipe(e,n){this.temp[n].pipe=" | "+e.key}convertByKeyTC(){var e=this;return(0,C.Z)(function*(){return new Promise(n=>{e.docxSV.fileToJsonArrayByKey(e.excelFile,!0,"DD/MM/YYYY",e.numSheetRead,!1).then(i=>{console.log(i);const r=i.MainSheet;for(let l=0;l<r.length;l++){let a=r[l];if(!a.IDK)continue;let c=a.IDK;for(const u in i){let d=[];for(let g=0;g<i[u].length;g++){const p=i[u][g];c in p&&p[c]==a[c]&&d.push(p)}d.map((g,p)=>g.TT=p+1),a[u]=d,1==d.length&&(a=Object.assign(a,d[0]))}e.outDataByKeyTC.push(a)}n(e.outDataByKeyTC),e.convertToTemp({_Merge:[e.outDataByKeyTC[0]]})})})})()}onDrop(e){localStorage.setItem("numSheetRead",this.numSheetRead.toString());for(let n=0;n<e.length;n++)"application/vnd.openxmlformats-officedocument.wordprocessingml.document"==e[n].type?(console.log("if docx"),this.readFile(e[n],!0)):"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"==e[n].type?(this.excelFile=e[n],console.log("else if xlsx"),this.readXlsxToMerge(e[n],this.numSheetRead).then(i=>{this.items=i,this.chunkSize=i._Merge.length,this.convertToTemp(i),this.ok=!0})):this.plus.alertError("Ch\u1ec9 \u0111\u01b0\u1ee3c ch\u1ecdn file c\xf3 \u0111\u1ecbnh d\u1ea1ng *.docx ho\u1eb7c *.xlsx!");document.getElementById("dropZone").setAttribute("drop-active","false")}createZipByKeyTC(){var e=this;return(0,C.Z)(function*(){e.convertByKeyTC().then(function(){var n=(0,C.Z)(function*(i){let r=[];if(1==e.outDataByKeyTC.length)return e.docxSV.generateOne(e.outDataByKeyTC[0],e.wordFile,e.outDataByKeyTC[0][`${e.outDataByKeyTC[0].IDK}`]);if(0==e.outDataByKeyTC.length)return e.plus.alertWarning("Kho\u0302ng ti\u0300m tha\u0302\u0301y d\u1eef li\u1ec7u ho\u1eb7c ch\u01b0a g\xe1n IDK");if(e.merge){let l={_Merge:e.outDataByKeyTC};yield e.docxSV.generateMerge(l,e.wordFile,e.fileName)}else{for(let l=0;l<e.outDataByKeyTC.length;l++){let a=e.outDataByKeyTC[l].IDK;const c=e.outDataByKeyTC[l];let u=yield e.docxSV.generateOnePromise(c,e.wordFile,c[a]);r.push(u)}e.zipSV.createZip(r)}e.plus.reload("tienich/merge")});return function(i){return n.apply(this,arguments)}}())})()}createZipMergeByKeyTC(){var e=this;return(0,C.Z)(function*(){e.docxSV.fileToJsonArrayByKey(e.excelFile,!0,"DD/MM/YYYY",e.numSheetRead,!1).then(function(){var n=(0,C.Z)(function*(i){const r=i.MainSheet;console.log(r);let l=[];for(let a=0;a<r.length;a++){let c=r[a];if(!c.IDS||!c.IDK)continue;let d=c.IDK,g=i[c.IDS],p=[];for(let m=0;m<g.length;m++){const x=g[m];d in x&&x[d]==c[d]&&p.push(x)}p.map((m,x)=>m.TT=x+1);let _={_Merge:p},A=yield e.docxSV.generateMergePromise(_,e.wordFile,c[d]+c.TenFile);l.push(A)}e.zipSV.createZip(l),e.plus.reload("tienich/merge")});return function(i){return n.apply(this,arguments)}}())})()}readFile(e,n=!1){if(n){this.fileName=e.name;const i=new FileReader;i.readAsArrayBuffer(e),i.onloadend=()=>this.wordFile=i.result}else{if(!e.target.files[0])return this.plus.alertWarning("B\u1ea1n ch\u01b0a ch\u1ecdn file");if("application/vnd.openxmlformats-officedocument.wordprocessingml.document"!=e.target.files[0].type)return this.plus.alertError("Kh\xf4ng \u0111\xfang \u0111\u1ecbnh d\u1ea1ng *.docx (Word 2003 tr\u1edf l\xean)");{this.fileName=e.target.files[0].name;const i=new FileReader;i.readAsArrayBuffer(e.target.files[0]),i.onloadend=()=>this.wordFile=i.result}}}generate(){var e=this;return(0,C.Z)(function*(){if(e.merge){let n=+e.chunkSize,i=e.items._Merge,r=0,l=1;for(;r<i.length;){let a={_Merge:i.slice(r,r+n)};yield e.docxSV.generateMerge(a,e.wordFile,`File-${l}`+e.fileName),l++,r+=n}}else e.docxSV.generateStepFile(e.items,e.wordFile,e.fileName);e.plus.reload("tienich/merge")})()}generateZipFile(){this.docxSV.generateZipFile(this.items,this.wordFile,this.fileName)}chunkArray(e,n=this.chunkSize){const i=[];for(let r=0;r<e.length;r+=n)i.push(e.slice(r,r+n));return i}reload(){this.plus.reload("/tienich/merge")}reset(){this.wordFile=null,this.fileName="",this.items={}}readXlsxToMerge(e,n=5){return new Promise((i,r)=>{this.loadSV.load("readXlsxToMerge");let l={};if(null!=e&&"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"!=e.type&&"application/vnd.ms-excel"!=e.type)return this.plus.alertError("Kh\xf4ng ph\u1ea3i file excel");const a=new FileReader;a.readAsArrayBuffer(e),a.onloadend=c=>{const d=b.ij(c.target.result,{type:"binary",cellDates:!0,dateNF:"DD/MM/YYYY"}),g=d.SheetNames;for(let p=0;p<(n>g.length?g.length:n);p++){const _=g[p];if("_Merge"==_)return this.plus.alertError("Vui l\xf2ng \u0111\u1ed5i t\xean sheet _Merge th\xe0nh t\xean kh\xe1c");const m=b.P6.sheet_to_json(d.Sheets[_],{header:1,raw:!0});l[`${0==p?"_Merge":_}`]=this.keyThamChieu.length>0?this.excel.convertJSonByKey(m,this.keyThamChieu):this.excel.convertJSonByX(m)}i(l),this.loadSV.loaded("readXlsxToMerge")}})}ondragover(){document.getElementById("dropZone").setAttribute("drop-active","true")}changeMerge(){localStorage.setItem("merge",JSON.stringify(this.merge))}copy(e){e.pipe=null==e.pipe?"":e.pipe,this.plus.copyToClipboard("{"+e.key+e.pipe+"}")}copyCol(e){this.plus.copyToClipboard(e)}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(f.T),t.Y36(Z.x),t.Y36(v.E),t.Y36(D.b),t.Y36(w.O),t.Y36(Pt))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-docxtemplate"]],inputs:{link:"link"},decls:98,vars:22,consts:[[1,"container-fluid","my-5"],[1,"row"],[1,"col-4"],["matInput","","placeholder","Template name",3,"ngModel","ngModelChange"],["matSuffix","",3,"click"],["matInput","","placeholder","Id",3,"ngModel","ngModelChange"],["matInput","","placeholder","Name",3,"ngModel","ngModelChange"],["mat-raised-button","",3,"click",4,"ngIf"],[1,"row","justify-content-center","d-none-print"],["hidden","","id","file-word","type","file","multiple","false",3,"change"],["id","dropZone",1,"table",3,"appDropZone","dragover"],[3,"raw","docx"],["color","primary",4,"ngIf"],["href","https://github.com/thuctd/FileStore/raw/master/templates/Template.xlsx",1,"py-2"],["for","file-word",1,"custom-file-upload","text-primary"],["aria-hidden","true",1,"text-primary","fa","fa-file-word-o","fa-2x"],["href","https://github.com/thuctd/FileStore/raw/master/templates/Template.docx",1,"py-2"],[1,"text-center"],["colspan","4"],[1,"col"],["color","warn",3,"ngModel","change","ngModelChange"],["matInput","","placeholder","Chia nh\u1ecf file",3,"ngModel","ngModelChange"],["matInput","","placeholder","S\u1ed1 sheet c\u1ea7n \u0111\u1ecdc",3,"ngModel","ngModelChange"],["mat-raised-button","","color","accent","matTooltip","T\u1ea1o t\u1eebng file",3,"click",4,"ngIf"],["mat-raised-button","","color","accent","matTooltip","T\u1ea1o file zip",3,"click",4,"ngIf"],["mat-raised-button","","color","accent","matTooltip","T\u1ea1o file zip theo key",3,"click",4,"ngIf"],["mat-raised-button","","color","warn","matTooltip","T\u1ea1o file merge zip theo key",3,"click",4,"ngIf"],["data-bs-toggle","modal","data-bs-target","#merger","mat-icon-button","","color","primary"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["class","row",4,"ngIf"],["class","table table-bordered my-4",4,"ngFor","ngForOf"],["hidden","","id","modalmerger","type","button","data-bs-toggle","modal","data-bs-target","#merger",1,"btn","btn-primary"],["id","merger","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","staticBackdropLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"font-blue"],[1,"modal-footer"],["color","primary","id","closeModalmerger","mat-raised-button","","data-bs-dismiss","modal","aria-label","Close"],["mat-raised-button","",3,"click"],["matSuffix",""],["color","primary"],["mat-raised-button","","color","accent","matTooltip","T\u1ea1o t\u1eebng file",3,"click"],["mat-raised-button","","color","accent","matTooltip","T\u1ea1o file zip",3,"click"],["mat-raised-button","","color","accent","matTooltip","T\u1ea1o file zip theo key",3,"click"],["mat-raised-button","","color","warn","matTooltip","T\u1ea1o file merge zip theo key",3,"click"],["mat-raised-button","","color","primary",3,"click"],[1,"table","table-bordered","table-hover"],[2,"width","100px !important"],[1,"w-55"],[1,"w-15"],[4,"ngFor","ngForOf"],[3,"value","onSelectionChange",4,"ngFor","ngForOf"],[1,"font-blue",3,"click"],[3,"value","onSelectionChange"],[1,"table","table-bordered","my-4"],[3,"click",4,"ngFor","ngForOf"],[3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"mat-expansion-panel"),t._UZ(2,"mat-expansion-panel-header"),t.TgZ(3,"div",1)(4,"div",2)(5,"mat-form-field")(6,"input",3),t.NdJ("ngModelChange",function(r){return n.templateName=r}),t.qZA(),t.TgZ(7,"mat-icon",4),t.NdJ("click",function(){return n.getDocxFile()}),t._uU(8,"download"),t.qZA()()(),t.TgZ(9,"div",2)(10,"mat-form-field")(11,"input",5),t.NdJ("ngModelChange",function(r){return n.SheetId=r}),t.qZA()()(),t.TgZ(12,"div",2)(13,"mat-form-field")(14,"input",6),t.NdJ("ngModelChange",function(r){return n.SheetName=r}),t.qZA()()()(),t.YNc(15,Rt,3,0,"button",7),t.qZA(),t.TgZ(16,"div",8)(17,"input",9),t.NdJ("change",function(r){return n.readFile(r)}),t.qZA(),t.TgZ(18,"table",10),t.NdJ("appDropZone",function(r){return n.onDrop(r)})("dragover",function(){return n.ondragover()}),t.TgZ(19,"tr")(20,"td")(21,"label"),t._uU(22,"Ch\u1ecdn ho\u1eb7c th\u1ea3 2 file v\xe0o \u0111\xe2y"),t.qZA()(),t.TgZ(23,"td")(24,"app-read-xlsx",11),t.NdJ("docx",function(r){return n.selectedFile(r)}),t.qZA(),t.YNc(25,Qt,2,1,"mat-icon",12),t._UZ(26,"br"),t.TgZ(27,"a",13),t._uU(28,"M\u1eabu Excel "),t.qZA()(),t.TgZ(29,"td")(30,"label",14),t._uU(31,"Ch\u1ecdn file Word "),t._UZ(32,"i",15),t.YNc(33,Wt,2,1,"mat-icon",12),t.qZA(),t._UZ(34,"br"),t.TgZ(35,"a",16),t._uU(36,"M\u1eabu Word "),t.qZA()(),t._UZ(37,"td"),t.qZA(),t.TgZ(38,"tr",17)(39,"td",18)(40,"div",1)(41,"div",19)(42,"mat-slide-toggle",20),t.NdJ("change",function(){return n.changeMerge()})("ngModelChange",function(r){return n.merge=r}),t._uU(43," Tr\u1ed9n th\xe0nh 1 file "),t.qZA()(),t.TgZ(44,"div",19)(45,"mat-form-field")(46,"input",21),t.NdJ("ngModelChange",function(r){return n.chunkSize=r}),t.qZA()()(),t.TgZ(47,"div",19)(48,"mat-form-field")(49,"input",22),t.NdJ("ngModelChange",function(r){return n.numSheetRead=r}),t.qZA()()(),t.TgZ(50,"div",1)(51,"div",17),t.YNc(52,$t,3,0,"button",23),t.YNc(53,Xt,3,0,"button",24),t.YNc(54,te,3,0,"button",24),t.YNc(55,ee,3,0,"button",25),t.YNc(56,ne,3,0,"button",26),t.qZA()()(),t.TgZ(57,"div",1)(58,"div",17)(59,"button",27)(60,"mat-icon"),t._uU(61,"help"),t.qZA()(),t.YNc(62,oe,3,0,"button",28),t.qZA()()()()()(),t.YNc(63,re,14,1,"div",29),t.TgZ(64,"div",1),t.YNc(65,ae,6,2,"table",30),t.qZA()(),t.TgZ(66,"button",31),t._uU(67," Launch static backdrop modal "),t.qZA(),t.TgZ(68,"div",32)(69,"div",33)(70,"div",34)(71,"div",35),t._UZ(72,"h5",36)(73,"button",37),t.qZA(),t.TgZ(74,"div",38)(75,"ul")(76,"li"),t._uU(77,"N\xean \u0111\u1eb7t ti\xeau \u0111\u1ec1 c\xe1c c\u1ed9t excel l\xe0 kh\xf4ng d\u1ea5u, kh\xf4ng k\xfd t\u1ef1 \u0111\u1eb7c bi\u1ec7t. V\xed d\u1ee5: NgaySinh, HoTen, HD ...."),t.qZA(),t.TgZ(78,"li"),t._uU(79,'D\u1eef li\u1ec7u \u0111\u01b0\u1ee3c tr\u1ed9n x\xe1c \u0111\u1ecbnh d\u1ef1a tr\xean ch\u1eef "x" \u1edf c\u1ed9t A trong c\xe1c sheet. '),t.qZA(),t.TgZ(80,"li"),t._uU(81,"C\xe1c c\u1ed9t c\xf3 d\u1eef li\u1ec7u th\u1eddi gian n\xean \u0111\u01b0\u1ee3c \u0111\u1ecbnh d\u1ea1ng l\xe0 Date"),t.qZA(),t.TgZ(82,"li"),t._uU(83,"Sheet \u0111\u1ea7u ti\xean trong file excel \u0111\u01b0\u1ee3c x\xe1c \u0111\u1ecbnh l\xe0 n\u01a1i \u0111\u1ec3 l\u1ea5y n\u1ed9i dung tr\u1ed9n v\xe0o file word"),t.qZA(),t.TgZ(84,"li"),t._uU(85,"Danh s\xe1ch b\u1ea3ng bi\u1ec3u v\xe0o file word s\u1ebd \u0111\u01b0\u1ee3c l\u1ea5y theo t\xean c\u1ee7a sheet"),t.qZA(),t.TgZ(86,"li"),t._uU(87),t.qZA(),t.TgZ(88,"li"),t._uU(89,"Vui l\xf2ng xem qua file m\u1eabu tr\u01b0\u1edbc khi s\u1eed d\u1ee5ng"),t.qZA(),t.TgZ(90,"li"),t._uU(91,"M\xe3 t\xecm thay th\u1ebf c\xe1c v\u1ecb tr\xed tr\u1ed9n th\xf4ng qua Find and Replace c\u1ee7a Word n\u1ebfu mu\u1ed1n: "),t.TgZ(92,"b",39),t._uU(93),t.qZA()()()(),t.TgZ(94,"div",40)(95,"button",41)(96,"mat-icon"),t._uU(97,"close"),t.qZA()()()()()()),2&e&&(t.xp6(6),t.Q6J("ngModel",n.templateName),t.xp6(5),t.Q6J("ngModel",n.SheetId),t.xp6(3),t.Q6J("ngModel",n.SheetName),t.xp6(1),t.Q6J("ngIf",n.SheetId&&n.SheetName),t.xp6(9),t.Q6J("raw",!0),t.xp6(1),t.Q6J("ngIf",n.ok),t.xp6(8),t.Q6J("ngIf",n.wordFile),t.xp6(9),t.Q6J("ngModel",n.merge),t.xp6(4),t.Q6J("ngModel",n.chunkSize),t.xp6(3),t.Q6J("ngModel",n.numSheetRead),t.xp6(3),t.Q6J("ngIf",n.wordFile&&n.items),t.xp6(1),t.Q6J("ngIf",n.wordFile&&n.items),t.xp6(1),t.Q6J("ngIf",n.wordFile&&n.items),t.xp6(1),t.Q6J("ngIf",n.wordFile&&n.outDataByKeyTC),t.xp6(1),t.Q6J("ngIf",n.wordFile&&n.excelFile),t.xp6(6),t.Q6J("ngIf",null!==n.wordFile||null!==n.items),t.xp6(1),t.Q6J("ngIf",n.temp.length>0),t.xp6(2),t.Q6J("ngForOf",n.table.slice(1)),t.xp6(22),t.AsE('Danh s\xe1ch tr\u1ed9n th\xe0nh m\u1ed9t file word c\u1ea7n ph\u1ea3i b\u1eaft \u0111\u1ea7u "',"{#merge}",'" v\xe0 k\u1ebft th\xfac "',"{/merge}",'" tr\xean file word'),t.xp6(6),t.AsE("\\","{","(*)\\","}",""))},dependencies:[I.sg,I.O5,Ht.D,T.Fj,T.JJ,T.On,xt.Rr,N.lW,N.RK,G.Hw,nt.Nt,K.KE,K.R9,Yt.ey,Gt.gD,ot.gM,O.ib,O.yz,jt.i],styles:["#dropZone[_ngcontent-%COMP%]{top:20%;left:10%;width:80%;height:200px;border-radius:3%;border:2px dashed rgb(38,16,165)}#dropZone[drop-active=true][_ngcontent-%COMP%]{box-shadow:inset 0 0 0 2px #00c;border:2px dashed rgb(38,16,165);background-color:#c9eccb}"],data:{animation:[F.Mq]}}),s})(),ue=(()=>{class s{constructor(){}ngOnInit(){}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-merge-word"]],decls:1,vars:0,template:function(e,n){1&e&&t._UZ(0,"app-docxtemplate")},dependencies:[ce]}),s})();var he=h(15265);let de=(()=>{class s{constructor(e){this.plus=e}ngOnInit(){}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(f.T))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-ma-vat-tu"]],decls:2,vars:0,template:function(e,n){1&e&&(t.TgZ(0,"p"),t._uU(1,"ma-vat-tu works!"),t.qZA())}}),s})();var Ct=h(58441),it=h(12012);function pe(s,o){if(1&s){const e=t.EpF();t.TgZ(0,"div",6)(1,"div",7)(2,"span",8),t._uU(3,"T\xean file"),t.qZA()(),t.TgZ(4,"input",9),t.NdJ("focus",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.copyInputMessage())}),t.qZA(),t.TgZ(5,"div",10)(6,"button",11),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.copyInputMessage())}),t._UZ(7,"i",12),t._uU(8,"Copy"),t.qZA()()()}if(2&s){const e=t.oxw();t.xp6(4),t.s9C("value",e.html)}}let me=(()=>{class s{constructor(e,n,i,r){this.plus=e,this.excelSV=n,this.sheetdbSV=i,this.idbSV=r,this.dbName="app",this.api="ten-file",this.html=""}ngOnInit(){}createKey(e){const n=e.target.value.trim(),i=Date.now();this.html=y()(i).format("YYMMDD")+"-XL-"+this.plus.generateKey(n)}copyInputMessage(){this.plus.copyToClipboard(this.html)}getBarcode(e){this.xx=e}reset(e){return e.target.value=""}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(f.T),t.Y36(Z.x),t.Y36(Ct.F),t.Y36(it.F))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-generate-key"]],inputs:{qrResultString:"qrResultString"},decls:8,vars:1,consts:[[1,"container"],[1,"form-group"],[1,"text-center","text-white","p-3","my-3","bg-primary","rounded-pill","justify-content-center"],["placeholder","D\xe1n n\u1ed9i dung v\xe0o \u0111\xe2y","rows","2",1,"form-control",3,"click","change"],["input1",""],["class","input-group mb-3",4,"ngIf"],[1,"input-group","mb-3"],[1,"input-group-prepend"],[1,"input-group-text"],["type","text","readonly","","id","userinput",1,"form-control",3,"value","focus"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-primary","btn-sm",3,"click"],[1,"fa","fa-copy"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h4",2),t._uU(3,"Chuy\u1ec3n \u0111\u1ed5i t\xean file v\u0103n b\u1ea3n chu\u1ea9n IT"),t.qZA(),t.TgZ(4,"textarea",3,4),t.NdJ("click",function(r){return n.reset(r)})("change",function(r){return n.createKey(r)}),t._uU(6,"  "),t.qZA()(),t.YNc(7,pe,9,1,"div",5),t.qZA()),2&e&&(t.xp6(7),t.Q6J("ngIf",n.html))},dependencies:[I.O5]}),s})();var bt=h(9116);let ge=(()=>{class s{constructor(e){this.plus=e}ngOnInit(){}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(f.T))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-ultis"]],decls:0,vars:0,template:function(e,n){}}),s})();var At=h(41258);let fe=(()=>{class s{constructor(){this.html="Xin ch\xe0o"}ngOnInit(){}getHtml(e){this.html=e}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-html-content"]],decls:6,vars:2,consts:[[1,"container","my-3"],[1,"row"],[1,"review",3,"innerHTML"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"hr"),t.TgZ(2,"div",1)(3,"p"),t._uU(4),t.qZA()(),t._UZ(5,"div",2),t.qZA()),2&e&&(t.xp6(4),t.Oqu(n.html),t.xp6(1),t.Q6J("innerHTML",n.html,t.oJD))}}),s})();var _e=h(1442),j=h(10875),R=h(49808),q=h(88996),P=h(24351),Q=h(75625),Te=h(17489),xe=h.n(Te),Ce=h(47977),be=h(80529),Ae=h(3909),yt=h(30627);function ye(s,o){if(1&s){const e=t.EpF();t.TgZ(0,"button",4),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.getLocation())}),t._uU(1,"Xem v\u1ecb tr\xed"),t.qZA()}}function Ze(s,o){if(1&s&&(t.TgZ(0,"div",1),t._UZ(1,"hr"),t.TgZ(2,"h6",10)(3,"b"),t._uU(4,"APP CSKH EVNSPC "),t.qZA()(),t.TgZ(5,"p",11),t._uU(6),t.qZA(),t.TgZ(7,"p"),t._uU(8,"T\xean \u0111\u0103ng nh\u1eadp: "),t.TgZ(9,"b"),t._uU(10),t.qZA()(),t.TgZ(11,"p"),t._uU(12,"M\u1eadt kh\u1ea9u: "),t.TgZ(13,"b",11),t._uU(14),t.qZA()(),t._UZ(15,"hr"),t.qZA()),2&s){const e=t.oxw();t.Q6J("@slideIn",void 0),t.xp6(6),t.Oqu(null==e.info?null:e.info.err),t.xp6(4),t.Oqu(null==e.appAc?null:e.appAc.USER_NAME),t.xp6(4),t.hij(" ",null==e.appAc?null:e.appAc.PASSWORD," ")}}function ve(s,o){if(1&s&&(t.TgZ(0,"div",12),t._uU(1," Ch\u1ec9 \u0111\u01b0\u1eddng: "),t.TgZ(2,"a",13),t.O4$(),t.TgZ(3,"svg",14),t._UZ(4,"path",15)(5,"path",16),t.qZA()()()),2&s){const e=t.oxw();t.xp6(2),t.hYB("href","https://maps.google.com/maps?q=",null==e.toado?null:e.toado.latitude,",",null==e.toado?null:e.toado.longitude,"",t.LSH)}}function Ee(s,o){if(1&s&&(t.TgZ(0,"ul")(1,"li"),t._uU(2),t.TgZ(3,"b"),t._uU(4),t.qZA(),t._uU(5," kWh "),t.qZA()()),2&s){const e=o.$implicit;t.xp6(2),t.HOy(" K\u1ef3 ",e.ky," | ",e.thang,"/",e.nam," | ",e.bcs,": "),t.xp6(2),t.hij(" ",e.san_luong," ")}}function Se(s,o){if(1&s&&(t.TgZ(0,"ul")(1,"li"),t._uU(2),t.TgZ(3,"b"),t._uU(4),t.ALo(5,"numberPipe"),t.qZA(),t._uU(6," \u0111."),t.qZA()()),2&s){const e=o.$implicit;t.xp6(2),t.AsE(" K\u1ef3 ",e.thang,"/",e.nam,": "),t.xp6(2),t.hij(" ",t.lcZ(5,3,e.tienNo+e.thueNo)," ")}}function Ie(s,o){if(1&s&&(t.TgZ(0,"div",1),t._UZ(1,"hr"),t.TgZ(2,"h6",10)(3,"b"),t._uU(4,"Th\xf4ng tin KH "),t.qZA()(),t.TgZ(5,"p"),t._uU(6,"T\xean kh\xe1ch h\xe0ng: "),t.TgZ(7,"b"),t._uU(8),t.qZA()(),t.TgZ(9,"p"),t._uU(10,"Chu\u1ed7i gi\xe1: "),t.TgZ(11,"b"),t._uU(12),t.qZA()(),t.TgZ(13,"p"),t._uU(14,"C\xf4ng t\u01a1: "),t.TgZ(15,"b"),t._uU(16),t.qZA()(),t.TgZ(17,"p"),t._uU(18,"\u0110i\u1ec7n tho\u1ea1i: "),t.TgZ(19,"b"),t._uU(20),t.qZA()(),t.TgZ(21,"p"),t._uU(22,"M\xe3 s\u1ed5: "),t.TgZ(23,"b"),t._uU(24),t.qZA()(),t.TgZ(25,"p"),t._uU(26,"\u0110\u1ecba ch\u1ec9: "),t.TgZ(27,"b"),t._uU(28),t.qZA()(),t._UZ(29,"hr"),t.TgZ(30,"h6",10)(31,"b"),t._uU(32,"Ch\u1ec9 s\u1ed1: "),t.qZA()(),t.YNc(33,Ee,6,5,"ul",17),t._UZ(34,"hr"),t.TgZ(35,"h6",10)(36,"b"),t._uU(37),t.qZA()(),t.YNc(38,Se,7,5,"ul",17),t.qZA()),2&s){const e=t.oxw();t.Q6J("@slideIn",void 0),t.xp6(8),t.hij(" ",e.bh2.TT.ten_khang," "),t.xp6(4),t.hij(" ",e.bh2.TT.chuoi_gia," "),t.xp6(4),t.AsE(" ",e.bh2.TT.so_cto," | ",e.bh2.TT.ten_cloai," "),t.xp6(4),t.hij(" ",e.bh2.TT.dthoai," "),t.xp6(4),t.HOy(" ",e.bh2.TT.ma_sogcs," | ",e.bh2.TT.ma_kvuc,"-",e.bh2.TT.stt," | ",e.bh2.TT.ten_sogcs," "),t.xp6(4),t.hij(" ",e.bh2.TT.dchi_ddo," "),t.xp6(5),t.Q6J("ngForOf",e.bh2.CS),t.xp6(4),t.hij("N\u1ee3 ti\u1ec1n \u0111i\u1ec7n: ",0==e.bh2.CN.length?"Kho\u0302ng co\u0301 n\u1ee3":""," "),t.xp6(1),t.Q6J("ngForOf",e.bh2.CN)}}function ke(s,o){if(1&s){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td")(10,"mat-icon",21),t.NdJ("click",function(){const r=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.copy(r))}),t._uU(11,"content_copy"),t.qZA()()()}if(2&s){const e=o.$implicit,n=o.index;t.xp6(2),t.Oqu(n+1),t.xp6(2),t.Oqu(null==e?null:e._id),t.xp6(2),t.Oqu(null==e?null:e.USER_NAME),t.xp6(2),t.Oqu(null==e?null:e.PASSWORD)}}function De(s,o){if(1&s){const e=t.EpF();t.TgZ(0,"div",18)(1,"h4"),t._uU(2,"Danh s\xe1ch t\xe0i kho\u1ea3n "),t.TgZ(3,"button",19),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.export())}),t.TgZ(4,"mat-icon"),t._uU(5,"file_download"),t.qZA()()(),t.TgZ(6,"table",20)(7,"tr")(8,"th"),t._uU(9,"TT"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"M\xe3 kh\xe1ch h\xe0ng"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"T\xean \u0111\u0103ng nh\u1eadp"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"M\u1eadt kh\u1ea9u"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"\u0110i\u1ec7n tho\u1ea1i"),t.qZA()(),t.YNc(18,ke,12,4,"tr",17),t.qZA()()}if(2&s){const e=t.oxw();t.xp6(18),t.Q6J("ngForOf",e.userApp)}}function Me(s,o){if(1&s&&(t.TgZ(0,"tr")(1,"td",26),t._uU(2),t.qZA(),t.TgZ(3,"td",26),t._uU(4),t.qZA(),t.TgZ(5,"td",26),t._uU(6),t.qZA(),t.TgZ(7,"td",26),t._uU(8),t.qZA()()),2&s){const e=o.$implicit,n=o.index;t.xp6(2),t.Oqu(n+1),t.xp6(2),t.Oqu(e.MA_KHANG),t.xp6(2),t.Oqu(e.DTHOAI_DVU),t.xp6(2),t.Oqu(e.TEN_KH_LHE)}}function Fe(s,o){if(1&s){const e=t.EpF();t.TgZ(0,"mat-expansion-panel")(1,"mat-expansion-panel-header"),t._uU(2," Import "),t.qZA(),t.TgZ(3,"app-parse-excel-clipboard",22),t.NdJ("excel",function(i){t.CHM(e);const r=t.oxw();return t.KtG(r.getClip(i))}),t.qZA(),t.TgZ(4,"div",3)(5,"button",4),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.getMany())}),t._uU(6,"Xem t\xe0i kho\u1ea3n"),t.qZA(),t.TgZ(7,"button",23),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.addMany())}),t._uU(8,"T\u1ea1o t\xe0i kho\u1ea3n"),t.qZA(),t.TgZ(9,"button",23),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.resetMany())}),t._uU(10,"\u0110\u1eb7t l\u1ea1i m\u1eadt kh\u1ea9u"),t.qZA(),t.TgZ(11,"button",23),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.getDSTram())}),t._uU(12,"get All Location"),t.qZA(),t.TgZ(13,"button",23),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.getManylocatinBK())}),t._uU(14,"get Location"),t.qZA(),t.TgZ(15,"button",23),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.exportLocation())}),t._uU(16,"Export Location"),t.qZA()(),t.TgZ(17,"div")(18,"table",24)(19,"thead")(20,"tr")(21,"th",25),t._uU(22,"TT"),t.qZA(),t.TgZ(23,"th",25),t._uU(24,"M\xe3 PK"),t.qZA(),t.TgZ(25,"th",25),t._uU(26,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"),t.qZA(),t.TgZ(27,"th",25),t._uU(28,"H\u1ecd t\xean"),t.qZA()()(),t.TgZ(29,"tbody"),t.YNc(30,Me,9,4,"tr",17),t.qZA()()()()}if(2&s){const e=t.oxw();t.xp6(3),t.Q6J("label","Copy m\xe3 PK d\xe1n v\xf4 \u0111\xe2y"),t.xp6(27),t.Q6J("ngForOf",e.excelObj)}}let we=(()=>{class s{constructor(e,n,i,r,l,a,c,u){this.authSV=e,this.excelSV=n,this.plus=i,this.afs=r,this.httpSV=l,this.http=a,this.pouchSV=c,this.loadSV=u,this.url="http://localhost:5000/cskh/",this.api="PK0500-app-cskh",this.apiToaDo="PK0500-toa-do",this.excelObj=[],this.maPK="",this.toado=null,this.appAc=null,this.info=null,this.user=null,this.searchArr=[],this.userApp=[],this.bh2=null}ngOnInit(){this.authSV._getOpt(j.HB.USER).then(e=>{this.user=e})}ngOnDestroy(){}exportLocation(){return(0,C.Z)(function*(){})()}set(){var e=this;return(0,C.Z)(function*(){e.afs.collection("cmis4-app-cskh").doc("app").set({PK:e.convertPK(e.maPK)})})()}getDSTram(){var e=this;return(0,C.Z)(function*(){return(0,R.n)(e.http.get(`${e.url}dstram/${e.user.unit}`)).then(n=>{n.length>0&&(0,q.D)(n).pipe((0,P.b)(i=>e.getlocatinBK(i.mA_TRAM))).pipe((0,Q.X)(3)).subscribe()})})()}getlocatinBK(e){var n=this;return(0,C.Z)(function*(){return(0,R.n)(n.http.get(`${n.url}locationbk/${e}`)).then(i=>{if(!xe().isArray(i))return;let r=[];for(let l=0;l<i.length;l++){let a=i[l];r.push({_id:a.mA_KHANG,latitude:a.toA_DO.latitude,longitude:a.toA_DO.longitude})}console.log(r)})})()}getManylocatinBK(){var e=this;return(0,C.Z)(function*(){0==e.searchArr.length&&e.plus.alertWarning("Vui l\xf2ng copy m\xe3 PK d\xe1n v\xe0o \xf4 t\xecm ki\u1ebfm"),(0,q.D)(e.searchArr).pipe((0,P.b)(n=>e.getlocatinBK(n))).subscribe()})()}getOk(){this.afs.collection("cmis4-app-cskh").doc("ok").valueChanges().subscribe(e=>{console.log(e),this.info=e})}listen(){this.afs.collection("cmis4-app-cskh").doc("app").valueChanges().subscribe(e=>{console.log(e),this.getInfo(e.PK).then(()=>{})})}addMany(){var e=this;return(0,C.Z)(function*(){0==e.searchArr.length&&e.plus.alertWarning("Vui l\xf2ng copy m\xe3 PK d\xe1n v\xe0o \xf4 t\xecm ki\u1ebfm"),(0,q.D)(e.searchArr).pipe((0,P.b)(n=>e.addUser(n))).subscribe()})()}resetMany(){var e=this;return(0,C.Z)(function*(){0==e.searchArr.length&&e.plus.alertWarning("Vui l\xf2ng copy m\xe3 PK d\xe1n v\xe0o \xf4 t\xecm ki\u1ebfm"),(0,q.D)(e.searchArr).pipe((0,P.b)(n=>e.changePass(n))).subscribe()})()}getMany(){var e=this;return(0,C.Z)(function*(){0==e.searchArr.length&&e.plus.alertWarning("Vui l\xf2ng copy m\xe3 PK d\xe1n v\xe0o \xf4 t\xecm ki\u1ebfm"),(0,q.D)(e.searchArr).pipe((0,P.b)(n=>e.getInfo(n))).subscribe()})()}getClip(e){var n=this;return(0,C.Z)(function*(){n.searchArr=[];for(let i=0;i<e.length;i++)n.searchArr.push(n.convertPK(e[i][0]))})()}addUser(e){var n=this;return(0,C.Z)(function*(){if(13!==e.length)return;let i={_id:n.convertPK(e),USER_NAME:"12345678",PASSWORD:n.user.unit};return(0,R.n)(n.http.post(n.url+"adduser",i,n.httpSV.getHeader())).then(r=>{n.userApp.push(i)})})()}export(){this.excelSV.export(this.userApp,"cskh")}getAppAC(){let e=this.convertPK(this.maPK);return this.appAc=null,this.pouchSV.get(this.api,e).then(n=>{this.appAc=n,this.userApp.push(this.appAc)}).catch((0,C.Z)(function*(){}))}getInfo(e){var n=this;return(0,C.Z)(function*(){if(n.maPK=n.convertPK(e),13===n.maPK.length)return(0,R.n)(n.http.post(n.url+"showpass",{maPK:n.maPK,maDV:n.user.unit},n.httpSV.getHeader())).then(i=>{if(0==i.rows.length)return n.addUser(n.maPK);n.appAc={_id:i.rows[0].MA_KHANG,USER_NAME:i.rows[0].USER_NAME,PASSWORD:i.rows[0].PASSWORD},n.userApp.push(n.appAc),n.info=i.rows[0]})})()}getLocationByPK(e){this.toado=null;let n=this.convertPK(e);this.pouchSV.get(this.apiToaDo,n).then(i=>{console.log(i),this.toado=i,console.log(this.toado)})}getLocation(){var e=this;return(0,C.Z)(function*(){return e.http.post(e.url+"location",{maPK:e.convertPK(e.maPK)},e.httpSV.getHeader()).subscribe(n=>{console.log(n),e.convertPK(e.maPK),e.convertPK(e.maPK)})})()}changePass(e){var n=this;return(0,C.Z)(function*(){if(0!=e.length)return n.maPK=n.convertPK(e),yield n.getInfo(n.maPK),"12345678"!=n.info.PASSWORD?n.http.post(n.url+"changepass",{TenDangnhap:n.info.USER_NAME,MatKhau:"12345678",MaDonVi:n.user.unit,MaKhachHang:n.info.MA_KHANG},n.httpSV.getHeader()).subscribe(r=>{n.convertPK(e)}):void 0})()}copy(e){this.plus.copyToClipboard(`\n     PK: ${e._id}\n     USER: ${e.USER_NAME}\n     PASS: ${e.PASSWORD}\n     `)}convertPK(e){let n=this.user.unit;switch(e.length){case 1:n=n+"000000"+e;break;case 2:n=n+"00000"+e;break;case 3:n=n+"0000"+e;break;case 4:n=n+"000"+e;break;case 5:n=n+"00"+e;break;case 6:n=n+"0"+e;break;case 7:n+=e;break;default:n=e}return n}checkPer(e,n=1){return this.authSV.checkPer(e,n)}onDropFile(e){console.log("onDropFile()");for(let n=0;n<e.length;n++)"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"==e[n].type?this.excelSV.fileToJsonArray(e[n]).then(i=>{this.excelObj=i,console.log(this.excelObj)}):this.plus.alertError("File kh\xf4ng h\u1ee3p l\u1ec7")}ondragover(){document.getElementById("dropZone").setAttribute("drop-active","true")}reload(){this.authSV.reload()}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(j.c1),t.Y36(Z.x),t.Y36(f.T),t.Y36(Ce.ST),t.Y36(w.O),t.Y36(be.eN),t.Y36(Ae.M),t.Y36(D.b))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-app-cskh"]],decls:14,vars:7,consts:[[1,"container","py-3"],[1,"row"],["matInput","","placeholder","Nh\u1eadp m\xe3 PK",3,"ngModel","keyup.enter","ngModelChange"],[1,"text-center"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["class","row",4,"ngIf"],["class","loca",4,"ngIf"],["class","col-12",4,"ngIf"],[4,"ngIf"],[1,"text-primary"],[1,"text-danger"],[1,"loca"],["target","_blank",3,"href"],["xmlns","http://www.w3.org/2000/svg","height","48px","viewBox","0 0 24 24","width","48px","fill","#EA3323"],["d","M0 0h24v24H0V0z","fill","none"],["d","m22.43 10.59-9.01-9.01c-.75-.75-2.07-.76-2.83 0l-9 9c-.78.78-.78 2.04 0 2.82l9 9c.39.39.9.58 1.41.58.51 0 1.02-.19 1.41-.58l8.99-8.99c.79-.76.8-2.02.03-2.82zm-10.42 10.4-9-9 9-9 9 9-9 9zM8 11v4h2v-3h4v2.5l3.5-3.5L14 7.5V10H9c-.55 0-1 .45-1 1z"],[4,"ngFor","ngForOf"],[1,"col-12"],["mat-icon-button","","color","primary",3,"click"],[1,"table","table-bordered","table-hover"],[3,"click"],[3,"label","excel"],["mat-raised-button","","color","warn",3,"click"],[1,"table"],["scope","col"],["scope","row"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field")(3,"input",2),t.NdJ("keyup.enter",function(){return n.getInfo(n.maPK)})("ngModelChange",function(r){return n.maPK=r}),t.qZA()(),t.TgZ(4,"div",3)(5,"button",4),t.NdJ("click",function(){return n.set()}),t._uU(6,"Xem th\xf4ng tin"),t.qZA(),t.YNc(7,ye,2,0,"button",5),t.qZA(),t.YNc(8,Ze,16,4,"div",6),t.YNc(9,ve,6,2,"div",7),t.YNc(10,Ie,39,14,"div",6),t._UZ(11,"hr"),t.YNc(12,De,19,1,"div",8),t.qZA()(),t.YNc(13,Fe,31,2,"mat-expansion-panel",9)),2&e&&(t.xp6(3),t.Q6J("ngModel",n.maPK),t.xp6(4),t.Q6J("ngIf",n.checkPer(n.api,4)),t.xp6(1),t.Q6J("ngIf",n.appAc),t.xp6(1),t.Q6J("ngIf",n.toado),t.xp6(1),t.Q6J("ngIf",n.bh2),t.xp6(2),t.Q6J("ngIf",n.checkPer("dev")),t.xp6(1),t.Q6J("ngIf",n.checkPer("dev")))},dependencies:[I.sg,I.O5,T.Fj,T.JJ,T.On,N.lW,N.RK,G.Hw,nt.Nt,K.KE,O.ib,O.yz,At.K,yt._2],data:{animation:[F.Ym]}}),s})();var Ue=h(51511);let Ne=(()=>{class s{constructor(e){this.excelSV=e,this.data=[]}ngOnInit(){}onDrop(e){for(let n=0;n<e.length;n++){let i=e[n];this.excelSV.fileToJsonArray(e[n]).then(r=>{r.map(l=>l._id=i.name),this.data=this.data.concat(r)})}}export(){this.excelSV.export(this.data,""),this.data=[]}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(Z.x))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-combine-excel"]],decls:10,vars:3,consts:[[1,"container","py-4"],[3,"files"],[1,"row"],[1,"btn"],["mat-raised-button","","color","primary","matTooltip","Xu\u1ea5t excel",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"app-drop-files",1),t.NdJ("files",function(r){return n.onDrop(r)}),t.qZA(),t.TgZ(2,"div",2)(3,"b"),t._uU(4),t.ALo(5,"number"),t.qZA(),t.TgZ(6,"div",3)(7,"button",4),t.NdJ("click",function(){return n.export()}),t.TgZ(8,"mat-icon"),t._uU(9,"download"),t.qZA()()()()()),2&e&&(t.xp6(4),t.hij("Danh s\xe1ch d\u1eef li\u1ec7u: ",t.lcZ(5,1,n.data.length)," d\xf2ng"))},dependencies:[Ue.k,N.lW,G.Hw,ot.gM,I.JJ]}),s})();const S="";class st{constructor(o,e){const n=o._tree,i=Array.from(n.keys());this.set=o,this._type=e,this._path=i.length>0?[{node:n,keys:i}]:[]}next(){const o=this.dive();return this.backtrack(),o}dive(){if(0===this._path.length)return{done:!0,value:void 0};const{node:o,keys:e}=L(this._path);if(L(e)===S)return{done:!1,value:this.result()};const n=o.get(L(e));return this._path.push({node:n,keys:Array.from(n.keys())}),this.dive()}backtrack(){if(0===this._path.length)return;const o=L(this._path).keys;o.pop(),!(o.length>0)&&(this._path.pop(),this.backtrack())}key(){return this.set._prefix+this._path.map(({keys:o})=>L(o)).filter(o=>o!==S).join("")}value(){return L(this._path).node.get(S)}result(){switch(this._type){case"VALUES":return this.value();case"KEYS":return this.key();default:return[this.key(),this.value()]}}[Symbol.iterator](){return this}}const L=s=>s[s.length-1],Et=(s,o,e,n,i,r,l,a)=>{const c=r*l;t:for(const u of s.keys())if(u===S){const d=i[c-1];d<=e&&n.set(a,[s.get(u),d])}else{let d=r;for(let g=0;g<u.length;++g,++d){const p=u[g],_=l*d,A=_-l;let m=i[_];const x=Math.max(0,d-e-1),M=Math.min(l-1,d+e);for(let k=x;k<M;++k){const H=i[_+k+1]=Math.min(i[A+k]+ +(p!==o[k]),i[A+k+1]+1,i[_+k]+1);H<m&&(m=H)}if(m>e)continue t}Et(s.get(u),o,e,n,i,d,l,a+u)}};class U{constructor(o=new Map,e=""){this._size=void 0,this._tree=o,this._prefix=e}atPrefix(o){if(!o.startsWith(this._prefix))throw new Error("Mismatched prefix");const[e,n]=W(this._tree,o.slice(this._prefix.length));if(void 0===e){const[i,r]=at(n);for(const l of i.keys())if(l!==S&&l.startsWith(r)){const a=new Map;return a.set(l.slice(r.length),i.get(l)),new U(a,o)}}return new U(e,o)}clear(){this._size=void 0,this._tree.clear()}delete(o){return this._size=void 0,Oe(this._tree,o)}entries(){return new st(this,"ENTRIES")}forEach(o){for(const[e,n]of this)o(e,n,this)}fuzzyGet(o,e){return((s,o,e)=>{const n=new Map;if(void 0===o)return n;const i=o.length+1,r=i+e,l=new Uint8Array(r*i).fill(e+1);for(let a=0;a<i;++a)l[a]=a;for(let a=1;a<r;++a)l[a*i]=a;return Et(s,o,e,n,l,1,i,""),n})(this._tree,o,e)}get(o){const e=rt(this._tree,o);return void 0!==e?e.get(S):void 0}has(o){const e=rt(this._tree,o);return void 0!==e&&e.has(S)}keys(){return new st(this,"KEYS")}set(o,e){if("string"!=typeof o)throw new Error("key must be a string");return this._size=void 0,lt(this._tree,o).set(S,e),this}get size(){if(this._size)return this._size;this._size=0;const o=this.entries();for(;!o.next().done;)this._size+=1;return this._size}update(o,e){if("string"!=typeof o)throw new Error("key must be a string");this._size=void 0;const n=lt(this._tree,o);return n.set(S,e(n.get(S))),this}fetch(o,e){if("string"!=typeof o)throw new Error("key must be a string");this._size=void 0;const n=lt(this._tree,o);let i=n.get(S);return void 0===i&&n.set(S,i=e()),i}values(){return new st(this,"VALUES")}[Symbol.iterator](){return this.entries()}static from(o){const e=new U;for(const[n,i]of o)e.set(n,i);return e}static fromObject(o){return U.from(Object.entries(o))}}const W=(s,o,e=[])=>{if(0===o.length||null==s)return[s,e];for(const n of s.keys())if(n!==S&&o.startsWith(n))return e.push([s,n]),W(s.get(n),o.slice(n.length),e);return e.push([s,o]),W(void 0,"",e)},rt=(s,o)=>{if(0===o.length||null==s)return s;for(const e of s.keys())if(e!==S&&o.startsWith(e))return rt(s.get(e),o.slice(e.length))},lt=(s,o)=>{const e=o.length;t:for(let n=0;s&&n<e;){for(const r of s.keys())if(r!==S&&o[n]===r[0]){const l=Math.min(e-n,r.length);let a=1;for(;a<l&&o[n+a]===r[a];)++a;const c=s.get(r);if(a===r.length)s=c;else{const u=new Map;u.set(r.slice(a),c),s.set(o.slice(n,n+a),u),s.delete(r),s=u}n+=a;continue t}const i=new Map;return s.set(o.slice(n),i),i}return s},Oe=(s,o)=>{const[e,n]=W(s,o);if(void 0!==e)if(e.delete(S),0===e.size)St(n);else if(1===e.size){const[i,r]=e.entries().next().value;It(n,i,r)}},St=s=>{if(0===s.length)return;const[o,e]=at(s);if(o.delete(e),0===o.size)St(s.slice(0,-1));else if(1===o.size){const[n,i]=o.entries().next().value;n!==S&&It(s.slice(0,-1),n,i)}},It=(s,o,e)=>{if(0===s.length)return;const[n,i]=at(s);n.set(i+o,e),n.delete(i)},at=s=>s[s.length-1];class J{constructor(o){if(null==o?.fields)throw new Error('MiniSearch: option "fields" must be provided');const e=null==o.autoVacuum||!0===o.autoVacuum?mt:o.autoVacuum;this._options={...ht,...o,autoVacuum:e,searchOptions:{...Dt,...o.searchOptions||{}},autoSuggestOptions:{...Pe,...o.autoSuggestOptions||{}}},this._index=new U,this._documentCount=0,this._documentIds=new Map,this._idToShortId=new Map,this._fieldIds={},this._fieldLength=new Map,this._avgFieldLength=[],this._nextId=0,this._storedFields=new Map,this._dirtCount=0,this._currentVacuum=null,this._enqueuedVacuum=null,this._enqueuedVacuumConditions=pt,this.addFields(this._options.fields)}add(o){const{extractField:e,tokenize:n,processTerm:i,fields:r,idField:l}=this._options,a=e(o,l);if(null==a)throw new Error(`MiniSearch: document does not have ID field "${l}"`);if(this._idToShortId.has(a))throw new Error(`MiniSearch: duplicate ID ${a}`);const c=this.addDocumentId(a);this.saveStoredFields(c,o);for(const u of r){const d=e(o,u);if(null==d)continue;const g=n(d.toString(),u),p=this._fieldIds[u],_=new Set(g).size;this.addFieldLength(c,p,this._documentCount-1,_);for(const A of g){const m=i(A,u);if(Array.isArray(m))for(const x of m)this.addTerm(p,c,x);else m&&this.addTerm(p,c,m)}}}addAll(o){for(const e of o)this.add(e)}addAllAsync(o,e={}){const{chunkSize:n=10}=e,i={chunk:[],promise:Promise.resolve()},{chunk:r,promise:l}=o.reduce(({chunk:a,promise:c},u,d)=>(a.push(u),(d+1)%n==0?{chunk:[],promise:c.then(()=>new Promise(g=>setTimeout(g,0))).then(()=>this.addAll(a))}:{chunk:a,promise:c}),i);return l.then(()=>this.addAll(r))}remove(o){const{tokenize:e,processTerm:n,extractField:i,fields:r,idField:l}=this._options,a=i(o,l);if(null==a)throw new Error(`MiniSearch: document does not have ID field "${l}"`);const c=this._idToShortId.get(a);if(null==c)throw new Error(`MiniSearch: cannot remove document with ID ${a}: it is not in the index`);for(const u of r){const d=i(o,u);if(null==d)continue;const g=e(d.toString(),u),p=this._fieldIds[u],_=new Set(g).size;this.removeFieldLength(c,p,this._documentCount,_);for(const A of g){const m=n(A,u);if(Array.isArray(m))for(const x of m)this.removeTerm(p,c,x);else m&&this.removeTerm(p,c,m)}}this._storedFields.delete(c),this._documentIds.delete(c),this._idToShortId.delete(a),this._fieldLength.delete(c),this._documentCount-=1}removeAll(o){if(o)for(const e of o)this.remove(e);else{if(arguments.length>0)throw new Error("Expected documents to be present. Omit the argument to remove all documents.");this._index=new U,this._documentCount=0,this._documentIds=new Map,this._idToShortId=new Map,this._fieldLength=new Map,this._avgFieldLength=[],this._storedFields=new Map,this._nextId=0}}discard(o){const e=this._idToShortId.get(o);if(null==e)throw new Error(`MiniSearch: cannot discard document with ID ${o}: it is not in the index`);this._idToShortId.delete(o),this._documentIds.delete(e),this._storedFields.delete(e),(this._fieldLength.get(e)||[]).forEach((n,i)=>{this.removeFieldLength(e,i,this._documentCount,n)}),this._fieldLength.delete(e),this._documentCount-=1,this._dirtCount+=1,this.maybeAutoVacuum()}maybeAutoVacuum(){if(!1===this._options.autoVacuum)return;const{minDirtFactor:o,minDirtCount:e,batchSize:n,batchWait:i}=this._options.autoVacuum;this.conditionalVacuum({batchSize:n,batchWait:i},{minDirtCount:e,minDirtFactor:o})}discardAll(o){const e=this._options.autoVacuum;try{this._options.autoVacuum=!1;for(const n of o)this.discard(n)}finally{this._options.autoVacuum=e}this.maybeAutoVacuum()}replace(o){const{idField:e,extractField:n}=this._options,i=n(o,e);this.discard(i),this.add(o)}vacuum(o={}){return this.conditionalVacuum(o)}conditionalVacuum(o,e){return this._currentVacuum?(this._enqueuedVacuumConditions=this._enqueuedVacuumConditions&&e,null!=this._enqueuedVacuum||(this._enqueuedVacuum=this._currentVacuum.then(()=>{const n=this._enqueuedVacuumConditions;return this._enqueuedVacuumConditions=pt,this.performVacuuming(o,n)})),this._enqueuedVacuum):!1===this.vacuumConditionsMet(e)?Promise.resolve():(this._currentVacuum=this.performVacuuming(o),this._currentVacuum)}performVacuuming(o,e){var n=this;return(0,C.Z)(function*(){const i=n._dirtCount;if(n.vacuumConditionsMet(e)){const r=o.batchSize||dt.batchSize,l=o.batchWait||dt.batchWait;let a=1;for(const[c,u]of n._index){for(const[d,g]of u)for(const[p]of g)n._documentIds.has(p)||(g.size<=1?u.delete(d):g.delete(p));0===n._index.get(c).size&&n._index.delete(c),a%r==0&&(yield new Promise(d=>setTimeout(d,l))),a+=1}n._dirtCount-=i}yield null,n._currentVacuum=n._enqueuedVacuum,n._enqueuedVacuum=null})()}vacuumConditionsMet(o){if(null==o)return!0;let{minDirtCount:e,minDirtFactor:n}=o;return e=e||mt.minDirtCount,n=n||mt.minDirtFactor,this.dirtCount>=e&&this.dirtFactor>=n}get isVacuuming(){return null!=this._currentVacuum}get dirtCount(){return this._dirtCount}get dirtFactor(){return this._dirtCount/(1+this._documentCount+this._dirtCount)}has(o){return this._idToShortId.has(o)}getStoredFields(o){const e=this._idToShortId.get(o);if(null!=e)return this._storedFields.get(e)}search(o,e={}){const{searchOptions:n}=this._options,i={...n,...e},r=this.executeQuery(o,e),l=[];for(const[a,{score:c,terms:u,match:d}]of r){const g=u.length||1,p={id:this._documentIds.get(a),score:c*g,terms:Object.keys(d),queryTerms:u,match:d};Object.assign(p,this._storedFields.get(a)),(null==i.filter||i.filter(p))&&l.push(p)}return o===J.wildcard&&null==i.boostDocument||l.sort(Ft),l}autoSuggest(o,e={}){e={...this._options.autoSuggestOptions,...e};const n=new Map;for(const{score:r,terms:l}of this.search(o,e)){const a=l.join(" "),c=n.get(a);null!=c?(c.score+=r,c.count+=1):n.set(a,{score:r,terms:l,count:1})}const i=[];for(const[r,{score:l,terms:a,count:c}]of n)i.push({suggestion:r,terms:a,score:l/c});return i.sort(Ft),i}get documentCount(){return this._documentCount}get termCount(){return this._index.size}static loadJSON(o,e){if(null==e)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return this.loadJS(JSON.parse(o),e)}static loadJSONAsync(o,e){var n=this;return(0,C.Z)(function*(){if(null==e)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return n.loadJSAsync(JSON.parse(o),e)})()}static getDefault(o){if(ht.hasOwnProperty(o))return ut(ht,o);throw new Error(`MiniSearch: unknown option "${o}"`)}static loadJS(o,e){const{index:n,documentIds:i,fieldLength:r,storedFields:l,serializationVersion:a}=o,c=this.instantiateMiniSearch(o,e);c._documentIds=$(i),c._fieldLength=$(r),c._storedFields=$(l);for(const[u,d]of c._documentIds)c._idToShortId.set(d,u);for(const[u,d]of n){const g=new Map;for(const p of Object.keys(d)){let _=d[p];1===a&&(_=_.ds),g.set(parseInt(p,10),$(_))}c._index.set(u,g)}return c}static loadJSAsync(o,e){var n=this;return(0,C.Z)(function*(){const{index:i,documentIds:r,fieldLength:l,storedFields:a,serializationVersion:c}=o,u=n.instantiateMiniSearch(o,e);u._documentIds=yield X(r),u._fieldLength=yield X(l),u._storedFields=yield X(a);for(const[g,p]of u._documentIds)u._idToShortId.set(p,g);let d=0;for(const[g,p]of i){const _=new Map;for(const A of Object.keys(p)){let m=p[A];1===c&&(m=m.ds),_.set(parseInt(A,10),yield X(m))}++d%1e3==0&&(yield Ut(0)),u._index.set(g,_)}return u})()}static instantiateMiniSearch(o,e){const{documentCount:n,nextId:i,fieldIds:r,averageFieldLength:l,dirtCount:a,serializationVersion:c}=o;if(1!==c&&2!==c)throw new Error("MiniSearch: cannot deserialize an index created with an incompatible version");const u=new J(e);return u._documentCount=n,u._nextId=i,u._idToShortId=new Map,u._fieldIds=r,u._avgFieldLength=l,u._dirtCount=a||0,u._index=new U,u}executeQuery(o,e={}){if(o===J.wildcard)return this.executeWildcardQuery(e);if("string"!=typeof o){const p={...e,...o,queries:void 0},_=o.queries.map(A=>this.executeQuery(A,p));return this.combineResults(_,p.combineWith)}const{tokenize:n,processTerm:i,searchOptions:r}=this._options,l={tokenize:n,processTerm:i,...r,...e},{tokenize:a,processTerm:c}=l,g=a(o).flatMap(p=>c(p)).filter(p=>!!p).map(qe(l)).map(p=>this.executeQuerySpec(p,l));return this.combineResults(g,l.combineWith)}executeQuerySpec(o,e){const n={...this._options.searchOptions,...e},i=(n.fields||this._options.fields).reduce((m,x)=>({...m,[x]:ut(n.boost,x)||1}),{}),{boostDocument:r,weights:l,maxFuzzy:a,bm25:c}=n,{fuzzy:u,prefix:d}={...Dt.weights,...l},g=this._index.get(o.term),p=this.termResults(o.term,o.term,1,o.termBoost,g,i,r,c);let _,A;if(o.prefix&&(_=this._index.atPrefix(o.term)),o.fuzzy){const m=!0===o.fuzzy?.2:o.fuzzy,x=m<1?Math.min(a,Math.round(o.term.length*m)):m;x&&(A=this._index.fuzzyGet(o.term,x))}if(_)for(const[m,x]of _){const M=m.length-o.term.length;M&&(A?.delete(m),this.termResults(o.term,m,d*m.length/(m.length+.3*M),o.termBoost,x,i,r,c,p))}if(A)for(const m of A.keys()){const[x,M]=A.get(m);M&&this.termResults(o.term,m,u*m.length/(m.length+M),o.termBoost,x,i,r,c,p)}return p}executeWildcardQuery(o){const e=new Map,n={...this._options.searchOptions,...o};for(const[i,r]of this._documentIds){const l=n.boostDocument?n.boostDocument(r,"",this._storedFields.get(i)):1;e.set(i,{score:l,terms:[],match:{}})}return e}combineResults(o,e="or"){if(0===o.length)return new Map;const n=e.toLowerCase(),i=Je[n];if(!i)throw new Error(`Invalid combination operator: ${e}`);return o.reduce(i)||new Map}toJSON(){const o=[];for(const[e,n]of this._index){const i={};for(const[r,l]of n)i[r]=Object.fromEntries(l);o.push([e,i])}return{documentCount:this._documentCount,nextId:this._nextId,documentIds:Object.fromEntries(this._documentIds),fieldIds:this._fieldIds,fieldLength:Object.fromEntries(this._fieldLength),averageFieldLength:this._avgFieldLength,storedFields:Object.fromEntries(this._storedFields),dirtCount:this._dirtCount,index:o,serializationVersion:2}}termResults(o,e,n,i,r,l,a,c,u=new Map){if(null==r)return u;for(const d of Object.keys(l)){const g=l[d],p=this._fieldIds[d],_=r.get(p);if(null==_)continue;let A=_.size;const m=this._avgFieldLength[p];for(const x of _.keys()){if(!this._documentIds.has(x)){this.removeTerm(p,x,e),A-=1;continue}const M=a?a(this._documentIds.get(x),e,this._storedFields.get(x)):1;if(!M)continue;const k=_.get(x),_t=this._fieldLength.get(x)[p],tt=n*i*g*M*ze(k,A,this._documentCount,_t,m,c),V=u.get(x);if(V){V.score+=tt,He(V.terms,o);const H=ut(V.match,e);H?H.push(d):V.match[e]=[d]}else u.set(x,{score:tt,terms:[o],match:{[e]:[d]}})}}return u}addTerm(o,e,n){const i=this._index.fetch(n,wt);let r=i.get(o);if(null==r)r=new Map,r.set(e,1),i.set(o,r);else{const l=r.get(e);r.set(e,(l||0)+1)}}removeTerm(o,e,n){if(!this._index.has(n))return void this.warnDocumentChanged(e,o,n);const i=this._index.fetch(n,wt),r=i.get(o);null==r||null==r.get(e)?this.warnDocumentChanged(e,o,n):r.get(e)<=1?r.size<=1?i.delete(o):r.delete(e):r.set(e,r.get(e)-1),0===this._index.get(n).size&&this._index.delete(n)}warnDocumentChanged(o,e,n){for(const i of Object.keys(this._fieldIds))if(this._fieldIds[i]===e)return void this._options.logger("warn",`MiniSearch: document with ID ${this._documentIds.get(o)} has changed before removal: term "${n}" was not present in field "${i}". Removing a document after it has changed can corrupt the index!`,"version_conflict")}addDocumentId(o){const e=this._nextId;return this._idToShortId.set(o,e),this._documentIds.set(e,o),this._documentCount+=1,this._nextId+=1,e}addFields(o){for(let e=0;e<o.length;e++)this._fieldIds[o[e]]=e}addFieldLength(o,e,n,i){let r=this._fieldLength.get(o);null==r&&this._fieldLength.set(o,r=[]),r[e]=i,this._avgFieldLength[e]=((this._avgFieldLength[e]||0)*n+i)/(n+1)}removeFieldLength(o,e,n,i){this._avgFieldLength[e]=1!==n?(this._avgFieldLength[e]*n-i)/(n-1):0}saveStoredFields(o,e){const{storeFields:n,extractField:i}=this._options;if(null==n||0===n.length)return;let r=this._storedFields.get(o);null==r&&this._storedFields.set(o,r={});for(const l of n){const a=i(e,l);void 0!==a&&(r[l]=a)}}}J.wildcard=Symbol("*");const ut=(s,o)=>Object.prototype.hasOwnProperty.call(s,o)?s[o]:void 0,Je={or:(s,o)=>{for(const e of o.keys()){const n=s.get(e);if(null==n)s.set(e,o.get(e));else{const{score:i,terms:r,match:l}=o.get(e);n.score=n.score+i,n.match=Object.assign(n.match,l),Mt(n.terms,r)}}return s},and:(s,o)=>{const e=new Map;for(const n of o.keys()){const i=s.get(n);if(null==i)continue;const{score:r,terms:l,match:a}=o.get(n);Mt(i.terms,l),e.set(n,{score:i.score+r,terms:i.terms,match:Object.assign(i.match,a)})}return e},and_not:(s,o)=>{for(const e of o.keys())s.delete(e);return s}},ze=(s,o,e,n,i,r)=>{const{k:l,b:a,d:c}=r;return Math.log(1+(e-o+.5)/(o+.5))*(c+s*(l+1)/(s+l*(1-a+a*n/i)))},qe=s=>(o,e,n)=>({term:o,fuzzy:"function"==typeof s.fuzzy?s.fuzzy(o,e,n):s.fuzzy||!1,prefix:"function"==typeof s.prefix?s.prefix(o,e,n):!0===s.prefix,termBoost:"function"==typeof s.boostTerm?s.boostTerm(o,e,n):1}),ht={idField:"id",extractField:(s,o)=>s[o],tokenize:s=>s.split(Ye),processTerm:s=>s.toLowerCase(),fields:void 0,searchOptions:void 0,storeFields:[],logger:(s,o)=>{"function"==typeof console?.[s]&&console[s](o)},autoVacuum:!0},Dt={combineWith:"or",prefix:!1,fuzzy:!1,maxFuzzy:6,boost:{},weights:{fuzzy:.45,prefix:.375},bm25:{k:1.2,b:.7,d:.5}},Pe={combineWith:"and",prefix:(s,o,e)=>o===e.length-1},dt={batchSize:1e3,batchWait:10},pt={minDirtFactor:.1,minDirtCount:20},mt={...dt,...pt},He=(s,o)=>{s.includes(o)||s.push(o)},Mt=(s,o)=>{for(const e of o)s.includes(e)||s.push(e)},Ft=({score:s},{score:o})=>o-s,wt=()=>new Map,$=s=>{const o=new Map;for(const e of Object.keys(s))o.set(parseInt(e,10),s[e]);return o},X=function(){var s=(0,C.Z)(function*(o){const e=new Map;let n=0;for(const i of Object.keys(o))e.set(parseInt(i,10),o[i]),++n%1e3==0&&(yield Ut(0));return e});return function(e){return s.apply(this,arguments)}}(),Ut=s=>new Promise(o=>setTimeout(o,s)),Ye=/[\n\r\p{Z}\p{P}]+/u;var Ge=h(28986),Nt=h(11147),Vt=h(92358),gt=h(54004),ft=h(70262);let je=(()=>{class s{constructor(e,n,i,r){this.formSV=e,this.plus=n,this.idbSV=i,this.httpSV=r,this.main=this.formSV.fb.group({_id:["",[T.kI.required]],LINH_VUC:["",[]],CAN_CU:["",[]],DIEU_KHOAN:["",[]],NOI_DUNG:["",[]],GHI_CHU:["",[]],FILE:[[""],[]],HIEU_LUC:[!0,[]]}),this.user=null,this.db=null,this.dbName="app",this.api="law",this.title="Tra c\u1ee9u v\u0103n b\u1ea3n lu\u1eadt",this.header={SO_VAN_BAN:"S\u1ed1 v\u0103n b\u1ea3n",NGAY_BAN_HANH:"Ng\xe0y ban h\xe0nh",CO_QUAN_BAN_HANH:"C\u01a1 quan ban h\xe0nh",TRICH_YEU:"Tr\xedch y\u1ebfu",LINK_VAN_BAN:"Link v\u0103n b\u1ea3n"},this.plus.setTiTle(this.title),this.initDB()}initDB(){if(!this.db)return this.idbSV.IDB_InitDB(this.dbName).subscribe(e=>{this.db=e})}checkForm(){let e=this.formSV.getErrValidateFormV2(this.main,this.header);if(e.length>2)return this.plus.alertError(`${e}`)}sync(){return this.httpSV.updateLocalDBV2(this.db,this.api,window.max._id+"-"+this.api)}stopSync(){this.httpSV.unsubcribe()}getAllIDB(){return this.idbSV.IDB_DB_GetAll(this.db,this.api)}getByPK(e){var n=this;return(0,C.Z)(function*(){return new Promise((i,r)=>{n.idbSV.IDB_InitDB(n.dbName).subscribe(l=>{n.db=l,n.idbSV.IDB_DB_GetAllByIndexKey(n.db,n.api,"MA_KHANG","=",e).then(a=>{i(a)})})})})()}getApi(){return this.httpSV.get(this.api).pipe((0,gt.U)(e=>(console.log(e),this.idbSV.IDB_DB_Add(this.db,this.api,e.data).then(()=>{this.plus.alertMatSnackBar("C\u1eadp nh\u1eadt d\u1eef li\u1ec7u xong!")}),e.data)),(0,Q.X)(1),(0,ft.K)(e=>{throw console.log(e),e}))}addApi(e){return this.httpSV.post(this.api,e).pipe((0,gt.U)(n=>n.data),(0,Q.X)(1),(0,ft.K)(n=>{throw console.log(n),n}))}updateApi(e){this.main.patchValue(e);let n=this.formSV.getErrValidateFormV2(this.main,this.header);if(!(n.length>2))return this.httpSV.put(this.api,e,"").pipe((0,gt.U)(i=>i.data),(0,Q.X)(1),(0,ft.K)(i=>{throw console.log(i),i}));this.plus.alertError(`${n}`)}deleteApi(e){return this.httpSV.disable(this.api,e)}}return s.\u0275fac=function(e){return new(e||s)(t.LFG(Nt.o),t.LFG(f.T),t.LFG(it.F),t.LFG(Vt.a))},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();var Re=h(56709),Qe=h(39349),We=h(31361);function $e(s,o){if(1&s){const e=t.EpF();t.TgZ(0,"mat-checkbox",39),t.NdJ("change",function(i){const l=t.CHM(e).$implicit,a=t.oxw(2);return t.KtG(a.changeBox(i,l))}),t._uU(1),t.qZA()}if(2&s){const e=o.$implicit;t.xp6(1),t.Oqu(e)}}function Xe(s,o){if(1&s){const e=t.EpF();t.TgZ(0,"div",26)(1,"section",37),t.YNc(2,$e,2,1,"mat-checkbox",38),t.qZA(),t.TgZ(3,"div",23)(4,"button",24),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.getBySelected())}),t.TgZ(5,"mat-icon"),t._uU(6,"done"),t.qZA()()()()}if(2&s){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.linhVucStr)}}function tn(s,o){1&s&&(t.TgZ(0,"div",33)(1,"mat-form-field")(2,"mat-label"),t._uU(3,"M\xe3 nh\u1eadn di\u1ec7n"),t.qZA(),t._UZ(4,"input",40),t.qZA()())}function en(s,o){if(1&s){const e=t.EpF();t.TgZ(0,"ul")(1,"h6",41)(2,"mat-icon",42),t.NdJ("click",function(){const r=t.CHM(e).index,l=t.oxw();return t.KtG(l.deleteFile(r))}),t._uU(3,"delete"),t.qZA(),t.TgZ(4,"a",43),t._uU(5),t.qZA()()()}if(2&s){const e=o.$implicit;t.xp6(4),t.s9C("href",e,t.LSH),t.xp6(1),t.Oqu(e)}}const nn=function(s){return{"text-info":s}};function on(s,o){if(1&s){const e=t.EpF();t.TgZ(0,"td",45),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,r=t.oxw();return t.KtG(r.onEdit(i))}),t.ALo(1,"highlight"),t.qZA()}if(2&s){const e=t.oxw(),n=e.index,i=e.$implicit,r=t.oxw();t.MGl("id","row",n,""),t.hYB("matTooltip","",i.CAN_CU," ",i.GhiChu,""),t.Q6J("ngClass",t.VKq(8,nn,0==i.HIEU_LUC))("innerHTML",t.xi3(1,5,r.formatItem(i),r.textSearch),t.oJD)}}function sn(s,o){if(1&s&&(t.TgZ(0,"tr"),t.YNc(1,on,2,10,"td",44),t.qZA()),2&s){const e=o.$implicit,n=t.oxw();t.xp6(1),t.Q6J("ngIf",!n.XEM_HIEU_LUC||e.HIEU_LUC)}}const ln=[{path:"",component:ge},{path:"ten-file",component:me},{path:"ma-vat-tu",component:de},{path:"barcode",component:he.O},{path:"barcode-generate",component:_e.i},{path:"parse-excel",component:At.K},{path:"html",component:fe},{path:"merge",component:ue},{path:"cskh",component:we},{path:"combine-excel",component:Ne},{path:"law",component:(()=>{class s{constructor(e,n,i,r,l,a,c,u,d){this.excelSV=e,this.sheetdbSV=n,this.idbSV=i,this.formSV=r,this.plus=l,this.loadSV=a,this.httpSV=c,this.authSV=u,this.lawSV=d,this.main=this.lawSV.main,this.searchForm=this.formSV.fb.group({input:["",[T.kI.minLength(4),T.kI.required]]}),this.dbName="app",this.api="law",this.sheetId="1b4uBVGgIC3XEHduidsAekdcGzVubErb5aqzLE-psDbs",this.db=null,this.html="",this.law=[],this.itemsSearch=[],this.allowLoadmore=!0,this.allItems=[],this.filterItems=[],this.items=[],this.item=null,this.links=[],this.perPageItems=100,this.textSearch="",this.linhVucStr=[],this.linhVucCheck=[],this.isExplain=!1,this.XEM_HIEU_LUC=!0,this.indexItems=0}ngOnInit(){var e=this;this.idbSV.IDB_InitDB(this.dbName).subscribe(function(){var n=(0,C.Z)(function*(i){e.db=i,e.lawSV.db=i;let r=yield e.authSV._getOpt(j.HB.USER);e.lawSV.user=r,e.getAllIDB(),e.lawSV.sync().subscribe(l=>{})});return function(i){return n.apply(this,arguments)}}())}ngOnDestroy(){this.lawSV.stopSync()}show(e){"+"==e?this.indexItems++:this.indexItems--,this.indexItems<0&&(this.indexItems=0),this.plus.scrollTo("row"+this.indexItems)}getSheet(){var e=this;this.sheetdbSV.getAll(this.sheetId,"Data").then(function(){var n=(0,C.Z)(function*(i){Array.isArray(i)&&i.length>0&&(yield e.idbSV.IDB_DB_ClearCollection(e.db,e.api),console.log(i),i.forEach(l=>{l.status=1,l.sync=1,l.id=l._id,l.keyWord=e.plus.generateKeyWord([l.DIEU_KHOAN,l.NOI_DUNG,l.GHI_CHU])}),yield e.idbSV.IDB_DB_Add(e.db,e.api,i)),e.getAllIDB()});return function(i){return n.apply(this,arguments)}}())}save(){let e=this.main.value;e.keyWord=this.plus.generateKeyWord([e.DIEU_KHOAN,e.NOI_DUNG,e.GHI_CHU]),e.FILE=this.links,""==e._id||null==e._id||null==e._id?(e._id=(0,Ge.h)(6),e.id=e._id,this.lawSV.addApi(e).subscribe(n=>{console.log(n),this.plus.alertMatSnackBar("Th\xeam m\u1edbi th\xe0nh c\xf4ng!"),this.reset()})):(e.id=e._id,this.lawSV.updateApi(e).subscribe(n=>{this.plus.alertMatSnackBar("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng!"),console.log(n),this.reset()}))}delete(){this.lawSV.deleteApi(this.item).then(e=>{console.log(e),this.reset(),this.getAllIDB()})}deleteFile(e){this.links.splice(e,1),console.log(this.main.value)}getLink(e){console.log(e),"id"in e&&Array.isArray(this.main.value.FILE)&&(this.main.controls.FILE.setValue(this.main.value.FILE.concat(e.id)),this.item.FILE=this.item.FILE.concat(e.id))}onEdit(e){this.main.reset(),this.isExplain=!0,console.log(e),this.item=e,this.links=e.FILE||[],this.main.patchValue(e),this.main.controls.FILE.setValue(e.FILE),this.plus.scrollTop()}getAllIDB(){this.idbSV.IDB_DB_GetAll(this.db,this.api).subscribe(e=>{this.allItems=e;const n=this.allItems.map(i=>i.LINH_VUC);this.linhVucStr=Array.from(new Set(n)),this.items=this.allItems.slice(0,this.perPageItems),this.initMiniSearch()})}getBySelected(){this.allItems=[],this.idbSV.IDB_DB_GetAll(this.db,this.api,"id",1).subscribe(e=>{for(let n=0;n<e.length;n++){const i=e[n];this.linhVucCheck.includes(i.LINH_VUC)&&this.allItems.push(i)}this.items=this.allItems.slice(0,this.perPageItems),this.initMiniSearch()})}copy(e){this.plus.copyToClipboard(e)}changeBox(e,n){console.log(e),e.checked&&this.linhVucCheck.push(n)}initMiniSearch(){this.linhVucCheck=[],this.miniSearch=new J({fields:["NOI_DUNG"],storeFields:["NOI_DUNG","_id","CAN_CU","DIEU_KHOAN","GHI_CHU","FILE","HIEU_LUC","LINH_VUC"],tokenize:e=>e.split(/\s+/),processTerm:e=>{const n=this.normalizeToken(e);return[n,this.removeVietnameseTones(n)]},searchOptions:{fields:["CAN_CU","DIEU_KHOAN","NOI_DUNG","keyWord"],boost:{NOI_DUNG:1},fuzzy:!1,prefix:!1,combineWith:"AND"}}),this.miniSearch.addAll(this.allItems)}normalizeText(e){return e.normalize("NFC").replace(/[.,!?;:(){}\[\]"']/g,"").toLowerCase()}normalizeToken(e){return e.normalize("NFC").toLowerCase().replace(/[.,!?;:(){}\[\]"']/g,"")}removeVietnameseTones(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\u0111/g,"d").replace(/\u0110/g,"D")}searchLegalText(e){this.allowLoadmore=!1,this.textSearch=e,this.items=this.miniSearch.search(e)}removeDiacritics(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\u0111/g,"d").replace(/\u0110/g,"D")}search2(e){this.searchForm.patchValue({input:e}),this.search()}search(){const e=this.searchForm.value;if(this.textSearch=e.input,this.searchForm.valid){this.items=[],console.log(e);const n=[];this.allowLoadmore=!1;const i=this.plus.removeAccents(e.input);this.textSearch=i;for(let r=0;r<this.allItems.length;r++){const l=this.allItems[r];this.plus.removeAccents(JSON.stringify(l)).includes(i)&&n.push(l)}this.items=this.items.concat(n),0==n.length&&this.plus.alertMatSnackBar("Kh\xf4ng c\xf2n k\u1ebft qu\u1ea3 ph\xf9 h\u1ee3p"),1==n.length&&(this.item=n[0],console.log(n[0]))}else this.getAllIDB()}pushData(e){if(this.loadSV.load(),e&&this.allowLoadmore){let n=this.items.length,i=this.allItems.slice(n,n+this.perPageItems);this.items=this.items.concat(i),this.loadSV.loaded()}else this.loadSV.loaded()}formatItem(e){return`\n    <p>${e.CAN_CU} <br>${e.DIEU_KHOAN}</p>\n    <p>${e.NOI_DUNG}</p>\n  `}exportExcel(){this.excelSV.export(this.law),this.law=[]}parseLegalTextToFlatStructure(e){const n=e.target.value.trim();if("string"!=typeof n)return console.error("L\u1ed7i: Tham s\u1ed1 truy\u1ec1n v\xe0o kh\xf4ng ph\u1ea3i l\xe0 chu\u1ed7i",n),[];const i=n.split("\n").map(u=>u.trim()).filter(u=>u.length>0),r=[];let l="",a="",c=[];return i.forEach(u=>{if(u.startsWith("\u0110i\u1ec1u "))a&&c.length>0&&r.push({Dieu:l,Khoan:a,NoiDung:c.join("\n")}),l=u.trim(),a="",c=[];else{if(u.startsWith("Trong Th\xf4ng t\u01b0 n\xe0y"))return;if(/^\d+\./.test(u)){a&&c.length>0&&(r.push({Dieu:l,Khoan:a,NoiDung:c.join("\n")}),c=[]),a=u.match(/^\d+/)[0];const d=u.replace(/^\d+\.\s*/,"").trim();c.push(d)}else/^[a-z]\)/.test(u)&&c.push(u)}}),a&&c.length>0&&r.push({Dieu:l,Khoan:a,NoiDung:c.join("\n")}),this.law=this.law.concat(r),console.log(this.law),r}reset(){this.main.reset(),this.isExplain=!1}reload(){this.plus.reload()}checkPer(e,n=this.api){return!!window.max&&window.max.opt[n]>e}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(Z.x),t.Y36(Ct.F),t.Y36(it.F),t.Y36(Nt.o),t.Y36(f.T),t.Y36(D.b),t.Y36(Vt.a),t.Y36(j.c1),t.Y36(je))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-tra-cuu-luat"]],decls:88,vars:13,consts:[[1,"container-fluid"],["mat-icon-button","","id","next-btn",3,"click"],["mat-icon-button","","id","pre-btn",3,"click"],[1,"row","py-3","col-12"],[3,"expanded"],["mat-raised-button","","color","primary",3,"click"],["class","row",4,"ngIf"],[1,"row",3,"formGroup"],[1,"col","py-3"],["matPrefix","","formControlName","HIEU_LUC","color","warn",1,"mx-2"],["class","col",4,"ngIf"],[1,"col-12"],["type","text","autocomplete","off","matInput","","formControlName","LINH_VUC"],["type","text","autocomplete","off","matInput","","formControlName","CAN_CU"],["type","text","autocomplete","off","matInput","","formControlName","DIEU_KHOAN"],["appearance","fill"],["matInput","","formControlName","NOI_DUNG","cdkTextareaAutosize","","cdkAutosizeMinRows","10","cdkAutosizeMaxRows","200"],["autosize","cdkTextareaAutosize"],["appearance","outline"],["matInput","","formControlName","GHI_CHU","cdkTextareaAutosize","","cdkAutosizeMinRows","1","cdkAutosizeMaxRows","20"],["matInput","","type","text","autocomplete","off"],["fileInput",""],[4,"ngFor","ngForOf"],[1,"btn"],["mat-raised-button","","color","accent",3,"click"],["mat-raised-button","","color","warn",3,"disabled","click"],[1,"row"],[1,"col-9"],[3,"formGroup"],["matInput","","id","search-api","formControlName","input","placeholder","T\xecm ki\u1ebfm c\xf3 d\u1ea5u (F2)",3,"keyup.enter"],["matPrefix","","color","warn",3,"click"],[1,"col-3"],["mat-raised-button","",3,"click"],[1,"col"],["matPrefix","",1,"mx-2",3,"ngModel","ngModelChange"],[1,"table","table-hover","table-borderless"],[3,"percentLoad","emit"],[1,"example-section"],["class","example-margin",3,"change",4,"ngFor","ngForOf"],[1,"example-margin",3,"change"],["readonly","","type","text","autocomplete","off","matInput","","formControlName","_id"],[1,"font-blue","text-large"],["color","warn",3,"click"],["target","_blank",1,"px-3",3,"href"],["class","px-5 text-blue font-justify",3,"id","ngClass","matTooltip","innerHTML","click",4,"ngIf"],[1,"px-5","text-blue","font-justify",3,"id","ngClass","matTooltip","innerHTML","click"]],template:function(e,n){if(1&e){const i=t.EpF();t.TgZ(0,"div",0)(1,"button",1),t.NdJ("click",function(){return n.show("+")}),t.TgZ(2,"mat-icon"),t._uU(3,"navigate_next"),t.qZA()(),t.TgZ(4,"button",2),t.NdJ("click",function(){return n.show("-")}),t.TgZ(5,"mat-icon"),t._uU(6,"navigate_before"),t.qZA()(),t.TgZ(7,"div",3)(8,"mat-expansion-panel",4)(9,"mat-expansion-panel-header")(10,"button",5),t.NdJ("click",function(){return n.main.reset(),n.links=[],n.item=null}),t.TgZ(11,"mat-icon"),t._uU(12,"add"),t.qZA()()(),t.YNc(13,Xe,7,1,"div",6),t.TgZ(14,"div",7)(15,"span"),t._uU(16),t.qZA(),t.TgZ(17,"div",8)(18,"mat-slide-toggle",9),t._uU(19),t.qZA()(),t.YNc(20,tn,5,0,"div",10),t.TgZ(21,"div",11)(22,"mat-form-field")(23,"mat-label"),t._uU(24,"L\u0129nh v\u1ef1c "),t.qZA(),t._UZ(25,"input",12),t.qZA()(),t.TgZ(26,"div",11)(27,"mat-form-field")(28,"mat-label"),t._uU(29,"C\u0103n c\u1ee9"),t.qZA(),t._UZ(30,"input",13),t.qZA()(),t.TgZ(31,"div",11)(32,"mat-form-field")(33,"mat-label"),t._uU(34,"\u0110i\u1ec1u kho\u1ea3n"),t.qZA(),t._UZ(35,"input",14),t.qZA()(),t.TgZ(36,"div",11)(37,"mat-form-field",15)(38,"mat-label"),t._uU(39,"N\u1ed9i dung"),t.qZA(),t._UZ(40,"textarea",16,17),t.qZA()(),t.TgZ(42,"div",11)(43,"mat-form-field",18)(44,"mat-label"),t._uU(45,"Ghi ch\xfa"),t.qZA(),t._UZ(46,"textarea",19,17),t.qZA()(),t.TgZ(48,"div",11)(49,"mat-form-field",18)(50,"mat-label"),t._uU(51,"Th\xeam link file"),t.qZA(),t._UZ(52,"input",20,21),t.qZA(),t.TgZ(54,"button",5),t.NdJ("click",function(){t.CHM(i);const l=t.MAs(53);return n.links.push(l.value),t.KtG(l.value="")}),t.TgZ(55,"mat-icon"),t._uU(56,"add"),t.qZA()()(),t.YNc(57,en,6,2,"ul",22),t.TgZ(58,"div",23)(59,"button",24),t.NdJ("click",function(){return n.save()}),t.TgZ(60,"mat-icon"),t._uU(61,"save"),t.qZA()(),t.TgZ(62,"button",5),t.NdJ("click",function(){return n.copy(n.main.value.NOI_DUNG)}),t.TgZ(63,"mat-icon"),t._uU(64,"content_copy"),t.qZA()(),t.TgZ(65,"button",25),t.NdJ("click",function(){return n.delete()}),t.TgZ(66,"mat-icon"),t._uU(67,"delete"),t.qZA()()()()()(),t.TgZ(68,"div",26)(69,"div",26)(70,"div",27)(71,"mat-form-field",28)(72,"input",29),t.NdJ("keyup.enter",function(){return n.search()}),t.qZA(),t.TgZ(73,"mat-icon",30),t.NdJ("click",function(){return n.searchForm.reset()}),t._uU(74,"clear"),t.qZA()()(),t.TgZ(75,"div",31)(76,"button",5),t.NdJ("click",function(){return n.searchLegalText(n.searchForm.value.input)}),t._uU(77,"T\xecm ki\u1ebfm"),t.qZA(),t.TgZ(78,"button",32),t.NdJ("click",function(){return n.reload()}),t.TgZ(79,"mat-icon"),t._uU(80,"refresh"),t.qZA()(),t.TgZ(81,"div",33)(82,"mat-slide-toggle",34),t.NdJ("ngModelChange",function(l){return n.XEM_HIEU_LUC=l}),t._uU(83),t.qZA()()()(),t.TgZ(84,"div",11)(85,"table",35),t.YNc(86,sn,2,1,"tr",22),t.qZA()(),t.TgZ(87,"app-loadmore",36),t.NdJ("emit",function(l){return n.pushData(l)}),t.qZA()()()}2&e&&(t.xp6(8),t.Q6J("expanded",n.isExplain),t.xp6(5),t.Q6J("ngIf",!1),t.xp6(1),t.Q6J("formGroup",n.main),t.xp6(2),t.Oqu(n.main.value._id),t.xp6(3),t.hij(" ",n.main.controls.HIEU_LUC.value?"C\xf2n hi\u1ec7u l\u01b0c":"H\u1ebft hi\u1ec7u l\u1ef1c",""),t.xp6(1),t.Q6J("ngIf",n.checkPer(7)),t.xp6(37),t.Q6J("ngForOf",n.links),t.xp6(8),t.Q6J("disabled",!n.item),t.xp6(6),t.Q6J("formGroup",n.searchForm),t.xp6(11),t.Q6J("ngModel",n.XEM_HIEU_LUC),t.xp6(1),t.hij(" ",n.XEM_HIEU_LUC?"C\xf2n hi\u1ec7u l\u1ef1c":"H\u1ebft hi\u1ec7u l\u1ef1c",""),t.xp6(3),t.Q6J("ngForOf",n.items),t.xp6(1),t.Q6J("percentLoad",90))},dependencies:[I.mk,I.sg,I.O5,T.Fj,T.JJ,T.JL,T.On,xt.Rr,Re.oG,N.lW,N.RK,G.Hw,nt.Nt,K.KE,K.hX,K.qo,Qe.IC,ot.gM,O.ib,O.yz,T.sg,T.u,We.w,yt.Sg],styles:["table[_ngcontent-%COMP%]{font-size:medium!important}.content[_ngcontent-%COMP%]{white-space:pre-line!important;text-align:justify;text-justify:inter-word}.text-blue[_ngcontent-%COMP%]:hover{color:#00f;cursor:pointer}"]}),s})()}];let an=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[bt.Bz.forChild(ln),bt.Bz]}),s})();var cn=h(65825),un=h(85767),Kt=h(17721),Ot=h(48387),Lt=h(5923);let hn=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[I.ez,Ot.D,T.u5,Kt.q,Lt.X]}),s})();var Jt=h(24809);let dn=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[I.ez]}),s})();var pn=h(24561);let mn=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[I.ez,T.u5,an,Kt.q,cn.k,un.u,dn,hn,Lt.X,Jt.ShareModule,Ot.D,Jt.ShareModule,pn.k]}),s})()}}]);