(self.webpackChunk_4la=self.webpackChunk_4la||[]).push([[650],{66650:function(t,e,a){"use strict";a.r(e),a.d(e,{KhenThuongModule:function(){return V}});var o=a(35180),i=a(43552),n=a(52923),s=a(99594),r=a(16073),l=a(61511),c=a(7171),u=a(82393),h=a(35366),p=a(15980),g=a(43691),d=a(89274),m=a(60635),f=a(66283),Z=a(26756),D=a(15812),b=a(4786),y=a(71522),T=a(94592),x=a(69121),A=a(5047),N=a(85354);function q(t,e){if(1&t){const t=h.EpF();h.TgZ(0,"button",19),h.NdJ("click",function(){return h.CHM(t),h.oxw().reload()}),h.TgZ(1,"mat-icon"),h._uU(2,"undo"),h.qZA(),h.qZA()}2&t&&h.Q6J("@slideIn",void 0)}function k(t,e){if(1&t){const t=h.EpF();h.TgZ(0,"div",11),h.TgZ(1,"div",20),h.TgZ(2,"app-search-api",21),h.NdJ("data",function(e){return h.CHM(t),h.oxw().find(e)}),h.qZA(),h.qZA(),h.qZA()}if(2&t){const t=h.oxw();h.xp6(2),h.Q6J("api",t.api)}}function _(t,e){if(1&t){const t=h.EpF();h.TgZ(0,"button",25),h.NdJ("click",function(){return h.CHM(t),h.oxw(2).reload()}),h._uU(1,"Quay l\u1ea1i"),h.qZA()}}function J(t,e){if(1&t){const t=h.EpF();h.TgZ(0,"div",22),h.TgZ(1,"button",23),h.NdJ("click",function(){return h.CHM(t),h.oxw().chuaDangKy()}),h._uU(2,"Ch\u01b0a \u0111\u0103ng k\xfd"),h.qZA(),h.TgZ(3,"button",23),h.NdJ("click",function(){return h.CHM(t),h.oxw().chuaPhatDong()}),h._uU(4,"Ch\u01b0a ph\xe1t \u0111\u1ed9ng"),h.qZA(),h.YNc(5,_,2,0,"button",24),h.qZA()}if(2&t){const t=h.oxw();h.xp6(5),h.Q6J("ngIf",t.filter.length>0)}}function I(t,e){1&t&&(h.TgZ(0,"th"),h._uU(1,"Ng\xe0y ph\xe1t \u0111\u1ed9ng"),h.qZA())}function v(t,e){1&t&&(h.TgZ(0,"th"),h._uU(1,"H\u1ea1n \u0111\u0103ng k\xfd"),h.qZA())}function U(t,e){1&t&&(h.TgZ(0,"th"),h._uU(1,"Ng\xe0y \u0111\u0103ng k\xfd"),h.qZA())}function P(t,e){1&t&&(h.TgZ(0,"th"),h._uU(1,"Ng\xe0y \u0110L ph\xe1t \u0111\u1ed9ng"),h.qZA())}function C(t,e){if(1&t&&(h.TgZ(0,"td"),h._uU(1),h.ALo(2,"excelDay"),h.qZA()),2&t){const t=h.oxw().$implicit;h.xp6(1),h.Oqu(h.lcZ(2,1,t.NgayPhatDong))}}function w(t,e){if(1&t&&(h.TgZ(0,"td"),h._uU(1),h.ALo(2,"excelDay"),h.qZA()),2&t){const t=h.oxw().$implicit;h.xp6(1),h.Oqu(h.lcZ(2,1,t.HanDangKy))}}function Q(t,e){if(1&t&&(h.TgZ(0,"td"),h._uU(1),h.ALo(2,"excelDay"),h.qZA()),2&t){const t=h.oxw().$implicit;h.xp6(1),h.Oqu(h.lcZ(2,1,t.NgayDLDangKy))}}function H(t,e){if(1&t&&(h.TgZ(0,"td"),h._uU(1),h.ALo(2,"excelDay"),h.qZA()),2&t){const t=h.oxw().$implicit;h.xp6(1),h.Oqu(h.lcZ(2,1,t.NgayDLPhatDong))}}function B(t,e){if(1&t){const t=h.EpF();h.TgZ(0,"tr",30),h.NdJ("click",function(){const e=h.CHM(t).$implicit;return h.oxw(2).onEdit(e)}),h.TgZ(1,"td"),h._uU(2),h.qZA(),h.YNc(3,C,3,3,"td",13),h.TgZ(4,"td"),h._uU(5),h.qZA(),h.YNc(6,w,3,3,"td",13),h.YNc(7,Q,3,3,"td",13),h.YNc(8,H,3,3,"td",13),h.qZA()}if(2&t){const t=e.$implicit,a=h.oxw(2);h.Q6J("@slideIn",void 0),h.xp6(2),h.hij(" ",t.PhongTrao,""),h.xp6(1),h.Q6J("ngIf",a.device),h.xp6(2),h.Oqu(t.PhongChuTri),h.xp6(1),h.Q6J("ngIf",a.device),h.xp6(1),h.Q6J("ngIf",a.device),h.xp6(1),h.Q6J("ngIf",a.device)}}function L(t,e){if(1&t){const t=h.EpF();h.TgZ(0,"div",11),h.TgZ(1,"table",26),h.TgZ(2,"thead",27),h.TgZ(3,"app-search-idb",28),h.NdJ("filter",function(e){return h.CHM(t),h.oxw().search(e)}),h.qZA(),h.TgZ(4,"tr"),h.TgZ(5,"th"),h._uU(6,"Phong tr\xe0o"),h.qZA(),h.YNc(7,I,2,0,"th",13),h.TgZ(8,"th"),h._uU(9,"Ph\xf2ng ch\u1ee7 tr\xec"),h.qZA(),h.YNc(10,v,2,0,"th",13),h.YNc(11,U,2,0,"th",13),h.YNc(12,P,2,0,"th",13),h.qZA(),h.qZA(),h.TgZ(13,"tbody"),h.YNc(14,B,9,7,"tr",29),h.qZA(),h.qZA(),h.qZA()}if(2&t){const t=h.oxw();h.Q6J("@slideIn",void 0),h.xp6(3),h.Q6J("db",t.db)("api",t.api)("keySearch","PhongTrao"),h.xp6(4),h.Q6J("ngIf",t.device),h.xp6(3),h.Q6J("ngIf",t.device),h.xp6(1),h.Q6J("ngIf",t.device),h.xp6(1),h.Q6J("ngIf",t.device),h.xp6(2),h.Q6J("ngForOf",t.filter.length>0?t.filter:t.items.slice(0,10))}}function Y(t,e){if(1&t&&(h.TgZ(0,"mat-option",53),h._uU(1),h.qZA()),2&t){const t=e.$implicit;h.s9C("value",t.NoiDung),h.xp6(1),h.hij("",t.NoiDung," ")}}function F(t,e){if(1&t&&(h.TgZ(0,"div"),h.TgZ(1,"mat-form-field",31),h.TgZ(2,"mat-label"),h._uU(3,"_id"),h.qZA(),h._UZ(4,"input",32),h.qZA(),h.TgZ(5,"mat-form-field"),h.TgZ(6,"mat-label"),h._uU(7,"Phong tr\xe0o"),h.qZA(),h._UZ(8,"textarea",33),h.qZA(),h.TgZ(9,"div",11),h.TgZ(10,"div",34),h.TgZ(11,"mat-form-field"),h.TgZ(12,"mat-label"),h._uU(13,"S\u1ed1 ph\xe1t \u0111\u1ed9ng"),h.qZA(),h._UZ(14,"input",35),h.qZA(),h.TgZ(15,"mat-form-field"),h.TgZ(16,"mat-label"),h._uU(17,"Ng\xe0y ph\xe1t \u0111\u1ed9ng"),h.qZA(),h._UZ(18,"input",36),h._UZ(19,"mat-datepicker-toggle",37),h._UZ(20,"mat-datepicker",null,38),h.qZA(),h.TgZ(22,"mat-form-field"),h.TgZ(23,"mat-label"),h._uU(24,"Ph\xf2ng ch\u1ee7 tr\xec"),h.qZA(),h.TgZ(25,"mat-select",39),h.YNc(26,Y,2,2,"mat-option",40),h.ALo(27,"catalog"),h.qZA(),h.qZA(),h.TgZ(28,"mat-form-field"),h.TgZ(29,"mat-label"),h._uU(30,"H\u1ea1n \u0111\u0103ng k\xfd"),h.qZA(),h._UZ(31,"input",41),h._UZ(32,"mat-datepicker-toggle",37),h._UZ(33,"mat-datepicker",null,42),h.qZA(),h.TgZ(35,"mat-form-field"),h.TgZ(36,"mat-label"),h._uU(37,"H\u1ea1n b\xe1o c\xe1o"),h.qZA(),h._UZ(38,"input",43),h._UZ(39,"mat-datepicker-toggle",37),h._UZ(40,"mat-datepicker",null,44),h.qZA(),h.qZA(),h.TgZ(42,"div",34),h.TgZ(43,"mat-form-field"),h.TgZ(44,"mat-label"),h._uU(45,"Ng\xe0y \u0110L \u0111\u0103ng k\xfd"),h.qZA(),h._UZ(46,"input",45),h._UZ(47,"mat-datepicker-toggle",37),h._UZ(48,"mat-datepicker",null,46),h.qZA(),h.TgZ(50,"mat-form-field"),h.TgZ(51,"mat-label"),h._uU(52,"S\u1ed1 \u0110L \u0111\u0103ng k\xfd"),h.qZA(),h._UZ(53,"input",47),h.qZA(),h.TgZ(54,"mat-form-field"),h.TgZ(55,"mat-label"),h._uU(56,"Ng\xe0y \u0110L ph\xe1t \u0111\u1ed9ng"),h.qZA(),h._UZ(57,"input",48),h._UZ(58,"mat-datepicker-toggle",37),h._UZ(59,"mat-datepicker",null,49),h.qZA(),h.TgZ(61,"mat-form-field"),h.TgZ(62,"mat-label"),h._uU(63,"S\u1ed1 \u0110L ph\xe1t \u0111\u1ed9ng"),h.qZA(),h._UZ(64,"input",50),h.qZA(),h.TgZ(65,"mat-form-field"),h.TgZ(66,"mat-label"),h._uU(67,"Ng\xe0y \u0110L b\xe1o c\xe1o"),h.qZA(),h._UZ(68,"input",51),h._UZ(69,"mat-datepicker-toggle",37),h._UZ(70,"mat-datepicker",null,52),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&t){const t=h.MAs(21),e=h.MAs(34),a=h.MAs(41),o=h.MAs(49),i=h.MAs(60),n=h.MAs(71);h.Q6J("@slideIn",void 0),h.xp6(18),h.Q6J("matDatepicker",t),h.xp6(1),h.Q6J("for",t),h.xp6(7),h.Q6J("ngForOf",h.lcZ(27,14,"phongban")),h.xp6(5),h.Q6J("matDatepicker",e),h.xp6(1),h.Q6J("for",e),h.xp6(6),h.Q6J("matDatepicker",a),h.xp6(1),h.Q6J("for",a),h.xp6(7),h.Q6J("matDatepicker",o),h.xp6(1),h.Q6J("for",o),h.xp6(10),h.Q6J("matDatepicker",i),h.xp6(1),h.Q6J("for",i),h.xp6(10),h.Q6J("matDatepicker",n),h.xp6(1),h.Q6J("for",n)}}function M(t,e){if(1&t){const t=h.EpF();h.TgZ(0,"button",58),h.NdJ("click",function(){return h.CHM(t),h.oxw(2).import()}),h._uU(1,"Import"),h.qZA()}}function K(t,e){if(1&t){const t=h.EpF();h.TgZ(0,"div",54),h._UZ(1,"app-office3"),h.TgZ(2,"app-export-ecxel",55),h.NdJ("click",function(){return h.CHM(t),h.oxw().export()}),h.qZA(),h.TgZ(3,"app-import-excel",56),h.NdJ("xls",function(e){return h.CHM(t),h.oxw().selectedFile(e)}),h.qZA(),h.YNc(4,M,2,0,"button",57),h.qZA()}if(2&t){const t=h.oxw();h.xp6(2),h.Q6J("dataJson",t.items),h.xp6(1),h.Q6J("dbName",t.dbName)("api",t.api)("form",t.main),h.xp6(1),h.Q6J("ngIf",t.checkPer(2)&&t.main.valid)}}function S(t,e){if(1&t){const t=h.EpF();h.TgZ(0,"button",59),h.NdJ("click",function(){return h.CHM(t),h.oxw().save()}),h.TgZ(1,"mat-icon"),h._uU(2,"save"),h.qZA(),h.qZA()}2&t&&h.Q6J("@slideIn",void 0)}let E=(()=>{class t{constructor(t,e){this.plus=t,this.fb=e,this.searchForm=this.fb.group({input:[,[r.kI.minLength(3),r.kI.maxLength(50)]]}),this.main=this.fb.group({_id:[,[]],PhongTrao:[,[r.kI.required]],SoPhatDong:[,[r.kI.required]],NgayPhatDong:[this.plus.dateFormat(Date.now(),"YYYY-MM-DD","x"),[r.kI.required]],PhongChuTri:[,[r.kI.required]],HanDangKy:[this.plus.dateFormat(Date.now()+10368e5,"YYYY-MM-DD","x"),[r.kI.required]],NgayDLPhatDong:[,[]],SoDLPhatDong:[,[]],NgayDLDangKy:[,[]],SoDLDangKy:[,[]],HanBaoCao:[,[]],SoBaoCao:[,[]],NgayBaoCao:[,[]]}),this.title="Phong tr\xe0o thi \u0111ua",this.dbName="khen-thuong",this.api="phong-trao",this.db=null,this.global=!0,this.items=[],this.filter=[],this.chart=[],this.importData=[],this.errorData=[],this.showInput=!1,this.device=this.plus.fullScreen}ngOnInit(){console.log(this.device,screen.width),this.plus.setTiTle(this.title),this.plus.IDB_InitDB(this.dbName,this.global).subscribe(t=>{console.log(t),this.db=t,this.plus.updateGlobalLocal(t,this.api),this.plus.updateAPi.subscribe(t=>{this.getData()})})}ngOnDestroy(){console.log("Destroy "+this.api),this.plus.subs.unsubscribe()}getData(){this.plus.IDB_DB_GetAll(this.db,this.api).subscribe(t=>{this.items=t})}save(){let t=this.main.value;t.NgayPhatDong=this.plus.dateHtmlToXls(t.NgayPhatDong),t.HanDangKy=this.plus.dateHtmlToXls(t.HanDangKy),t.NgayDLPhatDong=this.plus.dateHtmlToXls(t.NgayDLPhatDong),t.NgayDLDangKy=this.plus.dateHtmlToXls(t.NgayDLDangKy),t.HanBaoCao=this.plus.dateHtmlToXls(t.HanBaoCao),t.NgayBaoCao=this.plus.dateHtmlToXls(t.NgayBaoCao),null!==t._id?this.plus.httpPut(this.api,t,this.global).subscribe(t=>{this.reset()}):(delete t._id,this.plus.httpPost(this.api,t,this.global).subscribe(t=>{this.reset()}))}onEdit(t){const e=Object.assign({},t);e.NgayPhatDong=this.plus.datexlsToHtml(e.NgayPhatDong),e.HanDangKy=this.plus.datexlsToHtml(e.HanDangKy),e.NgayDLPhatDong=this.plus.datexlsToHtml(e.NgayDLPhatDong),e.NgayDLDangKy=this.plus.datexlsToHtml(e.NgayDLDangKy),e.HanBaoCao=this.plus.datexlsToHtml(e.HanBaoCao),e.NgayBaoCao=this.plus.datexlsToHtml(e.NgayBaoCao),this.item=e,this.main.patchValue(e),this.plus.clickBtn("modal"),this.plus.scrollTop()}onDelete(t){confirm("B\u1ea1n mu\u1ed1n x\xf3a?")&&(this.plus.load(),this.plus.httpDisable(this.api,t,this.global).then(t=>{console.log(t)}))}initForm(){this.main.reset({NgayPhatDong:this.plus.dateFormat(Date.now(),"YYYY-MM-DD","x"),HanDangKy:this.plus.dateFormat(Date.now()+10368e5,"YYYY-MM-DD","x")})}find(t){this.items=t}checkPer(t){return this.plus.checkPer(this.api,t)}reload(){return this.plus.reload(this.dbName+"/"+this.api)}report(){}search(t){this.filter=t}selectedFile(t){t.forEach(t=>{this.importData.push(t)}),this.items=this.importData}import(){console.log(this.importData),this.plus.httpImport(this.api,this.importData).then(t=>{this.plus.alertSuccess("Import th\xe0nh c\xf4ng!"),this.reload()})}export(){console.log("x")}reset(){this.plus.loaded(),this.filter=[],this.importData=[],this.errorData=[],this.main.reset(),this.showInput=!1,this.plus.clickBtn("closeModal")}chuaDangKy(){this.showInput=!1,this.filter=this.items.filter(t=>null==t.NgayDLDangKy||t.NgayDLDangKy<t.NgayPhatDong),0==this.filter.length&&this.plus.alertMatSnackBar("\u0110\xe3 th\u1ef1c hi\u1ec7n \u0111\u0103ng k\xfd xong!")}chuaPhatDong(){this.showInput=!1,this.filter=this.items.filter(t=>null==t.NgayDLPhatDong||t.NgayDLPhatDong<44e3),0==this.filter.length&&this.plus.alertMatSnackBar("\u0110\xe3 th\u1ef1c hi\u1ec7n ph\xe1t \u0111\u1ed9ng xong!")}}return t.\u0275fac=function(e){return new(e||t)(h.Y36(u.T),h.Y36(r.qu))},t.\u0275cmp=h.Xpm({type:t,selectors:[["app-phong-trao"]],decls:25,vars:11,consts:[[1,"container"],["id","add-btn","color","accent","mat-raised-button","","data-toggle","modal","data-target","#modelId",3,"click"],["id","back-btn","mat-raised-button","","color","primary",3,"click",4,"ngIf"],["class","row",4,"ngIf"],["class","row justify-content-center",4,"ngIf"],["type","button","id","modal","data-toggle","modal","data-target","#modelId",1,"d-none"],["id","modelId","tabindex","1","role","dialog","aria-labelledby","modelTitleId","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-body"],[1,"container-fluid"],[1,"row"],[3,"formGroup"],[4,"ngIf"],["class","import",4,"ngIf"],[1,"text-center","example-button-row"],[1,"modal-footer","justify-content-center"],["id","closeModal","mat-raised-button","","color","primary","data-dismiss","modal"],["mat-raised-button","","color","warn",3,"click",4,"ngIf"],["id","back-btn","mat-raised-button","","color","primary",3,"click"],[1,"col"],[3,"api","data"],[1,"row","justify-content-center"],["mat-raised-button","","color","accent",3,"click"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",3,"click"],[1,"table","card","table-hover","table-responsive"],[1,"thead-inverse"],[3,"db","api","keySearch","filter"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["hidden",""],["type","0","autocomplete","off","matInput","","formControlName","_id"],["matInput","","formControlName","PhongTrao"],[1,"col-sm-6"],["type","true ","autocomplete","off","matInput","","formControlName","SoPhatDong"],["matInput","","formControlName","NgayPhatDong",3,"matDatepicker"],["matSuffix","",3,"for"],["NgayPhatDong",""],["formControlName","PhongChuTri"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","HanDangKy",3,"matDatepicker"],["HanDangKy",""],["matInput","","formControlName","HanBaoCao",3,"matDatepicker"],["HanBaoCao",""],["matInput","","formControlName","NgayDLDangKy",3,"matDatepicker"],["NgayDLDangKy",""],["type","0","autocomplete","off","matInput","","formControlName","SoDLDangKy"],["matInput","","formControlName","NgayDLPhatDong",3,"matDatepicker"],["NgayDLPhatDong",""],["type","0","autocomplete","off","matInput","","formControlName","SoDLPhatDong"],["matInput","","formControlName","NgayBaoCao",3,"matDatepicker"],["NgayBaoCao",""],[3,"value"],[1,"import"],[3,"dataJson","click"],[3,"dbName","api","form","xls"],["style","margin: 8px 8px 8px 0;","mat-raised-button","","color","warn",3,"click",4,"ngIf"],["mat-raised-button","","color","warn",2,"margin","8px 8px 8px 0",3,"click"],["mat-raised-button","","color","warn",3,"click"]],template:function(t,e){1&t&&(h.TgZ(0,"div",0),h.TgZ(1,"button",1),h.NdJ("click",function(){return e.initForm()}),h.TgZ(2,"mat-icon"),h._uU(3,"control_point"),h.qZA(),h.qZA(),h.YNc(4,q,3,1,"button",2),h.YNc(5,k,3,1,"div",3),h.YNc(6,J,6,1,"div",4),h.YNc(7,L,15,9,"div",3),h.qZA(),h.TgZ(8,"button",5),h._uU(9," Launch "),h.qZA(),h.TgZ(10,"div",6),h.TgZ(11,"div",7),h.TgZ(12,"div",8),h.TgZ(13,"div",9),h.TgZ(14,"div",10),h.TgZ(15,"div",11),h.TgZ(16,"form",12),h.YNc(17,F,72,16,"div",13),h.qZA(),h.YNc(18,K,5,5,"div",14),h._UZ(19,"div",15),h.qZA(),h.qZA(),h.qZA(),h.TgZ(20,"div",16),h.TgZ(21,"button",17),h.TgZ(22,"mat-icon"),h._uU(23,"close"),h.qZA(),h.qZA(),h.YNc(24,S,3,1,"button",18),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&t&&(h.xp6(4),h.Q6J("ngIf",e.filter.length>0),h.xp6(1),h.Q6J("ngIf",e.checkPer(4)),h.xp6(1),h.Q6J("ngIf",0==e.filter.length),h.xp6(1),h.Q6J("ngIf",e.items.length+e.filter.length>0),h.xp6(8),h.Q6J("@slideIn",void 0),h.xp6(1),h.Q6J("formGroup",e.main),h.xp6(1),h.Q6J("ngIf",e.items.length>0||e.filter.length>0),h.xp6(1),h.Q6J("ngIf",e.checkPer(4)),h.xp6(2),h.Q6J("@slideIn",void 0),h.xp6(1),h.Q6J("@slideIn",void 0),h.xp6(3),h.Q6J("ngIf",e.checkPer(2)&&e.main.valid))},directives:[p.lW,g.Hw,l.O5,r._Y,r.JL,r.sg,d.W,m.$,l.sg,f.KE,f.hX,Z.Nt,r.Fj,r.JJ,r.u,D.hl,D.nW,f.R9,D.Mq,b.gD,y.ey,T.l,x.t,A.a],pipes:[N.cf,N.pW],styles:[""],data:{animation:[c.Y,c.M]}}),t})();var O=a(68591),j=a(99194);function X(t,e){if(1&t){const t=h.EpF();h.TgZ(0,"div",2),h.TgZ(1,"button",5),h.NdJ("click",function(){return h.CHM(t),h.oxw().resetPhongTrao()}),h._uU(2,"PhongTrao"),h.qZA(),h.qZA()}}const W=[{path:"",component:(()=>{class t{constructor(t){this.plus=t,this.db=null,this.dbName="khen-thuong",this.isAdmin=this.plus.isAdmin(),this.chart=[],this.chuaPhatDong=[],this.chuaDangKy=[]}ngOnInit(){this.plus.IDB_InitDB(this.dbName,!0).subscribe(t=>{this.db=t,this.getData()})}getData(){this.plus.IDB_DB_GetAll(this.db,"phong-trao").subscribe(t=>{this.chart=this.plus.generateChart(t,"PhongChuTri","SoPhatDong",!0),this.chuaDangKy=this.plus.generateChart(t.filter(t=>null==t.NgayDLDangKy||t.NgayDLDangKy<t.NgayPhatDong),"PhongChuTri","SoPhatDong",!0),this.chuaPhatDong=this.plus.generateChart(t.filter(t=>null==t.NgayDLPhatDong||t.NgayDLPhatDong<44e3),"PhongChuTri","SoPhatDong",!0)})}resetPhongTrao(){if(!confirm("Reset DB?"))return;const t="phong-trao";this.plus.httpDelete(t,"del").subscribe(e=>{console.log("Clear DB"),this.plus.FBS_PostByUser(t,0).then(e=>{console.log("Clear FBS"),console.log(e),this.plus.IDB_DB_ClearCollection(this.db,t).subscribe(t=>{console.log("Clear IDB")})})})}resetHangHoa(){if(!confirm("Reset DB?"))return;const t="hang-hoa";this.plus.httpDelete(t,"del").subscribe(e=>{console.log("Clear DB"),this.plus.FBS_PostByUser(t,0).then(e=>{console.log("Clear FBS"),console.log(e),this.plus.IDB_DB_ClearCollection(this.db,t).subscribe(t=>{console.log("Clear IDB")})})})}checkPer(t,e){return this.plus.checkPer(t,e)}}return t.\u0275fac=function(e){return new(e||t)(h.Y36(u.T))},t.\u0275cmp=h.Xpm({type:t,selectors:[["app-khen-thuong"]],decls:11,vars:13,consts:[[1,"container"],["class","row",4,"ngIf"],[1,"row"],[1,"col-lg-"],[3,"id","arr","type"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(t,e){1&t&&(h.TgZ(0,"div",0),h.YNc(1,X,3,0,"div",1),h.qZA(),h.TgZ(2,"div",2),h.TgZ(3,"div",3),h._UZ(4,"app-chart",4),h.qZA(),h.TgZ(5,"div",3),h._UZ(6,"app-chart",4),h.qZA(),h.TgZ(7,"div",3),h._UZ(8,"app-chart",4),h.qZA(),h.TgZ(9,"div",3),h._UZ(10,"app-chart",4),h.qZA(),h.qZA()),2&t&&(h.xp6(1),h.Q6J("ngIf",e.isAdmin),h.xp6(3),h.Q6J("id","PhongTrao")("arr",e.chart)("type","bar"),h.xp6(2),h.Q6J("id","PhongTrao2")("arr",e.chart)("type","doughnut"),h.xp6(2),h.Q6J("id","chuaDangKy")("arr",e.chuaDangKy)("type","doughnut"),h.xp6(2),h.Q6J("id","chuaPhatDong")("arr",e.chuaPhatDong)("type","doughnut"))},directives:[l.O5,j.x],styles:[""]}),t})()},{path:"phong-trao",component:E}];let $=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=h.oAB({type:t}),t.\u0275inj=h.cJS({imports:[[O.Bz.forChild(W)],O.Bz]}),t})();var G=a(41007),R=a(14083),z=a(94803);let V=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=h.oAB({type:t}),t.\u0275inj=h.cJS({providers:[],imports:[[l.ez,o.ShareModule,$,r.UX,s.q,G.m,n.k,i.D,R.UltisModule,z.N]]}),t})()},69121:function(t,e,a){"use strict";a.d(e,{t:function(){return c}});var o=a(82393),i=a(31153),n=a(35366),s=a(15980),r=a(61511);function l(t,e){if(1&t){const t=n.EpF();n.TgZ(0,"button",0),n.NdJ("click",function(){return n.CHM(t),n.oxw().exportToJsonFile()}),n._uU(1,"Export Json"),n.qZA()}}let c=(()=>{class t{constructor(t){this.plus=t}ngOnInit(){}export(){const t=[];this.dataJson.forEach(e=>{delete e.dateModify,delete e.status,delete e.sync,delete e.canEdit,delete e.keyWord,delete e.__v,t.push(e)});const e=i.utils.json_to_sheet(t),a=i.utils.book_new();i.utils.book_append_sheet(a,e,"Sheet1"),i.writeFile(a,"4la-"+Date.now()+".xlsx")}exportToJsonFile(){for(let i=0;i<this.dataJson.length;i++)delete this.dataJson[i].dateModify,delete this.dataJson[i].canEdit,delete this.dataJson[i].keyWord;let t=JSON.stringify(this.dataJson),e="data:application/json;charset=utf-8,"+encodeURIComponent(t),a="4la-"+Date.now()+".json",o=document.createElement("a");o.setAttribute("href",e),o.setAttribute("download",a),o.click()}check(){return this.plus.checkPer("admin",4)}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(o.T))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-export-ecxel"]],inputs:{dataJson:"dataJson"},decls:3,vars:1,consts:[["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"]],template:function(t,e){1&t&&(n.TgZ(0,"button",0),n.NdJ("click",function(){return e.export()}),n._uU(1,"Export"),n.qZA(),n.YNc(2,l,2,0,"button",1)),2&t&&(n.xp6(2),n.Q6J("ngIf",e.check()))},directives:[s.lW,r.O5],styles:[""]}),t})()},43552:function(t,e,a){"use strict";a.d(e,{D:function(){return r}});var o=a(99594),i=a(61511),n=a(16073),s=a(35366);let r=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[i.ez,n.u5,o.q]]}),t})()},89274:function(t,e,a){"use strict";a.d(e,{W:function(){return Z}});var o=a(35366),i=a(16073),n=a(47701),s=a(79996),r=a(56998),l=a(47727),c=a(82393),u=a(29063),h=a(66283),p=a(26756),g=a(61511),d=a(15980),m=a(43691);function f(t,e){if(1&t){const t=o.EpF();o.TgZ(0,"button",4),o.NdJ("click",function(){return o.CHM(t),o.oxw().reset()}),o.TgZ(1,"mat-icon"),o._uU(2,"x"),o.qZA(),o.qZA()}}let Z=(()=>{class t{constructor(t,e,a){this.plus=t,this.fb=e,this.http=a,this.data=new o.vpe,this.searchtxt=this.plus.search.getValue().what,this.searchForm=this.fb.group({what:["",[i.kI.required,i.kI.minLength(3),i.kI.maxLength(100)]]})}ngOnInit(){this.find()}find(){this.searchForm.valueChanges.pipe((0,n.b)(1e3)).subscribe(t=>{this.searchForm.valid?(this.plus.load(),t.what=this.plus.removeAccents(t.what),this.plus.search.next(t),this.httpPost(this.api+"/find",t).subscribe(t=>{t.data&&this.data.emit(this.plus.Crypt_DecryptRest(t)),this.plus.alertToasrt(t)},t=>this.reset())):this.plus.loaded()})}reset(){this.plus.loaded(),this.searchForm.reset()}httpPost(t,e){return console.log("%FIND -> "+t,"font-style: italic; color:green",e),this.http.post(this.plus.getApiUrl(t),e,this.plus.getHeader()).pipe((0,s.U)(a=>(this.plus.logger(t+"PUT",e),a)),(0,r.X)(1),(0,l.K)(a=>{throw this.plus.loaded(),this.plus.alertError("Kh\xf4ng c\xf3 ph\u1ea3n h\u1ed3i!"),this.plus.logger(t+"POST",e,!1),a}))}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(c.T),o.Y36(i.qu),o.Y36(u.eN))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-search-api"]],inputs:{api:"api"},outputs:{data:"data"},decls:6,vars:2,consts:[[1,"form-group","search",3,"formGroup"],[1,"example-form-field"],["matInput","","type","text","formControlName","what"],["mat-button","","matSuffix","","mat-icon-button","",3,"click",4,"ngIf"],["mat-button","","matSuffix","","mat-icon-button","",3,"click"]],template:function(t,e){1&t&&(o.TgZ(0,"div",0),o.TgZ(1,"mat-form-field",1),o.TgZ(2,"mat-label"),o._uU(3,"T\xecm ki\u1ebfm n\xe2ng cao"),o.qZA(),o._UZ(4,"input",2),o.YNc(5,f,3,0,"button",3),o.qZA(),o.qZA()),2&t&&(o.Q6J("formGroup",e.searchForm),o.xp6(5),o.Q6J("ngIf",e.searchForm.dirty))},directives:[i.JL,i.sg,h.KE,h.hX,p.Nt,i.Fj,i.JJ,i.u,g.O5,d.lW,h.R9,m.Hw],styles:[".search[_ngcontent-%COMP%]{width:300px;transition:width .4s ease-in-out}"]}),t})()}}]);