"use strict";(self.webpackChunkdlxl=self.webpackChunkdlxl||[]).push([[458],{50458:(ta,Ze,_)=>{_.r(Ze),_.d(Ze,{DlxlModule:()=>pm});var Yt={};_.r(Yt),_.d(Yt,{afterMain:()=>fi,afterRead:()=>mi,afterWrite:()=>bi,applyStyles:()=>mn,arrow:()=>yi,auto:()=>De,basePlacements:()=>Jt,beforeMain:()=>_i,beforeRead:()=>hi,beforeWrite:()=>gi,bottom:()=>F,clippingParents:()=>ci,computeStyles:()=>gn,createPopper:()=>vn,createPopperBase:()=>or,createPopperLite:()=>rr,detectOverflow:()=>Rt,end:()=>Vt,eventListeners:()=>Tn,flip:()=>Mi,hide:()=>Ki,left:()=>L,main:()=>di,modifierPhases:()=>Ei,offset:()=>Ui,placements:()=>hn,popper:()=>$t,popperGenerator:()=>we,popperOffsets:()=>Cn,preventOverflow:()=>Li,read:()=>pi,reference:()=>ui,right:()=>J,start:()=>Dt,top:()=>U,variationPlacements:()=>un,viewport:()=>cn,write:()=>Ti});var nn=_(17721),re=_(5923),A=_(36895),t=_(94650);let on=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[A.ez,re.X,nn.q]}),o})();var an=_(24561),lt=_(85033),ea=_(48387),na=_(85913),Xn=_(24809),ot=_(15228),c=_(24006),le=_(78372),ct=_(70511),j=_(94559),sn=_(11147),ut=_(54654),z=_(25555),B=_(10875),ia=_(15439),b=_.n(ia);let ti=(()=>{class o{constructor(){this.backgroundColor=["rgba(255, 99, 132, 0.3)","rgba(54, 162, 235, 0.3)","rgba(255, 206, 86, 0.3)","rgba(35, 192, 50, 0.3)","rgba(153, 102, 255, 0.3)","rgba(255, 159, 64, 0.3)","rgba(248, 28, 142, 0.3)","rgba(232, 107, 35, 0.3)","rgba(238, 20, 180, 0.3)","rgba(129, 255, 255, 0.3)","rgba(49, 153, 39, 0.3)","rgba(24, 68, 255, 0.3)","rgba(55, 208, 16, 0.3)","rgba(205, 70, 0, 0.3)","rgba(43, 145, 221, 0.3)","rgba(2, 136, 109, 0.3)"],this.borderColor=["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)","rgba(248, 28, 142, 1)","rgba(232, 107, 35, 1)","rgba(238, 20, 180, 1)","rgba(129, 255, 255, 1)","rgba(49, 153, 39, 1)","rgba(24, 68, 255, 1)","rgba(55, 208, 16, 1)","rgba(205, 70, 0, 1)","rgba(43, 145, 221, 1)","rgba(2, 136, 109, 1)"]}generateOption(e,i,a,s){return{type:e,data:{labels:i,datasets:[{label:"Bi\u1ec3u \u0111\u1ed3",data:a,backgroundColor:this.backgroundColor,borderColor:this.borderColor,borderWidth:1,pointRadius:1,pointHoverRadius:5}]},options:{scales:{y:{beginAtZero:!0}},responsive:!0,interaction:{mode:"index",intersect:!1},plugins:{zoom:{zoom:{wheel:{enabled:s},pinch:{enabled:s},mode:"xy"},pan:{enabled:!0,mode:"xy"}}}}}}generateChart(e,i,a,s=!1,r=!0,l="",u="DD/MM/YYYY"){let h={};for(let p=0;p<e.length;p++){const f=e[p],d=l.length>0?b()(f[i],u).format(l):f[i];h.hasOwnProperty(d)?s?h[d]++:h[d]+=f[a]:h[d]=s?1:f[a]}return console.log("generateChart",i,a,Object.fromEntries(Object.entries(h).sort())),Object.fromEntries(r?Object.entries(h).sort():Object.entries(h).sort().reverse())}getRandomColor(e){let i=[];for(let a=0;a<e;a++)i.push(`rgba(${Math.floor(255*Math.random())}, ${Math.floor(255*Math.random())}, ${Math.floor(255*Math.random())}, 0.9`);return i}goFullScreen(e){const i=document.getElementById(e);i.requestFullscreen&&i.requestFullscreen()}exitFullScreen(){document.exitFullscreen&&document.exitFullscreen()}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var Y=_(4859),X=_(97392),ht=_(284),D=_(59549),ce=_(77331),$=_(49652),ue=_(31361),G=_(30627);function oa(o,n){1&o&&t._UZ(0,"div",43)}function aa(o,n){1&o&&t._UZ(0,"div",43)}function sa(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td",11),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.copy(s))}),t._uU(2),t.qZA(),t.TgZ(3,"td",11),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.onEdit(s))}),t._uU(4),t.qZA(),t.TgZ(5,"td")(6,"a",44),t._uU(7),t.qZA()(),t.TgZ(8,"td",45),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.onEdit(s))}),t._uU(9),t.qZA(),t.TgZ(10,"td",46),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.onEdit(s))}),t._uU(11),t.ALo(12,"numberPipe"),t.qZA(),t.TgZ(13,"td")(14,"mat-icon",47),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.delete(s))}),t._uU(15,"delete"),t.qZA()()()}if(2&o){const e=n.$implicit;t.Q6J("@slideIn",void 0),t.xp6(2),t.Oqu(e.MA_KHANG),t.xp6(2),t.Oqu(e.TEN_KHANG),t.xp6(2),t.MGl("href","tel:+84",e.DTHOAI,"",t.LSH),t.s9C("title",e.DTHOAI),t.xp6(1),t.hij("0",e.DTHOAI,""),t.xp6(2),t.Oqu(e.THANG),t.xp6(2),t.Oqu(t.lcZ(12,8,e.SO_TIEN))}}let ra=(()=>{class o{constructor(e,i,a,s,r,l,u){this.httpSV=e,this.loadSV=i,this.formSV=a,this.idbSV=s,this.plus=r,this.authSV=l,this.chartSV=u,this.title="Qu\u1ea3n l\xfd thu",this.dbName="kinh-doanh",this.api="doc-thu",this.path="doc-thu",this.db=null,this.allItems=[],this.filter=[],this.sheetId="1L83DBzUO0rY7F2S6LVRHlTsX8A4g_XWVmY_3OqsHbl8",this.sheetName="Data",this.baoCao="\u0110\xe3 x\u1eed l\xfd",this.allowLoadmore=!0,this.char1=null,this.char2=null,this.searchForm=this.formSV.fb.group({input:["",[c.kI.required,c.kI.minLength(4)]]}),this.main=this.formSV.fb.group({status:[0,[]],_id:["",[]],MA_KHANG:["",[]],TEN_KHANG:["",[]],DTHOAI:["",[]],DIA_CHI:["",[]],THANG:["",[]],SO_TIEN:[0,[]],So_GCS:["",[]],DANH_SO:["",[]],SO_CTO:["",[]],TEN_TRAM:["",[]],KHUVUC:["",[]],SO_KY_NO:["",[]],NHAN_VIEN:["",[]],GHI_CHU:["",[]]})}ngOnInit(){this.plus.setTiTle(this.title),this.loadSV.load("getData"),this.idbSV.IDB_InitDB(this.dbName).subscribe(e=>{this.db=e,this.getDataByNV(),this.loadSV.loaded("getData")}),this.authSV.user.subscribe(e=>{e&&(this.user=e)}),this.search()}hideKeyboard(e){e.attr("readonly","readonly"),e.attr("disabled","true"),setTimeout(function(){e.blur(),e.removeAttr("readonly"),e.removeAttr("disabled")},100)}delete(e){this.idbSV.IDB_DB_DeleteOne(this.db,this.api,e._id).then(i=>{this.authSV._toastSuccess(),this.reload()})}save(){this.httpSV.put(this.api,{sheetName:this.sheetName,sheetId:this.sheetId,item:this.main.value},"").subscribe(a=>{console.log(a),this.plus.clickBtn("closeModaldocthu")})}getDataByNV(){this.loadSV.load("getDataByNV"),this.idbSV.IDB_DB_GetAll(this.db,this.api).subscribe(e=>{this.allItems=e,this.filter=e.slice(0,50),this.generateChart(),this.loadSV.loaded("getDataByNV")})}generateChart(){this.char1=this.chartSV.generateChart(this.allItems,"KHUVUC","SO_TIEN",!0),this.char2=this.chartSV.generateChart(this.allItems,"NHAN_VIEN","SO_TIEN",!1)}getDataApi(){this.httpSV.post(this.path,{sheetId:this.sheetId,sheetName:this.sheetName},"").subscribe({next:i=>{let a=i.data,s=[];this.idbSV.IDB_DB_ClearCollection(this.db,this.api);for(let r=0;r<a.length;r++){let l=a[r];"0"!=l._id&&(l._id=l._id,l.status=1,l.SO_TIEN=+`${l.SO_TIEN}`.replace(/[^0-9]/g,""),s.push(l))}this.allItems=s,this.filter=s.slice(0,50),this.idbSV.IDB_DB_Add(this.db,this.api,s)},error:i=>{this.authSV._toastErr("L\u1ed7i k\u1ebft n\u1ed1i")}})}updateStatus(e){this.plus.clickBtn("closeModaldocthu")}onEdit(e){this.main.patchValue(e),this.item=e,this.plus.clickBtn("modaldocthu")}search(){this.searchForm.valueChanges.pipe((0,le.b)(1500)).subscribe(e=>{if(this.searchForm.valid){console.log(e);const i=[];this.allowLoadmore=!1,this.idbSV.IDB_DB_GetAll(this.db,this.api).subscribe(a=>{console.log("IDB_DB_GetAll()",a.length);const s=this.plus.removeAccents(e.input);for(let l=0;l<a.length;l++){let u=a[l];const h=JSON.stringify(u);this.plus.removeAccents(h).includes(s)&&i.push(u)}this.filter=i,0==i.length&&this.plus.alertMatSnackBar("Kh\xf4ng c\xf2n k\u1ebft qu\u1ea3 ph\xf9 h\u1ee3p"),document.getElementById("tiit").click()})}})}pushData(e){if(console.log(e),e&&this.allowLoadmore){this.loadSV.load("pushData");let i=this.filter.length,a=this.allItems.slice(i,i+100);this.filter=this.filter.concat(a),this.loadSV.loaded("pushData")}}copy(e){this.plus.copyToClipboard(e.MA_KHANG)}reload(){this.authSV.reload()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(ct.O),t.Y36(j.b),t.Y36(sn.o),t.Y36(ut.Y),t.Y36(z.T),t.Y36(B.c1),t.Y36(ti))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-doc-thu"]],decls:125,vars:8,consts:[[1,"container"],[1,"row"],["class","col-md-6",4,"ngIf"],["color","accent","mat-raised-button","",3,"click"],["id","tiit",1,"tit"],[3,"formGroup"],["matInput","","id","search-api","formControlName","input","placeholder","T\xecm ki\u1ebfm (F2)"],[1,"table","table-hover","table-inverse"],[1,"thead-inverse"],[1,"text-center"],[1,"text-end"],[3,"click"],[4,"ngFor","ngForOf"],["hidden","","id","modaldocthu","type","button","data-bs-toggle","modal","data-bs-target","#docthu",1,"btn","btn-primary"],["id","docthu","tabindex","-1","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","staticBackdropLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body",3,"formGroup"],["hidden","","appearance","outline"],["type","text","autocomplete","off","matInput","","formControlName","_id"],["matSuffix",""],["appearance","outline"],["type","text","autocomplete","off","matInput","","formControlName","MA_KHANG"],["type","text","autocomplete","off","matInput","","formControlName","TEN_KHANG"],["type","text","autocomplete","off","matInput","","formControlName","DTHOAI"],["type","text","autocomplete","off","matInput","","formControlName","DIA_CHI"],["type","text","autocomplete","off","matInput","","formControlName","THANG"],["type","number","autocomplete","off","matInput","","formControlName","SO_TIEN"],["type","text","autocomplete","off","matInput","","formControlName","So_GCS"],["type","text","autocomplete","off","matInput","","formControlName","DANH_SO"],["type","text","autocomplete","off","matInput","","formControlName","SO_CTO"],["type","text","autocomplete","off","matInput","","formControlName","TEN_TRAM"],["type","text","autocomplete","off","matInput","","formControlName","KHUVUC"],["type","text","autocomplete","off","matInput","","formControlName","SO_KY_NO"],["type","text","autocomplete","off","matInput","","formControlName","NHAN_VIEN"],["type","text","autocomplete","off","matInput","","formControlName","GHI_CHU"],[1,"modal-footer"],["color","warn","mat-raised-button","",3,"click"],["color","primary","id","closeModaldocthu","mat-raised-button","","data-bs-dismiss","modal","aria-label","Close",3,"disabled"],[3,"percentLoad","emit"],[1,"col-md-6"],[3,"href","title"],[1,"text-center",3,"click"],[1,"text-end",3,"click"],["color","warn",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"mat-expansion-panel")(2,"mat-expansion-panel-header"),t._uU(3," Bi\u1ec3u \u0111\u1ed3 "),t.qZA(),t.TgZ(4,"div",1),t.YNc(5,oa,1,0,"div",2),t.YNc(6,aa,1,0,"div",2),t.qZA()(),t.TgZ(7,"button",3),t.NdJ("click",function(){return i.getDataApi()}),t._uU(8," L\u1ea5y d\u1eef li\u1ec7u "),t.qZA(),t._UZ(9,"mat-chip-listbox"),t.TgZ(10,"h6",4),t._uU(11),t.qZA(),t.TgZ(12,"mat-form-field",5),t._UZ(13,"input",6),t.qZA(),t.TgZ(14,"table",7)(15,"thead",8)(16,"tr")(17,"th"),t._uU(18,"PK"),t.qZA(),t.TgZ(19,"th"),t._uU(20,"Kh\xe1ch h\xe0ng"),t.qZA(),t.TgZ(21,"th"),t._uU(22,"\u0110i\u1ec7n tho\u1ea1i"),t.qZA(),t.TgZ(23,"th",9),t._uU(24,"Th\xe1ng "),t.qZA(),t.TgZ(25,"th",10),t._uU(26,"S\u1ed1 ti\u1ec1n"),t.qZA(),t.TgZ(27,"th")(28,"mat-icon",11),t.NdJ("click",function(){return i.reload()}),t._uU(29,"refresh"),t.qZA()()()(),t.TgZ(30,"tbody"),t.YNc(31,sa,16,10,"tr",12),t.qZA()()(),t.TgZ(32,"button",13),t._uU(33," Launch static backdrop modal "),t.qZA(),t.TgZ(34,"div",14)(35,"div",15)(36,"div",16)(37,"div",17)(38,"h5",18),t._uU(39,"Chi Ti\u1ebft"),t.qZA(),t._UZ(40,"button",19),t.qZA(),t.TgZ(41,"div",20)(42,"mat-form-field",21)(43,"mat-label"),t._uU(44,"STT"),t.qZA(),t._UZ(45,"input",22)(46,"span",23),t.qZA(),t.TgZ(47,"mat-form-field",24)(48,"mat-label"),t._uU(49,"M\xe3 KH"),t.qZA(),t._UZ(50,"input",25)(51,"span",23),t.qZA(),t.TgZ(52,"mat-form-field",24)(53,"mat-label"),t._uU(54,"Kh\xe1ch h\xe0ng"),t.qZA(),t._UZ(55,"input",26)(56,"span",23),t.qZA(),t.TgZ(57,"mat-form-field",24)(58,"mat-label"),t._uU(59,"\u0110i\u1ec7n tho\u1ea1i"),t.qZA(),t._UZ(60,"input",27)(61,"span",23),t.qZA(),t.TgZ(62,"mat-form-field",24)(63,"mat-label"),t._uU(64,"\u0110\u1ecba ch\u1ec9"),t.qZA(),t._UZ(65,"input",28)(66,"span",23),t.qZA(),t.TgZ(67,"mat-form-field",24)(68,"mat-label"),t._uU(69,"Th\xe1ng "),t.qZA(),t._UZ(70,"input",29)(71,"span",23),t.qZA(),t.TgZ(72,"mat-form-field",24)(73,"mat-label"),t._uU(74,"S\u1ed1 ti\u1ec1n"),t.qZA(),t._UZ(75,"input",30)(76,"span",23),t.qZA(),t.TgZ(77,"mat-form-field",24)(78,"mat-label"),t._uU(79,"M\xe3 GCS"),t.qZA(),t._UZ(80,"input",31)(81,"span",23),t.qZA(),t.TgZ(82,"mat-form-field",24)(83,"mat-label"),t._uU(84,"Danh s\u1ed1"),t.qZA(),t._UZ(85,"input",32)(86,"span",23),t.qZA(),t.TgZ(87,"mat-form-field",24)(88,"mat-label"),t._uU(89,"S\u1ed1 c\xf4ng t\u01a1"),t.qZA(),t._UZ(90,"input",33)(91,"span",23),t.qZA(),t.TgZ(92,"mat-form-field",24)(93,"mat-label"),t._uU(94,"T\xean Tr\u1ea1m"),t.qZA(),t._UZ(95,"input",34)(96,"span",23),t.qZA(),t.TgZ(97,"mat-form-field",24)(98,"mat-label"),t._uU(99,"Khu v\u1ef1c"),t.qZA(),t._UZ(100,"input",35)(101,"span",23),t.qZA(),t.TgZ(102,"mat-form-field",24)(103,"mat-label"),t._uU(104,"S\u1ed1 k\u1ef3 n\u1ee3"),t.qZA(),t._UZ(105,"input",36)(106,"span",23),t.qZA(),t.TgZ(107,"mat-form-field",24)(108,"mat-label"),t._uU(109,"Nh\xe2n vi\xean"),t.qZA(),t._UZ(110,"input",37)(111,"span",23),t.qZA(),t.TgZ(112,"mat-form-field",24)(113,"mat-label"),t._uU(114,"Ghi ch\xfa"),t.qZA(),t._UZ(115,"input",38)(116,"span",23),t.qZA()(),t.TgZ(117,"div",39)(118,"button",40),t.NdJ("click",function(){return i.save()}),t.TgZ(119,"mat-icon"),t._uU(120,"save"),t.qZA()(),t.TgZ(121,"button",41)(122,"mat-icon"),t._uU(123,"close"),t.qZA()()()()()(),t.TgZ(124,"app-loadmore",42),t.NdJ("emit",function(s){return i.pushData(s)}),t.qZA()),2&e&&(t.xp6(5),t.Q6J("ngIf",i.char1),t.xp6(1),t.Q6J("ngIf",i.char2),t.xp6(5),t.hij(" ",null==i.allItems?null:i.allItems.length," Kh\xe1ch h\xe0ng"),t.xp6(1),t.Q6J("formGroup",i.searchForm),t.xp6(19),t.Q6J("ngForOf",i.filter),t.xp6(10),t.Q6J("formGroup",i.main),t.xp6(80),t.Q6J("disabled",i.main.invalid),t.xp6(3),t.Q6J("percentLoad",60))},dependencies:[A.sg,A.O5,c.Fj,c.wV,c.JJ,c.JL,c.sg,c.u,Y.lW,X.Hw,ht.Nt,D.KE,D.hX,D.R9,ce.z2,$.ib,$.yz,ue.w,G._2],data:{animation:[ot.Ym]}}),o})();var M=_(15861),ei=_(80529),la=_(35304),ca=_(71948),ni=_(47957),Ft=_(3238);function ua(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.save())}),t.TgZ(1,"mat-icon"),t._uU(2,"save"),t.qZA()()}2&o&&t.Q6J("@slideIn",void 0)}function ha(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td")(2,"mat-radio-button",20),t.NdJ("change",function(){const s=t.CHM(e).index,r=t.oxw();return t.KtG(r.chonNganHang(s))}),t.qZA()(),t.TgZ(3,"td",21),t.NdJ("click",function(){const s=t.CHM(e).index,r=t.oxw();return t.KtG(r.onEdit(s))}),t._UZ(4,"img",22),t.qZA(),t.TgZ(5,"td",21),t.NdJ("click",function(){const s=t.CHM(e).index,r=t.oxw();return t.KtG(r.onEdit(s))}),t._uU(6),t.qZA(),t.TgZ(7,"td",21),t.NdJ("click",function(){const s=t.CHM(e).index,r=t.oxw();return t.KtG(r.onEdit(s))}),t._uU(8),t.qZA(),t.TgZ(9,"td",21),t.NdJ("click",function(){const s=t.CHM(e).index,r=t.oxw();return t.KtG(r.onEdit(s))}),t._uU(10),t.qZA(),t.TgZ(11,"td",21),t.NdJ("click",function(){const s=t.CHM(e).index,r=t.oxw();return t.KtG(r.onEdit(s))}),t._uU(12),t.qZA(),t.TgZ(13,"td",21),t.NdJ("click",function(){const s=t.CHM(e).index,r=t.oxw();return t.KtG(r.onEdit(s))}),t.TgZ(14,"mat-icon",23),t.NdJ("click",function(){const s=t.CHM(e).index,r=t.oxw();return t.KtG(r.deleteBank(s))}),t._uU(15,"delete"),t.qZA()()()}if(2&o){const e=n.$implicit;t.xp6(2),t.Q6J("checked",1==e.TrangThai),t.xp6(2),t.s9C("src",e.Logo,t.LSH),t.s9C("alt",e.TenNganHang),t.xp6(2),t.Oqu(e.TenNganHang),t.xp6(2),t.Oqu(e.SoTaiKhoan),t.xp6(2),t.Oqu(e.ChiNhanh),t.xp6(2),t.Oqu(e.Email)}}function pa(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"mat-option",21),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw(2);return t.KtG(r.selectBank(s))}),t._UZ(1,"img",22),t._uU(2),t.qZA()}if(2&o){const e=n.$implicit;t.xp6(1),t.s9C("src",e.icon_url,t.LSH),t.s9C("alt",e.short_name),t.xp6(1),t.AsE(" ",e.name," - ",e.short_name,"")}}function ma(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"mat-option",21),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw(2);return t.KtG(r.selectBank(s))}),t._UZ(1,"img",22),t._uU(2),t.qZA()}if(2&o){const e=n.$implicit;t.xp6(1),t.s9C("src",e.icon_url,t.LSH),t.s9C("alt",e.short_name),t.xp6(1),t.AsE(" ",e.name," - ",e.short_name,"")}}function _a(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",35),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.addBank())}),t.TgZ(1,"mat-icon"),t._uU(2,"done"),t.qZA()()}}function da(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",36),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.cancel())}),t.TgZ(1,"mat-icon"),t._uU(2,"clear"),t.qZA()()}}function fa(o,n){if(1&o&&(t.TgZ(0,"form",3)(1,"div",4)(2,"div",5)(3,"mat-form-field")(4,"mat-label"),t._uU(5,"Ng\xe2n H\xe0ng"),t.qZA(),t._UZ(6,"input",24),t.TgZ(7,"mat-autocomplete",null,25),t.YNc(9,pa,3,4,"mat-option",26),t.qZA()(),t.TgZ(10,"mat-autocomplete",null,25),t.YNc(12,ma,3,4,"mat-option",26),t.qZA(),t.TgZ(13,"mat-form-field")(14,"mat-label"),t._uU(15,"Ch\u1ee7 t\xe0i kho\u1ea3n"),t.qZA(),t._UZ(16,"input",27)(17,"span",7),t.qZA(),t.TgZ(18,"mat-form-field")(19,"mat-label"),t._uU(20,"S\u1ed1 t\xe0i kho\u1ea3n"),t.qZA(),t._UZ(21,"input",28)(22,"span",7),t.qZA()(),t.TgZ(23,"div",5)(24,"mat-form-field")(25,"mat-label"),t._uU(26,"\u0110\u1ecba ch\u1ec9 mail ng\xe2n h\xe0ng"),t.qZA(),t._UZ(27,"input",29)(28,"span",7),t.qZA(),t.TgZ(29,"mat-form-field")(30,"mat-label"),t._uU(31,"Thu\u1ed9c t\u1ec9nh"),t.qZA(),t._UZ(32,"input",30)(33,"span",7),t.qZA(),t.TgZ(34,"mat-form-field")(35,"mat-label"),t._uU(36,"Chi nh\xe1nh"),t.qZA(),t._UZ(37,"input",31)(38,"span",7),t.qZA()()(),t.TgZ(39,"div",32),t.YNc(40,_a,3,0,"button",33),t.YNc(41,da,3,0,"button",34),t.qZA()()),2&o){const e=t.MAs(8),i=t.oxw();t.Q6J("formGroup",i.bankForm)("@slideIn",void 0),t.xp6(6),t.Q6J("matAutocomplete",e),t.xp6(3),t.Q6J("ngForOf",i.banksOpt),t.xp6(3),t.Q6J("ngForOf",i.banksOpt),t.xp6(28),t.Q6J("ngIf",i.bankForm.valid),t.xp6(1),t.Q6J("ngIf",i.bankForm.valid)}}function ga(o,n){if(1&o&&(t.TgZ(0,"pre"),t._uU(1),t.ALo(2,"json"),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij("setup :",t.lcZ(2,1,e.setup),"")}}function Ta(o,n){1&o&&(t.TgZ(0,"mat-expansion-panel")(1,"mat-expansion-panel-header")(2,"b"),t._uU(3," Danh s\xe1ch ng\xe2n h\xe0ng"),t.qZA()()())}let ba=(()=>{class o{constructor(e,i,a,s,r){this.fb=e,this.authSV=i,this.http=a,this.bankSV=s,this.plus=r,this.user=this.authSV.userDir,this.main=this.fb.group({_id:"",PhongBan:["",[c.kI.required,c.kI.minLength(5),c.kI.maxLength(255)]],TruongPhong:["",[c.kI.required,c.kI.minLength(5),c.kI.maxLength(255)]],NguoiKiemTra:["",[c.kI.required,c.kI.minLength(5),c.kI.maxLength(255)]],TenDonVi:["",[c.kI.required,c.kI.minLength(5),c.kI.maxLength(255)]],DiaChi:["",[c.kI.required,c.kI.minLength(5),c.kI.maxLength(255)]],GiamDoc:["",[c.kI.required,c.kI.minLength(5),c.kI.maxLength(255)]],MaSoThue:["",[c.kI.required,c.kI.minLength(5),c.kI.maxLength(255)]],NguoiNopThue:["",[c.kI.required,c.kI.minLength(5),c.kI.maxLength(255)]],TaiKhoan:this.fb.array([])}),this.bankForm=this.fb.group({MaNganHang:["",[c.kI.required,c.kI.minLength(1),c.kI.maxLength(20)]],ChuTaiKhoan:["",[c.kI.required,c.kI.minLength(5),c.kI.maxLength(255)]],SoTaiKhoan:["",[c.kI.required,c.kI.minLength(5),c.kI.maxLength(30)]],TenNganHang:["",[c.kI.required,c.kI.minLength(5),c.kI.maxLength(255)]],ThuocTinh:["",[c.kI.required,c.kI.minLength(5),c.kI.maxLength(255)]],ChiNhanh:["",[c.kI.required,c.kI.minLength(5),c.kI.maxLength(255)]],Logo:["",[c.kI.minLength(5),c.kI.maxLength(255)]],TrangThai:[!1,[c.kI.min(0),c.kI.max(1)]],Email:["",[c.kI.required,c.kI.email]]}),this.banks=[],this.banksOpt=[]}ngOnInit(){this.authSV.user.subscribe(e=>{this.user=e,this.main.controls._id.setValue(this.user._id),this.getSetup(),this.getBanks(),this.filter()})}get TaiKhoan(){return this.main.get("TaiKhoan")}filter(){this.banksOpt=this.banks,this.bankForm.valueChanges.pipe((0,le.b)(500)).subscribe(e=>{let i=this.plus.removeAccents(e.TenNganHang);this.banksOpt=this.banks.filter(a=>this.plus.removeAccents(JSON.stringify(a)).toLowerCase().includes(i)),1==this.banksOpt.length&&this.selectBank(this.banksOpt[0])})}chonNganHang(e){for(let i=0;i<this.setup.TaiKhoan.length;i++)this.setup.TaiKhoan[i].TrangThai=!1;this.setup.TaiKhoan[e].TrangThai=!0}addBank(){this.bankForm.invalid||(this.setup?.TaiKhoan||(this.setup=this.main.value),this.setup.TaiKhoan.push(this.bankForm.value))}selectBank(e){this.bankForm.patchValue({MaNganHang:`${e.code}`,TenNganHang:e.name,Logo:e.icon_url})}getSetup(){this.authSV.FBS_getById("setup",this.user._id).subscribe(e=>{this.setup=e,this.main.patchValue(e),this.authSV._setOpt(B.HB.NLMTSETUP,"dmtset")})}getBanks(){this.bankSV.getBanks().then(e=>{this.banksOpt=e,this.banks=e})}deleteBank(e){this.setup.TaiKhoan.splice(e,1)}checkPer(e,i=1){return this.authSV.checkPer(e,i)}save(){var e=this;return(0,M.Z)(function*(){if(e.main.invalid)return;let i=e.main.value;i.TaiKhoan=e.setup.TaiKhoan,i._id=e.user._id,localStorage.setItem("setup",JSON.stringify(i)),e.authSV.FBS_set("setup",e.user._id,i)})()}onEdit(e){this.bankForm.patchValue(this.setup.TaiKhoan[e])}cancel(){this.authSV.reload("dien-luc/dmt-setup")}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(c.qu),t.Y36(B.c1),t.Y36(ei.eN),t.Y36(la.v),t.Y36(z.T))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-nlmt-setup"]],decls:68,vars:7,consts:[[1,"container"],[1,"tit"],["id","save-btn","mat-raised-button","","color","warn",3,"click",4,"ngIf"],[3,"formGroup"],[1,"row"],[1,"col-6"],["type","text","autocomplete","off","matInput","","formControlName","TenDonVi"],["matSuffix",""],["type","text","autocomplete","off","matInput","","formControlName","DiaChi"],["type","text","autocomplete","off","matInput","","formControlName","GiamDoc"],["type","text","autocomplete","off","matInput","","formControlName","MaSoThue"],["type","text","autocomplete","off","matInput","","formControlName","PhongBan"],["type","text","autocomplete","off","matInput","","formControlName","TruongPhong"],["type","text","autocomplete","off","matInput","","formControlName","NguoiKiemTra"],["type","text","autocomplete","off","matInput","","formControlName","NguoiNopThue"],[1,"table"],[4,"ngFor","ngForOf"],[3,"formGroup",4,"ngIf"],[4,"ngIf"],["id","save-btn","mat-raised-button","","color","warn",3,"click"],["name","bank",3,"checked","change"],[3,"click"],["width","40px",3,"src","alt"],["color","warn",3,"click"],["type","text","placeholder","T\xean ng\xe2n h\xe0ng","matInput","","formControlName","TenNganHang",3,"matAutocomplete"],["auto","matAutocomplete"],[3,"click",4,"ngFor","ngForOf"],["type","text","id","ChuTaiKhoan","autocomplete","off","matInput","","formControlName","ChuTaiKhoan"],["type","text","autocomplete","off","matInput","","formControlName","SoTaiKhoan"],["type","email","matInput","","formControlName","Email","placeholder","\u0110\u1ecba ch\u1ec9 mail g\u1eedi b\u1ea3ng k\xea"],["type","text","autocomplete","off","matInput","","formControlName","ThuocTinh"],["type","text","autocomplete","off","matInput","","formControlName","ChiNhanh"],[1,"text-center"],["mat-raised-button","","color","warn",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"h4",1),t._uU(2," C\u1ea5u h\xecnh th\xf4ng tin \u0111\u01a1n v\u1ecb"),t.qZA(),t.YNc(3,ua,3,1,"button",2),t.TgZ(4,"form",3)(5,"div",4)(6,"div",5)(7,"mat-form-field")(8,"mat-label"),t._uU(9,"T\xean \u0111\u01a1n v\u1ecb"),t.qZA(),t._UZ(10,"input",6)(11,"span",7),t.qZA(),t.TgZ(12,"mat-form-field")(13,"mat-label"),t._uU(14,"\u0110\u1ecba ch\u1ec9"),t.qZA(),t._UZ(15,"input",8)(16,"span",7),t.qZA(),t.TgZ(17,"mat-form-field")(18,"mat-label"),t._uU(19,"Gi\xe1m \u0110\u1ed1c"),t.qZA(),t._UZ(20,"input",9)(21,"span",7),t.qZA(),t.TgZ(22,"mat-form-field")(23,"mat-label"),t._uU(24,"M\xe3 s\u1ed1 thu\u1ebf"),t.qZA(),t._UZ(25,"input",10)(26,"span",7),t.qZA()(),t.TgZ(27,"div",5)(28,"mat-form-field")(29,"mat-label"),t._uU(30,"Ph\xf2ng ban"),t.qZA(),t._UZ(31,"input",11)(32,"span",7),t.qZA(),t.TgZ(33,"mat-form-field")(34,"mat-label"),t._uU(35,"Tr\u01b0\u1edfng ph\xf2ng"),t.qZA(),t._UZ(36,"input",12)(37,"span",7),t.qZA(),t.TgZ(38,"mat-form-field")(39,"mat-label"),t._uU(40,"Ng\u01b0\u1eddi ki\u1ec3m tra"),t.qZA(),t._UZ(41,"input",13)(42,"span",7),t.qZA(),t.TgZ(43,"mat-form-field")(44,"mat-label"),t._uU(45,"Ng\u01b0\u1eddi n\u1ed9p thu\u1ebf"),t.qZA(),t._UZ(46,"input",14)(47,"span",7),t.qZA()()()(),t.TgZ(48,"table",15)(49,"thead")(50,"tr"),t._UZ(51,"th"),t.TgZ(52,"th"),t._uU(53,"Logo"),t.qZA(),t.TgZ(54,"th"),t._uU(55,"T\xean ng\xe2n h\xe0ng"),t.qZA(),t.TgZ(56,"th"),t._uU(57,"S\u1ed1 t\xe0i kho\u1ea3n"),t.qZA(),t.TgZ(58,"th"),t._uU(59,"Chi nh\xe1nh"),t.qZA(),t.TgZ(60,"th"),t._uU(61,"Email"),t.qZA()()(),t.TgZ(62,"tbody"),t.YNc(63,ha,16,7,"tr",16),t.qZA()(),t._UZ(64,"hr"),t.YNc(65,fa,42,7,"form",17),t.YNc(66,ga,3,3,"pre",18),t.YNc(67,Ta,4,0,"mat-expansion-panel",18),t.qZA()),2&e&&(t.xp6(3),t.Q6J("ngIf",i.main.valid),t.xp6(1),t.Q6J("formGroup",i.main),t.xp6(1),t.Q6J("@slideIn",void 0),t.xp6(58),t.Q6J("ngForOf",null==i.setup?null:i.setup.TaiKhoan),t.xp6(2),t.Q6J("ngIf",i.checkPer("dmt-input")),t.xp6(1),t.Q6J("ngIf",i.checkPer("dev")),t.xp6(1),t.Q6J("ngIf",!1))},dependencies:[A.sg,A.O5,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,ca.U0,Y.lW,X.Hw,ht.Nt,D.KE,D.hX,D.R9,ni.XC,Ft.ey,ni.ZL,$.ib,$.yz,A.Ts],data:{animation:[ot.Ym]}}),o})();var Ea=_(8277),Tt=_(9116),he=_(10266),rn=_(98739),pe=_(1208),ii=_(99433),oi=_(50727);let It=(()=>{class o{constructor(e,i,a,s,r){this.authSV=e,this.loadSV=i,this.idbSV=a,this.httpSV=s,this.nlmtSV=r,this.dbName="dien-luc",this.db=null,this.subs=new oi.w0,this.user=new t.vpe,this.nlmtSetup=new t.vpe}ngOnInit(){this.getUser()}getUser(){this.authSV.user.subscribe(e=>{e&&(this.user.emit(e),this.nlmtSV.user=e,this.getSetup(e))})}getSetup(e){this.authSV.FBS_getById("setup",e._id).subscribe(i=>{console.log(i),this.nlmtSetup.emit(i),this.nlmtSV.setup=i})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(B.c1),t.Y36(j.b),t.Y36(ut.Y),t.Y36(ct.O),t.Y36(lt.j))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-nlmt-share"]],outputs:{user:"user",nlmtSetup:"nlmtSetup"},decls:0,vars:0,template:function(e,i){}}),o})();function Aa(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"mat-icon",25),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(),s=a.index,r=a.$implicit,l=t.oxw();return t.KtG(l.save(l.pageIndex*l.pageSize+s,r))}),t._uU(1,"save"),t.qZA()}}function Na(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",16),t._uU(4),t.qZA(),t.TgZ(5,"td",16)(6,"a",17),t._uU(7),t.qZA()(),t.TgZ(8,"td",16),t._uU(9),t.qZA(),t.TgZ(10,"td",16),t._uU(11),t.qZA(),t.TgZ(12,"td",16),t._uU(13),t.qZA(),t.TgZ(14,"td",16),t._uU(15),t.ALo(16,"number"),t.qZA(),t.TgZ(17,"td",18),t._uU(18),t.ALo(19,"number"),t.qZA(),t.TgZ(20,"td",16),t._uU(21),t.ALo(22,"number"),t.qZA(),t.TgZ(23,"td",19),t.NdJ("blur",function(a){const r=t.CHM(e).index,l=t.oxw();return t.KtG(l.changeLabel(a,l.pageIndex*l.pageSize+r))})("keydown.tab",function(a){const r=t.CHM(e).index,l=t.oxw();return t.KtG(l.changeLabel(a,l.pageIndex*l.pageSize+r))}),t.qZA(),t.TgZ(24,"td",20),t.NdJ("blur",function(a){const r=t.CHM(e).index,l=t.oxw();return t.KtG(l.changeSeri(a,l.pageIndex*l.pageSize+r))})("keydown.tab",function(a){const r=t.CHM(e).index,l=t.oxw();return t.KtG(l.changeSeri(a,l.pageIndex*l.pageSize+r))}),t.qZA(),t.TgZ(25,"td",21)(26,"app-date-picker",22),t.NdJ("month",function(a){const r=t.CHM(e).index,l=t.oxw();return t.KtG(l.convertInputDay(a,"NgayHoaDon",r))}),t.qZA()(),t.TgZ(27,"td",23),t.YNc(28,Aa,2,0,"mat-icon",24),t.qZA()()}if(2&o){const e=n.$implicit,i=n.index,a=t.oxw();t.xp6(2),t.Oqu(a.pageIndex*a.pageSize+i+1),t.xp6(2),t.Oqu(e.TenBangKe),t.xp6(2),t.MGl("routerLink","/dien-luc/dmt-input/",e._id,""),t.xp6(1),t.Oqu(e.MaKhachHang),t.xp6(2),t.Oqu(e.KhachHang),t.xp6(2),t.Oqu(e.Thang),t.xp6(2),t.Oqu(e.Nam),t.xp6(2),t.Oqu(t.lcZ(16,15,e.TruocThue)),t.xp6(3),t.hij("",t.lcZ(19,17,e.TiLeThue),"%"),t.xp6(3),t.Oqu(t.lcZ(22,19,e.Thue)),t.xp6(2),t.Q6J("innerText",e.KyHieuHoaDon||""),t.xp6(1),t.Q6J("innerText",e.SoHoaDon||""),t.xp6(2),t.Q6J("startDay",a.convertDate(e.NgayHoaDon))("format","DD/MM/YYYY"),t.xp6(2),t.Q6J("ngIf",!e.KyKeKhai||a.checkPer(2))}}const Ca=function(){return[20,50,100]};function va(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"mat-paginator",26),t.NdJ("page",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.pageChange(a))})("page",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.changePage(a))}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("length",e.items.length)("pageSize",e.pageSize)("pageSizeOptions",t.DdM(4,Ca))("showFirstLastButtons",!0)}}const xa={parse:{dateInput:"DD/MM/YYYY"},display:{dateInput:"DD/MM/YYYY",monthYearLabel:"YYYY",dateA11yLabel:"DD/MM/YYYY",monthYearA11yLabel:"YYYY"}};let Za=(()=>{class o{constructor(e,i,a,s,r,l,u,h){this.plus=e,this.fb=i,this.nlmtSv=a,this.loadSV=s,this.authSV=r,this.formSV=l,this.idbSV=u,this.httpSV=h,this.title="K\xea khai thu\u1ebf",this.global=!0,this.dbName="dien-luc",this.api="dmt-input",this.db=null,this.items=[],this.selectedItem=null,this.filter=[],this.pageSize=20,this.pageIndex=0,this.startDay=new Date,this.isFS=!1,this.searchText="",this.main=this.nlmtSv.inputForm,this.searchForm=this.fb.group({input:["",[c.kI.required,c.kI.minLength(4)]]}),this.taxForm=this.fb.group({KyHieuHoaDon:["",[c.kI.required,c.kI.minLength(1)]],SoHoaDon:["",[c.kI.required,c.kI.minLength(1)]],NgayHoaDon:["",[c.kI.required,this.formSV.pattern_dmy()]],KyKeKhai:["",[c.kI.required,this.formSV.pattern_my()]]})}ngOnInit(){this.plus.setTiTle(this.title),this.authSV.user.subscribe(e=>{if(e){this.user=e;let i=e.unit+"-"+this.api;this.idbSV.IDB_InitDB(this.dbName).subscribe(a=>{this.db=a,this.httpSV.updateLocalDB(a,this.api,i).subscribe(s=>{this.loadSV.loaded("updateLocalDB"+i),console.log(i,s)})})}}),this.idbSV.IDB_InitDB(this.dbName).subscribe(e=>{this.db=e,console.log(e),this.getIDB()}),this.search(),localStorage.removeItem("tax")}ngOnDestroy(){console.log("Destroy",this.api),localStorage.removeItem("tax"),this.nlmtSv.detroy()}xuatDSChuaKeKhai(){let e=localStorage.getItem("tax");if(null==e||null==e)return this.plus.alertWarning("Vui l\xf2ng ch\u1ecdn k\u1ef3 k\xea khai");b()(e,"MM/YYYY").format("M");let a=b()(e,"MM/YYYY").format("YYYY"),s=[],r=[];this.idbSV.IDB_DB_GetAllByIndexKey(this.db,this.api,"Nam","=",+a).then(l=>{for(let u=0;u<l.length;u++){const h=l[u];null==h.NgayHoaDon&&h.Thue>0&&h.TrangThaiHoSo>0?s.push({...h}):null==h.NgayHoaDon&&h.Thue>0&&h.TrangThaiHoSo<1&&r.push({...h})}this.nlmtSv.exportTax(s,new Date,"DaCoHoaDon"),this.nlmtSv.exportTax(r,new Date,"ChuaCoHoaDon")})}checkPer(e){return this.authSV.checkPer(this.api,e)}getUser(e){this.nlmtSv.user=e,this.user=e}getSetup(e){this.nlmtSv.setup=e}getIDB(){this.idbSV.IDB_DB_GetAllByIndexKey(this.db,this.api,"TrangThaiHoSo",">",1,5,"TenBangKe").then(e=>{for(let i=0;i<e.length;i++){const a=e[i];1==a.CoHoaDon&&a.Thue>0&&null==a.SoHoaDon&&this.items.push(a)}console.log(this.items)})}save(e,i=null){let a=localStorage.getItem("tax");if(null==a||null==a)return this.plus.alertWarning("Vui l\xf2ng ch\u1ecdn k\u1ef3 k\xea khai");"Enter"===i?.key&&i.preventDefault();let s=this.items[e];console.log(e,s),s.KyKeKhai=localStorage.getItem("tax"),this.taxForm.patchValue(s);let r=this.formSV.getErrValidateForm(this.taxForm);this.taxForm.valid?this.nlmtSv.updateTax(s).subscribe(l=>{this.plus.alertToasrt(l)}):alert(r)}changeLabel(e,i){this.items[i].KyHieuHoaDon=e.target.innerText}changeSeri(e,i){this.items[i].SoHoaDon=e.target.innerText}search(){this.searchForm.valueChanges.pipe((0,le.b)(500)).subscribe(e=>{!this.searchForm.invalid&&this.searchForm.valid&&this.idbSV.IDB_DB_Search(this.db,this.api,e.input,50).subscribe(a=>{console.log(a),this.items=a})})}getByKyKeKhai(){let e=localStorage.getItem("tax");if(null==e||null==e)return this.plus.alertWarning("Vui l\xf2ng ch\u1ecdn k\u1ef3 k\xea khai");this.idbSV.IDB_DB_GetAllByIndexKey(this.db,this.api,"KyKeKhai","=",e).then(i=>{this.items=i})}getMonth(e){localStorage.removeItem("tax"),console.log(e);let i=localStorage.getItem("tax");(null==i||"Invalid date"==i||null==e)&&localStorage.removeItem("tax"),localStorage.setItem("tax",e)}convertInputDay(e,i,a){const s=b()(e,"DD-MM-YYYY").format("DD/MM/YYYY");console.log(e,this.items[a][i],s),this.items[a][i]=s}convertDate(e){return b()(e,"DD/MM/YYYY").toDate()}changeDate(e,i){this.items[i].NgayHoaDon=b()(e.value).format("DD/MM/YYYY")}reload(){return this.plus.reload(this.dbName+"/dmt-tax")}full(){this.plus.FullScreenOpen("tax-input"),this.isFS=!0}exitFullScreen(){this.plus.FullScreenClose(),this.isFS=!1}export(){let e=localStorage.getItem("tax");this.idbSV.IDB_DB_GetAllByIndexKey(this.db,this.api,"KyKeKhai","=",e).then(i=>{this.nlmtSv.exportTax(i,this.startDay)})}trackByFn(e,i){return i}changePage(e){this.filter=this.items.slice(e.pageIndex*e.pageSize,(e.pageIndex+1)*e.pageSize)}pageChange(e){this.pageIndex=e.pageIndex}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(z.T),t.Y36(c.qu),t.Y36(lt.j),t.Y36(j.b),t.Y36(B.c1),t.Y36(sn.o),t.Y36(ut.Y),t.Y36(ct.O))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-nlmt-tax"]],features:[t._Bn([{provide:Ft._A,useClass:Ea.t7,deps:[Ft.Ad]},{provide:Ft.sG,useValue:xa}])],decls:52,vars:5,consts:[[3,"nlmtSetup","user"],[1,"container-fluid"],[1,"row"],[1,"col-5"],[3,"label","month"],[1,"col-2"],["mat-raised-button","","color","primary","matTooltip","Xu\u1ea5t b\xe1o c\xe1o",3,"click"],["mat-raised-button","","color","accent","matTooltip","Xem danh s\xe1ch \u0111\xe3 k\xea khai",3,"click"],["mat-raised-button","","color","primary","matTooltip","Xem danh s\xe1ch ch\u01b0a k\xea khai",3,"click"],["appearance","outline",3,"formGroup"],["matInput","","id","search-api","formControlName","input","placeholder","T\xecm ki\u1ebfm (F2)"],["id","tax-input",1,"table","table-hover"],[1,"thead-inverse"],["color","primary",3,"click"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"length","pageSize","pageSizeOptions","showFirstLastButtons","page",4,"ngIf"],[1,"align-middle"],[3,"routerLink"],[1,"align-middle","fr"],["contenteditable","true",1,"align-middle","editTable",3,"innerText","blur","keydown.tab"],["contentEditable","true",1,"align-middle","editTable",3,"innerText","blur","keydown.tab"],[1,"align-text-top","editTable"],[3,"startDay","format","month"],[1,"align-middle","text-center"],["color","warn",3,"click",4,"ngIf"],["color","warn",3,"click"],[3,"length","pageSize","pageSizeOptions","showFirstLastButtons","page"]],template:function(e,i){1&e&&(t.TgZ(0,"app-nlmt-share",0),t.NdJ("nlmtSetup",function(s){return i.getSetup(s)})("user",function(s){return i.getUser(s)}),t.qZA(),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"app-month-year",4),t.NdJ("month",function(s){return i.getMonth(s)}),t.qZA()(),t.TgZ(5,"div",5)(6,"button",6),t.NdJ("click",function(){return i.export()}),t.TgZ(7,"mat-icon"),t._uU(8,"file_download"),t.qZA()(),t.TgZ(9,"button",7),t.NdJ("click",function(){return i.getByKyKeKhai()}),t.TgZ(10,"mat-icon"),t._uU(11,"preview"),t.qZA()(),t.TgZ(12,"button",8),t.NdJ("click",function(){return i.xuatDSChuaKeKhai()}),t.TgZ(13,"mat-icon"),t._uU(14,"report_problem"),t.qZA()()(),t.TgZ(15,"div",3)(16,"mat-form-field",9),t._UZ(17,"input",10),t.qZA()()(),t.TgZ(18,"div",2)(19,"table",11)(20,"thead",12)(21,"tr")(22,"th"),t._uU(23,"TT"),t.qZA(),t.TgZ(24,"th"),t._uU(25,"T\xean b\u1ea3ng k\xea"),t.qZA(),t.TgZ(26,"th"),t._uU(27,"M\xe3 kh\xe1ch h\xe0ng"),t.qZA(),t.TgZ(28,"th"),t._uU(29,"Kh\xe1ch h\xe0ng"),t.qZA(),t.TgZ(30,"th"),t._uU(31,"Th\xe1ng"),t.qZA(),t.TgZ(32,"th"),t._uU(33,"N\u0103m"),t.qZA(),t.TgZ(34,"th"),t._uU(35,"Tr\u01b0\u1edbc thu\u1ebf"),t.qZA(),t.TgZ(36,"th"),t._uU(37,"T\u1ec9 l\u1ec7 Thu\u1ebf"),t.qZA(),t.TgZ(38,"th"),t._uU(39,"Thu\u1ebf"),t.qZA(),t.TgZ(40,"th"),t._uU(41,"K\xfd hi\u1ec7u h\xf3a \u0111\u01a1n"),t.qZA(),t.TgZ(42,"th"),t._uU(43,"S\u1ed1 h\xf3a \u0111\u01a1n"),t.qZA(),t.TgZ(44,"th"),t._uU(45,"Ng\xe0y h\xf3a \u0111\u01a1n"),t.qZA(),t.TgZ(46,"th")(47,"mat-icon",13),t.NdJ("click",function(){return i.reload()}),t._uU(48,"cached"),t.qZA()()()(),t.TgZ(49,"tbody"),t.YNc(50,Na,29,21,"tr",14),t.qZA()(),t.YNc(51,va,1,5,"mat-paginator",15),t.qZA()()),2&e&&(t.xp6(4),t.Q6J("label","Ch\u1ecdn k\u1ef3 k\xea khai thu\u1ebf"),t.xp6(12),t.Q6J("formGroup",i.searchForm),t.xp6(34),t.Q6J("ngForOf",i.filter.length>0?i.filter:i.items.slice(0,i.pageSize))("ngForTrackBy",i.trackByFn),t.xp6(1),t.Q6J("ngIf",i.items.length+i.filter.length>0))},dependencies:[A.sg,A.O5,Tt.rH,c.Fj,c.JJ,c.JL,c.sg,c.u,Y.lW,X.Hw,ht.Nt,D.KE,he.gM,rn.NW,pe.k,ii.L,It,A.JJ],styles:[".editTable[_ngcontent-%COMP%]{border:1px solid;border-radius:10px;border-color:#96d4d4;font-weight:700;color:#00f}"],data:{animation:[ot.Ym]}}),o})();var ai=_(84385);function ya(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",38),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.save())}),t.TgZ(1,"mat-icon"),t._uU(2,"save"),t.qZA()()}2&o&&t.Q6J("@slideIn",void 0)}function Ia(o,n){if(1&o&&(t.TgZ(0,"mat-option",39),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e.GiaTri),t.xp6(1),t.hij("",e.NoiDung," ")}}function Da(o,n){if(1&o&&(t.TgZ(0,"ul")(1,"li"),t._uU(2),t.qZA()()),2&o){const e=n.$implicit;t.xp6(2),t.Oqu(e)}}function Sa(o,n){if(1&o&&(t.TgZ(0,"div",40)(1,"pre"),t._uU(2),t.ALo(3,"json"),t.qZA(),t.TgZ(4,"pre"),t._uU(5),t.ALo(6,"json"),t.qZA()()),2&o){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,2,e.main.value)),t.xp6(3),t.Oqu(t.lcZ(6,4,e.user))}}let ka=(()=>{class o{constructor(e,i,a,s,r,l,u,h){this.plus=e,this.fb=i,this.route=a,this.nlmtSV=s,this.authSV=r,this.idbSV=l,this.httpSV=u,this.loadSV=h,this.main=this.fb.group({_id:["",[]],KyThanhToan:["",[c.kI.required]],Email:["",[c.kI.email]],MaKhachHang:["",[c.kI.required]],KhachHang:["",[c.kI.required]],DiaChi:["",[c.kI.required]],MaGCS:[""],ChuTaiKhoan:[""],SoTaiKhoan:[""],NganHang:[""],Nam:[0,[c.kI.required,c.kI.pattern(this.plus.regex_integer())]],Thang:[0,[c.kI.required,c.kI.pattern(this.plus.regex_integer())]],SanLuong:[0,[c.kI.required,c.kI.pattern(this.plus.regex_integer())]],DonGia:[0,[c.kI.required,c.kI.pattern(this.plus.regex_integer())]],TruocThue:[0,[c.kI.required,c.kI.pattern(this.plus.regex_integer())]],Thue:[0,[c.kI.required,c.kI.pattern(this.plus.regex_integer())]],TongTien:[0,[c.kI.required,c.kI.pattern(this.plus.regex_integer())]],KyHieuHoaDon:["",[]],SoHoaDon:["",[]],NgayMuaHang:["",[c.kI.pattern(this.plus.regex_dmy())]],NgayHoaDon:["",[c.kI.pattern(this.plus.regex_dmy())]],KyKeKhai:["",[]],TiLeThue:[0,[c.kI.pattern(this.plus.regex_integer())]],TrangThaiThanhToan:[0,[c.kI.required,c.kI.pattern(this.plus.regex_integer())]],TrangThaiHoSo:[0,[c.kI.required]],DaGuiMail:[0,[c.kI.pattern(this.plus.regex_integer())]],TenBangKe:["",[]],MatHang:["",[]],SoHopDong:["",[]],NgayHopDong:["",[c.kI.pattern(this.plus.regex_dmy())]]}),this.title="L\u1eadp b\u1ea3ng k\xea",this.global=!0,this.dbName="dien-luc",this.api="dmt-input",this.db=null,this.userId=this.plus.userId,this.items=[],this.filter=[],this.chart=[],this.errors=null,this.startDay=null,this.level=0,this.levelTax=0}ngOnInit(){this.plus.setTiTle(this.title),this.idbSV.IDB_InitDB(this.dbName).subscribe(e=>{this.db=e})}getUser(e){const i=this.route.snapshot.paramMap.get("id");this.user=e,this.level=e.opt["dmt-input"],this.levelTax=e.opt["dmt-tax"],this.nlmtSV.user=e,this.httpSV.get(this.api+"/"+i).subscribe(a=>{let s=a.data;console.log("getById ",s),this.main.patchValue(s),this.startDay=b()(s.KyKeKhai,"MM/YYYY").toDate(),this.item=s,this.loadSV.loaded()})}ngOnDestroy(){console.log("Destroy",this.api),this.plus.subs.unsubscribe(),this.authSV.unsubcribe()}save(){const e=this.main.value;let i=this.plus.getErrValidateForm(this.main);if(this.main.invalid)return alert(i);null!=e._id&&this.onUpdateInput(e)}onUpdateInput(e){e.dateModify=Date.now(),this.httpSV.put(this.api,e,"").subscribe(i=>{this.plus.alertSuccess(i.msg),console.log(i)})}chooseOpt(e,i,a,s=!1){this.main.controls[i].setValue(e[a]),s&&this.main.controls[i+"ID"].setValue(e._id)}getMonth(e){this.main.controls.KyKeKhai.setValue(e)}convertInputDay(e,i){const a=b()(e,"DD/MM/YYYY").toDate();this.main.controls[i].setValue(a)}closeModal(){this.plus.reload("dien-luc/dmt-input")}search(e){this.filter=e}find(e){this.items=e}checkPer(e,i=1){return this.authSV.checkPer(e,i)}reload(){return this.plus.reload(this.dbName+"/"+this.api)}reset(){this.filter=[],this.main.reset({})}changePage(e){this.filter=this.items.slice(e.pageIndex*e.pageSize,(e.pageIndex+1)*e.pageSize)}ondragover(){document.getElementById("dropZone").setAttribute("drop-active","true")}trackByFn(e,i){return i}resetDB(){}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(z.T),t.Y36(c.qu),t.Y36(Tt.gz),t.Y36(lt.j),t.Y36(B.c1),t.Y36(ut.Y),t.Y36(ct.O),t.Y36(j.b))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-nlmt-input-detail"]],decls:135,vars:27,consts:[[1,"container"],[3,"user"],["id","add-btn","mat-raised-button","","color","warn",3,"click",4,"ngIf"],["id","back-btn","mat-raised-button","","color","primary",3,"click"],[3,"formGroup"],[1,"row"],["type","text","autocomplete","off","matInput","","formControlName","KhachHang",3,"readonly"],["matSuffix",""],["type","text","autocomplete","off","matInput","","formControlName","DiaChi",3,"readonly"],["type","text","autocomplete","off","matInput","","formControlName","TenBangKe",3,"readonly"],["type","text","autocomplete","off","matInput","","formControlName","MatHang"],[1,"col-6"],["hidden","","formControlName","_id"],["type","text","autocomplete","off","matInput","","formControlName","SoHopDong"],["type","text","autocomplete","off","matInput","","formControlName","NgayHopDong"],["type","email","autocomplete","off","matInput","","formControlName","Email"],["type","text","autocomplete","off","matInput","","formControlName","MaKhachHang",3,"readonly"],["type","text","autocomplete","off","matInput","","formControlName","MaGCS",3,"readonly"],["type","text","autocomplete","off","matInput","","formControlName","ChuTaiKhoan"],["type","text","autocomplete","off","matInput","","formControlName","SoTaiKhoan"],["type","text","autocomplete","off","matInput","","formControlName","NganHang"],["type","number","autocomplete","off","matInput","","formControlName","Nam",3,"readonly"],["type","number","autocomplete","off","matInput","","formControlName","Thang",3,"readonly"],["type","text","autocomplete","off","matInput","","formControlName","NgayMuaHang",3,"readonly"],["numberFormat","","type","text","autocomplete","off","matInput","","formControlName","SanLuong",3,"readonly"],["type","text","autocomplete","off","matInput","","formControlName","DonGia",3,"readonly"],["type","text","autocomplete","off","matInput","","formControlName","TruocThue",3,"readonly"],["type","text","autocomplete","off","matInput","","formControlName","Thue",3,"readonly"],["type","text","autocomplete","off","matInput","","formControlName","TongTien",3,"readonly"],["type","text","autocomplete","off","matInput","","formControlName","KyHieuHoaDon",3,"readonly"],["type","text","autocomplete","off","matInput","","formControlName","SoHoaDon",3,"readonly"],[3,"startDay","type","label","month"],["hidden",""],["type","text","autocomplete","off","matInput","","formControlName","TiLeThue",3,"readonly"],["required","","formControlName","TrangThaiHoSo"],[3,"value",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["class","log",4,"ngIf"],["id","add-btn","mat-raised-button","","color","warn",3,"click"],[3,"value"],[1,"log"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"app-nlmt-share",1),t.NdJ("user",function(s){return i.getUser(s)}),t.qZA(),t.YNc(2,ya,3,1,"button",2),t.TgZ(3,"button",3),t.NdJ("click",function(){return i.closeModal()}),t.TgZ(4,"mat-icon"),t._uU(5,"undo"),t.qZA()(),t.TgZ(6,"form",4)(7,"div",5)(8,"mat-form-field")(9,"mat-label"),t._uU(10,"Kh\xe1ch h\xe0ng"),t.qZA(),t._UZ(11,"input",6)(12,"span",7),t.qZA(),t.TgZ(13,"mat-form-field")(14,"mat-label"),t._uU(15,"\u0110\u1ecba ch\u1ec9"),t.qZA(),t._UZ(16,"input",8)(17,"span",7),t.qZA(),t.TgZ(18,"mat-form-field")(19,"mat-label"),t._uU(20,"T\xean b\u1ea3ng k\xea"),t.qZA(),t._UZ(21,"input",9)(22,"span",7),t.qZA(),t.TgZ(23,"mat-form-field")(24,"mat-label"),t._uU(25,"M\u1eb7t h\xe0ng"),t.qZA(),t._UZ(26,"input",10)(27,"span",7),t.qZA(),t.TgZ(28,"div",11),t._UZ(29,"input",12),t.TgZ(30,"mat-form-field")(31,"mat-label"),t._uU(32,"S\u1ed1 H\u1ee3p \u0110\u1ed3ng "),t.qZA(),t._UZ(33,"input",13)(34,"span",7),t.qZA(),t.TgZ(35,"mat-form-field")(36,"mat-label"),t._uU(37,"Ng\xe0y H\u1ee3p \u0110\u1ed3ng "),t.qZA(),t._UZ(38,"input",14)(39,"span",7),t.qZA(),t.TgZ(40,"mat-form-field")(41,"mat-label"),t._uU(42,"Email"),t.qZA(),t._UZ(43,"input",15)(44,"span",7),t.qZA(),t.TgZ(45,"mat-form-field")(46,"mat-label"),t._uU(47,"M\xe3 kh\xe1ch h\xe0ng"),t.qZA(),t._UZ(48,"input",16)(49,"span",7),t.qZA(),t.TgZ(50,"mat-form-field")(51,"mat-label"),t._uU(52,"M\xe3 G C S"),t.qZA(),t._UZ(53,"input",17)(54,"span",7),t.qZA(),t.TgZ(55,"mat-form-field")(56,"mat-label"),t._uU(57,"Ch\u1ee7 t\xe0i kho\u1ea3n"),t.qZA(),t._UZ(58,"input",18)(59,"span",7),t.qZA(),t.TgZ(60,"mat-form-field")(61,"mat-label"),t._uU(62,"S\u1ed1 t\xe0i kho\u1ea3n"),t.qZA(),t._UZ(63,"input",19)(64,"span",7),t.qZA(),t.TgZ(65,"mat-form-field")(66,"mat-label"),t._uU(67,"Ng\xe2n h\xe0ng"),t.qZA(),t._UZ(68,"input",20)(69,"span",7),t.qZA(),t.TgZ(70,"mat-form-field")(71,"mat-label"),t._uU(72,"N\u0103m"),t.qZA(),t._UZ(73,"input",21)(74,"span",7),t.qZA(),t.TgZ(75,"mat-form-field")(76,"mat-label"),t._uU(77,"Th\xe1ng"),t.qZA(),t._UZ(78,"input",22)(79,"span",7),t.qZA(),t.TgZ(80,"mat-form-field")(81,"mat-label"),t._uU(82,"Ng\xe0y mua h\xe0ng"),t.qZA(),t._UZ(83,"input",23)(84,"span",7),t.qZA()(),t.TgZ(85,"div",11)(86,"mat-form-field")(87,"mat-label"),t._uU(88,"S\u1ea3n l\u01b0\u1ee3ng"),t.qZA(),t._UZ(89,"input",24)(90,"span",7),t.qZA(),t.TgZ(91,"mat-form-field")(92,"mat-label"),t._uU(93,"\u0110\u01a1n gi\xe1"),t.qZA(),t._UZ(94,"input",25)(95,"span",7),t.qZA(),t.TgZ(96,"mat-form-field")(97,"mat-label"),t._uU(98,"Tr\u01b0\u1edbc thu\u1ebf"),t.qZA(),t._UZ(99,"input",26)(100,"span",7),t.qZA(),t.TgZ(101,"mat-form-field")(102,"mat-label"),t._uU(103,"Thu\u1ebf"),t.qZA(),t._UZ(104,"input",27)(105,"span",7),t.qZA(),t.TgZ(106,"mat-form-field")(107,"mat-label"),t._uU(108,"T\u1ed5ng ti\u1ec1n"),t.qZA(),t._UZ(109,"input",28)(110,"span",7),t.qZA(),t.TgZ(111,"mat-form-field")(112,"mat-label"),t._uU(113,"K\xfd hi\u1ec7u h\xf3a \u0111\u01a1n"),t.qZA(),t._UZ(114,"input",29)(115,"span",7),t.qZA(),t.TgZ(116,"mat-form-field")(117,"mat-label"),t._uU(118,"S\u1ed1 h\xf3a \u0111\u01a1n"),t.qZA(),t._UZ(119,"input",30)(120,"span",7),t.qZA(),t.TgZ(121,"app-month-year",31),t.NdJ("month",function(s){return i.getMonth(s)}),t.qZA(),t.TgZ(122,"mat-form-field",32)(123,"mat-label"),t._uU(124,"Thu\u1ebf su\u1ea5t"),t.qZA(),t._UZ(125,"input",33)(126,"span",7),t.qZA(),t.TgZ(127,"mat-form-field")(128,"mat-label"),t._uU(129,"Tr\u1ea1ng th\xe1i h\u1ed3 s\u01a1"),t.qZA(),t.TgZ(130,"mat-select",34),t.YNc(131,Ia,2,2,"mat-option",35),t.ALo(132,"catalog"),t.qZA()()()()(),t.YNc(133,Da,3,1,"ul",36),t.qZA(),t.YNc(134,Sa,7,6,"div",37)),2&e&&(t.xp6(2),t.Q6J("ngIf",i.level>1),t.xp6(1),t.Q6J("@slideIn",void 0),t.xp6(3),t.Q6J("formGroup",i.main),t.xp6(5),t.Q6J("readonly",i.level<2),t.xp6(5),t.Q6J("readonly",i.level<2),t.xp6(5),t.Q6J("readonly",i.level<2),t.xp6(27),t.Q6J("readonly",i.level<2),t.xp6(5),t.Q6J("readonly",i.level<2),t.xp6(20),t.Q6J("readonly",i.level<2),t.xp6(5),t.Q6J("readonly",i.level<2),t.xp6(5),t.Q6J("readonly",i.level<2),t.xp6(6),t.Q6J("readonly",i.level<2),t.xp6(5),t.Q6J("readonly",i.level<2),t.xp6(5),t.Q6J("readonly",i.level<2),t.xp6(5),t.Q6J("readonly",i.level<2),t.xp6(5),t.Q6J("readonly",i.level<2),t.xp6(5),t.Q6J("readonly",i.levelTax<2),t.xp6(5),t.Q6J("readonly",i.levelTax<2),t.xp6(2),t.Q6J("startDay",i.startDay)("type","fill")("label","K\u1ef3 k\xea khai thu\u1ebf "),t.xp6(4),t.Q6J("readonly",i.level<2),t.xp6(6),t.Q6J("ngForOf",t.lcZ(132,25,"DMTTrangThaiHoSo")),t.xp6(2),t.Q6J("ngForOf",null==i.item?null:i.item.NhatKy),t.xp6(1),t.Q6J("ngIf",i.checkPer("dev")))},dependencies:[A.sg,A.O5,c._Y,c.Fj,c.wV,c.JJ,c.JL,c.Q7,c.sg,c.u,Y.lW,X.Hw,ht.Nt,D.KE,D.hX,D.R9,Ft.ey,ai.gD,pe.k,It,A.Ts,G.pW],data:{animation:[ot.Ym]}}),o})();var qa=_(52075),si=_(38376),ri=_(1768),Ma=_(12012),me=_(5383),ye=_(25862);function wa(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",28),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.approveList())}),t.TgZ(1,"mat-icon"),t._uU(2,"done_all"),t.qZA()()}}function Oa(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",29),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.unApproveList())}),t.TgZ(1,"mat-icon"),t._uU(2,"done_all"),t.qZA()()}}function Ka(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",30),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.traHoSo())}),t.TgZ(1,"mat-icon"),t._uU(2,"replay_circle_filled"),t.qZA()()}}function Ua(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",31),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.thuHoiBangKe())}),t.TgZ(1,"mat-icon"),t._uU(2,"replay_circle_filled"),t.qZA()()}}function La(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",32),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.paidList())}),t.TgZ(1,"mat-icon"),t._uU(2,"currency_exchange"),t.qZA()()}}function Ha(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",33),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.save())}),t.TgZ(1,"mat-icon"),t._uU(2,"save"),t.qZA()()}}function Ba(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",34),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.sendMailBank())}),t.TgZ(1,"mat-icon"),t._uU(2,"mail"),t.qZA()()}}function Ya(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",12),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.doiChieuCMIS())}),t._uU(1,"\u0110\u1ed1i chi\u1ebfu CMIS"),t.qZA()}}function Fa(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",12),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.saveTaxs())}),t._uU(1,"L\u01b0u k\xea khai thu\u1ebf"),t.qZA()}}function Ja(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"app-month-year",35),t.NdJ("month",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.getMonth(a,"KyThanhToan"))}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("startDay",e.startDay)("label","C\u1eadp nh\u1eadt th\xe1ng thanh to\xe1n")}}function Va(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"app-date-picker",16),t.NdJ("month",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.getDay(a))}),t.qZA()}2&o&&t.Q6J("label","Ch\u1ecdn ng\xe0y thanh to\xe1n")}function $a(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"mat-icon",36),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.searchText="")}),t._uU(1,"close"),t.qZA()}}function Ga(o,n){1&o&&(t.TgZ(0,"th"),t._uU(1,"K\xfd hi\u1ec7u h\xf3a \u0111\u01a1n"),t.qZA())}function Pa(o,n){1&o&&(t.TgZ(0,"th"),t._uU(1,"S\u1ed1 h\xf3a \u0111\u01a1n"),t.qZA())}function Qa(o,n){1&o&&(t.TgZ(0,"th"),t._uU(1,"Ng\xe0y h\xf3a \u0111\u01a1n"),t.qZA())}function Ra(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"th")(1,"mat-icon",37),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.QTFull())}),t._uU(2,"check_circle "),t.qZA()()}}function Wa(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"td",39)(1,"div",45)(2,"mat-form-field")(3,"mat-label"),t._uU(4),t.qZA(),t.TgZ(5,"input",46),t.NdJ("blur",function(){t.CHM(e);const a=t.oxw().index,s=t.oxw();return t.KtG(s.onBlurTax("KyHieuHoaDon",a))}),t.qZA()()()()}if(2&o){const e=t.oxw().$implicit;t.xp6(4),t.Oqu(e.KyHieuHoaDon)}}function ja(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"td",39)(1,"div",45)(2,"mat-form-field")(3,"mat-label"),t._uU(4),t.qZA(),t.TgZ(5,"input",47),t.NdJ("blur",function(){t.CHM(e);const a=t.oxw().index,s=t.oxw();return t.KtG(s.onBlurTax("SoHoaDon",a))}),t.qZA()()()()}if(2&o){const e=t.oxw().$implicit;t.xp6(4),t.Oqu(e.SoHoaDon)}}function za(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"td",39)(1,"div",45)(2,"app-date-picker",48),t.NdJ("month",function(a){t.CHM(e);const s=t.oxw().index,r=t.oxw();return t.KtG(r.getMonth2(a,s))}),t.qZA()()()}if(2&o){const e=t.oxw().$implicit,i=t.oxw();t.xp6(2),t.Q6J("startDay",i.convertDate(e.NgayHoaDon))("openOnFocus",!0)("label","Ng\xe0y h\xf3a \u0111\u01a1n")}}function Xa(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"mat-icon",37),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit,s=t.oxw();return t.KtG(s.onDelete(a))}),t._uU(1,"delete"),t.qZA()}}function ts(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"mat-icon",25),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(),s=a.$implicit,r=a.index,l=t.oxw();return t.KtG(l.QTDMT(s,r))}),t._uU(1,"check_circle"),t.qZA()}}function es(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"mat-icon",37),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(),s=a.$implicit,r=a.index,l=t.oxw();return t.KtG(l.HuyQTDMT(s,r))}),t._uU(1,"block_flipped"),t.qZA()}}function ns(o,n){if(1&o&&(t.TgZ(0,"tr",38)(1,"td",39)(2,"a",40),t._uU(3),t.qZA()(),t.TgZ(4,"td",39),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td",41),t._uU(9),t.ALo(10,"number"),t.qZA(),t.TgZ(11,"td",41),t._uU(12),t.ALo(13,"number"),t.qZA(),t.YNc(14,Wa,6,1,"td",42),t.YNc(15,ja,6,1,"td",42),t.YNc(16,za,3,3,"td",42),t.TgZ(17,"td"),t.YNc(18,Xa,2,0,"mat-icon",43),t.qZA(),t.TgZ(19,"td"),t.YNc(20,ts,2,0,"mat-icon",44),t.YNc(21,es,2,0,"mat-icon",43),t.qZA()()),2&o){const e=n.$implicit,i=t.oxw();t.Q6J("formGroup",i.taxForm),t.xp6(2),t.MGl("routerLink","/dien-luc/dmt-input/",e._id,""),t.xp6(1),t.Oqu(e.MaKhachHang),t.xp6(2),t.Oqu(e.KhachHang),t.xp6(2),t.Oqu(e.KyThanhToan),t.xp6(2),t.Oqu(t.lcZ(10,13,e.SanLuong)),t.xp6(3),t.Oqu(t.lcZ(13,15,e.TongTien)),t.xp6(2),t.Q6J("Device",1),t.xp6(1),t.Q6J("Device",1),t.xp6(1),t.Q6J("Device",1),t.xp6(2),t.Q6J("ngIf",i.levelpay>6&&e.TrangThai<2),t.xp6(2),t.Q6J("ngIf",e.TrangThaiThanhToan<5&&i.checkPer("cmis4-quyet-toan-dmt")),t.xp6(1),t.Q6J("ngIf",8!==e.TrangThaiThanhToan&&i.checkPer("cmis4-quyet-toan-dmt"))}}let is=(()=>{class o{constructor(e,i,a,s,r,l,u,h,p,f,d,g){this.plus=e,this.fb=i,this.route=a,this.nlmtSv=s,this.authSV=r,this.storageSV=l,this.mailSV=u,this.httpSV=h,this.loadSV=p,this.cmis4SV=f,this.idbSV=d,this.excelSV=g,this.main=this.fb.group({Email:[,[c.kI.required]],MaKhachHang:[,[c.kI.required]],KhachHang:[,[c.kI.required]],DiaChi:[,[c.kI.required]],MaGCS:[,[c.kI.required]],ChuTaiKhoan:[,[c.kI.required]],SoTaiKhoan:[,[c.kI.required]],NganHang:[,[c.kI.required]],Nam:[,[c.kI.required,c.kI.pattern("^[0-9]*$")]],Thang:[,[c.kI.required,c.kI.pattern("^[0-9]*$")]],SanLuong:[,[c.kI.required,c.kI.pattern("^[0-9]*$")]],DonGia:[,[c.kI.required,c.kI.pattern("^[0-9]*$")]],TruocThue:[,[c.kI.required,c.kI.pattern("^[0-9]*$")]],Thue:[,[c.kI.required,c.kI.pattern("^[0-9]*$")]],TongTien:[,[c.kI.required,c.kI.pattern("^[0-9]*$")]],KyHieuHoaDon:[,[c.kI.required,c.kI.minLength(3)]],SoHoaDon:[,[c.kI.required,c.kI.minLength(3)]],NgayHoaDon:[,[c.kI.required]],TrangThai:[,],DaGuiMail:[0]}),this.taxForm=this.fb.group({_id:["",[c.kI.required]],KyHieuHoaDon:["",[c.kI.required,c.kI.minLength(4)]],SoHoaDon:["",[c.kI.required,c.kI.minLength(1)]],NgayHoaDon:["",[c.kI.required,c.kI.minLength(10)]]}),this.title="Chi ti\u1ebft b\u1ea3ng k\xea",this.global=!0,this.dbName="dien-luc",this.api="dmt-pay",this.api_input="dmt-input",this.db=null,this.selectedItem=null,this.filter=[],this.chart=[],this.errors=[],this.searchText="",this.startDay=new Date,this.link="",this.levelpay=0,this.levelinput=0,this.levelaccept=0,this.userCmis4=JSON.parse(localStorage.getItem("USERCMIS"))||null,this.ngayQT=null,this.inputItem=null,this.kyKeKhai="",this.danhSach=[]}ngOnInit(){this.plus.setTiTle(this.title),this.authSV._getOpt(B.HB.USER).then(e=>{this.user=e,this.levelpay=e.opt[this.api],this.levelinput=e.opt["dmt-input"],this.levelaccept=e.opt["dmt-accept"],this.nlmtSv.user=e;let i=e.unit+"-dmt-input";this.idbSV.IDB_InitDB(this.dbName).subscribe(a=>{this.db=a,this.nlmtSv.db=a,this.getIDB(),this.httpSV.updateLocalDB(a,this.api_input,i).subscribe(s=>{this.loadSV.loaded("updateLocalDB"+i),console.log(i,s)})})})}onBlurTax(e,i){this.danhSach[i][e]=this.taxForm.value[e],console.log(this.danhSach)}saveTaxs(){this.loadSV.load("saveTax"),this.danhSach.forEach(e=>{delete e.__v,e.dateModify=Date.now()}),this.excelSV.export(this.danhSach,"KeKhaiThue"+this.items.TenBangKe),this.nlmtSv.updateTaxs(this.danhSach).subscribe(e=>{this.loadSV.loaded("saveTax"),this.plus.clickBtn("closeModaltax"),this.plus.alertSuccess()})}saveTax(){this.loadSV.load("saveTax");let e=this.taxForm.value;console.log(e),this.nlmtSv.updateTax(e).subscribe(i=>{console.log(i),this.idbSV.IDB_DB_Add(this.db,this.api_input,e).then(a=>{console.log(a)}),this.loadSV.loaded("saveTax"),this.plus.clickBtn("closeModaltax")})}onTax(e){this.taxForm.controls._id.setValue(e._id),this.taxForm.controls.MaKhachHang.setValue(e.MaKhachHang),this.idbSV.IDB_DB_GetById(this.db,this.api_input,e._id).then(i=>{console.log(i),this.taxForm.controls.KyHieuHoaDon.setValue(i.KyHieuHoaDon),this.taxForm.controls.SoHoaDon.setValue(i.SoHoaDon),this.taxForm.controls.NgayHoaDon.setValue(i.NgayHoaDon),this.taxForm.controls.KyKeKhai.setValue(i?.KyKeKhai.length>0?i.KyKeKhai:localStorage.getItem("taxMonth")||"")})}convertDate(e){return b()(e,"DD/MM/YYYY").toDate()}HuyQTDMT(e,i){var a=this;return(0,M.Z)(function*(){if(!a.checkPer("cmis4-quyet-toan-dmt")||!confirm(`H\u1ee7y quy\u1ebft to\xe1n ${e.MaKhachHang}?`))return null;a.nlmtSv.huycapnhatQToanSLuongMTAM(e).then(r=>{a.items.DanhSach[i].TrangThaiThanhToan=8})})()}doiChieuCMIS(){var e=this;return(0,M.Z)(function*(){for(let a=0;a<e.items.DanhSach.length;a++){const s=e.items.DanhSach[a];yield e.getCMISByItem(s,a)}})()}getCMISByItem(e,i){var a=this;return(0,M.Z)(function*(){let r={MA_DVIQLY:a.cmis4SV.getUser().SUBDIVISIONID,MA_KHANG:e.MaKhachHang,NAM:-1,QUYET_TOAN:0},l=yield a.cmis4SV.getDsachKhangQToanDienMTAM(r),u=[],h=0,p=0;0==l.length&&u.push("Kho\u0302ng co\u0301 n\u1ee3");for(let f=0;f<l.length;f++){const d=l[f];p+=d.SO_TIEN+d.TIEN_GTGT,d.NAM==e.Nam&&d.MA_KHANG==e.MaKhachHang&&d.THANG==e.Thang&&d.SO_TIEN==e.TruocThue&&(u.push(d.THANG+"/"+d.NAM+": OK"),h=d.SO_TIEN+d.TIEN_GTGT)}a.items.DanhSach[i].TrangThaiThanhToan=5})()}moHoaDon(){var e=this;return(0,M.Z)(function*(){e.nlmtSv.moHoaDon(e.items)})()}QTFull(){var e=this;return(0,M.Z)(function*(){if(!e.checkPer("cmis4-quyet-toan-dmt"))return null;if(null==e.ngayQT)return e.plus.alertWarning("Ch\u1ecdn ng\xe0y quy\u1ebft to\xe1n!");if(confirm(`Quy\u1ebft to\xe1n to\xe0n b\u1ed9 v\xe0o ng\xe0y ${e.ngayQT}?`))for(let a=0;a<e.items.DanhSach.length;a++){const s=e.items.DanhSach[a];yield e.QTDMT(s,a)}})()}QTDMT(e,i){var a=this;return(0,M.Z)(function*(){if(!a.checkPer("cmis4-quyet-toan-dmt"))return null;if(null==a.ngayQT)return a.plus.alertWarning("Ch\u1ecdn ng\xe0y quy\u1ebft to\xe1n!");let s={MA_DVIQLY:a.userCmis4.SUBDIVISIONID,MA_KHANG:e.MaKhachHang,NAM:e.Nam,QUYET_TOAN:0},r=yield a.cmis4SV.getDsachKhangQToanDienMTAM(s),l={MA_DVIQLY:a.userCmis4.SUBDIVISIONID,MA_KHANG:e.MaKhachHang,USER:a.userCmis4.USERNAME,NGAY_QTOAN:a.ngayQT,SO_TIEN:0,MA_CNANG:"487",NGAY_LAP:a.ngayQT,LST_KHQT:[]};for(let u=0;u<r.length;u++){const h=r[u];if(h.NAM==e.Nam&&h.MA_KHANG==e.MaKhachHang&&h.THANG==e.Thang&&h.SO_TIEN==e.TruocThue){let p={MA_DVIQLY:a.userCmis4.SUBDIVISIONID,MA_KHANG:h.MA_KHANG,THANG:h.THANG,NAM:h.NAM,SO_TIEN:h.SO_TIEN,TIEN_GTGT:h.TIEN_GTGT,LOAI_DCHINH:h.LOAI_DCHINH,ID_DMT:h.ID_DMT,TYLE_THUE:h.TYLE_THUE};l.SO_TIEN+=h.SO_TIEN,l.SO_TIEN+=h.TIEN_GTGT,l.LST_KHQT.push(p)}}if(0==l.LST_KHQT.length||0==l.SO_TIEN||e.TongTien!==l.SO_TIEN)return alert(`Kho\u0302ng \u0111u\u0309 \u0111ie\u0302\u0300u kie\u0323\u0302n quy\u1ebft to\xe1n ${a.ngayQT} - ${e.MaKhachHang} - ${new Intl.NumberFormat("it-IT").format(l.SO_TIEN)}`),void a.plus.alertWarning("Kh\xf4ng c\xf3 kh\xe1ch h\xe0ng quy\u1ebft to\xe1n trong th\xe1ng");if(e.TongTien===l.SO_TIEN){let u=yield a.cmis4SV.capnhatQToanSLuongMTAM(l);console.log(u),a.items.DanhSach[i].TrangThaiThanhToan=5}})()}getDay(e){this.ngayQT=e,console.log(this.ngayQT)}getUser(e){this.user=e,this.nlmtSv.user=e,this.levelpay=e.opt[this.api],this.levelinput=e.opt["dmt-input"],this.levelaccept=e.opt["dmt-accept"]}getSetup(e){this.setup=e,this.nlmtSv.setup=e}exportXlsx(){var e=document.getElementById("my-table-id");window.open("data:application/vnd.ms-excel,"+encodeURIComponent(e.outerHTML))}getIDB(){const e=this.route.snapshot.paramMap.get("id");this.httpSV.get(`${this.api}/${e}`).subscribe(i=>{this.items=i.data,this.items.DanhSach.forEach(a=>{this.idbSV.IDB_DB_GetById(this.db,this.api_input,a._id).then(s=>{console.log(s),this.danhSach.push(s)})})})}sendMailBank(){let e=this.authSV.userDir;this.loadSV.load("sendMailBank"),this.nlmtSv.export_ThanhToanPTC(this.items,!1).then(i=>{this.storageSV.uploadFile(i,"BangKe",e._id).then(a=>{let s=this.nlmtSv.geneBodyMailBank(`${a}`,`BangKe-PTC-${this.items.DanhSach[0].TenBangKe}.xlsx`);this.mailSV.send("dmt",s).subscribe(r=>{console.log(r),this.loadSV.loaded("sendMailBank"),r.email==s.email?this.authSV._toastSuccess("\u0110\xe3 g\u1eedi mail th\xe0nh c\xf4ng"):this.authSV._toastErr("G\u1eedi kh\xf4ng th\xe0nh c\xf4ng")})})})}changeDate(e,i){const a=this.items.DanhSach.indexOf(i);this.items.DanhSach[a].NgayHoaDon=e.value}changeLabel(e,i){const a=this.items.DanhSach.indexOf(i);this.items.DanhSach[a].KyHieuHoaDon=e.target.innerText}changeSeri(e,i){const a=this.items.DanhSach.indexOf(i);this.items.DanhSach[a].SoHoaDon=e.target.innerText}ngOnDestroy(){console.log("Destroy",this.api),this.plus.subs.unsubscribe()}save(){let e=b()(this.startDay).format("M/YYYY");this.nlmtSv.updateDayPay(this.items,e)}completeBill(){}exportWord(){const e=this.nlmtSv.geneBodyPay(this.items.DanhSach,this.items.DanhSach[0].TenBangKe);this.nlmtSv.export_ThanhToanPTC(e)}exportUNC(){var e=this;return(0,M.Z)(function*(){e.items.BangChu=e.plus.numToVi(e.items.ThanhTienSauThue);let i="";for(let a=0;a<e.setup.TaiKhoan.length;a++){const s=e.setup.TaiKhoan[a];s.TrangThai&&(i=s.MaNganHang)}e.nlmtSv.xuatUNC(e.items,i)})()}traHoSo(){const e=prompt("L\xed do tr\u1ea3 h\u1ed3 s\u01a1?");if(e.length<5)return this.plus.alertWarning("B\u1ea1n ph\u1ea3i nh\u1eadp l\xed do tr\u1ea3 h\u1ed3 s\u01a1");const i=this.items;i.LichSuCapNhat.push(`Tr\u1ea3 l\u1ea1i h\u1ed3 s\u01a1 v\u1edbi l\xed do ${e}: ${b()().format("DD/MM/YYYY HH:mm")}`),this.nlmtSv.changeStatusList(i,0).then(a=>{this.reload()})}thuHoiBangKe(){const e=this.items;e.LichSuCapNhat.push(`Thu h\u1ed3i h\u1ed3 s\u01a1: ${b()().format("DD/MM/YYYY HH:mm")}`),this.nlmtSv.changeStatusList(e,-1)}xuatTTrDNTT(){var e=this;return(0,M.Z)(function*(){e.nlmtSv.xuatDNTT(e.items)})()}approveList(){const e=this.items;e.LichSuCapNhat.push(`H\u1ed3 s\u01a1 \u0111\xe3 \u0111\u01b0\u1ee3c ch\u1ea5p nh\u1eadn: ${b()().format("DD/MM/YYYY HH:mm")}`),this.nlmtSv.changeStatusList(e,3)}unApproveList(){const e=this.items;e.LichSuCapNhat.push(`\u0110\u1ed5i trang th\xe1i duy\u1ec7t: ${b()().format("DD/MM/YYYY HH:mm")}`),this.nlmtSv.changeStatusList(e,2)}paidList(){const e=this.items;e.KyThanhToan=b()().format("M/YYYY"),e.LichSuCapNhat.push(`H\u1ed3 s\u01a1 \u0111\xe3 thanh to\xe1n ${b()().format("DD/MM/YYYY HH:mm")}`),this.nlmtSv.changeStatusList(e,4)}getMonth(e,i){if("KyKeKhai"==i)return console.log(this.kyKeKhai,this.items),this.kyKeKhai=e.toString();this.items[i]=b()(e).format("M/YYYY"),this.items.Nam=+b()(e).format("YYYY"),this.startDay=e}getMonth2(e,i){if(this.danhSach[i].NgayHoaDon="",""==this.kyKeKhai||"Invalid date"==this.kyKeKhai)return this.plus.alertWarning("Vui lo\u0300ng cho\u0323n ky\u0300 ke\u0302 khai tru\u031bo\u031b\u0301c khi ca\u0323\u0302p nha\u0323\u0302t");this.danhSach[i].NgayHoaDon=e,this.danhSach[i].KyKeKhai=this.kyKeKhai,console.log(this.kyKeKhai,this.danhSach[i])}onEdit(e){this.selectedItem=e;const i=this.plus.dateToHtmlObj(e,[""]);this.main.patchValue(i),this.plus.clickBtn("openModal")}onDelete(e){confirm("B\u1ea1n mu\u1ed1n x\xf3a?")}search(e){this.filter=e}find(e){this.items=e}checkPer(e=this.api,i=1){return this.authSV.checkPer(e,i)}reload(){return this.plus.reload(this.dbName+"/"+this.api)}goBack(){this.plus.goBack()}changePage(e){}trackByFn(e,i){return i}resetDB(){}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(z.T),t.Y36(c.qu),t.Y36(Tt.gz),t.Y36(lt.j),t.Y36(B.c1),t.Y36(qa.O),t.Y36(si.j),t.Y36(ct.O),t.Y36(j.b),t.Y36(ri.a),t.Y36(Ma.F),t.Y36(me.x))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-nlmt-detail"]],decls:58,vars:29,consts:[[1,"container-fluid"],[3,"nlmtSetup","idb","user"],["id","back-btn","mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","warn","matTooltip","Duy\u1ec7t",3,"click",4,"ngIf"],["mat-raised-button","","color","primary","matTooltip","B\u1ecf Duy\u1ec7t",3,"click",4,"ngIf"],["mat-raised-button","","color","primary","matTooltip","Tr\u1ea3 l\u1ea1i",3,"click",4,"ngIf"],["mat-raised-button","","color","accent","matTooltip","Thu h\u1ed3i b\u1ea3ng k\xea",3,"click",4,"ngIf"],["mat-raised-button","","color","primary","matTooltip","B\u1ea3ng k\xea PTC ",3,"click"],["mat-raised-button","","color","primary","matTooltip","Xu\u1ea5t UNC ",3,"click"],["mat-raised-button","","color","warn","matTooltip","\u0110\xe3 thanh to\xe1n",3,"click",4,"ngIf"],["mat-raised-button","","color","warn","matTooltip","L\u01b0u",3,"click",4,"ngIf"],["mat-raised-button","","color","accent","matTooltip","G\u1eedi b\u1ea3ng k\xea cho ng\xe2n h\xe0ng",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],[3,"startDay","label","month",4,"ngIf"],[3,"label","month",4,"ngIf"],[3,"label","month"],[1,"row"],["matSuffix","","color","warn",3,"click",4,"ngIf"],["matInput","","id","search-api","placeholder","T\xecm ki\u1ebfm nhanh (F2)","value","value",3,"ngModel","ngModelChange"],[1,"tit","text-center"],[1,"table","table-hover"],[1,"thead-inverse"],["colspan","14",1,"text-primary",3,"innerText"],[4,"Device"],["color","primary",3,"click"],[4,"ngIf"],[3,"formGroup",4,"ngFor","ngForOf"],["mat-raised-button","","color","warn","matTooltip","Duy\u1ec7t",3,"click"],["mat-raised-button","","color","primary","matTooltip","B\u1ecf Duy\u1ec7t",3,"click"],["mat-raised-button","","color","primary","matTooltip","Tr\u1ea3 l\u1ea1i",3,"click"],["mat-raised-button","","color","accent","matTooltip","Thu h\u1ed3i b\u1ea3ng k\xea",3,"click"],["mat-raised-button","","color","warn","matTooltip","\u0110\xe3 thanh to\xe1n",3,"click"],["mat-raised-button","","color","warn","matTooltip","L\u01b0u",3,"click"],["mat-raised-button","","color","accent","matTooltip","G\u1eedi b\u1ea3ng k\xea cho ng\xe2n h\xe0ng",3,"click"],[3,"startDay","label","month"],["matSuffix","","color","warn",3,"click"],["color","warn",3,"click"],[3,"formGroup"],[1,"align-middle"],[3,"routerLink"],[1,"text-end"],["class","align-middle",4,"Device"],["color","warn",3,"click",4,"ngIf"],["color","primary",3,"click",4,"ngIf"],[1,"col"],["required","","type","text","autocomplete","off","matInput","","formControlName","KyHieuHoaDon",3,"blur"],["required","","type","text","autocomplete","off","matInput","","formControlName","SoHoaDon",3,"blur"],["required","",3,"startDay","openOnFocus","label","month"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"app-nlmt-share",1),t.NdJ("nlmtSetup",function(s){return i.getSetup(s)})("idb",function(s){return i.db=s})("user",function(s){return i.getUser(s)}),t.qZA(),t.TgZ(2,"button",2),t.NdJ("click",function(){return i.goBack()}),t.TgZ(3,"mat-icon"),t._uU(4,"undo"),t.qZA()(),t.YNc(5,wa,3,0,"button",3),t.YNc(6,Oa,3,0,"button",4),t.YNc(7,Ka,3,0,"button",5),t.YNc(8,Ua,3,0,"button",6),t.TgZ(9,"button",7),t.NdJ("click",function(){return i.exportWord()}),t.TgZ(10,"mat-icon"),t._uU(11,"cloud_download"),t.qZA()(),t.TgZ(12,"button",8),t.NdJ("click",function(){return i.exportUNC()}),t.TgZ(13,"mat-icon"),t._uU(14,"border_color"),t.qZA()(),t.YNc(15,La,3,0,"button",9),t.YNc(16,Ha,3,0,"button",10),t.YNc(17,Ba,3,0,"button",11),t.TgZ(18,"button",12),t.NdJ("click",function(){return i.moHoaDon()}),t._uU(19,"M\u1edf h\xf3a \u0111\u01a1n"),t.qZA(),t.YNc(20,Ya,2,0,"button",13),t.YNc(21,Fa,2,0,"button",13),t.YNc(22,Ja,1,2,"app-month-year",14),t.YNc(23,Va,1,1,"app-date-picker",15),t.TgZ(24,"app-month-year",16),t.NdJ("month",function(s){return i.getMonth(s,"KyKeKhai")}),t.qZA(),t.TgZ(25,"div",17)(26,"mat-form-field"),t.YNc(27,$a,2,0,"mat-icon",18),t.TgZ(28,"input",19),t.NdJ("ngModelChange",function(s){return i.searchText=s}),t.qZA()(),t.TgZ(29,"h5",20),t._uU(30),t.ALo(31,"numberPipe"),t.qZA(),t._UZ(32,"br"),t.TgZ(33,"table",21)(34,"thead",22)(35,"tr"),t._UZ(36,"th",23),t.qZA(),t.TgZ(37,"tr")(38,"th"),t._uU(39,"M\xe3 kh\xe1ch h\xe0ng"),t.qZA(),t.TgZ(40,"th"),t._uU(41,"Kh\xe1ch h\xe0ng"),t.qZA(),t.TgZ(42,"th"),t._uU(43,"K\u1ef3 thanh to\xe1n"),t.qZA(),t.TgZ(44,"th"),t._uU(45,"S\u1ea3n l\u01b0\u1ee3ng"),t.qZA(),t.TgZ(46,"th"),t._uU(47,"T\u1ed5ng ti\u1ec1n"),t.qZA(),t.YNc(48,Ga,2,0,"th",24),t.YNc(49,Pa,2,0,"th",24),t.YNc(50,Qa,2,0,"th",24),t.TgZ(51,"th")(52,"mat-icon",25),t.NdJ("click",function(){return i.reload()}),t._uU(53,"cached"),t.qZA()(),t.YNc(54,Ra,3,0,"th",26),t.qZA()(),t.TgZ(55,"tbody"),t.YNc(56,ns,22,17,"tr",27),t.ALo(57,"filter"),t.qZA()()()()),2&e&&(t.xp6(2),t.Q6J("@slideIn",void 0),t.xp6(3),t.Q6J("ngIf",2==(null==i.items?null:i.items.TrangThai)&&i.levelaccept>1),t.xp6(1),t.Q6J("ngIf",i.levelaccept>1),t.xp6(1),t.Q6J("ngIf",2==(null==i.items?null:i.items.TrangThai)&&i.levelpay>2||i.checkPer("dev")),t.xp6(1),t.Q6J("ngIf",(null==i.items?null:i.items.TrangThai)<3&&i.levelinput>1),t.xp6(7),t.Q6J("ngIf",3==(null==i.items?null:i.items.TrangThai)),t.xp6(1),t.Q6J("ngIf",(null==i.items?null:i.items.TrangThai)>3),t.xp6(1),t.Q6J("ngIf",3==(null==i.items?null:i.items.TrangThai)&&i.checkPer("dmt-pay",2)),t.xp6(3),t.Q6J("ngIf",i.checkPer("dev",1)),t.xp6(1),t.Q6J("ngIf",i.checkPer("dmt-tax",1)),t.xp6(1),t.Q6J("ngIf",4==(null==i.items?null:i.items.TrangThai)),t.xp6(1),t.Q6J("ngIf",i.checkPer("cmis4-quyet-toan-dmt")),t.xp6(1),t.Q6J("label","Ch\u1ecdn k\u1ef3 k\xea khai thu\u1ebf"),t.xp6(3),t.Q6J("ngIf",i.searchText.length>0),t.xp6(1),t.Q6J("ngModel",i.searchText),t.xp6(2),t.AsE("B\u1ea2NG K\xca THANH TO\xc1N S\u1ed0 ",null==i.items?null:i.items.TenBangKe," | ",t.lcZ(31,24,null==i.items?null:i.items.ThanhTienSauThue)," "),t.xp6(3),t.Q6J("@slideIn",void 0),t.xp6(3),t.Q6J("innerText",null==i.items?null:i.items.LichSuCapNhat.join("\n")),t.xp6(12),t.Q6J("Device",1),t.xp6(1),t.Q6J("Device",1),t.xp6(1),t.Q6J("Device",1),t.xp6(4),t.Q6J("ngIf",i.checkPer("cmis4-quyet-toan-dmt")),t.xp6(2),t.Q6J("ngForOf",t.xi3(57,26,i.danhSach,i.searchText)))},dependencies:[A.sg,A.O5,Tt.rH,c.Fj,c.JJ,c.JL,c.Q7,c.On,c.sg,c.u,Y.lW,X.Hw,ht.Nt,D.KE,D.hX,D.R9,he.gM,pe.k,ii.L,ye.HP,It,A.JJ,G._2,G.Cf],styles:["span[_ngcontent-%COMP%]{text-align:center;display:block;border-bottom:dotted 1px}mat-form-field[_ngcontent-%COMP%]{padding:0!important}.mat-form-field-infix[_ngcontent-%COMP%]{width:100px!important}"],data:{animation:[ot.Ym]}}),o})();var os=_(88996),as=_(24351),li=_(56709),ln=_(99602),Ie=_(51511);function ss(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"mat-chip-option",20),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.getIDB(s.GiaTri))}),t._uU(1),t.qZA()}if(2&o){const e=n.$implicit;t.Q6J("selected",2==n.index),t.xp6(1),t.Oqu(e.NoiDung)}}function rs(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",21),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.daThanhToans())}),t.TgZ(1,"mat-icon"),t._uU(2,"currency_exchange"),t.qZA()()}}function ls(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",22),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.dsXinChiPhi())}),t.TgZ(1,"mat-icon"),t._uU(2,"list"),t.qZA()()}}function cs(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",23),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.sendMailBank())}),t.TgZ(1,"mat-icon"),t._uU(2,"mail"),t.qZA()()}}function us(o,n){1&o&&t._UZ(0,"th")}function hs(o,n){1&o&&(t.TgZ(0,"th"),t._uU(1,"Tr\u1ea1ng th\xe1i"),t.qZA())}function ps(o,n){1&o&&(t.TgZ(0,"th"),t._uU(1,"L\u1ecbch s\u1eed c\u1eadp nh\u1eadt"),t.qZA())}function ms(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"td")(1,"mat-checkbox",35),t.NdJ("change",function(a){t.CHM(e);const s=t.oxw().$implicit,r=t.oxw(2);return t.KtG(r.checkItem(a,s))}),t.qZA()()}}const _s=function(o,n,e,i,a){return{"bg-warning text-center":o,"bg-info text-center":n,"bg-secondary text-center":e,"bg-primary text-center":i,"bg-success text-center":a}};function ds(o,n){if(1&o&&(t.TgZ(0,"td",36),t._uU(1),t.ALo(2,"enum"),t.qZA()),2&o){const e=t.oxw().$implicit;t.s9C("routerLink",e._id),t.Q6J("ngClass",t.qbA(6,_s,0==e.TrangThai,1==e.TrangThai,2==e.TrangThai,3==e.TrangThai,4==e.TrangThai)),t.xp6(1),t.Oqu(t.xi3(2,3,e.TrangThai,"DMTTrangThaiHoSo"))}}function fs(o,n){if(1&o&&t._UZ(0,"td",37),2&o){const e=t.oxw().$implicit;t.s9C("routerLink",e._id),t.Q6J("innerText",e.LichSuCapNhat.join("\n"))}}function gs(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"mat-icon",38),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit,s=t.oxw(2);return t.KtG(s.onDelete(a))}),t._uU(1,"delete"),t.qZA()}}function Ts(o,n){if(1&o&&(t.TgZ(0,"tr"),t.YNc(1,ms,2,0,"td",26),t.TgZ(2,"td",30),t._uU(3),t.qZA(),t.YNc(4,ds,3,12,"td",31),t.YNc(5,fs,1,2,"td",32),t.TgZ(6,"td",33),t._uU(7),t.ALo(8,"numberPipe"),t.qZA(),t.TgZ(9,"td"),t.YNc(10,gs,2,0,"mat-icon",34),t.qZA()()),2&o){const e=n.$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.TrangThai>1),t.xp6(1),t.s9C("routerLink",e._id),t.xp6(1),t.Oqu(e.TenBangKe),t.xp6(1),t.Q6J("Device",2),t.xp6(1),t.Q6J("Device",2),t.xp6(1),t.s9C("routerLink",e._id),t.xp6(1),t.Oqu(t.lcZ(8,8,e.ThanhTienSauThue)),t.xp6(3),t.Q6J("ngIf",i.level>4)}}function bs(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"table",24)(1,"thead",25)(2,"tr"),t.YNc(3,us,1,0,"th",26),t.TgZ(4,"th"),t._uU(5,"T\xean b\u1ea3ng k\xea"),t.qZA(),t.YNc(6,hs,2,0,"th",27),t.YNc(7,ps,2,0,"th",27),t.TgZ(8,"th"),t._uU(9,"Th\xe0nh ti\u1ec1n sau thu\u1ebf"),t.qZA(),t.TgZ(10,"th")(11,"mat-icon",28),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.reload())}),t._uU(12,"cached"),t.qZA()()()(),t.TgZ(13,"tbody"),t.YNc(14,Ts,11,10,"tr",29),t.qZA()()}if(2&o){const e=t.oxw();t.Q6J("@slideIn",void 0),t.xp6(3),t.Q6J("ngIf",3==e.statusNumber),t.xp6(3),t.Q6J("Device",2),t.xp6(1),t.Q6J("Device",2),t.xp6(7),t.Q6J("ngForOf",e.filter)}}function Es(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div",39)(1,"mat-expansion-panel")(2,"mat-expansion-panel-header"),t._uU(3," Import "),t.qZA(),t.TgZ(4,"app-drop-files",40),t.NdJ("files",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.onDropFile(a))})("ondragover",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.ondragover())}),t.qZA(),t.TgZ(5,"button",18),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.import())}),t.TgZ(6,"mat-icon"),t._uU(7,"save"),t.qZA()()()()}2&o&&(t.xp6(4),t.Q6J("label",""))}let As=(()=>{class o{constructor(e,i,a,s,r,l,u,h,p){this.plus=e,this.fb=i,this.authSV=a,this.chartSV=s,this.nlmtSV=r,this.idbSV=l,this.excelSV=u,this.httpSV=h,this.loadSV=p,this.main=this.fb.group({keyWord:["",[]],_id:["",[]],TenBangKe:["",[c.kI.required]],TrangThai:["",[c.kI.required]],LichSuCapNhat:["",[c.kI.required]],TongPhatLen:["",[c.kI.required,c.kI.pattern("^[0-9]*$")]],ThanhTienTruocThue:["",[c.kI.required,c.kI.pattern("^[0-9]*$")]],Thue:["",[c.kI.required,c.kI.pattern("^[0-9]*$")]],ThanhTienSauThue:["",[c.kI.required,c.kI.pattern("^[0-9]*$")]],DanhSach:["",[c.kI.required]]}),this.searchForm=this.fb.group({input:["",[c.kI.required,c.kI.minLength(4)]]}),this.title="L\u1eadp b\u1ea3ng k\xea",this.global=!0,this.dbName="dien-luc",this.api="dmt-pay",this.db=null,this.userId=this.plus.userId,this.items=[],this.selectedItem=null,this.filter=[],this.itemsPay=[],this.errors=[],this.startDay=new Date,this.pageSize=100,this.checkItems=[],this.statusNumber=2,this.congNos=[],this.dataInXls=[],this.allowLoadmore=!0}ngOnInit(){this.plus.setTiTle(this.title),this.plus.checkTab(),this.authSV.user.subscribe(e=>{if(e){this.user=e;let i=e.unit+"-"+this.api;this.idbSV.IDB_InitDB(this.dbName).subscribe(a=>{this.db=a,this.httpSV.updateLocalDB(a,this.api,i).subscribe(s=>{this.loadSV.loaded("updateLocalDB"+i),console.log("updateLocalDB",s),this.getIDB(2)})})}})}chosenYearHandler(e,i){this.year=b()(e).year(),i.close(),this.generateChart()}getUser(e){this.nlmtSV.user=e,this.level=e.opt[this.api],this.fileName=e.unit+"-"+this.api}getIDB(e){this.year=+(new Date).getFullYear(),this.statusNumber=e,console.log("getIDB() "),this.filter=[],this.items=[],this.idbSV.IDB_DB_GetAllByIndexKey(this.db,this.api,"TrangThai","=",e).then(i=>{this.items=i,this.filter=i.slice(0,50),this.generateChart()})}exportCongNo(){this.idbSV.IDB_DB_GetAllByIndexKey(this.db,"dmt-input","TrangThaiHoSo","<",3).then(e=>{this.nlmtSV.xuatCongNo(e,this.db)})}pushData(e){if(console.log(e),e&&this.allowLoadmore){this.loadSV.load("pushData");let i=this.filter.length,a=this.items.slice(i,i+100);this.filter=this.filter.concat(a),this.loadSV.loaded("pushData")}}generateChart(){console.log(this.db,+this.year),this.idbSV.IDB_DB_GetAllByIndexKey(this.db,"dmt-input","Nam","=",+this.year).then(e=>{let i=e.filter(a=>4==a.TrangThaiHoSo);this.chart=this.chartSV.generateChart(i,"NgayThanhToan","TongTien"),console.log(this.chart,i)})}ngOnDestroy(){console.log("Destroy",this.api),this.authSV.unsubcribe(),this.nlmtSV.detroy()}getMonth(e){this.startDay=e,this.month=b()(e).month()+1,this.year=b()(e).year(),console.log(`GetMOnth:  ${this.year}${this.month}`)}onDelete(e){if(!confirm("B\u1ea1n mu\u1ed1n x\xf3a?"))return;this.loadSV.load("onDelete",e._id);let a=[];for(let s=0;s<e.DanhSach.length;s++){const r=e.DanhSach[s];let l=r.NhatKy;l.push("X\xf3a b\u1ea3ng k\xea"),a.push({_id:r._id,TrangThaiHoSo:0,NhatKy:l})}}daThanhToans(){this.nlmtSV.changeStatusMultiList(this.checkItems)}dsXinChiPhi(){let e=[];for(let i=0;i<this.checkItems.length;i++)e.push(...this.checkItems[i].DanhSach);this.nlmtSV.export_BangKeChiPhi(e)}sendMailBank(){(0,os.D)(this.checkItems).pipe((0,as.b)(e=>this.nlmtSV.sendMailBank(e))).subscribe()}checkItem(e,i){const a=this.checkItems.indexOf(i);e.checked?this.checkItems.push(i):this.checkItems.splice(a,1),console.log(this.checkItems)}onDropFile(e){console.log("onDropFile()"),this.reset();for(let i=0;i<e.length;i++){let a=e[i];console.log(a),"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"==a.type?this.excelSV.fileToJsonArray(a).then(s=>{console.log(s),this.checkImport(s)}):"application/json"==a.type?this.excelSV.parseJsonFile(a).then(s=>{this.checkImport(s),console.log(s)}):this.plus.alertError("File kh\xf4ng h\u1ee3p l\u1ec7")}}import(){this.httpSV.post(this.api+"/import",this.dataInXls,this.fileName).subscribe(e=>{window.location.reload()})}checkImport(e){for(let i=0;i<e.length;i++){const a=e[i];delete a.keyWord,delete a.__V,delete a.BangChu,delete a.keyword;for(let s=0;s<a.DanhSach.length;s++)delete a.keyWord,delete a.__V,delete a.BangChu;this.dataInXls.push(a)}}ondragover(){document.getElementById("dropZone").setAttribute("drop-active","true")}chooseOpt(e,i,a,s=!1){this.main.controls[i].setValue(e[a]),s&&this.main.controls[i+"ID"].setValue(e._id)}checkPer(e,i=this.api){return this.authSV.checkPer(i,e)}closeModal(){this.main.reset()}search(){let e=this.searchForm.value;if(this.searchForm.valid){const i=[];this.allowLoadmore=!1,this.idbSV.IDB_DB_GetAll(this.db,this.api).subscribe(a=>{console.log("IDB_DB_GetAll()",a.length);const s=this.plus.removeAccents(e.input);0==a.length&&this.plus.alertMatSnackBar("Kh\xf4ng c\xf2n k\u1ebft qu\u1ea3 ph\xf9 h\u1ee3p");for(let r=0;r<a.length||i.length>50;r++){const l=JSON.stringify(a[r]);this.plus.removeAccents(l).includes(s)&&i.push(a[r])}this.filter=i,0==i.length&&this.plus.alertMatSnackBar("Kh\xf4ng c\xf2n k\u1ebft qu\u1ea3 ph\xf9 h\u1ee3p")})}}find(e){this.items=e}patchForm(){this.main.reset({_id:" "})}reload(){return this.plus.reload(this.dbName+"/"+this.api)}goBack(){this.plus.goBack()}reset(){this.filter=[],this.main.reset({})}changePage(e){this.filter=this.items.slice(e.pageIndex*e.pageSize,(e.pageIndex+1)*e.pageSize)}getSetup(e){console.log(e),this.nlmtSV.setup=e}trackByFn(e,i){return i}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(z.T),t.Y36(c.qu),t.Y36(B.c1),t.Y36(ti),t.Y36(lt.j),t.Y36(ut.Y),t.Y36(me.x),t.Y36(ct.O),t.Y36(j.b))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-nlmt-list"]],decls:28,vars:14,consts:[[1,"container"],[3,"user","nlmtSetup"],[3,"percentLoad","emit"],["id","add-btn","color","accent","mat-raised-button","","routerLink","/dien-luc/dmt-input"],["id","back-btn","mat-raised-button","","color","primary",3,"click"],[3,"formGroup"],["matInput","","id","search-api","formControlName","input","placeholder","T\xecm ki\u1ebfm (F2)",3,"keyup.enter"],["color","accent",3,"selected","click",4,"ngFor","ngForOf"],["mat-raised-button","","color","warn","matTooltip","\u0110\xe3 thanh to\xe1n",3,"click",4,"ngIf"],["mat-raised-button","","color","primary","matTooltip","Danh s\xe1ch xin chi ph\xed",3,"click",4,"ngIf"],["mat-raised-button","","color","warn","matTooltip","G\u1eedi email",3,"click",4,"ngIf"],[1,"row","mt-3"],["class","table table-hover",4,"ngIf"],["appearance","outline"],["matInput","",3,"ngModel","matDatepicker","ngModelChange"],["matSuffix","",3,"for"],["startView","multi-year",3,"yearSelected"],["picker",""],["mat-raised-button","",3,"click"],["class","row",4,"ngIf"],["color","accent",3,"selected","click"],["mat-raised-button","","color","warn","matTooltip","\u0110\xe3 thanh to\xe1n",3,"click"],["mat-raised-button","","color","primary","matTooltip","Danh s\xe1ch xin chi ph\xed",3,"click"],["mat-raised-button","","color","warn","matTooltip","G\u1eedi email",3,"click"],[1,"table","table-hover"],[1,"thead-inverse"],[4,"ngIf"],[4,"Device"],["color","primary",3,"click"],[4,"ngFor","ngForOf"],[3,"routerLink"],[3,"routerLink","ngClass",4,"Device"],[3,"routerLink","innerText",4,"Device"],[1,"text-end",3,"routerLink"],["color","warn",3,"click",4,"ngIf"],["color","primary",3,"checked","change"],[3,"routerLink","ngClass"],[3,"routerLink","innerText"],["color","warn",3,"click"],[1,"row"],[3,"label","files","ondragover"]],template:function(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"div",0)(1,"app-nlmt-share",1),t.NdJ("user",function(r){return i.getUser(r)})("nlmtSetup",function(r){return i.getSetup(r)}),t.qZA(),t.TgZ(2,"app-loadmore",2),t.NdJ("emit",function(r){return i.pushData(r)}),t.qZA(),t.TgZ(3,"button",3)(4,"mat-icon"),t._uU(5,"control_point"),t.qZA()(),t.TgZ(6,"button",4),t.NdJ("click",function(){return i.goBack()}),t.TgZ(7,"mat-icon"),t._uU(8,"undo"),t.qZA()(),t._UZ(9,"hr"),t.TgZ(10,"mat-form-field",5)(11,"input",6),t.NdJ("keyup.enter",function(){return i.search()}),t.qZA()(),t.TgZ(12,"mat-chip-listbox"),t.YNc(13,ss,2,2,"mat-chip-option",7),t.ALo(14,"catalog"),t.qZA(),t.YNc(15,rs,3,0,"button",8),t.YNc(16,ls,3,0,"button",9),t.YNc(17,cs,3,0,"button",10),t.TgZ(18,"div",11),t.YNc(19,bs,15,5,"table",12),t.qZA(),t.TgZ(20,"mat-form-field",13)(21,"input",14),t.NdJ("ngModelChange",function(r){return i.year=r}),t.qZA(),t._UZ(22,"mat-datepicker-toggle",15),t.TgZ(23,"mat-datepicker",16,17),t.NdJ("yearSelected",function(r){t.CHM(a);const l=t.MAs(24);return t.KtG(i.chosenYearHandler(r,l))}),t.qZA()(),t.TgZ(25,"button",18),t.NdJ("click",function(){return i.exportCongNo()}),t._uU(26,"C\xf4ng n\u1ee3"),t.qZA(),t.YNc(27,Es,8,1,"div",19),t.qZA()}if(2&e){const a=t.MAs(24);t.xp6(2),t.Q6J("percentLoad",60),t.xp6(4),t.Q6J("@slideIn",void 0),t.xp6(4),t.Q6J("formGroup",i.searchForm),t.xp6(3),t.Q6J("ngForOf",t.lcZ(14,12,"DMTTrangThaiHoSo")),t.xp6(2),t.Q6J("ngIf",i.checkItems.length>0&&i.checkPer(3)),t.xp6(1),t.Q6J("ngIf",i.checkItems.length>0&&i.checkPer(1)),t.xp6(1),t.Q6J("ngIf",i.checkItems.length>0&&i.checkPer(3)),t.xp6(2),t.Q6J("ngIf",i.items.length+i.filter.length>0),t.xp6(2),t.Q6J("ngModel",i.year)("matDatepicker",a),t.xp6(1),t.Q6J("for",a),t.xp6(5),t.Q6J("ngIf",i.checkPer(4))}},dependencies:[A.mk,A.sg,A.O5,Tt.rH,c.Fj,c.JJ,c.JL,c.On,c.sg,c.u,li.oG,Y.lW,X.Hw,ht.Nt,D.KE,D.R9,ce.z2,ce.iO,ln.Mq,ln.hl,ln.nW,he.gM,$.ib,$.yz,ue.w,ye.HP,Ie.k,It,G.pW,G._2,G.zZ],data:{animation:[ot.Ym]}}),o})();var U="top",F="bottom",J="right",L="left",De="auto",Jt=[U,F,J,L],Dt="start",Vt="end",ci="clippingParents",cn="viewport",$t="popper",ui="reference",un=Jt.reduce(function(o,n){return o.concat([n+"-"+Dt,n+"-"+Vt])},[]),hn=[].concat(Jt,[De]).reduce(function(o,n){return o.concat([n,n+"-"+Dt,n+"-"+Vt])},[]),hi="beforeRead",pi="read",mi="afterRead",_i="beforeMain",di="main",fi="afterMain",gi="beforeWrite",Ti="write",bi="afterWrite",Ei=[hi,pi,mi,_i,di,fi,gi,Ti,bi];function at(o){return o?(o.nodeName||"").toLowerCase():null}function P(o){if(null==o)return window;if("[object Window]"!==o.toString()){var n=o.ownerDocument;return n&&n.defaultView||window}return o}function St(o){return o instanceof P(o).Element||o instanceof Element}function Q(o){return o instanceof P(o).HTMLElement||o instanceof HTMLElement}function pn(o){return!(typeof ShadowRoot>"u")&&(o instanceof P(o).ShadowRoot||o instanceof ShadowRoot)}const mn={name:"applyStyles",enabled:!0,phase:"write",fn:function Ns(o){var n=o.state;Object.keys(n.elements).forEach(function(e){var i=n.styles[e]||{},a=n.attributes[e]||{},s=n.elements[e];!Q(s)||!at(s)||(Object.assign(s.style,i),Object.keys(a).forEach(function(r){var l=a[r];!1===l?s.removeAttribute(r):s.setAttribute(r,!0===l?"":l)}))})},effect:function Cs(o){var n=o.state,e={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(n.elements.popper.style,e.popper),n.styles=e,n.elements.arrow&&Object.assign(n.elements.arrow.style,e.arrow),function(){Object.keys(n.elements).forEach(function(i){var a=n.elements[i],s=n.attributes[i]||{},l=Object.keys(n.styles.hasOwnProperty(i)?n.styles[i]:e[i]).reduce(function(u,h){return u[h]="",u},{});!Q(a)||!at(a)||(Object.assign(a.style,l),Object.keys(s).forEach(function(u){a.removeAttribute(u)}))})}},requires:["computeStyles"]};function st(o){return o.split("-")[0]}var kt=Math.max,Se=Math.min,Gt=Math.round;function _n(){var o=navigator.userAgentData;return null!=o&&o.brands?o.brands.map(function(n){return n.brand+"/"+n.version}).join(" "):navigator.userAgent}function Ai(){return!/^((?!chrome|android).)*safari/i.test(_n())}function Pt(o,n,e){void 0===n&&(n=!1),void 0===e&&(e=!1);var i=o.getBoundingClientRect(),a=1,s=1;n&&Q(o)&&(a=o.offsetWidth>0&&Gt(i.width)/o.offsetWidth||1,s=o.offsetHeight>0&&Gt(i.height)/o.offsetHeight||1);var l=(St(o)?P(o):window).visualViewport,u=!Ai()&&e,h=(i.left+(u&&l?l.offsetLeft:0))/a,p=(i.top+(u&&l?l.offsetTop:0))/s,f=i.width/a,d=i.height/s;return{width:f,height:d,top:p,right:h+f,bottom:p+d,left:h,x:h,y:p}}function dn(o){var n=Pt(o),e=o.offsetWidth,i=o.offsetHeight;return Math.abs(n.width-e)<=1&&(e=n.width),Math.abs(n.height-i)<=1&&(i=n.height),{x:o.offsetLeft,y:o.offsetTop,width:e,height:i}}function Ni(o,n){var e=n.getRootNode&&n.getRootNode();if(o.contains(n))return!0;if(e&&pn(e)){var i=n;do{if(i&&o.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function pt(o){return P(o).getComputedStyle(o)}function vs(o){return["table","td","th"].indexOf(at(o))>=0}function bt(o){return((St(o)?o.ownerDocument:o.document)||window.document).documentElement}function ke(o){return"html"===at(o)?o:o.assignedSlot||o.parentNode||(pn(o)?o.host:null)||bt(o)}function Ci(o){return Q(o)&&"fixed"!==pt(o).position?o.offsetParent:null}function _e(o){for(var n=P(o),e=Ci(o);e&&vs(e)&&"static"===pt(e).position;)e=Ci(e);return e&&("html"===at(e)||"body"===at(e)&&"static"===pt(e).position)?n:e||function xs(o){var n=/firefox/i.test(_n());if(/Trident/i.test(_n())&&Q(o)&&"fixed"===pt(o).position)return null;var a=ke(o);for(pn(a)&&(a=a.host);Q(a)&&["html","body"].indexOf(at(a))<0;){var s=pt(a);if("none"!==s.transform||"none"!==s.perspective||"paint"===s.contain||-1!==["transform","perspective"].indexOf(s.willChange)||n&&"filter"===s.willChange||n&&s.filter&&"none"!==s.filter)return a;a=a.parentNode}return null}(o)||n}function fn(o){return["top","bottom"].indexOf(o)>=0?"x":"y"}function de(o,n,e){return kt(o,Se(n,e))}function xi(o){return Object.assign({},{top:0,right:0,bottom:0,left:0},o)}function Zi(o,n){return n.reduce(function(e,i){return e[i]=o,e},{})}const yi={name:"arrow",enabled:!0,phase:"main",fn:function Is(o){var n,e=o.state,i=o.name,a=o.options,s=e.elements.arrow,r=e.modifiersData.popperOffsets,l=st(e.placement),u=fn(l),p=[L,J].indexOf(l)>=0?"height":"width";if(s&&r){var f=function(n,e){return xi("number"!=typeof(n="function"==typeof n?n(Object.assign({},e.rects,{placement:e.placement})):n)?n:Zi(n,Jt))}(a.padding,e),d=dn(s),g="y"===u?U:L,Z="y"===u?F:J,E=e.rects.reference[p]+e.rects.reference[u]-r[u]-e.rects.popper[p],N=r[u]-e.rects.reference[u],y=_e(s),S=y?"y"===u?y.clientHeight||0:y.clientWidth||0:0,x=S/2-d[p]/2+(E/2-N/2),I=de(f[g],x,S-d[p]-f[Z]);e.modifiersData[i]=((n={})[u]=I,n.centerOffset=I-x,n)}},effect:function Ds(o){var n=o.state,i=o.options.element,a=void 0===i?"[data-popper-arrow]":i;null!=a&&("string"==typeof a&&!(a=n.elements.popper.querySelector(a))||Ni(n.elements.popper,a)&&(n.elements.arrow=a))},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Qt(o){return o.split("-")[1]}var Ss={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Ii(o){var n,e=o.popper,i=o.popperRect,a=o.placement,s=o.variation,r=o.offsets,l=o.position,u=o.gpuAcceleration,h=o.adaptive,p=o.roundOffsets,f=o.isFixed,d=r.x,g=void 0===d?0:d,Z=r.y,E=void 0===Z?0:Z,N="function"==typeof p?p({x:g,y:E}):{x:g,y:E};g=N.x,E=N.y;var y=r.hasOwnProperty("x"),S=r.hasOwnProperty("y"),k=L,C=U,v=window;if(h){var x=_e(e),I="clientHeight",w="clientWidth";x===P(e)&&"static"!==pt(x=bt(e)).position&&"absolute"===l&&(I="scrollHeight",w="scrollWidth"),(a===U||(a===L||a===J)&&s===Vt)&&(C=F,E-=(f&&x===v&&v.visualViewport?v.visualViewport.height:x[I])-i.height,E*=u?1:-1),a!==L&&(a!==U&&a!==F||s!==Vt)||(k=J,g-=(f&&x===v&&v.visualViewport?v.visualViewport.width:x[w])-i.width,g*=u?1:-1)}var H,q=Object.assign({position:l},h&&Ss),nt=!0===p?function ks(o){var e=o.y,a=window.devicePixelRatio||1;return{x:Gt(o.x*a)/a||0,y:Gt(e*a)/a||0}}({x:g,y:E}):{x:g,y:E};return g=nt.x,E=nt.y,Object.assign({},q,u?((H={})[C]=S?"0":"",H[k]=y?"0":"",H.transform=(v.devicePixelRatio||1)<=1?"translate("+g+"px, "+E+"px)":"translate3d("+g+"px, "+E+"px, 0)",H):((n={})[C]=S?E+"px":"",n[k]=y?g+"px":"",n.transform="",n))}const gn={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function qs(o){var n=o.state,e=o.options,i=e.gpuAcceleration,a=void 0===i||i,s=e.adaptive,r=void 0===s||s,l=e.roundOffsets,u=void 0===l||l,p={placement:st(n.placement),variation:Qt(n.placement),popper:n.elements.popper,popperRect:n.rects.popper,gpuAcceleration:a,isFixed:"fixed"===n.options.strategy};null!=n.modifiersData.popperOffsets&&(n.styles.popper=Object.assign({},n.styles.popper,Ii(Object.assign({},p,{offsets:n.modifiersData.popperOffsets,position:n.options.strategy,adaptive:r,roundOffsets:u})))),null!=n.modifiersData.arrow&&(n.styles.arrow=Object.assign({},n.styles.arrow,Ii(Object.assign({},p,{offsets:n.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:u})))),n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-placement":n.placement})},data:{}};var qe={passive:!0};const Tn={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function Ms(o){var n=o.state,e=o.instance,i=o.options,a=i.scroll,s=void 0===a||a,r=i.resize,l=void 0===r||r,u=P(n.elements.popper),h=[].concat(n.scrollParents.reference,n.scrollParents.popper);return s&&h.forEach(function(p){p.addEventListener("scroll",e.update,qe)}),l&&u.addEventListener("resize",e.update,qe),function(){s&&h.forEach(function(p){p.removeEventListener("scroll",e.update,qe)}),l&&u.removeEventListener("resize",e.update,qe)}},data:{}};var ws={left:"right",right:"left",bottom:"top",top:"bottom"};function Me(o){return o.replace(/left|right|bottom|top/g,function(n){return ws[n]})}var Os={start:"end",end:"start"};function Di(o){return o.replace(/start|end/g,function(n){return Os[n]})}function bn(o){var n=P(o);return{scrollLeft:n.pageXOffset,scrollTop:n.pageYOffset}}function En(o){return Pt(bt(o)).left+bn(o).scrollLeft}function An(o){var n=pt(o);return/auto|scroll|overlay|hidden/.test(n.overflow+n.overflowY+n.overflowX)}function Si(o){return["html","body","#document"].indexOf(at(o))>=0?o.ownerDocument.body:Q(o)&&An(o)?o:Si(ke(o))}function fe(o,n){var e;void 0===n&&(n=[]);var i=Si(o),a=i===(null==(e=o.ownerDocument)?void 0:e.body),s=P(i),r=a?[s].concat(s.visualViewport||[],An(i)?i:[]):i,l=n.concat(r);return a?l:l.concat(fe(ke(r)))}function Nn(o){return Object.assign({},o,{left:o.x,top:o.y,right:o.x+o.width,bottom:o.y+o.height})}function ki(o,n,e){return n===cn?Nn(function Ks(o,n){var e=P(o),i=bt(o),a=e.visualViewport,s=i.clientWidth,r=i.clientHeight,l=0,u=0;if(a){s=a.width,r=a.height;var h=Ai();(h||!h&&"fixed"===n)&&(l=a.offsetLeft,u=a.offsetTop)}return{width:s,height:r,x:l+En(o),y:u}}(o,e)):St(n)?function Ls(o,n){var e=Pt(o,!1,"fixed"===n);return e.top=e.top+o.clientTop,e.left=e.left+o.clientLeft,e.bottom=e.top+o.clientHeight,e.right=e.left+o.clientWidth,e.width=o.clientWidth,e.height=o.clientHeight,e.x=e.left,e.y=e.top,e}(n,e):Nn(function Us(o){var n,e=bt(o),i=bn(o),a=null==(n=o.ownerDocument)?void 0:n.body,s=kt(e.scrollWidth,e.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),r=kt(e.scrollHeight,e.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0),l=-i.scrollLeft+En(o),u=-i.scrollTop;return"rtl"===pt(a||e).direction&&(l+=kt(e.clientWidth,a?a.clientWidth:0)-s),{width:s,height:r,x:l,y:u}}(bt(o)))}function qi(o){var u,n=o.reference,e=o.element,i=o.placement,a=i?st(i):null,s=i?Qt(i):null,r=n.x+n.width/2-e.width/2,l=n.y+n.height/2-e.height/2;switch(a){case U:u={x:r,y:n.y-e.height};break;case F:u={x:r,y:n.y+n.height};break;case J:u={x:n.x+n.width,y:l};break;case L:u={x:n.x-e.width,y:l};break;default:u={x:n.x,y:n.y}}var h=a?fn(a):null;if(null!=h){var p="y"===h?"height":"width";switch(s){case Dt:u[h]=u[h]-(n[p]/2-e[p]/2);break;case Vt:u[h]=u[h]+(n[p]/2-e[p]/2)}}return u}function Rt(o,n){void 0===n&&(n={});var i=n.placement,a=void 0===i?o.placement:i,s=n.strategy,r=void 0===s?o.strategy:s,l=n.boundary,u=void 0===l?ci:l,h=n.rootBoundary,p=void 0===h?cn:h,f=n.elementContext,d=void 0===f?$t:f,g=n.altBoundary,Z=void 0!==g&&g,E=n.padding,N=void 0===E?0:E,y=xi("number"!=typeof N?N:Zi(N,Jt)),k=o.rects.popper,C=o.elements[Z?d===$t?ui:$t:d],v=function Bs(o,n,e,i){var a="clippingParents"===n?function Hs(o){var n=fe(ke(o)),i=["absolute","fixed"].indexOf(pt(o).position)>=0&&Q(o)?_e(o):o;return St(i)?n.filter(function(a){return St(a)&&Ni(a,i)&&"body"!==at(a)}):[]}(o):[].concat(n),s=[].concat(a,[e]),l=s.reduce(function(u,h){var p=ki(o,h,i);return u.top=kt(p.top,u.top),u.right=Se(p.right,u.right),u.bottom=Se(p.bottom,u.bottom),u.left=kt(p.left,u.left),u},ki(o,s[0],i));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}(St(C)?C:C.contextElement||bt(o.elements.popper),u,p,r),x=Pt(o.elements.reference),I=qi({reference:x,element:k,strategy:"absolute",placement:a}),w=Nn(Object.assign({},k,I)),O=d===$t?w:x,K={top:v.top-O.top+y.top,bottom:O.bottom-v.bottom+y.bottom,left:v.left-O.left+y.left,right:O.right-v.right+y.right},q=o.modifiersData.offset;if(d===$t&&q){var nt=q[a];Object.keys(K).forEach(function(H){var Kt=[J,F].indexOf(H)>=0?1:-1,Ut=[U,F].indexOf(H)>=0?"y":"x";K[H]+=nt[Ut]*Kt})}return K}const Mi={name:"flip",enabled:!0,phase:"main",fn:function Js(o){var n=o.state,e=o.options,i=o.name;if(!n.modifiersData[i]._skip){for(var a=e.mainAxis,s=void 0===a||a,r=e.altAxis,l=void 0===r||r,u=e.fallbackPlacements,h=e.padding,p=e.boundary,f=e.rootBoundary,d=e.altBoundary,g=e.flipVariations,Z=void 0===g||g,E=e.allowedAutoPlacements,N=n.options.placement,y=st(N),k=u||(y!==N&&Z?function Fs(o){if(st(o)===De)return[];var n=Me(o);return[Di(o),n,Di(n)]}(N):[Me(N)]),C=[N].concat(k).reduce(function(se,yt){return se.concat(st(yt)===De?function Ys(o,n){void 0===n&&(n={});var a=n.boundary,s=n.rootBoundary,r=n.padding,l=n.flipVariations,u=n.allowedAutoPlacements,h=void 0===u?hn:u,p=Qt(n.placement),f=p?l?un:un.filter(function(Z){return Qt(Z)===p}):Jt,d=f.filter(function(Z){return h.indexOf(Z)>=0});0===d.length&&(d=f);var g=d.reduce(function(Z,E){return Z[E]=Rt(o,{placement:E,boundary:a,rootBoundary:s,padding:r})[st(E)],Z},{});return Object.keys(g).sort(function(Z,E){return g[Z]-g[E]})}(n,{placement:yt,boundary:p,rootBoundary:f,padding:h,flipVariations:Z,allowedAutoPlacements:E}):yt)},[]),v=n.rects.reference,x=n.rects.popper,I=new Map,w=!0,O=C[0],K=0;K<C.length;K++){var q=C[K],nt=st(q),H=Qt(q)===Dt,Kt=[U,F].indexOf(nt)>=0,Ut=Kt?"width":"height",V=Rt(n,{placement:q,boundary:p,rootBoundary:f,altBoundary:d,padding:h}),it=Kt?H?J:L:H?F:U;v[Ut]>x[Ut]&&(it=Me(it));var je=Me(it),Lt=[];if(s&&Lt.push(V[nt]<=0),l&&Lt.push(V[it]<=0,V[je]<=0),Lt.every(function(se){return se})){O=q,w=!1;break}I.set(q,Lt)}if(w)for(var Rn=function(yt){var xe=C.find(function(tn){var Ht=I.get(tn);if(Ht)return Ht.slice(0,yt).every(function(Wn){return Wn})});if(xe)return O=xe,"break"},ve=Z?3:1;ve>0&&"break"!==Rn(ve);ve--);n.placement!==O&&(n.modifiersData[i]._skip=!0,n.placement=O,n.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function wi(o,n,e){return void 0===e&&(e={x:0,y:0}),{top:o.top-n.height-e.y,right:o.right-n.width+e.x,bottom:o.bottom-n.height+e.y,left:o.left-n.width-e.x}}function Oi(o){return[U,J,F,L].some(function(n){return o[n]>=0})}const Ki={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function Vs(o){var n=o.state,e=o.name,i=n.rects.reference,a=n.rects.popper,s=n.modifiersData.preventOverflow,r=Rt(n,{elementContext:"reference"}),l=Rt(n,{altBoundary:!0}),u=wi(r,i),h=wi(l,a,s),p=Oi(u),f=Oi(h);n.modifiersData[e]={referenceClippingOffsets:u,popperEscapeOffsets:h,isReferenceHidden:p,hasPopperEscaped:f},n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-reference-hidden":p,"data-popper-escaped":f})}},Ui={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function Gs(o){var n=o.state,i=o.name,a=o.options.offset,s=void 0===a?[0,0]:a,r=hn.reduce(function(p,f){return p[f]=function $s(o,n,e){var i=st(o),a=[L,U].indexOf(i)>=0?-1:1,s="function"==typeof e?e(Object.assign({},n,{placement:o})):e,r=s[0],l=s[1];return r=r||0,l=(l||0)*a,[L,J].indexOf(i)>=0?{x:l,y:r}:{x:r,y:l}}(f,n.rects,s),p},{}),l=r[n.placement],h=l.y;null!=n.modifiersData.popperOffsets&&(n.modifiersData.popperOffsets.x+=l.x,n.modifiersData.popperOffsets.y+=h),n.modifiersData[i]=r}},Cn={name:"popperOffsets",enabled:!0,phase:"read",fn:function Ps(o){var n=o.state;n.modifiersData[o.name]=qi({reference:n.rects.reference,element:n.rects.popper,strategy:"absolute",placement:n.placement})},data:{}},Li={name:"preventOverflow",enabled:!0,phase:"main",fn:function Rs(o){var n=o.state,e=o.options,i=o.name,a=e.mainAxis,s=void 0===a||a,r=e.altAxis,l=void 0!==r&&r,d=e.tether,g=void 0===d||d,Z=e.tetherOffset,E=void 0===Z?0:Z,N=Rt(n,{boundary:e.boundary,rootBoundary:e.rootBoundary,padding:e.padding,altBoundary:e.altBoundary}),y=st(n.placement),S=Qt(n.placement),k=!S,C=fn(y),v=function Qs(o){return"x"===o?"y":"x"}(C),x=n.modifiersData.popperOffsets,I=n.rects.reference,w=n.rects.popper,O="function"==typeof E?E(Object.assign({},n.rects,{placement:n.placement})):E,K="number"==typeof O?{mainAxis:O,altAxis:O}:Object.assign({mainAxis:0,altAxis:0},O),q=n.modifiersData.offset?n.modifiersData.offset[n.placement]:null,nt={x:0,y:0};if(x){if(s){var H,Kt="y"===C?U:L,Ut="y"===C?F:J,V="y"===C?"height":"width",it=x[C],je=it+N[Kt],Lt=it-N[Ut],ze=g?-w[V]/2:0,Rn=S===Dt?I[V]:w[V],ve=S===Dt?-w[V]:-I[V],Xe=n.elements.arrow,se=g&&Xe?dn(Xe):{width:0,height:0},yt=n.modifiersData["arrow#persistent"]?n.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},xe=yt[Kt],tn=yt[Ut],Ht=de(0,I[V],se[V]),Wn=k?I[V]/2-ze-Ht-xe-K.mainAxis:Rn-Ht-xe-K.mainAxis,mm=k?-I[V]/2+ze+Ht+tn+K.mainAxis:ve+Ht+tn+K.mainAxis,jn=n.elements.arrow&&_e(n.elements.arrow),$o=null!=(H=q?.[C])?H:0,fm=it+mm-$o,Go=de(g?Se(je,it+Wn-$o-(jn?"y"===C?jn.clientTop||0:jn.clientLeft||0:0)):je,it,g?kt(Lt,fm):Lt);x[C]=Go,nt[C]=Go-it}if(l){var Po,Bt=x[v],en="y"===v?"height":"width",Qo=Bt+N["x"===C?U:L],Ro=Bt-N["x"===C?F:J],zn=-1!==[U,L].indexOf(y),Wo=null!=(Po=q?.[v])?Po:0,jo=zn?Qo:Bt-I[en]-w[en]-Wo+K.altAxis,zo=zn?Bt+I[en]+w[en]-Wo-K.altAxis:Ro,Xo=g&&zn?function Zs(o,n,e){var i=de(o,n,e);return i>e?e:i}(jo,Bt,zo):de(g?jo:Qo,Bt,g?zo:Ro);x[v]=Xo,nt[v]=Xo-Bt}n.modifiersData[i]=nt}},requiresIfExists:["offset"]};function Xs(o,n,e){void 0===e&&(e=!1);var i=Q(n),a=Q(n)&&function zs(o){var n=o.getBoundingClientRect(),e=Gt(n.width)/o.offsetWidth||1,i=Gt(n.height)/o.offsetHeight||1;return 1!==e||1!==i}(n),s=bt(n),r=Pt(o,a,e),l={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(i||!i&&!e)&&(("body"!==at(n)||An(s))&&(l=function js(o){return o!==P(o)&&Q(o)?function Ws(o){return{scrollLeft:o.scrollLeft,scrollTop:o.scrollTop}}(o):bn(o)}(n)),Q(n)?((u=Pt(n,!0)).x+=n.clientLeft,u.y+=n.clientTop):s&&(u.x=En(s))),{x:r.left+l.scrollLeft-u.x,y:r.top+l.scrollTop-u.y,width:r.width,height:r.height}}function tr(o){var n=new Map,e=new Set,i=[];function a(s){e.add(s.name),[].concat(s.requires||[],s.requiresIfExists||[]).forEach(function(l){if(!e.has(l)){var u=n.get(l);u&&a(u)}}),i.push(s)}return o.forEach(function(s){n.set(s.name,s)}),o.forEach(function(s){e.has(s.name)||a(s)}),i}function nr(o){var n;return function(){return n||(n=new Promise(function(e){Promise.resolve().then(function(){n=void 0,e(o())})})),n}}var Hi={placement:"bottom",modifiers:[],strategy:"absolute"};function Bi(){for(var o=arguments.length,n=new Array(o),e=0;e<o;e++)n[e]=arguments[e];return!n.some(function(i){return!(i&&"function"==typeof i.getBoundingClientRect)})}function we(o){void 0===o&&(o={});var e=o.defaultModifiers,i=void 0===e?[]:e,a=o.defaultOptions,s=void 0===a?Hi:a;return function(l,u,h){void 0===h&&(h=s);var p={placement:"bottom",orderedModifiers:[],options:Object.assign({},Hi,s),modifiersData:{},elements:{reference:l,popper:u},attributes:{},styles:{}},f=[],d=!1,g={state:p,setOptions:function(y){var S="function"==typeof y?y(p.options):y;E(),p.options=Object.assign({},s,p.options,S),p.scrollParents={reference:St(l)?fe(l):l.contextElement?fe(l.contextElement):[],popper:fe(u)};var k=function er(o){var n=tr(o);return Ei.reduce(function(e,i){return e.concat(n.filter(function(a){return a.phase===i}))},[])}(function ir(o){var n=o.reduce(function(e,i){var a=e[i.name];return e[i.name]=a?Object.assign({},a,i,{options:Object.assign({},a.options,i.options),data:Object.assign({},a.data,i.data)}):i,e},{});return Object.keys(n).map(function(e){return n[e]})}([].concat(i,p.options.modifiers)));return p.orderedModifiers=k.filter(function(q){return q.enabled}),function Z(){p.orderedModifiers.forEach(function(N){var S=N.options,C=N.effect;if("function"==typeof C){var v=C({state:p,name:N.name,instance:g,options:void 0===S?{}:S});f.push(v||function(){})}})}(),g.update()},forceUpdate:function(){if(!d){var y=p.elements,S=y.reference,k=y.popper;if(Bi(S,k)){p.rects={reference:Xs(S,_e(k),"fixed"===p.options.strategy),popper:dn(k)},p.reset=!1,p.placement=p.options.placement,p.orderedModifiers.forEach(function(q){return p.modifiersData[q.name]=Object.assign({},q.data)});for(var v=0;v<p.orderedModifiers.length;v++)if(!0!==p.reset){var x=p.orderedModifiers[v],I=x.fn,w=x.options;"function"==typeof I&&(p=I({state:p,options:void 0===w?{}:w,name:x.name,instance:g})||p)}else p.reset=!1,v=-1}}},update:nr(function(){return new Promise(function(N){g.forceUpdate(),N(p)})}),destroy:function(){E(),d=!0}};if(!Bi(l,u))return g;function E(){f.forEach(function(N){return N()}),f=[]}return g.setOptions(h).then(function(N){!d&&h.onFirstUpdate&&h.onFirstUpdate(N)}),g}}var or=we(),vn=we({defaultModifiers:[Tn,Cn,gn,mn,Ui,Mi,Li,yi,Ki]}),rr=we({defaultModifiers:[Tn,Cn,gn,mn]});const xn="transitionend",Yi=o=>{let n=o.getAttribute("data-bs-target");if(!n||"#"===n){let e=o.getAttribute("href");if(!e||!e.includes("#")&&!e.startsWith("."))return null;e.includes("#")&&!e.startsWith("#")&&(e=`#${e.split("#")[1]}`),n=e&&"#"!==e?e.trim():null}return n},Fi=o=>{const n=Yi(o);return n&&document.querySelector(n)?n:null},mt=o=>{const n=Yi(o);return n?document.querySelector(n):null},Ji=o=>{o.dispatchEvent(new Event(xn))},_t=o=>!(!o||"object"!=typeof o)&&(typeof o.jquery<"u"&&(o=o[0]),typeof o.nodeType<"u"),Et=o=>_t(o)?o.jquery?o[0]:o:"string"==typeof o&&o.length>0?document.querySelector(o):null,Wt=o=>{if(!_t(o)||0===o.getClientRects().length)return!1;const n="visible"===getComputedStyle(o).getPropertyValue("visibility"),e=o.closest("details:not([open])");if(!e)return n;if(e!==o){const i=o.closest("summary");if(i&&i.parentNode!==e||null===i)return!1}return n},At=o=>!(o&&o.nodeType===Node.ELEMENT_NODE&&!o.classList.contains("disabled"))||(typeof o.disabled<"u"?o.disabled:o.hasAttribute("disabled")&&"false"!==o.getAttribute("disabled")),Vi=o=>{if(!document.documentElement.attachShadow)return null;if("function"==typeof o.getRootNode){const n=o.getRootNode();return n instanceof ShadowRoot?n:null}return o instanceof ShadowRoot?o:o.parentNode?Vi(o.parentNode):null},Oe=()=>{},$i=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,Zn=[],R=()=>"rtl"===document.documentElement.dir,W=o=>{(o=>{"loading"===document.readyState?(Zn.length||document.addEventListener("DOMContentLoaded",()=>{for(const n of Zn)n()}),Zn.push(o)):o()})(()=>{const n=$i();if(n){const e=o.NAME,i=n.fn[e];n.fn[e]=o.jQueryInterface,n.fn[e].Constructor=o,n.fn[e].noConflict=()=>(n.fn[e]=i,o.jQueryInterface)}})},dt=o=>{"function"==typeof o&&o()},Gi=(o,n,e=!0)=>{if(!e)return void dt(o);const a=(o=>{if(!o)return 0;let{transitionDuration:n,transitionDelay:e}=window.getComputedStyle(o);const i=Number.parseFloat(n),a=Number.parseFloat(e);return i||a?(n=n.split(",")[0],e=e.split(",")[0],1e3*(Number.parseFloat(n)+Number.parseFloat(e))):0})(n)+5;let s=!1;const r=({target:l})=>{l===n&&(s=!0,n.removeEventListener(xn,r),dt(o))};n.addEventListener(xn,r),setTimeout(()=>{s||Ji(n)},a)},yn=(o,n,e,i)=>{const a=o.length;let s=o.indexOf(n);return-1===s?!e&&i?o[a-1]:o[0]:(s+=e?1:-1,i&&(s=(s+a)%a),o[Math.max(0,Math.min(s,a-1))])},_r=/[^.]*(?=\..*)\.|.*/,dr=/\..*/,fr=/::\d+$/,In={};let Pi=1;const Qi={mouseenter:"mouseover",mouseleave:"mouseout"},gr=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Ri(o,n){return n&&`${n}::${Pi++}`||o.uidEvent||Pi++}function Wi(o){const n=Ri(o);return o.uidEvent=n,In[n]=In[n]||{},In[n]}function ji(o,n,e=null){return Object.values(o).find(i=>i.callable===n&&i.delegationSelector===e)}function zi(o,n,e){const i="string"==typeof n,a=i?e:n||e;let s=to(o);return gr.has(s)||(s=o),[i,a,s]}function Xi(o,n,e,i,a){if("string"!=typeof n||!o)return;let[s,r,l]=zi(n,e,i);var Z;n in Qi&&(Z=r,r=function(E){if(!E.relatedTarget||E.relatedTarget!==E.delegateTarget&&!E.delegateTarget.contains(E.relatedTarget))return Z.call(this,E)});const u=Wi(o),h=u[l]||(u[l]={}),p=ji(h,r,s?e:null);if(p)return void(p.oneOff=p.oneOff&&a);const f=Ri(r,n.replace(_r,"")),d=s?function br(o,n,e){return function i(a){const s=o.querySelectorAll(n);for(let{target:r}=a;r&&r!==this;r=r.parentNode)for(const l of s)if(l===r)return Sn(a,{delegateTarget:r}),i.oneOff&&m.off(o,a.type,n,e),e.apply(r,[a])}}(o,e,r):function Tr(o,n){return function e(i){return Sn(i,{delegateTarget:o}),e.oneOff&&m.off(o,i.type,n),n.apply(o,[i])}}(o,r);d.delegationSelector=s?e:null,d.callable=r,d.oneOff=a,d.uidEvent=f,h[f]=d,o.addEventListener(l,d,s)}function Dn(o,n,e,i,a){const s=ji(n[e],i,a);s&&(o.removeEventListener(e,s,Boolean(a)),delete n[e][s.uidEvent])}function Er(o,n,e,i){const a=n[e]||{};for(const s of Object.keys(a))if(s.includes(i)){const r=a[s];Dn(o,n,e,r.callable,r.delegationSelector)}}function to(o){return o=o.replace(dr,""),Qi[o]||o}const m={on(o,n,e,i){Xi(o,n,e,i,!1)},one(o,n,e,i){Xi(o,n,e,i,!0)},off(o,n,e,i){if("string"!=typeof n||!o)return;const[a,s,r]=zi(n,e,i),l=r!==n,u=Wi(o),h=u[r]||{},p=n.startsWith(".");if(typeof s<"u"){if(!Object.keys(h).length)return;Dn(o,u,r,s,a?e:null)}else{if(p)for(const f of Object.keys(u))Er(o,u,f,n.slice(1));for(const f of Object.keys(h)){const d=f.replace(fr,"");if(!l||n.includes(d)){const g=h[f];Dn(o,u,r,g.callable,g.delegationSelector)}}}},trigger(o,n,e){if("string"!=typeof n||!o)return null;const i=$i();let r=null,l=!0,u=!0,h=!1;n!==to(n)&&i&&(r=i.Event(n,e),i(o).trigger(r),l=!r.isPropagationStopped(),u=!r.isImmediatePropagationStopped(),h=r.isDefaultPrevented());let p=new Event(n,{bubbles:l,cancelable:!0});return p=Sn(p,e),h&&p.preventDefault(),u&&o.dispatchEvent(p),p.defaultPrevented&&r&&r.preventDefault(),p}};function Sn(o,n){for(const[e,i]of Object.entries(n||{}))try{o[e]=i}catch{Object.defineProperty(o,e,{configurable:!0,get:()=>i})}return o}const Nt=new Map,kn={set(o,n,e){Nt.has(o)||Nt.set(o,new Map);const i=Nt.get(o);i.has(n)||0===i.size?i.set(n,e):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(i.keys())[0]}.`)},get:(o,n)=>Nt.has(o)&&Nt.get(o).get(n)||null,remove(o,n){if(!Nt.has(o))return;const e=Nt.get(o);e.delete(n),0===e.size&&Nt.delete(o)}};function eo(o){if("true"===o)return!0;if("false"===o)return!1;if(o===Number(o).toString())return Number(o);if(""===o||"null"===o)return null;if("string"!=typeof o)return o;try{return JSON.parse(decodeURIComponent(o))}catch{return o}}function qn(o){return o.replace(/[A-Z]/g,n=>`-${n.toLowerCase()}`)}const ft={setDataAttribute(o,n,e){o.setAttribute(`data-bs-${qn(n)}`,e)},removeDataAttribute(o,n){o.removeAttribute(`data-bs-${qn(n)}`)},getDataAttributes(o){if(!o)return{};const n={},e=Object.keys(o.dataset).filter(i=>i.startsWith("bs")&&!i.startsWith("bsConfig"));for(const i of e){let a=i.replace(/^bs/,"");a=a.charAt(0).toLowerCase()+a.slice(1,a.length),n[a]=eo(o.dataset[i])}return n},getDataAttribute:(o,n)=>eo(o.getAttribute(`data-bs-${qn(n)}`))};class Te{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(n){return n=this._mergeConfigObj(n),n=this._configAfterMerge(n),this._typeCheckConfig(n),n}_configAfterMerge(n){return n}_mergeConfigObj(n,e){const i=_t(e)?ft.getDataAttribute(e,"config"):{};return{...this.constructor.Default,..."object"==typeof i?i:{},..._t(e)?ft.getDataAttributes(e):{},..."object"==typeof n?n:{}}}_typeCheckConfig(n,e=this.constructor.DefaultType){for(const i of Object.keys(e)){const a=e[i],s=n[i],r=_t(s)?"element":null==(o=s)?`${o}`:Object.prototype.toString.call(o).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(a).test(r))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${i}" provided type "${r}" but expected type "${a}".`)}var o}}class tt extends Te{constructor(n,e){super(),(n=Et(n))&&(this._element=n,this._config=this._getConfig(e),kn.set(this._element,this.constructor.DATA_KEY,this))}dispose(){kn.remove(this._element,this.constructor.DATA_KEY),m.off(this._element,this.constructor.EVENT_KEY);for(const n of Object.getOwnPropertyNames(this))this[n]=null}_queueCallback(n,e,i=!0){Gi(n,e,i)}_getConfig(n){return n=this._mergeConfigObj(n,this._element),n=this._configAfterMerge(n),this._typeCheckConfig(n),n}static getInstance(n){return kn.get(Et(n),this.DATA_KEY)}static getOrCreateInstance(n,e={}){return this.getInstance(n)||new this(n,"object"==typeof e?e:null)}static get VERSION(){return"5.2.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(n){return`${n}${this.EVENT_KEY}`}}const Ke=(o,n="hide")=>{const i=o.NAME;m.on(document,`click.dismiss${o.EVENT_KEY}`,`[data-bs-dismiss="${i}"]`,function(a){if(["A","AREA"].includes(this.tagName)&&a.preventDefault(),At(this))return;const s=mt(this)||this.closest(`.${i}`);o.getOrCreateInstance(s)[n]()})},no=".bs.alert",Cr=`close${no}`,vr=`closed${no}`;class Ue extends tt{static get NAME(){return"alert"}close(){if(m.trigger(this._element,Cr).defaultPrevented)return;this._element.classList.remove("show");const e=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,e)}_destroyElement(){this._element.remove(),m.trigger(this._element,vr),this.dispose()}static jQueryInterface(n){return this.each(function(){const e=Ue.getOrCreateInstance(this);if("string"==typeof n){if(void 0===e[n]||n.startsWith("_")||"constructor"===n)throw new TypeError(`No method named "${n}"`);e[n](this)}})}}Ke(Ue,"close"),W(Ue);const io='[data-bs-toggle="button"]';class Le extends tt{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(n){return this.each(function(){const e=Le.getOrCreateInstance(this);"toggle"===n&&e[n]()})}}m.on(document,"click.bs.button.data-api",io,o=>{o.preventDefault();const n=o.target.closest(io);Le.getOrCreateInstance(n).toggle()}),W(Le);const T={find:(o,n=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(n,o)),findOne:(o,n=document.documentElement)=>Element.prototype.querySelector.call(n,o),children:(o,n)=>[].concat(...o.children).filter(e=>e.matches(n)),parents(o,n){const e=[];let i=o.parentNode.closest(n);for(;i;)e.push(i),i=i.parentNode.closest(n);return e},prev(o,n){let e=o.previousElementSibling;for(;e;){if(e.matches(n))return[e];e=e.previousElementSibling}return[]},next(o,n){let e=o.nextElementSibling;for(;e;){if(e.matches(n))return[e];e=e.nextElementSibling}return[]},focusableChildren(o){const n=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(e=>`${e}:not([tabindex^="-"])`).join(",");return this.find(n,o).filter(e=>!At(e)&&Wt(e))}},jt=".bs.swipe",Mr=`touchstart${jt}`,wr=`touchmove${jt}`,Or=`touchend${jt}`,Kr=`pointerdown${jt}`,Ur=`pointerup${jt}`,Fr={endCallback:null,leftCallback:null,rightCallback:null},Jr={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class He extends Te{constructor(n,e){super(),this._element=n,n&&He.isSupported()&&(this._config=this._getConfig(e),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return Fr}static get DefaultType(){return Jr}static get NAME(){return"swipe"}dispose(){m.off(this._element,jt)}_start(n){this._supportPointerEvents?this._eventIsPointerPenTouch(n)&&(this._deltaX=n.clientX):this._deltaX=n.touches[0].clientX}_end(n){this._eventIsPointerPenTouch(n)&&(this._deltaX=n.clientX-this._deltaX),this._handleSwipe(),dt(this._config.endCallback)}_move(n){this._deltaX=n.touches&&n.touches.length>1?0:n.touches[0].clientX-this._deltaX}_handleSwipe(){const n=Math.abs(this._deltaX);if(n<=40)return;const e=n/this._deltaX;this._deltaX=0,e&&dt(e>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(m.on(this._element,Kr,n=>this._start(n)),m.on(this._element,Ur,n=>this._end(n)),this._element.classList.add("pointer-event")):(m.on(this._element,Mr,n=>this._start(n)),m.on(this._element,wr,n=>this._move(n)),m.on(this._element,Or,n=>this._end(n)))}_eventIsPointerPenTouch(n){return this._supportPointerEvents&&("pen"===n.pointerType||"touch"===n.pointerType)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const Ct=".bs.carousel",oo=".data-api",be="next",zt="prev",Xt="left",Be="right",Qr=`slide${Ct}`,Mn=`slid${Ct}`,Rr=`keydown${Ct}`,Wr=`mouseenter${Ct}`,jr=`mouseleave${Ct}`,zr=`dragstart${Ct}`,Xr=`load${Ct}${oo}`,tl=`click${Ct}${oo}`,ao="carousel",Ye="active",so=".active",ro=".carousel-item",sl=so+ro,hl={ArrowLeft:Be,ArrowRight:Xt},pl={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},ml={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Ee extends tt{constructor(n,e){super(n,e),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=T.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===ao&&this.cycle()}static get Default(){return pl}static get DefaultType(){return ml}static get NAME(){return"carousel"}next(){this._slide(be)}nextWhenVisible(){!document.hidden&&Wt(this._element)&&this.next()}prev(){this._slide(zt)}pause(){this._isSliding&&Ji(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding)return void m.one(this._element,Mn,()=>this.cycle());this.cycle()}}to(n){const e=this._getItems();if(n>e.length-1||n<0)return;if(this._isSliding)return void m.one(this._element,Mn,()=>this.to(n));const i=this._getItemIndex(this._getActive());i!==n&&this._slide(n>i?be:zt,e[n])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(n){return n.defaultInterval=n.interval,n}_addEventListeners(){this._config.keyboard&&m.on(this._element,Rr,n=>this._keydown(n)),"hover"===this._config.pause&&(m.on(this._element,Wr,()=>this.pause()),m.on(this._element,jr,()=>this._maybeEnableCycle())),this._config.touch&&He.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const i of T.find(".carousel-item img",this._element))m.on(i,zr,a=>a.preventDefault());this._swipeHelper=new He(this._element,{leftCallback:()=>this._slide(this._directionToOrder(Xt)),rightCallback:()=>this._slide(this._directionToOrder(Be)),endCallback:()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}})}_keydown(n){if(/input|textarea/i.test(n.target.tagName))return;const e=hl[n.key];e&&(n.preventDefault(),this._slide(this._directionToOrder(e)))}_getItemIndex(n){return this._getItems().indexOf(n)}_setActiveIndicatorElement(n){if(!this._indicatorsElement)return;const e=T.findOne(so,this._indicatorsElement);e.classList.remove(Ye),e.removeAttribute("aria-current");const i=T.findOne(`[data-bs-slide-to="${n}"]`,this._indicatorsElement);i&&(i.classList.add(Ye),i.setAttribute("aria-current","true"))}_updateInterval(){const n=this._activeElement||this._getActive();if(!n)return;const e=Number.parseInt(n.getAttribute("data-bs-interval"),10);this._config.interval=e||this._config.defaultInterval}_slide(n,e=null){if(this._isSliding)return;const i=this._getActive(),a=n===be,s=e||yn(this._getItems(),i,a,this._config.wrap);if(s===i)return;const r=this._getItemIndex(s),l=g=>m.trigger(this._element,g,{relatedTarget:s,direction:this._orderToDirection(n),from:this._getItemIndex(i),to:r});if(l(Qr).defaultPrevented||!i||!s)return;const h=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(r),this._activeElement=s;const p=a?"carousel-item-start":"carousel-item-end",f=a?"carousel-item-next":"carousel-item-prev";s.classList.add(f),i.classList.add(p),s.classList.add(p),this._queueCallback(()=>{s.classList.remove(p,f),s.classList.add(Ye),i.classList.remove(Ye,f,p),this._isSliding=!1,l(Mn)},i,this._isAnimated()),h&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return T.findOne(sl,this._element)}_getItems(){return T.find(ro,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(n){return R()?n===Xt?zt:be:n===Xt?be:zt}_orderToDirection(n){return R()?n===zt?Xt:Be:n===zt?Be:Xt}static jQueryInterface(n){return this.each(function(){const e=Ee.getOrCreateInstance(this,n);if("number"!=typeof n){if("string"==typeof n){if(void 0===e[n]||n.startsWith("_")||"constructor"===n)throw new TypeError(`No method named "${n}"`);e[n]()}}else e.to(n)})}}m.on(document,tl,"[data-bs-slide], [data-bs-slide-to]",function(o){const n=mt(this);if(!n||!n.classList.contains(ao))return;o.preventDefault();const e=Ee.getOrCreateInstance(n),i=this.getAttribute("data-bs-slide-to");return i?(e.to(i),void e._maybeEnableCycle()):"next"===ft.getDataAttribute(this,"slide")?(e.next(),void e._maybeEnableCycle()):(e.prev(),void e._maybeEnableCycle())}),m.on(window,Xr,()=>{const o=T.find('[data-bs-ride="carousel"]');for(const n of o)Ee.getOrCreateInstance(n)}),W(Ee);const Ae=".bs.collapse",fl=`show${Ae}`,gl=`shown${Ae}`,Tl=`hide${Ae}`,bl=`hidden${Ae}`,El=`click${Ae}.data-api`,wn="show",te="collapse",Fe="collapsing",Nl=`:scope .${te} .${te}`,On='[data-bs-toggle="collapse"]',yl={parent:null,toggle:!0},Il={parent:"(null|element)",toggle:"boolean"};class Ne extends tt{constructor(n,e){super(n,e),this._isTransitioning=!1,this._triggerArray=[];const i=T.find(On);for(const a of i){const s=Fi(a),r=T.find(s).filter(l=>l===this._element);null!==s&&r.length&&this._triggerArray.push(a)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return yl}static get DefaultType(){return Il}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let n=[];if(this._config.parent&&(n=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(l=>l!==this._element).map(l=>Ne.getOrCreateInstance(l,{toggle:!1}))),n.length&&n[0]._isTransitioning||m.trigger(this._element,fl).defaultPrevented)return;for(const l of n)l.hide();const i=this._getDimension();this._element.classList.remove(te),this._element.classList.add(Fe),this._element.style[i]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const r=`scroll${i[0].toUpperCase()+i.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Fe),this._element.classList.add(te,wn),this._element.style[i]="",m.trigger(this._element,gl)},this._element,!0),this._element.style[i]=`${this._element[r]}px`}hide(){if(this._isTransitioning||!this._isShown()||m.trigger(this._element,Tl).defaultPrevented)return;const e=this._getDimension();this._element.style[e]=`${this._element.getBoundingClientRect()[e]}px`,this._element.classList.add(Fe),this._element.classList.remove(te,wn);for(const a of this._triggerArray){const s=mt(a);s&&!this._isShown(s)&&this._addAriaAndCollapsedClass([a],!1)}this._isTransitioning=!0,this._element.style[e]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Fe),this._element.classList.add(te),m.trigger(this._element,bl)},this._element,!0)}_isShown(n=this._element){return n.classList.contains(wn)}_configAfterMerge(n){return n.toggle=Boolean(n.toggle),n.parent=Et(n.parent),n}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const n=this._getFirstLevelChildren(On);for(const e of n){const i=mt(e);i&&this._addAriaAndCollapsedClass([e],this._isShown(i))}}_getFirstLevelChildren(n){const e=T.find(Nl,this._config.parent);return T.find(n,this._config.parent).filter(i=>!e.includes(i))}_addAriaAndCollapsedClass(n,e){if(n.length)for(const i of n)i.classList.toggle("collapsed",!e),i.setAttribute("aria-expanded",e)}static jQueryInterface(n){const e={};return"string"==typeof n&&/show|hide/.test(n)&&(e.toggle=!1),this.each(function(){const i=Ne.getOrCreateInstance(this,e);if("string"==typeof n){if(typeof i[n]>"u")throw new TypeError(`No method named "${n}"`);i[n]()}})}}m.on(document,El,On,function(o){("A"===o.target.tagName||o.delegateTarget&&"A"===o.delegateTarget.tagName)&&o.preventDefault();const n=Fi(this),e=T.find(n);for(const i of e)Ne.getOrCreateInstance(i,{toggle:!1}).toggle()}),W(Ne);const lo="dropdown",qt=".bs.dropdown",Kn=".data-api",Sl="ArrowUp",uo="ArrowDown",ql=`hide${qt}`,Ml=`hidden${qt}`,wl=`show${qt}`,Ol=`shown${qt}`,ho=`click${qt}${Kn}`,po=`keydown${qt}${Kn}`,Kl=`keyup${qt}${Kn}`,ee="show",Mt='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Fl=`${Mt}.${ee}`,Je=".dropdown-menu",Gl=R()?"top-end":"top-start",Pl=R()?"top-start":"top-end",Ql=R()?"bottom-end":"bottom-start",Rl=R()?"bottom-start":"bottom-end",Wl=R()?"left-start":"right-start",jl=R()?"right-start":"left-start",tc={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},ec={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class rt extends tt{constructor(n,e){super(n,e),this._popper=null,this._parent=this._element.parentNode,this._menu=T.next(this._element,Je)[0]||T.prev(this._element,Je)[0]||T.findOne(Je,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return tc}static get DefaultType(){return ec}static get NAME(){return lo}toggle(){return this._isShown()?this.hide():this.show()}show(){if(At(this._element)||this._isShown())return;const n={relatedTarget:this._element};if(!m.trigger(this._element,wl,n).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const i of[].concat(...document.body.children))m.on(i,"mouseover",Oe);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(ee),this._element.classList.add(ee),m.trigger(this._element,Ol,n)}}hide(){!At(this._element)&&this._isShown()&&this._completeHide({relatedTarget:this._element})}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(n){if(!m.trigger(this._element,ql,n).defaultPrevented){if("ontouchstart"in document.documentElement)for(const i of[].concat(...document.body.children))m.off(i,"mouseover",Oe);this._popper&&this._popper.destroy(),this._menu.classList.remove(ee),this._element.classList.remove(ee),this._element.setAttribute("aria-expanded","false"),ft.removeDataAttribute(this._menu,"popper"),m.trigger(this._element,Ml,n)}}_getConfig(n){if("object"==typeof(n=super._getConfig(n)).reference&&!_t(n.reference)&&"function"!=typeof n.reference.getBoundingClientRect)throw new TypeError(`${lo.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return n}_createPopper(){if(typeof Yt>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let n=this._element;"parent"===this._config.reference?n=this._parent:_t(this._config.reference)?n=Et(this._config.reference):"object"==typeof this._config.reference&&(n=this._config.reference);const e=this._getPopperConfig();this._popper=vn(n,this._menu,e)}_isShown(){return this._menu.classList.contains(ee)}_getPlacement(){const n=this._parent;if(n.classList.contains("dropend"))return Wl;if(n.classList.contains("dropstart"))return jl;if(n.classList.contains("dropup-center"))return"top";if(n.classList.contains("dropdown-center"))return"bottom";const e="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return n.classList.contains("dropup")?e?Pl:Gl:e?Rl:Ql}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:n}=this._config;return"string"==typeof n?n.split(",").map(e=>Number.parseInt(e,10)):"function"==typeof n?e=>n(e,this._element):n}_getPopperConfig(){const n={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(ft.setDataAttribute(this._menu,"popper","static"),n.modifiers=[{name:"applyStyles",enabled:!1}]),{...n,..."function"==typeof this._config.popperConfig?this._config.popperConfig(n):this._config.popperConfig}}_selectMenuItem({key:n,target:e}){const i=T.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(a=>Wt(a));i.length&&yn(i,e,n===uo,!i.includes(e)).focus()}static jQueryInterface(n){return this.each(function(){const e=rt.getOrCreateInstance(this,n);if("string"==typeof n){if(typeof e[n]>"u")throw new TypeError(`No method named "${n}"`);e[n]()}})}static clearMenus(n){if(2===n.button||"keyup"===n.type&&"Tab"!==n.key)return;const e=T.find(Fl);for(const i of e){const a=rt.getInstance(i);if(!a||!1===a._config.autoClose)continue;const s=n.composedPath(),r=s.includes(a._menu);if(s.includes(a._element)||"inside"===a._config.autoClose&&!r||"outside"===a._config.autoClose&&r||a._menu.contains(n.target)&&("keyup"===n.type&&"Tab"===n.key||/input|select|option|textarea|form/i.test(n.target.tagName)))continue;const l={relatedTarget:a._element};"click"===n.type&&(l.clickEvent=n),a._completeHide(l)}}static dataApiKeydownHandler(n){const e=/input|textarea/i.test(n.target.tagName),i="Escape"===n.key,a=[Sl,uo].includes(n.key);if(!a&&!i||e&&!i)return;n.preventDefault();const s=this.matches(Mt)?this:T.prev(this,Mt)[0]||T.next(this,Mt)[0]||T.findOne(Mt,n.delegateTarget.parentNode),r=rt.getOrCreateInstance(s);if(a)return n.stopPropagation(),r.show(),void r._selectMenuItem(n);r._isShown()&&(n.stopPropagation(),r.hide(),s.focus())}}m.on(document,po,Mt,rt.dataApiKeydownHandler),m.on(document,po,Je,rt.dataApiKeydownHandler),m.on(document,ho,rt.clearMenus),m.on(document,Kl,rt.clearMenus),m.on(document,ho,Mt,function(o){o.preventDefault(),rt.getOrCreateInstance(this).toggle()}),W(rt);const mo=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",_o=".sticky-top",Ve="padding-right",fo="margin-right";class Un{constructor(){this._element=document.body}getWidth(){const n=document.documentElement.clientWidth;return Math.abs(window.innerWidth-n)}hide(){const n=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Ve,e=>e+n),this._setElementAttributes(mo,Ve,e=>e+n),this._setElementAttributes(_o,fo,e=>e-n)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Ve),this._resetElementAttributes(mo,Ve),this._resetElementAttributes(_o,fo)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(n,e,i){const a=this.getWidth();this._applyManipulationCallback(n,r=>{if(r!==this._element&&window.innerWidth>r.clientWidth+a)return;this._saveInitialAttribute(r,e);const l=window.getComputedStyle(r).getPropertyValue(e);r.style.setProperty(e,`${i(Number.parseFloat(l))}px`)})}_saveInitialAttribute(n,e){const i=n.style.getPropertyValue(e);i&&ft.setDataAttribute(n,e,i)}_resetElementAttributes(n,e){this._applyManipulationCallback(n,a=>{const s=ft.getDataAttribute(a,e);null!==s?(ft.removeDataAttribute(a,e),a.style.setProperty(e,s)):a.style.removeProperty(e)})}_applyManipulationCallback(n,e){if(_t(n))e(n);else for(const i of T.find(n,this._element))e(i)}}const go="backdrop",bo=`mousedown.bs.${go}`,ic={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},oc={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Eo extends Te{constructor(n){super(),this._config=this._getConfig(n),this._isAppended=!1,this._element=null}static get Default(){return ic}static get DefaultType(){return oc}static get NAME(){return go}show(n){if(!this._config.isVisible)return void dt(n);this._append();this._getElement().classList.add("show"),this._emulateAnimation(()=>{dt(n)})}hide(n){this._config.isVisible?(this._getElement().classList.remove("show"),this._emulateAnimation(()=>{this.dispose(),dt(n)})):dt(n)}dispose(){this._isAppended&&(m.off(this._element,bo),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const n=document.createElement("div");n.className=this._config.className,this._config.isAnimated&&n.classList.add("fade"),this._element=n}return this._element}_configAfterMerge(n){return n.rootElement=Et(n.rootElement),n}_append(){if(this._isAppended)return;const n=this._getElement();this._config.rootElement.append(n),m.on(n,bo,()=>{dt(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(n){Gi(n,this._getElement(),this._config.isAnimated)}}const $e=".bs.focustrap",sc=`focusin${$e}`,rc=`keydown.tab${$e}`,Ao="backward",uc={autofocus:!0,trapElement:null},hc={autofocus:"boolean",trapElement:"element"};class No extends Te{constructor(n){super(),this._config=this._getConfig(n),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return uc}static get DefaultType(){return hc}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),m.off(document,$e),m.on(document,sc,n=>this._handleFocusin(n)),m.on(document,rc,n=>this._handleKeydown(n)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,m.off(document,$e))}_handleFocusin(n){const{trapElement:e}=this._config;if(n.target===document||n.target===e||e.contains(n.target))return;const i=T.focusableChildren(e);0===i.length?e.focus():this._lastTabNavDirection===Ao?i[i.length-1].focus():i[0].focus()}_handleKeydown(n){"Tab"===n.key&&(this._lastTabNavDirection=n.shiftKey?Ao:"forward")}}const et=".bs.modal",dc=`hide${et}`,fc=`hidePrevented${et}`,Co=`hidden${et}`,vo=`show${et}`,gc=`shown${et}`,Tc=`resize${et}`,bc=`click.dismiss${et}`,Ec=`mousedown.dismiss${et}`,Ac=`keydown.dismiss${et}`,Nc=`click${et}.data-api`,xo="modal-open",Ln="modal-static",Ic={backdrop:!0,focus:!0,keyboard:!0},Dc={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class vt extends tt{constructor(n,e){super(n,e),this._dialog=T.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Un,this._addEventListeners()}static get Default(){return Ic}static get DefaultType(){return Dc}static get NAME(){return"modal"}toggle(n){return this._isShown?this.hide():this.show(n)}show(n){this._isShown||this._isTransitioning||m.trigger(this._element,vo,{relatedTarget:n}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(xo),this._adjustDialog(),this._backdrop.show(()=>this._showElement(n)))}hide(){!this._isShown||this._isTransitioning||m.trigger(this._element,dc).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove("show"),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){for(const n of[window,this._dialog])m.off(n,et);this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Eo({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new No({trapElement:this._element})}_showElement(n){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const e=T.findOne(".modal-body",this._dialog);e&&(e.scrollTop=0),this._element.classList.add("show"),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,m.trigger(this._element,gc,{relatedTarget:n})},this._dialog,this._isAnimated())}_addEventListeners(){m.on(this._element,Ac,n=>{if("Escape"===n.key){if(this._config.keyboard)return n.preventDefault(),void this.hide();this._triggerBackdropTransition()}}),m.on(window,Tc,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),m.on(this._element,Ec,n=>{m.one(this._element,bc,e=>{if(this._element===n.target&&this._element===e.target){if("static"===this._config.backdrop)return void this._triggerBackdropTransition();this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(xo),this._resetAdjustments(),this._scrollBar.reset(),m.trigger(this._element,Co)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(m.trigger(this._element,fc).defaultPrevented)return;const e=this._element.scrollHeight>document.documentElement.clientHeight,i=this._element.style.overflowY;"hidden"===i||this._element.classList.contains(Ln)||(e||(this._element.style.overflowY="hidden"),this._element.classList.add(Ln),this._queueCallback(()=>{this._element.classList.remove(Ln),this._queueCallback(()=>{this._element.style.overflowY=i},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const n=this._element.scrollHeight>document.documentElement.clientHeight,e=this._scrollBar.getWidth(),i=e>0;if(i&&!n){const a=R()?"paddingLeft":"paddingRight";this._element.style[a]=`${e}px`}if(!i&&n){const a=R()?"paddingRight":"paddingLeft";this._element.style[a]=`${e}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(n,e){return this.each(function(){const i=vt.getOrCreateInstance(this,n);if("string"==typeof n){if(typeof i[n]>"u")throw new TypeError(`No method named "${n}"`);i[n](e)}})}}m.on(document,Nc,'[data-bs-toggle="modal"]',function(o){const n=mt(this);["A","AREA"].includes(this.tagName)&&o.preventDefault(),m.one(n,vo,a=>{a.defaultPrevented||m.one(n,Co,()=>{Wt(this)&&this.focus()})});const e=T.findOne(".modal.show");e&&vt.getInstance(e).hide(),vt.getOrCreateInstance(n).toggle(this)}),Ke(vt),W(vt);const gt=".bs.offcanvas",yo=".data-api",kc=`load${gt}${yo}`,Do="showing",ko=".offcanvas.show",wc=`show${gt}`,Oc=`shown${gt}`,Kc=`hide${gt}`,qo=`hidePrevented${gt}`,Mo=`hidden${gt}`,Uc=`resize${gt}`,Lc=`click${gt}${yo}`,Hc=`keydown.dismiss${gt}`,Yc={backdrop:!0,keyboard:!0,scroll:!1},Fc={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class xt extends tt{constructor(n,e){super(n,e),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Yc}static get DefaultType(){return Fc}static get NAME(){return"offcanvas"}toggle(n){return this._isShown?this.hide():this.show(n)}show(n){this._isShown||m.trigger(this._element,wc,{relatedTarget:n}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||(new Un).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Do),this._queueCallback(()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add("show"),this._element.classList.remove(Do),m.trigger(this._element,Oc,{relatedTarget:n})},this._element,!0))}hide(){this._isShown&&!m.trigger(this._element,Kc).defaultPrevented&&(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add("hiding"),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove("show","hiding"),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new Un).reset(),m.trigger(this._element,Mo)},this._element,!0))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=Boolean(this._config.backdrop);return new Eo({className:"offcanvas-backdrop",isVisible:e,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:e?()=>{"static"!==this._config.backdrop?this.hide():m.trigger(this._element,qo)}:null})}_initializeFocusTrap(){return new No({trapElement:this._element})}_addEventListeners(){m.on(this._element,Hc,n=>{if("Escape"===n.key){if(!this._config.keyboard)return void m.trigger(this._element,qo);this.hide()}})}static jQueryInterface(n){return this.each(function(){const e=xt.getOrCreateInstance(this,n);if("string"==typeof n){if(void 0===e[n]||n.startsWith("_")||"constructor"===n)throw new TypeError(`No method named "${n}"`);e[n](this)}})}}m.on(document,Lc,'[data-bs-toggle="offcanvas"]',function(o){const n=mt(this);if(["A","AREA"].includes(this.tagName)&&o.preventDefault(),At(this))return;m.one(n,Mo,()=>{Wt(this)&&this.focus()});const e=T.findOne(ko);e&&e!==n&&xt.getInstance(e).hide(),xt.getOrCreateInstance(n).toggle(this)}),m.on(window,kc,()=>{for(const o of T.find(ko))xt.getOrCreateInstance(o).show()}),m.on(window,Uc,()=>{for(const o of T.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(o).position&&xt.getOrCreateInstance(o).hide()}),Ke(xt),W(xt);const Jc=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),$c=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,Gc=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,Pc=(o,n)=>{const e=o.nodeName.toLowerCase();return n.includes(e)?!Jc.has(e)||Boolean($c.test(o.nodeValue)||Gc.test(o.nodeValue)):n.filter(i=>i instanceof RegExp).some(i=>i.test(e))},wo={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Wc={allowList:wo,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},jc={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},zc={entry:"(string|element|function|null)",selector:"(string|element)"};class Xc extends Te{constructor(n){super(),this._config=this._getConfig(n)}static get Default(){return Wc}static get DefaultType(){return jc}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(n=>this._resolvePossibleFunction(n)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(n){return this._checkContent(n),this._config.content={...this._config.content,...n},this}toHtml(){const n=document.createElement("div");n.innerHTML=this._maybeSanitize(this._config.template);for(const[a,s]of Object.entries(this._config.content))this._setContent(n,s,a);const e=n.children[0],i=this._resolvePossibleFunction(this._config.extraClass);return i&&e.classList.add(...i.split(" ")),e}_typeCheckConfig(n){super._typeCheckConfig(n),this._checkContent(n.content)}_checkContent(n){for(const[e,i]of Object.entries(n))super._typeCheckConfig({selector:e,entry:i},zc)}_setContent(n,e,i){const a=T.findOne(i,n);if(a){if(!(e=this._resolvePossibleFunction(e)))return void a.remove();if(_t(e))return void this._putElementInTemplate(Et(e),a);if(this._config.html)return void(a.innerHTML=this._maybeSanitize(e));a.textContent=e}}_maybeSanitize(n){return this._config.sanitize?function Qc(o,n,e){if(!o.length)return o;if(e&&"function"==typeof e)return e(o);const a=(new window.DOMParser).parseFromString(o,"text/html"),s=[].concat(...a.body.querySelectorAll("*"));for(const r of s){const l=r.nodeName.toLowerCase();if(!Object.keys(n).includes(l)){r.remove();continue}const u=[].concat(...r.attributes),h=[].concat(n["*"]||[],n[l]||[]);for(const p of u)Pc(p,h)||r.removeAttribute(p.nodeName)}return a.body.innerHTML}(n,this._config.allowList,this._config.sanitizeFn):n}_resolvePossibleFunction(n){return"function"==typeof n?n(this):n}_putElementInTemplate(n,e){if(this._config.html)return e.innerHTML="",void e.append(n);e.textContent=n.textContent}}const eu=new Set(["sanitize","allowList","sanitizeFn"]),Hn="fade",Ge="show",Ko="hide.bs.modal",Ce="hover",Bn="focus",fu={AUTO:"auto",TOP:"top",RIGHT:R()?"left":"right",BOTTOM:"bottom",LEFT:R()?"right":"left"},gu={allowList:wo,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,0],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Tu={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class ne extends tt{constructor(n,e){if(typeof Yt>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(n,e),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return gu}static get DefaultType(){return Tu}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown())return void this._leave();this._enter()}}dispose(){clearTimeout(this._timeout),m.off(this._element.closest(".modal"),Ko,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const n=m.trigger(this._element,this.constructor.eventName("show")),i=(Vi(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(n.defaultPrevented||!i)return;this._disposePopper();const a=this._getTipElement();this._element.setAttribute("aria-describedby",a.getAttribute("id"));const{container:s}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(s.append(a),m.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(a),a.classList.add(Ge),"ontouchstart"in document.documentElement)for(const l of[].concat(...document.body.children))m.on(l,"mouseover",Oe);this._queueCallback(()=>{m.trigger(this._element,this.constructor.eventName("shown")),!1===this._isHovered&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!m.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(Ge),"ontouchstart"in document.documentElement)for(const a of[].concat(...document.body.children))m.off(a,"mouseover",Oe);this._activeTrigger.click=!1,this._activeTrigger[Bn]=!1,this._activeTrigger[Ce]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),m.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(n){const e=this._getTemplateFactory(n).toHtml();if(!e)return null;e.classList.remove(Hn,Ge),e.classList.add(`bs-${this.constructor.NAME}-auto`);const i=(o=>{do{o+=Math.floor(1e6*Math.random())}while(document.getElementById(o));return o})(this.constructor.NAME).toString();return e.setAttribute("id",i),this._isAnimated()&&e.classList.add(Hn),e}setContent(n){this._newContent=n,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(n){return this._templateFactory?this._templateFactory.changeContent(n):this._templateFactory=new Xc({...this._config,content:n,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(n){return this.constructor.getOrCreateInstance(n.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Hn)}_isShown(){return this.tip&&this.tip.classList.contains(Ge)}_createPopper(n){const e="function"==typeof this._config.placement?this._config.placement.call(this,n,this._element):this._config.placement,i=fu[e.toUpperCase()];return vn(this._element,n,this._getPopperConfig(i))}_getOffset(){const{offset:n}=this._config;return"string"==typeof n?n.split(",").map(e=>Number.parseInt(e,10)):"function"==typeof n?e=>n(e,this._element):n}_resolvePossibleFunction(n){return"function"==typeof n?n.call(this._element):n}_getPopperConfig(n){const e={placement:n,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:i=>{this._getTipElement().setAttribute("data-popper-placement",i.state.placement)}}]};return{...e,..."function"==typeof this._config.popperConfig?this._config.popperConfig(e):this._config.popperConfig}}_setListeners(){const n=this._config.trigger.split(" ");for(const e of n)if("click"===e)m.on(this._element,this.constructor.eventName("click"),this._config.selector,i=>{this._initializeOnDelegatedTarget(i).toggle()});else if("manual"!==e){const i=this.constructor.eventName(e===Ce?"mouseenter":"focusin"),a=this.constructor.eventName(e===Ce?"mouseleave":"focusout");m.on(this._element,i,this._config.selector,s=>{const r=this._initializeOnDelegatedTarget(s);r._activeTrigger["focusin"===s.type?Bn:Ce]=!0,r._enter()}),m.on(this._element,a,this._config.selector,s=>{const r=this._initializeOnDelegatedTarget(s);r._activeTrigger["focusout"===s.type?Bn:Ce]=r._element.contains(s.relatedTarget),r._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},m.on(this._element.closest(".modal"),Ko,this._hideModalHandler)}_fixTitle(){const n=this._element.getAttribute("title");n&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",n),this._element.setAttribute("data-bs-original-title",n),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(n,e){clearTimeout(this._timeout),this._timeout=setTimeout(n,e)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(n){const e=ft.getDataAttributes(this._element);for(const i of Object.keys(e))eu.has(i)&&delete e[i];return n={...e,..."object"==typeof n&&n?n:{}},n=this._mergeConfigObj(n),n=this._configAfterMerge(n),this._typeCheckConfig(n),n}_configAfterMerge(n){return n.container=!1===n.container?document.body:Et(n.container),"number"==typeof n.delay&&(n.delay={show:n.delay,hide:n.delay}),"number"==typeof n.title&&(n.title=n.title.toString()),"number"==typeof n.content&&(n.content=n.content.toString()),n}_getDelegateConfig(){const n={};for(const e in this._config)this.constructor.Default[e]!==this._config[e]&&(n[e]=this._config[e]);return n.selector=!1,n.trigger="manual",n}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(n){return this.each(function(){const e=ne.getOrCreateInstance(this,n);if("string"==typeof n){if(typeof e[n]>"u")throw new TypeError(`No method named "${n}"`);e[n]()}})}}W(ne);const Nu={...ne.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Cu={...ne.DefaultType,content:"(null|string|element|function)"};class Yn extends ne{static get Default(){return Nu}static get DefaultType(){return Cu}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(n){return this.each(function(){const e=Yn.getOrCreateInstance(this,n);if("string"==typeof n){if(typeof e[n]>"u")throw new TypeError(`No method named "${n}"`);e[n]()}})}}W(Yn);const Fn=".bs.scrollspy",Zu=`activate${Fn}`,Uo=`click${Fn}`,yu=`load${Fn}.data-api`,ie="active",Jn="[href]",Lo=".nav-link",ku=`${Lo}, .nav-item > ${Lo}, .list-group-item`,wu={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Ou={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Pe extends tt{constructor(n,e){super(n,e),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement="visible"===getComputedStyle(this._element).overflowY?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return wu}static get DefaultType(){return Ou}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const n of this._observableSections.values())this._observer.observe(n)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(n){return n.target=Et(n.target)||document.body,n.rootMargin=n.offset?`${n.offset}px 0px -30%`:n.rootMargin,"string"==typeof n.threshold&&(n.threshold=n.threshold.split(",").map(e=>Number.parseFloat(e))),n}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(m.off(this._config.target,Uo),m.on(this._config.target,Uo,Jn,n=>{const e=this._observableSections.get(n.target.hash);if(e){n.preventDefault();const i=this._rootElement||window,a=e.offsetTop-this._element.offsetTop;if(i.scrollTo)return void i.scrollTo({top:a,behavior:"smooth"});i.scrollTop=a}}))}_getNewObserver(){return new IntersectionObserver(e=>this._observerCallback(e),{root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin})}_observerCallback(n){const e=r=>this._targetLinks.get(`#${r.target.id}`),i=r=>{this._previousScrollData.visibleEntryTop=r.target.offsetTop,this._process(e(r))},a=(this._rootElement||document.documentElement).scrollTop,s=a>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=a;for(const r of n){if(!r.isIntersecting){this._activeTarget=null,this._clearActiveClass(e(r));continue}const l=r.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(s&&l){if(i(r),!a)return}else!s&&!l&&i(r)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const n=T.find(Jn,this._config.target);for(const e of n){if(!e.hash||At(e))continue;const i=T.findOne(e.hash,this._element);Wt(i)&&(this._targetLinks.set(e.hash,e),this._observableSections.set(e.hash,i))}}_process(n){this._activeTarget!==n&&(this._clearActiveClass(this._config.target),this._activeTarget=n,n.classList.add(ie),this._activateParents(n),m.trigger(this._element,Zu,{relatedTarget:n}))}_activateParents(n){if(n.classList.contains("dropdown-item"))T.findOne(".dropdown-toggle",n.closest(".dropdown")).classList.add(ie);else for(const e of T.parents(n,".nav, .list-group"))for(const i of T.prev(e,ku))i.classList.add(ie)}_clearActiveClass(n){n.classList.remove(ie);const e=T.find(`${Jn}.${ie}`,n);for(const i of e)i.classList.remove(ie)}static jQueryInterface(n){return this.each(function(){const e=Pe.getOrCreateInstance(this,n);if("string"==typeof n){if(void 0===e[n]||n.startsWith("_")||"constructor"===n)throw new TypeError(`No method named "${n}"`);e[n]()}})}}m.on(window,yu,()=>{for(const o of T.find('[data-bs-spy="scroll"]'))Pe.getOrCreateInstance(o)}),W(Pe);const wt=".bs.tab",Uu=`hide${wt}`,Lu=`hidden${wt}`,Hu=`show${wt}`,Bu=`shown${wt}`,Yu=`click${wt}`,Fu=`keydown${wt}`,Ju=`load${wt}`,Vu="ArrowLeft",Ho="ArrowRight",$u="ArrowUp",Bo="ArrowDown",Ot="active",Vn="show",$n=":not(.dropdown-toggle)",Fo='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Gn=`.nav-link${$n}, .list-group-item${$n}, [role="tab"]${$n}, ${Fo}`,zu=`.${Ot}[data-bs-toggle="tab"], .${Ot}[data-bs-toggle="pill"], .${Ot}[data-bs-toggle="list"]`;class oe extends tt{constructor(n){super(n),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),m.on(this._element,Fu,e=>this._keydown(e)))}static get NAME(){return"tab"}show(){const n=this._element;if(this._elemIsActive(n))return;const e=this._getActiveElem(),i=e?m.trigger(e,Uu,{relatedTarget:n}):null;m.trigger(n,Hu,{relatedTarget:e}).defaultPrevented||i&&i.defaultPrevented||(this._deactivate(e,n),this._activate(n,e))}_activate(n,e){n&&(n.classList.add(Ot),this._activate(mt(n)),this._queueCallback(()=>{"tab"===n.getAttribute("role")?(n.removeAttribute("tabindex"),n.setAttribute("aria-selected",!0),this._toggleDropDown(n,!0),m.trigger(n,Bu,{relatedTarget:e})):n.classList.add(Vn)},n,n.classList.contains("fade")))}_deactivate(n,e){n&&(n.classList.remove(Ot),n.blur(),this._deactivate(mt(n)),this._queueCallback(()=>{"tab"===n.getAttribute("role")?(n.setAttribute("aria-selected",!1),n.setAttribute("tabindex","-1"),this._toggleDropDown(n,!1),m.trigger(n,Lu,{relatedTarget:e})):n.classList.remove(Vn)},n,n.classList.contains("fade")))}_keydown(n){if(![Vu,Ho,$u,Bo].includes(n.key))return;n.stopPropagation(),n.preventDefault();const e=[Ho,Bo].includes(n.key),i=yn(this._getChildren().filter(a=>!At(a)),n.target,e,!0);i&&(i.focus({preventScroll:!0}),oe.getOrCreateInstance(i).show())}_getChildren(){return T.find(Gn,this._parent)}_getActiveElem(){return this._getChildren().find(n=>this._elemIsActive(n))||null}_setInitialAttributes(n,e){this._setAttributeIfNotExists(n,"role","tablist");for(const i of e)this._setInitialAttributesOnChild(i)}_setInitialAttributesOnChild(n){n=this._getInnerElement(n);const e=this._elemIsActive(n),i=this._getOuterElement(n);n.setAttribute("aria-selected",e),i!==n&&this._setAttributeIfNotExists(i,"role","presentation"),e||n.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(n,"role","tab"),this._setInitialAttributesOnTargetPanel(n)}_setInitialAttributesOnTargetPanel(n){const e=mt(n);e&&(this._setAttributeIfNotExists(e,"role","tabpanel"),n.id&&this._setAttributeIfNotExists(e,"aria-labelledby",`#${n.id}`))}_toggleDropDown(n,e){const i=this._getOuterElement(n);if(!i.classList.contains("dropdown"))return;const a=(s,r)=>{const l=T.findOne(s,i);l&&l.classList.toggle(r,e)};a(".dropdown-toggle",Ot),a(".dropdown-menu",Vn),i.setAttribute("aria-expanded",e)}_setAttributeIfNotExists(n,e,i){n.hasAttribute(e)||n.setAttribute(e,i)}_elemIsActive(n){return n.classList.contains(Ot)}_getInnerElement(n){return n.matches(Gn)?n:T.findOne(Gn,n)}_getOuterElement(n){return n.closest(".nav-item, .list-group-item")||n}static jQueryInterface(n){return this.each(function(){const e=oe.getOrCreateInstance(this);if("string"==typeof n){if(void 0===e[n]||n.startsWith("_")||"constructor"===n)throw new TypeError(`No method named "${n}"`);e[n]()}})}}m.on(document,Yu,Fo,function(o){["A","AREA"].includes(this.tagName)&&o.preventDefault(),!At(this)&&oe.getOrCreateInstance(this).show()}),m.on(window,Ju,()=>{for(const o of T.find(zu))oe.getOrCreateInstance(o)}),W(oe);const Zt=".bs.toast",th=`mouseover${Zt}`,eh=`mouseout${Zt}`,nh=`focusin${Zt}`,ih=`focusout${Zt}`,oh=`hide${Zt}`,ah=`hidden${Zt}`,sh=`show${Zt}`,rh=`shown${Zt}`,Qe="show",Re="showing",ch={animation:"boolean",autohide:"boolean",delay:"number"},uh={animation:!0,autohide:!0,delay:5e3};class We extends tt{constructor(n,e){super(n,e),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return uh}static get DefaultType(){return ch}static get NAME(){return"toast"}show(){m.trigger(this._element,sh).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove("hide"),this._element.classList.add(Qe,Re),this._queueCallback(()=>{this._element.classList.remove(Re),m.trigger(this._element,rh),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&!m.trigger(this._element,oh).defaultPrevented&&(this._element.classList.add(Re),this._queueCallback(()=>{this._element.classList.add("hide"),this._element.classList.remove(Re,Qe),m.trigger(this._element,ah)},this._element,this._config.animation))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Qe),super.dispose()}isShown(){return this._element.classList.contains(Qe)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(n,e){switch(n.type){case"mouseover":case"mouseout":this._hasMouseInteraction=e;break;case"focusin":case"focusout":this._hasKeyboardInteraction=e}if(e)return void this._clearTimeout();const i=n.relatedTarget;this._element===i||this._element.contains(i)||this._maybeScheduleHide()}_setListeners(){m.on(this._element,th,n=>this._onInteraction(n,!0)),m.on(this._element,eh,n=>this._onInteraction(n,!1)),m.on(this._element,nh,n=>this._onInteraction(n,!0)),m.on(this._element,ih,n=>this._onInteraction(n,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(n){return this.each(function(){const e=We.getOrCreateInstance(this,n);if("string"==typeof n){if(typeof e[n]>"u")throw new TypeError(`No method named "${n}"`);e[n](this)}})}}Ke(We),W(We);var ae=_(41206),Pn=_(28986),hh=_(41258);function ph(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",53),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.reload())}),t.TgZ(1,"mat-icon"),t._uU(2,"undo"),t.qZA()()}2&o&&t.Q6J("@slideIn",void 0)}function mh(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",54),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.saveList())}),t._uU(1," L\u01b0u "),t.qZA()}2&o&&t.Q6J("@slideX",void 0)}function _h(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",55),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.sendMail())}),t.TgZ(1,"mat-icon"),t._uU(2,"email"),t.qZA()()}2&o&&t.Q6J("@slideX",void 0)}function dh(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",56),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.checkEmail())}),t.TgZ(1,"mat-icon"),t._uU(2,"move_to_inbox"),t.qZA()()}2&o&&t.Q6J("@slideX",void 0)}function fh(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",57),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.DuDieuKien())}),t.TgZ(1,"mat-icon"),t._uU(2,"thumb_up"),t.qZA()()}2&o&&t.Q6J("@slideX",void 0)}function gh(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",58),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.ChuaDuDieuKien())}),t.TgZ(1,"mat-icon"),t._uU(2,"thumb_down"),t.qZA()()}2&o&&t.Q6J("@slideX",void 0)}function Th(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",59),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.xuatBangKe())}),t.TgZ(1,"mat-icon"),t._uU(2,"file_download"),t.qZA()()}2&o&&t.Q6J("@slideX",void 0)}function bh(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",60),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.guiBangKe())}),t.TgZ(1,"mat-icon"),t._uU(2,"send"),t.qZA()()}2&o&&t.Q6J("@slideX",void 0)}function Eh(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",61),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(),s=t.MAs(47);return t.KtG(a.showModal(s))}),t.TgZ(1,"mat-icon"),t._uU(2,"receipt"),t.qZA()()}2&o&&t.Q6J("@slideX",void 0)}function Ah(o,n){if(1&o&&(t.TgZ(0,"tr",68)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td",69),t._uU(6),t.ALo(7,"numberPipe"),t._UZ(8,"br"),t._uU(9),t.ALo(10,"numberPipe"),t._UZ(11,"br"),t.TgZ(12,"b"),t._uU(13),t.ALo(14,"numberPipe"),t.TgZ(15,"span",70),t._uU(16),t.qZA()()(),t.TgZ(17,"td"),t._uU(18),t.qZA(),t.TgZ(19,"td"),t._uU(20),t.qZA(),t.TgZ(21,"td",71),t._uU(22),t.qZA()()),2&o){const e=n.$implicit,i=n.index;t.xp6(2),t.Oqu(i+1),t.xp6(2),t.Oqu(e.KhachHang),t.xp6(2),t.hij("",t.lcZ(7,9,e.SanLuong)," "),t.xp6(3),t.hij(" ",t.lcZ(10,11,e.DonGia)," "),t.xp6(4),t.hij(" ",t.lcZ(14,13,e.TongTien)," "),t.xp6(3),t.Oqu(e.TongTien<23e3?"Kh\xf4ng \u0111\u1ee7 ph\xed":""),t.xp6(2),t.Oqu(e.MatHang),t.xp6(2),t.Oqu(e.DiaChi),t.xp6(2),t.Oqu(null==e?null:e.DoiChieuCMIS)}}function Nh(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div",72)(1,"button",73),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.moHoaDon())}),t._uU(2,"M\u1edf h\xf3a \u0111\u01a1n"),t.qZA(),t.TgZ(3,"button",73),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.doiChieuCMIS())}),t._uU(4,"\u0110\u1ed1i chi\u1ebfu CMIS"),t.qZA()()}}function Ch(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div",6)(1,"mat-expansion-panel")(2,"mat-expansion-panel-header"),t._uU(3),t.ALo(4,"numberPipe"),t.TgZ(5,"button",62),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.clearLocalBK())}),t._uU(6,"X\xf3a"),t.qZA()(),t.TgZ(7,"table",63)(8,"thead",64)(9,"tr"),t._UZ(10,"th"),t.TgZ(11,"th"),t._uU(12,"T\xean KH"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"SL - \u0110G - TT"),t.qZA(),t.TgZ(15,"th"),t._uU(16,"N\u1ed9i dung"),t.qZA(),t.TgZ(17,"th"),t._uU(18,"\u0110\u1ecba ch\u1ec9"),t.qZA()()(),t.TgZ(19,"tbody",65),t.NdJ("cdkDropListDropped",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.dropCdk(a))}),t.YNc(20,Ah,23,15,"tr",66),t.qZA()(),t.YNc(21,Nh,5,0,"div",67),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(3),t.AsE(" Danh s\xe1ch b\u1ea3ng k\xea ",e.nameBill," | ",t.lcZ(4,4,e.tongTienBangKe)," "),t.xp6(17),t.Q6J("ngForOf",e.selectedItems),t.xp6(1),t.Q6J("ngIf",e.checkPer(4,"cmis4-quyet-toan-dmt"))}}function vh(o,n){if(1&o&&(t.TgZ(0,"div",74)(1,"div",75),t._uU(2),t.qZA()()),2&o){const e=t.oxw();t.xp6(1),t.Udp("width",e.uploadProgress+"%"),t.xp6(1),t.hij(" ",e.uploadProgress<100?e.uploadProgress+"%":"Ki\u1ec3m tra xong","")}}function xh(o,n){if(1&o&&(t.TgZ(0,"h5",76),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij("DANH S\xc1CH THANH TO\xc1N TI\u1ec0N \u0110I\u1ec6N M\u1eb6T TR\u1edcI ",e.bangKe.length," KH")}}function Zh(o,n){1&o&&(t.TgZ(0,"th"),t._uU(1,"L\u1ed7i"),t.qZA())}function yh(o,n){1&o&&(t.TgZ(0,"tr")(1,"td",80)(2,"h5",81),t._uU(3,"DANH S\xc1CH D\u1eee LI\u1ec6U \u0110\xc3 T\u1ed2N T\u1ea0I"),t.qZA()()())}function Ih(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",82)(4,"a"),t._uU(5),t.qZA()(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.qZA(),t.TgZ(16,"td",69),t._uU(17),t.ALo(18,"numberPipe"),t.qZA(),t.TgZ(19,"td",69),t._uU(20),t.ALo(21,"numberPipe"),t.qZA(),t.TgZ(22,"td",83),t.NdJ("click",function(){const a=t.CHM(e),s=a.$implicit,r=a.index,l=t.oxw(2);return t.KtG(l.addDuplicate(s,r))}),t.TgZ(23,"button",84)(24,"mat-icon"),t._uU(25,"add"),t.qZA()()()()}if(2&o){const e=n.$implicit,i=n.index;t.xp6(2),t.Oqu(i+1),t.xp6(3),t.Oqu(e.MaKhachHang),t.xp6(2),t.Oqu(e.KyThanhToan),t.xp6(2),t.Oqu(e.KhachHang),t.xp6(2),t.Oqu(e.MaGCS),t.xp6(2),t.Oqu(e.NgayMuaHang),t.xp6(2),t.Oqu(e.TiLeThue),t.xp6(2),t.Oqu(t.lcZ(18,9,e.SanLuong)),t.xp6(3),t.Oqu(t.lcZ(21,11,e.TongTien))}}function Dh(o,n){1&o&&(t.TgZ(0,"tr")(1,"td",80)(2,"h5",76),t._uU(3,"DANH S\xc1CH IMPORT"),t.qZA()()())}function Sh(o,n){1&o&&(t.TgZ(0,"tr")(1,"td",85)(2,"h5",76),t._uU(3,"DANH S\xc1CH L\u1ed6I D\u1eee LI\u1ec6U"),t.qZA()()())}function kh(o,n){if(1&o&&(t.TgZ(0,"td",70),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e._ThongBaoLoi)}}function qh(o,n){if(1&o&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",82)(4,"a"),t._uU(5),t.qZA()(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.qZA(),t.TgZ(16,"td",69),t._uU(17),t.ALo(18,"numberPipe"),t.qZA(),t.TgZ(19,"td",69),t._uU(20),t.ALo(21,"numberPipe"),t.qZA(),t.YNc(22,kh,2,1,"td",86),t.qZA()),2&o){const e=n.$implicit,i=n.index,a=t.oxw(2);t.xp6(2),t.Oqu(i+1),t.xp6(3),t.Oqu(e.MaKhachHang),t.xp6(2),t.Oqu(e.KyThanhToan),t.xp6(2),t.Oqu(e.KhachHang),t.xp6(2),t.Oqu(e.MaGCS),t.xp6(2),t.Oqu(e.NgayMuaHang),t.xp6(2),t.Oqu(e.TiLeThue),t.xp6(2),t.Oqu(t.lcZ(18,10,e.SanLuong)),t.xp6(3),t.Oqu(t.lcZ(21,12,e.TongTien)),t.xp6(2),t.Q6J("ngIf",2==a.step)}}function Mh(o,n){if(1&o&&(t.TgZ(0,"table",77)(1,"thead")(2,"tr")(3,"th"),t._uU(4,"TT"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"M\xe3 Kh\xe1ch h\xe0ng"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"K\u1ef3 thanh to\xe1n"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Kh\xe1ch h\xe0ng"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"M\xe3 s\u1ed5 ghi"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Ng\xe0y mua h\xe0ng"),t.qZA(),t.TgZ(15,"th"),t._uU(16,"T\u1ec9 l\u1ec7 thu\u1ebf"),t.qZA(),t.TgZ(17,"th"),t._uU(18,"S\u1ea3n l\u01b0\u1ee3ng"),t.qZA(),t.TgZ(19,"th"),t._uU(20,"T\u1ed5ng ti\u1ec1n"),t.qZA(),t.YNc(21,Zh,2,0,"th",78),t.qZA()(),t.TgZ(22,"tbody"),t.YNc(23,yh,4,0,"tr",78),t.YNc(24,Ih,26,13,"tr",79),t.qZA(),t.TgZ(25,"tfoot"),t.YNc(26,Dh,4,0,"tr",78),t.YNc(27,Sh,4,0,"tr",78),t.YNc(28,qh,23,14,"tr",79),t.qZA()()),2&o){const e=t.oxw();t.xp6(21),t.Q6J("ngIf",2==e.step),t.xp6(2),t.Q6J("ngIf",e.duplicateItems.length>0),t.xp6(1),t.Q6J("ngForOf",e.duplicateItems),t.xp6(2),t.Q6J("ngIf",e.bangKe.length>0),t.xp6(1),t.Q6J("ngIf",e.errors.length>0),t.xp6(1),t.Q6J("ngForOf",e.errors.length>0?e.errors:e.bangKe)}}function wh(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"mat-chip-option",94),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw(2);return t.KtG(r.getIDB(s.GiaTri))}),t._uU(1),t.qZA()}if(2&o){const e=n.$implicit;t.Q6J("selected",2==n.index),t.xp6(1),t.Oqu(e.NoiDung)}}function Oh(o,n){1&o&&(t.TgZ(0,"th"),t._uU(1,"G\u1eedi mail"),t.qZA())}function Kh(o,n){1&o&&(t.TgZ(0,"th"),t._uU(1,"B\u1ea3ng k\xea"),t.qZA())}function Uh(o,n){1&o&&(t.TgZ(0,"th"),t._uU(1,"Tr\u1ea1ng th\xe1i h\u1ed3 s\u01a1"),t.qZA())}function Lh(o,n){1&o&&(t.TgZ(0,"mat-icon",102),t._uU(1,"mark_email_read"),t.qZA())}function Hh(o,n){1&o&&(t.TgZ(0,"mat-icon"),t._uU(1,"unsubscribe"),t.qZA())}function Bh(o,n){if(1&o&&(t.TgZ(0,"td"),t.YNc(1,Lh,2,0,"mat-icon",100),t.YNc(2,Hh,2,0,"ng-template",null,101,t.W1O),t.qZA()),2&o){const e=t.MAs(3),i=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",1==i.DaGuiMail)("ngIfElse",e)}}function Yh(o,n){if(1&o&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.TenBangKe)}}function Fh(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"mat-icon",83),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit,s=t.oxw(2);return t.KtG(s.setItem(a))}),t._uU(1,"check_circle_outline"),t.qZA()}}function Jh(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"mat-icon",83),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit,s=t.oxw(2);return t.KtG(s.getItem(a))}),t._uU(1,"visibility"),t.qZA()}}function Vh(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"mat-icon",103),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit,s=t.oxw(2);return t.KtG(s.onDelete(a))}),t._uU(1," delete"),t.qZA()}}const $h=function(o){return{"text-info":o}},Gh=function(o,n,e,i,a){return{"bg-warning text-center":o,"bg-info text-center":n,"bg-secondary text-center":e,"bg-primary text-center":i,"bg-success text-center":a}};function Ph(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td")(2,"mat-checkbox",95),t.NdJ("change",function(a){const r=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.checkItem(a,r))}),t.qZA()(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td")(6,"a",96),t._uU(7),t.qZA()(),t.TgZ(8,"td",97),t._uU(9),t.qZA(),t.TgZ(10,"td",69),t._uU(11),t.ALo(12,"number"),t.qZA(),t.TgZ(13,"td",69),t._uU(14),t.ALo(15,"number"),t.qZA(),t.YNc(16,Bh,4,2,"td",91),t.TgZ(17,"td"),t._uU(18),t.qZA(),t.TgZ(19,"td"),t._uU(20),t.qZA(),t.YNc(21,Yh,2,1,"td",91),t.TgZ(22,"td",97),t._uU(23),t.ALo(24,"enum"),t.qZA(),t.TgZ(25,"td"),t.YNc(26,Fh,2,0,"mat-icon",98),t.YNc(27,Jh,2,0,"mat-icon",98),t.YNc(28,Vh,2,0,"mat-icon",99),t.qZA()()}if(2&o){const e=n.$implicit,i=n.index,a=t.oxw(2);t.Q6J("@slideIn",void 0),t.xp6(2),t.Q6J("disabled",e.TrangThaiHoSo>1)("checked",a.checkboxTest(e)),t.xp6(2),t.Oqu(a.pageIndex*a.pageSize+i+1),t.xp6(2),t.s9C("routerLink",e._id),t.xp6(1),t.Oqu(e.MaKhachHang),t.xp6(1),t.Q6J("ngClass",t.VKq(26,$h,0==e.CoHoaDon)),t.xp6(1),t.Oqu(e.KhachHang),t.xp6(2),t.Oqu(t.lcZ(12,19,e.SanLuong)),t.xp6(3),t.Oqu(t.lcZ(15,21,e.TongTien)),t.xp6(2),t.Q6J("Device",3),t.xp6(2),t.Oqu(e.MaGCS),t.xp6(2),t.Oqu(e.KyThanhToan),t.xp6(1),t.Q6J("Device",3),t.xp6(1),t.Q6J("ngClass",t.qbA(28,Gh,0==e.TrangThaiHoSo,1==e.TrangThaiHoSo,2==e.TrangThaiHoSo,3==e.TrangThaiHoSo,4==e.TrangThaiHoSo)),t.xp6(1),t.Oqu(t.xi3(24,23,e.TrangThaiHoSo,"DMTTrangThaiHoSo")),t.xp6(3),t.Q6J("ngIf",a.level>4),t.xp6(1),t.Q6J("ngIf",a.level>4),t.xp6(1),t.Q6J("ngIf",a.level>1&&e.TrangThaiHoSo<2||a.level>6)}}function Qh(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div",6)(1,"mat-chip-listbox"),t.YNc(2,wh,2,2,"mat-chip-option",87),t.ALo(3,"catalog"),t.qZA(),t.TgZ(4,"table",88)(5,"thead",89)(6,"tr")(7,"th")(8,"mat-checkbox",90),t.NdJ("change",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.checkAll(a))}),t.qZA(),t._uU(9),t.qZA(),t.TgZ(10,"th"),t._uU(11,"TT"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"M\xe3 kh\xe1ch h\xe0ng"),t.qZA(),t.TgZ(14,"th"),t._uU(15),t.qZA(),t.TgZ(16,"th"),t._uU(17,"S\u1ea3n l\u01b0\u1ee3ng"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"T\u1ed5ng ti\u1ec1n"),t.qZA(),t.YNc(20,Oh,2,0,"th",91),t.TgZ(21,"th"),t._uU(22,"S\u1ed5 ghi ch\u1ec9 s\u1ed1"),t.qZA(),t.TgZ(23,"th"),t._uU(24,"K\u1ef3 thanh to\xe1n"),t.qZA(),t.YNc(25,Kh,2,0,"th",91),t.YNc(26,Uh,2,0,"th",91),t.TgZ(27,"th")(28,"mat-icon",92),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.reload())}),t._uU(29,"cached"),t.qZA()()()(),t.TgZ(30,"tbody"),t.YNc(31,Ph,29,34,"tr",93),t.qZA()()()}if(2&o){const e=t.oxw();t.Q6J("@slideIn",void 0),t.xp6(2),t.Q6J("ngForOf",t.lcZ(3,10,"DMTTrangThaiHoSo")),t.xp6(6),t.Q6J("checked",e.all),t.xp6(1),t.hij(" (",e.selectedItems.length,") "),t.xp6(6),t.hij("",e.filter.length," Kh\xe1ch h\xe0ng "),t.xp6(5),t.Q6J("Device",3),t.xp6(5),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(5),t.Q6J("ngForOf",e.filter)("ngForTrackBy",e.trackByFn)}}function Rh(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"app-drop-files",50),t.NdJ("files",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.onDropFile(a))})("ondragover",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.ondragover())}),t.qZA()}2&o&&t.Q6J("label","")}function Wh(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div",104)(1,"div",105)(2,"app-month-year",39),t.NdJ("month",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.getMonth(a))}),t.qZA(),t.TgZ(3,"mat-form-field"),t._UZ(4,"input",106,107),t.qZA(),t.TgZ(6,"mat-form-field"),t._UZ(7,"input",108,109),t.qZA()(),t.TgZ(9,"button",110),t.NdJ("click",function(){t.CHM(e);const a=t.MAs(5),s=t.MAs(8),r=t.oxw();return t.KtG(r.getCmis(a.value,s.value))}),t.TgZ(10,"mat-icon"),t._uU(11,"download"),t.qZA()()()}if(2&o){const e=t.oxw();t.xp6(2),t.Q6J("startDay",e.startDay)}}function jh(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div",29)(1,"div",111)(2,"button",112),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.pre())}),t._UZ(3,"i",113),t.qZA(),t.TgZ(4,"button",114),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.next())}),t._UZ(5,"i",115),t.qZA()(),t.TgZ(6,"div",116)(7,"h5",117),t._uU(8),t.qZA(),t._UZ(9,"div",118),t.qZA(),t._UZ(10,"hr"),t.qZA()}if(2&o){const e=t.oxw();t.xp6(8),t.AsE("",e.emails[e.i].title," - ",e.emails[e.i].email," "),t.xp6(1),t.Q6J("innerHTML",e.emails[e.i].message,t.oJD)}}function zh(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div",6)(1,"mat-expansion-panel")(2,"mat-expansion-panel-header")(3,"b",119),t._uU(4,"Import"),t.qZA()(),t.TgZ(5,"app-drop-files",50),t.NdJ("files",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.onDropFileBK(a))})("ondragover",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.ondragover())}),t.qZA(),t.TgZ(6,"button",54),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.importBackup())}),t._uU(7," Import"),t.qZA()()()}2&o&&(t.xp6(5),t.Q6J("label",""))}let Xh=(()=>{class o{constructor(e,i,a,s,r,l,u,h,p,f){this.plus=e,this.fb=i,this.excelSv=a,this.nlmtSv=s,this.authSV=r,this.loadSV=l,this.emailSV=u,this.idbSV=h,this.httpSV=p,this.cmis4SV=f,this.currentPosition=window.pageYOffset,this.bangKeForm=this.nlmtSv.inputForm,this.title="L\u1eadp b\u1ea3ng k\xea",this.global=!0,this.dbName="dien-luc",this.api="dmt-input",this.level=0,this.db=null,this.items=[],this.selectedItem=null,this.selectedItems=[],this.filter=[],this.errors=[],this.pageSize=20,this.pageIndex=0,this.tongTienBangKe=0,this.dataInXls=[],this.duplicateItems=[],this.wordFile=null,this.emails=[],this.i=0,this.startDay=new Date,this.bangKe=[],this.readFileDone=!1,this.step=0,this.TongPhatLen=0,this.ThanhTienTruocThue=0,this.Thue=0,this.ThanhTienSauThue=0,this.itemsReport=[],this.itemsReportNoBill=[],this.all=!1,this.statusNumber=1,this.nameBill=(0,Pn.h)(4),this.allowLoadmore=!0,this.bangKeChiSo=[],this.uploadProgress=0,this.searchForm=this.fb.group({input:["",[c.kI.required,c.kI.minLength(4)]]})}ngOnDestroy(){console.log("Destroy",this.api),localStorage.BangKe=JSON.stringify(this.selectedItems)}ngOnInit(){this.plus.setTiTle(this.title),this.authSV._getOpt(B.HB.USER).then(e=>{this.user=e;let i=e.unit+"-"+this.api,a=e.unit+"-dmt-khach-hang";this.idbSV.IDB_InitDB(this.dbName).subscribe(s=>{this.db=s,this.nlmtSv.db=s,this.httpSV.updateLocalDB(s,this.api,i).subscribe(r=>{this.loadSV.loaded("updateLocalDB"+i),console.log(i,r),this.getAllIDB()}),this.httpSV.updateLocalDB(s,"dmt-khach-hang",a).subscribe(r=>{this.loadSV.loaded("updateLocalDB"+a),console.log("updateLocalDB",a,r)})})}),this.nameBill="",this.month=+(new Date).getMonth()+1,this.year=+(new Date).getFullYear()}doiChieuCMIS(){var e=this;return(0,M.Z)(function*(){for(let a=0;a<e.selectedItems.length;a++){const s=e.selectedItems[a];yield e.getCMISByItem(s,a)}})()}getCMISByItem(e,i){var a=this;return(0,M.Z)(function*(){if(!a.checkPer(2,"cmis4-quyet-toan-dmt"))return null;let r={MA_DVIQLY:a.cmis4SV.getUser().SUBDIVISIONID,MA_KHANG:e.MaKhachHang,NAM:-1,QUYET_TOAN:0},l=yield a.cmis4SV.getDsachKhangQToanDienMTAM(r),u=[],h=0,p=0;0==l.length&&u.push("Kho\u0302ng co\u0301 n\u1ee3");for(let f=0;f<l.length;f++){const d=l[f];p+=d.SO_TIEN+d.TIEN_GTGT,d.NAM==e.Nam&&d.MA_KHANG==e.MaKhachHang&&d.THANG==e.Thang&&d.SO_TIEN==e.TruocThue&&(u.push(d.THANG+"/"+d.NAM+": OK"),h=d.SO_TIEN+d.TIEN_GTGT)}a.selectedItems[i].DoiChieuCMIS=u.join(", ")+(p!==h?` | ${new Intl.NumberFormat("it-IT").format(p)}`:"")})()}getClip(e){var i=this;return(0,M.Z)(function*(){let a=[];for(let r=0;r<e.length;r++)a.push(e[r][0]);let s=[];for(let r=0;r<i.items.length;r++){const l=i.items[r];(a.includes(l._id)||a.includes(l.MaKhachHang)&&l.TrangThaiHoSo<2)&&s.push(l)}localStorage.BangKe=JSON.stringify([...new Set(s)]),i.plus.clickBtn("closeModallapbangke"),i.getCache()})()}guiMailChuaGui(){let e=[],i=b()(new Date(this.year,this.month-1)).format("MM/YYYY");for(let s=0;s<this.items.length;s++){const r=this.items[s];0==r.DaGuiMail&&r.KyThanhToan==i&&1==r.CoHoaDon&&e.push(r)}let a=[...new Set(e)];this.nlmtSv.sendMail(a)}setItem(e){}getItem(e){}sendMail(){this.authSV.unsubcribe(),this.httpSV.unsubcribe(),console.info("sendMail()");const e=this.itemsReport.concat(this.itemsReportNoBill);let i=[...new Set(e)];this.nlmtSv.sendMail(i)}saveList(){this.checkPer(2);const e=this.bangKe;if(console.log(e),!confirm(`B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n l\u01b0u ${e.length} kh\xe1ch h\xe0ng?`))return this.reload();this.httpSV.post(this.api+"/import",e,this.fileName).subscribe(a=>{this.reload()})}getSetup(e){this.nlmtSv.setup=e,console.log(this.nlmtSv.setup,e)}getUser(e){this.user=e,this.level=e.opt[this.api],this.nlmtSv.user=e,this.fileName=e.unit+"-"+this.api}getAllIDB(){this.idbSV.IDB_DB_GetAll(this.db,this.api).subscribe(e=>{this.items=e,this.getInit()})}getInit(){this.idbSV.IDB_DB_GetAllByIndexKey(this.db,this.api,"TrangThaiHoSo","<",2).then(e=>{this.items=e,this.filter=e.slice(0,100),this.getCache(),console.log(this.filter)})}getIDB(e){console.log("getIDB",e),this.filter=[],this.selectedItems=[],this.idbSV.IDB_DB_GetAllByIndexKey(this.db,this.api,"TrangThaiHoSo","=",e).then(i=>{if(0==i.length)return this.plus.alertMatSnackBar("Kh\xf4ng c\xf2n k\u1ebft qu\u1ea3 ph\xf9 h\u1ee3p");this.items=i.filter(a=>a.TrangThaiHoSo==e),this.filter=this.items.slice(0,100)}),0==this.items.length&&this.plus.alertMatSnackBar("Kh\xf4ng c\xf2n k\u1ebft qu\u1ea3 ph\xf9 h\u1ee3p")}checkDMTKH(e){return!0}checkDMTInput(e,i){return!0}convertToList(e=this.dataInXls){var i=this;return(0,M.Z)(function*(){for(let a=0;a<e.length;a++){const s=e[a],r={MaKhachHang:`${s.MA_KHANG}`.slice(0,13),MaGCS:s.MA_SOGCS,Nam:+b()(s.NGAY_GCS,"DD/MM/YYYY").format("YYYY"),Thang:+b()(s.NGAY_GCS,"DD/MM/YYYY").format("MM"),SanLuong:+s.DIEN_TTHU,DonGia:+s.DON_GIA,TruocThue:+s.SO_TIEN,NgayMuaHang:s.NGAY_GCS,TiLeThue:+s.TYLE_THUE,Thue:+s.TIEN_GTGT,TongTien:+s.TONG_TIEN,KyThanhToan:b()(s.NGAY_GCS,"DD/MM/YYYY").format("MM/YYYY"),DaGuiMail:0,TrangThaiThanhToan:0,NhatKy:[`${b()().format("HH:mm DD/MM/YYYY")}: Import m\u1edbi `],ID_DMT:s.ID_DMT||0};let l=yield i.idbSV.IDB_DB_GetByKey(i.db,"dmt-khach-hang","MaKhachHang",r.MaKhachHang);if(!l)return alert(`B\u1ea1n ch\u01b0a c\xf3 d\u1eef li\u1ec7u kh\xe1ch h\xe0ng ${s.MA_KHANG}`);let u=Object.assign(l,r);u.MatHang=` Ti\u1ec1n \u0111i\u1ec7n d\u1ef1 \xe1n \u0110i\u1ec7n MTMN th\xe1ng ${u.KyThanhToan} theo h\u1ee3p \u0111\u1ed3ng s\u1ed1 ${u.SoHopDong} ng\xe0y ${u.NgayHopDong} (${u.MaKhachHang})`,u.SoHopDong=u.SoHopDong,u.NgayHopDong=u.NgayHopDong,u.TrangThaiHoSo=0==u.CoHoaDon?1:-1,delete u._id,delete u.keyWord,delete u.MaKV,delete u.__v,delete u.CCCDFull,delete u.GPKDFull,delete u.CSPin,delete u.DanhXung,delete u.DiaChiLapDat,delete u.DienThoai,delete u.SoHoSo,u.keyWord=i.httpSV.geneKeyWord(u.ChuTaiKhoan,u.MaKhachHang,u.SoHopDong,u.Email),i.idbSV.IDB_DB_GetAllByIndexKey(i.db,"dmt-input","MaKhachHang","=",r.MaKhachHang).then(h=>{let p=!1;for(let f=0;f<h.length;f++)if(h[f].NgayMuaHang==r.NgayMuaHang){p=!0;break}if(p)i.duplicateItems.push(u);else if(i.nlmtSv.inputForm.patchValue(u),i.nlmtSv.inputForm.invalid){console.log("bangKeForm.invalid");const f=i.plus.getErrValidateForm(i.nlmtSv.inputForm);u._ThongBaoLoi=f,i.errors.push(u),i.step=2}else i.bangKe.push(u)})}i.step=i.errors.length>0?2:3,console.log(i.bangKe)})()}getDateCmis(e,i){this.month=+b()(e,"DD/MM/YYYY").month()+1,this.year=+b()(e,"DD/MM/YYYY").year()}getCmis(e,i){var a=this;return(0,M.Z)(function*(){let s=new Date(a.year,a.month-1,1),r=new Date(a.year,a.month,0),l={MA_DVIQLY:a.cmis4SV.getUser().SUBDIVISIONID,TU_NGAY_GCS:b()(s).format("DD/MM/YYYY"),DEN_NGAY_GCS:b()(r).format("DD/MM/YYYY"),MA_SOGCS:["ALL"]},u=yield a.cmis4SV.getBangKeThanhToanTienDienMTAM(l),h=[];for(let p=0;p<u.length;p++){const f=u[p];let d=+f.MA_SOGCS.slice(2,4);d>=+e&&d<=+i&&(console.log(f,d,+e,+i),h.push(f))}a.convertToList(h),a.plus.clickBtn("closeImportButton")})()}addDuplicate(e,i){confirm(`B\u1eaft bu\u1ed9c ph\u1ea3i th\xeam m\xe3 ${e.MaKhachHang} n\xe0y?`)&&(this.bangKe.push(e),this.duplicateItems.splice(i,1))}onDropFile(e){console.log("onDropFile()"),this.reset();for(let i=0;i<e.length;i++)"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"==e[i].type?this.excelSv.fileToJsonArray(e[i]).then(a=>{this.dataInXls=a,console.log(a),this.convertToList()}):this.plus.alertError("File kh\xf4ng h\u1ee3p l\u1ec7");this.plus.clickBtn("closeImportButton")}onDropFileLapBangKe(e){console.log("onDropFileLapBangKe()"),this.reset(),"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"==e[0].type?this.excelSv.fileToJsonArray(e[0]).then(i=>{for(let a=0;a<i.length;a++)this.idbSV.IDB_DB_GetById(this.db,this.api,i[a]._id).then(r=>{this.checkItem({checked:!0},r)})}):this.plus.alertError("File kh\xf4ng h\u1ee3p l\u1ec7"),this.plus.clickBtn("closeModallapbangke")}onDropFileBK(e){console.log("onDropFileBK()"),this.reset();for(let i=0;i<e.length;i++)"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"==e[i].type?this.excelSv.fileToJsonArray(e[i]).then(a=>{this.dataInXls=a,console.log(a);for(let s=0;s<a.length;s++){const r=a[s];if(this.nlmtSv.inputForm.patchValue(r),this.nlmtSv.inputForm.invalid){const l=this.plus.getErrValidateForm(this.nlmtSv.inputForm);r._ThongBaoLoi=l,this.errors.push(r),this.step=2}}}):(this.excelSv.parseJsonFile(e[i]).then(a=>{for(let s=0;s<a.length;s++){const r=a[s];delete r.keyword,delete r.__v,r.keyWord=this.httpSV.geneKeyWord(r.MaKhachHang,r.KhachHang,r.MatHang),this.dataInXls.push(r)}}),this.plus.alertError("File kh\xf4ng h\u1ee3p l\u1ec7"))}importBackup(){confirm(`B\u1ea1n c\xf3 mu\u1ed1n l\u01b0u ${this.dataInXls.length} d\xf2ng d\u1eef li\u1ec7u?`)&&this.httpSV.post(this.api+"/import",this.dataInXls,this.fileName).subscribe(e=>{this.reload()})}checkEmail(){const e=this.itemsReport.concat(this.itemsReportNoBill);for(let i=0;i<e.length;i++){let s=this.nlmtSv.geneBodyMail(e[i],1);this.emails.push(s)}}reporUnqualified(){this.idbSV.IDB_DB_GetAllByIndexKey(this.db,this.api,"TrangThaiHoSo","<",2).then(e=>{console.log(e);let i=e.map(r=>({_id:r._id,MaKhachHang:r.MaKhachHang,Thang:r.Thang,Nam:r.Nam,KhachHang:r.KhachHang,SanLuong:r.SanLuong,DonGia:r.DonGia,TiLeThue:r.TiLeThue,Thue:r.Thue,TongTien:r.TongTien,TrangThaiHoSo:r.TrangThaiHoSo,TreoThanhToan:r.TreoThanhToan}));this.excelSv.export(i,"ChuaThanhToan");let a=[],s=[];for(let r=0;r<e.length;r++){const l=e[r];1==l.TrangThaiHoSo&&l.Thang==this.month&&l.Nam==this.year&&s.push(l),l.TrangThaiHoSo<1&&l.Thang==this.month&&l.Nam==this.year&&a.push(l)}0==a.length&&0==s.length&&this.plus.alertMatSnackBar("Kh\xf4ng c\xf3 KH t\u1ed3n trong k\u1ef3"),a.length>0&&this.nlmtSv.export_BangKeTon(a,!1),s.length>0&&this.nlmtSv.export_BangKeTon(s,!0),this.plus.clickBtn("closeModalUnqualified")})}DuDieuKien(){this.nlmtSv.duDieuKien(this.selectedItems)}ChuaDuDieuKien(){this.nlmtSv.ChuaDuDieuKien(this.selectedItems)}xuatBangKe(){if(this.nameBill=(0,Pn.h)(4).toUpperCase(),localStorage.nameBill=this.nameBill,this.itemsReportNoBill.length>0){const e=this.nlmtSv.geneBodyPay(this.itemsReportNoBill,this.nameBill);this.nlmtSv.export_ThanhToanKD(e)}if(this.itemsReport.length>0){const e=this.nlmtSv.geneBodyPay(this.itemsReport,this.nameBill);e.TenBangKe=this.nameBill,this.nlmtSv.export_ThanhToanKD(e)}}xuatBangKeChiSo(){var e=this;return(0,M.Z)(function*(){e.nlmtSv.xuatBangKeChiSo(e.db,e.selectedItems)})()}guiBangKe(){let e=localStorage.nameBill?localStorage.nameBill:(0,Pn.h)(4);this.itemsReport.length>0&&this.nlmtSv.sendList(this.itemsReport,e).then(i=>{this.clearLocalBK(),localStorage.nameBill=""}),this.itemsReportNoBill.length>0&&this.nlmtSv.sendList(this.itemsReportNoBill,e).then(i=>{this.clearLocalBK(),localStorage.nameBill=""})}showUnpaid(){this.items=this.items.filter(e=>e.TrangThaiHoSo<1)}thanhToanTrongThang(){let e=b()(this.startDay).format("MM/YYYY");this.idbSV.IDB_DB_GetAllByIndexKey(this.db,this.api,"NgayThanhToan","=",e).then(i=>{this.nlmtSv.export_BangKeTon(i,!1)})}getCache(){var e=this;return(0,M.Z)(function*(){let i=localStorage.getItem("BangKe"),a=[],s={checked:!0};i?a=JSON.parse(i):e.clearLocalBK();for(let r=0;r<a.length;r++){const l=a[r];yield e.idbSV.IDB_DB_GetById(e.db,"dmt-input",l._id).then(u=>{u.Thang>0&&u.TrangThaiHoSo<2&&e.checkItem(s,u)})}})()}checkItem(e,i){if(i.TrangThaiHoSo>1)return;const a=this.itemsReport.indexOf(i),s=this.itemsReportNoBill.indexOf(i);let r=this.plus.findInArr(this.selectedItems,"_id",i._id);if(e.checked){if(r.length>0)return;this.isHasBill(i),i.TrangThaiHoSo=1}else this.all=!1,i.TrangThaiHoSo=-1,a>0?this.itemsReport.splice(a,1):this.itemsReportNoBill.splice(s,1),this.selectedItems.splice(r[0],1);this.selectedItems=[...new Set(this.selectedItems)],this.tongTienBangKe=this.plus.sumByKey(this.selectedItems,"TongTien")}checkboxTest(e){return 1==this.plus.findInArr(this.selectedItems,"_id",e._id).length}checkAll(e){if(e.checked){this.all=!0;for(let i=0;i<this.filter.length;i++){const a=this.filter[i];a.TrangThaiHoSo>1||(this.filter[i].TrangThaiHoSo=1,this.isHasBill(a))}}else this.reload()}isHasBill(e){e&&(0==e.CoHoaDon?this.itemsReportNoBill.push(e):this.itemsReport.push(e),this.selectedItems.push(e))}clearLocalBK(){localStorage.removeItem("BangKe"),this.selectedItems=[],this.reload()}ondragover(){document.getElementById("dropZone").setAttribute("drop-active","true")}getMonth(e){this.itemsReport=[],this.month=+b()(e,"MM/YYYY").month()+1,this.year=+b()(e,"MM/YYYY").year(),console.log(`GetMonth:  ${this.year}, ${this.month}`)}onEdit(e){}onDelete(e){confirm("B\u1ea1n mu\u1ed1n x\xf3a?")&&this.nlmtSv.onDeleteInput(e).then(a=>{this.plus.alertSuccess("X\xf3a th\xe0nh c\xf4ng")})}search(){let e=this.searchForm.value;if(this.searchForm.valid){console.log(e);const i=[];this.allowLoadmore=!1,this.idbSV.IDB_DB_GetAll(this.db,this.api).subscribe(a=>{console.log("IDB_DB_GetAll()",a.length);const s=this.plus.removeAccents(e.input);for(let r=0;r<a.length;r++){let l=a[r];const u=JSON.stringify(l);this.plus.removeAccents(u).includes(s)&&i.push(l)}this.filter=i,0==i.length&&this.plus.alertMatSnackBar("Kh\xf4ng c\xf2n k\u1ebft qu\u1ea3 ph\xf9 h\u1ee3p")})}}find(e){this.filter=e}pushData(e){if(console.log(e),e&&this.allowLoadmore){this.loadSV.load("pushData");let i=this.filter.length,a=this.items.slice(i,i+100);this.filter=this.filter.concat(a),this.loadSV.loaded("pushData")}}checkPer(e,i=this.api){return this.authSV.checkPer(i,e)}dropCdk(e){(0,ae.bA)(this.selectedItems,e.previousIndex,e.currentIndex)}reload(){return this.plus.reload()}reset(){console.log("reset()"),this.filter=[],this.errors=[]}changePage(e){this.filter=this.items.slice(e.pageIndex*e.pageSize,(e.pageIndex+1)*e.pageSize)}pageChange(e){this.pageIndex=e.pageIndex}trackByFn(e,i){return i._id}resetDB(){this.reload()}pre(){this.i>0?this.i--:this.i=0}next(){this.i<this.emails.length-1?this.i++:this.i=1}showModal(e){new vt(e).show()}moHoaDon(){var e=this;return(0,M.Z)(function*(){for(let i=0;i<e.selectedItems.length;i++){const a=e.selectedItems[i];let s=`https://spcevn-my.sharepoint.com/personal/anhnhp_dn_evnspc_vn/Documents/HoaDon/${a.Nam}/${a.Thang<10?"0"+a.Thang:a.Thang}/${a.MaKhachHang}.pdf`;yield e.plus.sleep(300),window.open(s,"_blank")}})()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(z.T),t.Y36(c.qu),t.Y36(me.x),t.Y36(lt.j),t.Y36(B.c1),t.Y36(j.b),t.Y36(si.j),t.Y36(ut.Y),t.Y36(ct.O),t.Y36(ri.a))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-nlmt-input"]],decls:96,vars:23,consts:[[1,"container"],[3,"user","nlmtSetup"],[3,"percentLoad","emit"],["id","back-btn","mat-raised-button","","color","primary",3,"click",4,"ngIf"],["appearance","outline",3,"formGroup"],["matInput","","id","search-api","formControlName","input","placeholder","T\xecm ki\u1ebfm (F2)",3,"keyup.enter"],[1,"row"],["color","accent","mat-raised-button","","data-bs-toggle","modal","data-bs-target","#import"],["mat-raised-button","","color","warn",3,"click",4,"ngIf"],["mat-raised-button","","color","warn","matTooltip","G\u1eedi mail",3,"click",4,"ngIf"],["mat-raised-button","","color","primary","data-bs-toggle","modal","data-bs-target","#Email","matTooltip","Xem tr\u01b0\u1edbc email",3,"click",4,"ngIf"],["mat-raised-button","","color","primary","matTooltip","KH \u0111\u1ee7 \u0110K",3,"click",4,"ngIf"],["mat-raised-button","","color","primary","matTooltip","KH ch\u01b0a \u0111\u1ee7 \u0110K",3,"click",4,"ngIf"],["mat-raised-button","","color","accent","matTooltip","Xu\u1ea5t B\u1ea3ng k\xea",3,"click",4,"ngIf"],["mat-raised-button","","color","warn","matTooltip","G\u1eedi b\u1ea3ng k\xea",3,"click",4,"ngIf"],["mat-raised-button","","matTooltip","B\u1ea3ng k\xea t\u1ed3n",3,"click",4,"ngIf"],["mat-raised-button","","data-bs-toggle","modal","data-bs-target","#lapbangke","matTooltip","Import l\u1eadp b\u1ea3ng k\xea"],["class","row",4,"ngIf"],["class","progress ",4,"ngIf"],[1,"div"],["class","tit",4,"ngIf"],["class","table",4,"ngIf"],["hidden","","id","modalimport","type","button","data-bs-toggle","modal","data-bs-target","#import",1,"btn","btn-primary"],["id","import","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","staticBackdropLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[3,"label","files","ondragover",4,"ngIf"],[1,"modal-footer"],["class","cmis4",4,"ngIf"],["color","primary","mat-raised-button","","id","closeImportButton","data-bs-dismiss","modal","aria-label","Close"],["type","button","hidden","","data-bs-toggle","modal","data-bs-target","#unqualified",1,"btn","btn-primary","btn-lg"],["id","unqualified","tabindex","-1","role","dialog","aria-labelledby","modelTitleId","aria-hidden","true",1,"modal","fade"],["modalDMTBaoCao",""],["role","document",1,"modal-dialog"],[1,"modal-title"],[3,"startDay","month"],[1,"modal-footer","mx-3","my-3"],["color","accent","mat-raised-button","","matTooltip","G\u1eedi email ch\u01b0a g\u1eedi",3,"click"],["color","accent","mat-raised-button","","matTooltip","B\xe1o c\xe1o t\u1ed3n",3,"click"],["mat-raised-button","","matTooltip","\u0110\xf3ng","color","primary","id","closeModalUnqualified","data-bs-dismiss","modal"],["hidden","","id","modalEmail","type","button","data-bs-toggle","modal","data-bs-target","#Email",1,"btn","btn-primary"],["id","Email","data-bs-keyboard","false","tabindex","-1","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade"],["class","modal-body",4,"ngIf"],["color","primary","mat-raised-button","","data-bs-dismiss","modal","aria-label","Close"],["hidden","","id","modallapbangke","type","button","data-bs-toggle","modal","data-bs-target","#lapbangke",1,"btn","btn-primary"],["id","lapbangke","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade"],[3,"label","files","ondragover"],[3,"label","excel"],["color","primary","id","closeModallapbangke","mat-raised-button","","data-bs-dismiss","modal","aria-label","Close"],["id","back-btn","mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","warn","matTooltip","G\u1eedi mail",3,"click"],["mat-raised-button","","color","primary","data-bs-toggle","modal","data-bs-target","#Email","matTooltip","Xem tr\u01b0\u1edbc email",3,"click"],["mat-raised-button","","color","primary","matTooltip","KH \u0111\u1ee7 \u0110K",3,"click"],["mat-raised-button","","color","primary","matTooltip","KH ch\u01b0a \u0111\u1ee7 \u0110K",3,"click"],["mat-raised-button","","color","accent","matTooltip","Xu\u1ea5t B\u1ea3ng k\xea",3,"click"],["mat-raised-button","","color","warn","matTooltip","G\u1eedi b\u1ea3ng k\xea",3,"click"],["mat-raised-button","","matTooltip","B\u1ea3ng k\xea t\u1ed3n",3,"click"],["color","primary","mat-raised-button","",3,"click"],[1,"table","table-hover","table-responsive"],[1,"thead-inverse"],["cdkDropList","",3,"cdkDropListDropped"],["cdkDrag","",4,"ngFor","ngForOf"],["class","text-center",4,"ngIf"],["cdkDrag",""],[1,"text-end"],[1,"text-danger"],[1,"bg-info"],[1,"text-center"],["mat-raised-button","","color","primary",3,"click"],[1,"progress"],["role","progressbar","aria-valuenow","0","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-primary","progress-bar-striped"],[1,"tit"],[1,"table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","7",1,"text-center"],[1,"tit","text-danger"],["scope","row"],[3,"click"],["color","primary","mat-mini-fab",""],["colspan","7",1,"text-center","text-warning"],["class","text-danger",4,"ngIf"],["color","primary",3,"selected","click",4,"ngFor","ngForOf"],[1,"table","table-hover"],[1,"table-light"],["color","warn",3,"checked","change"],[4,"Device"],["color","primary",3,"click"],[4,"ngFor","ngForOf","ngForTrackBy"],["color","primary",3,"selected","click"],["color","primary",3,"disabled","checked","change"],[3,"routerLink"],[3,"ngClass"],[3,"click",4,"ngIf"],["color","warn",3,"click",4,"ngIf"],["color","primary",4,"ngIf","ngIfElse"],["emailSend",""],["color","primary"],["color","warn",3,"click"],[1,"cmis4"],[1,"row","d-flex","justify-content-center"],["matInput","","placeholder","T\u1eeb s\u1ed5","value",""],["tuSo",""],["matInput","","placeholder","\u0110\u1ebfn s\u1ed5","value",""],["denSo",""],["color","warn","mat-raised-button","",3,"click"],[1,"button"],["type","button",1,"btn","btn-danger","float-left",3,"click"],["aria-hidden","true",1,"fa","fa-arrow-left"],["type","button",1,"btn","btn-danger","float-right",3,"click"],["aria-hidden","true",1,"fa","fa-arrow-right"],[1,"card-body"],[1,"text-center","rounded","font-weigth-bold","bg-warning","py-2"],[3,"innerHTML"],[1,"text-primary"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"app-nlmt-share",1),t.NdJ("user",function(s){return i.getUser(s)})("nlmtSetup",function(s){return i.getSetup(s)}),t.qZA(),t.TgZ(2,"app-loadmore",2),t.NdJ("emit",function(s){return i.pushData(s)}),t.qZA(),t.YNc(3,ph,3,1,"button",3),t.TgZ(4,"mat-form-field",4)(5,"input",5),t.NdJ("keyup.enter",function(){return i.search()}),t.qZA()(),t.TgZ(6,"div",6)(7,"div")(8,"button",7)(9,"mat-icon"),t._uU(10,"control_point"),t.qZA()(),t.YNc(11,mh,2,1,"button",8),t.YNc(12,_h,3,1,"button",9),t.YNc(13,dh,3,1,"button",10),t.YNc(14,fh,3,1,"button",11),t.YNc(15,gh,3,1,"button",12),t.YNc(16,Th,3,1,"button",13),t.YNc(17,bh,3,1,"button",14),t.YNc(18,Eh,3,1,"button",15),t.TgZ(19,"button",16)(20,"mat-icon"),t._uU(21,"library_add"),t.qZA()()()(),t.YNc(22,Ch,22,6,"div",17),t.YNc(23,vh,3,3,"div",18),t.TgZ(24,"div",19),t.YNc(25,xh,2,1,"h5",20),t.YNc(26,Mh,29,6,"table",21),t.qZA(),t.YNc(27,Qh,32,12,"div",17),t.qZA(),t.TgZ(28,"button",22),t._uU(29," Launch static backdrop modal "),t.qZA(),t.TgZ(30,"div",23)(31,"div",24)(32,"div",25)(33,"div",26)(34,"h5",27),t._uU(35,"Import danh s\xe1ch b\u1ea3ng k\xea"),t.qZA(),t._UZ(36,"button",28),t.qZA(),t.TgZ(37,"div",29),t.YNc(38,Rh,1,1,"app-drop-files",30),t.qZA(),t.TgZ(39,"div",31),t.YNc(40,Wh,12,1,"div",32),t.TgZ(41,"button",33)(42,"mat-icon"),t._uU(43,"close"),t.qZA()()()()()(),t.TgZ(44,"button",34),t._uU(45," Launch demo modal "),t.qZA(),t.TgZ(46,"div",35,36)(48,"div",37)(49,"div",25)(50,"div",26)(51,"h5",38),t._uU(52,"Ch\u1ecdn k\u1ef3 th\u1ef1c hi\u1ec7n"),t.qZA()(),t.TgZ(53,"div",29)(54,"app-month-year",39),t.NdJ("month",function(s){return i.getMonth(s)}),t.qZA()(),t.TgZ(55,"div",40)(56,"button",41),t.NdJ("click",function(){return i.guiMailChuaGui()}),t.TgZ(57,"mat-icon"),t._uU(58,"contact_mail"),t.qZA()(),t.TgZ(59,"button",42),t.NdJ("click",function(){return i.reporUnqualified()}),t.TgZ(60,"mat-icon"),t._uU(61,"archive"),t.qZA()(),t.TgZ(62,"button",43)(63,"mat-icon"),t._uU(64,"close"),t.qZA()()()()()(),t.TgZ(65,"button",44),t._uU(66," Launch static backdrop modal "),t.qZA(),t.TgZ(67,"div",45)(68,"div",24)(69,"div",25)(70,"div",26)(71,"h5",27),t._uU(72,"G\u1eedi email"),t.qZA(),t._UZ(73,"button",28),t.qZA(),t.YNc(74,jh,11,3,"div",46),t.TgZ(75,"div",31)(76,"button",47)(77,"mat-icon"),t._uU(78,"close"),t.qZA()()()()()(),t.YNc(79,zh,8,1,"div",17),t.TgZ(80,"button",48),t._uU(81," Launch static backdrop modal "),t.qZA(),t.TgZ(82,"div",49)(83,"div",24)(84,"div",25)(85,"div",26)(86,"h5",27),t._uU(87,"Import l\u1eadp b\u1ea3ng k\xea"),t.qZA(),t._UZ(88,"button",28),t.qZA(),t.TgZ(89,"div",29)(90,"app-drop-files",50),t.NdJ("files",function(s){return i.onDropFileLapBangKe(s)})("ondragover",function(){return i.ondragover()}),t.qZA(),t.TgZ(91,"app-parse-excel-clipboard",51),t.NdJ("excel",function(s){return i.getClip(s)}),t.qZA()(),t.TgZ(92,"div",31)(93,"button",52)(94,"mat-icon"),t._uU(95,"close"),t.qZA()()()()()()),2&e&&(t.xp6(2),t.Q6J("percentLoad",60),t.xp6(1),t.Q6J("ngIf",i.step>1),t.xp6(1),t.Q6J("formGroup",i.searchForm),t.xp6(7),t.Q6J("ngIf",i.bangKe.length>0&&0==i.errors.length),t.xp6(1),t.Q6J("ngIf",i.emails.length>0),t.xp6(1),t.Q6J("ngIf",i.selectedItems.length>0),t.xp6(1),t.Q6J("ngIf",i.selectedItems.length>0),t.xp6(1),t.Q6J("ngIf",i.selectedItems.length>0),t.xp6(1),t.Q6J("ngIf",i.itemsReportNoBill.length>0||i.itemsReport.length>0),t.xp6(1),t.Q6J("ngIf",i.itemsReportNoBill.length+i.itemsReport.length>0),t.xp6(1),t.Q6J("ngIf",i.items.length>0),t.xp6(4),t.Q6J("ngIf",i.selectedItems.length>0),t.xp6(1),t.Q6J("ngIf",i.bangKe.length>0||i.duplicateItems.length>0),t.xp6(2),t.Q6J("ngIf",1==i.step),t.xp6(1),t.Q6J("ngIf",i.step>1),t.xp6(1),t.Q6J("ngIf",i.items.length>0),t.xp6(11),t.Q6J("ngIf",0==i.bangKe.length||!i.wordFile),t.xp6(2),t.Q6J("ngIf",i.checkPer(4,"cmis4-quyet-toan-dmt")),t.xp6(14),t.Q6J("startDay",i.startDay),t.xp6(20),t.Q6J("ngIf",i.emails.length>0),t.xp6(5),t.Q6J("ngIf",i.checkPer(4)),t.xp6(11),t.Q6J("label",""),t.xp6(1),t.Q6J("label","Copy m\xe3 PK d\xe1n v\xf4 \u0111\xe2y"))},dependencies:[A.mk,A.sg,A.O5,Tt.rH,c.Fj,c.JJ,c.JL,c.sg,c.u,li.oG,Y.lW,Y.nh,X.Hw,ht.Nt,D.KE,ce.z2,ce.iO,he.gM,$.ib,$.yz,pe.k,ae.Wj,ae.Zt,ue.w,ye.HP,hh.K,Ie.k,It,A.JJ,G.pW,G._2,G.zZ],data:{animation:[ot.Ym,ot.Mq]}}),o})();var tp=_(54004),ep=_(75625),np=_(70262);function ip(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",4),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.reset())}),t.TgZ(1,"mat-icon"),t._uU(2,"x"),t.qZA()()}}let op=(()=>{class o{constructor(e,i,a,s){this.plus=e,this.fb=i,this.http=a,this.loadSV=s,this.data=new t.vpe,this.subs=new oi.w0,this.searchtxt=this.plus.search.getValue().what,this.searchForm=this.fb.group({what:["",[c.kI.required,c.kI.minLength(3),c.kI.maxLength(100)]]})}ngOnInit(){this.find()}find(){this.searchForm.valueChanges.pipe((0,le.b)(1e3)).subscribe(e=>{this.searchForm.valid?(this.loadSV.load("find"),e.what=this.plus.removeAccents(e.what),this.plus.search.next(e),this.httpPost(this.api+"/find",e).subscribe(i=>{i.data&&(this.data.emit(),this.loadSV.loaded("find")),this.plus.alertToasrt(i)})):this.loadSV.loaded("find")})}reset(){this.searchForm.reset()}httpPost(e,i){return console.log("%FIND -> "+e,"font-style: italic; color:green",i),this.http.post(this.plus.getApiUrl(e),i,this.plus.getHeader()).pipe((0,tp.U)(a=>a),(0,ep.X)(1),(0,np.K)(a=>{throw this.loadSV.loaded("find"),this.plus.alertError("Kh\xf4ng c\xf3 ph\u1ea3n h\u1ed3i!"),a}))}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(z.T),t.Y36(c.qu),t.Y36(ei.eN),t.Y36(j.b))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-search-api"]],inputs:{api:"api"},outputs:{data:"data"},decls:6,vars:2,consts:[[1,"form-group","search",3,"formGroup"],[1,"example-form-field"],["matInput","","type","text","formControlName","what"],["mat-button","","matSuffix","","mat-icon-button","",3,"click",4,"ngIf"],["mat-button","","matSuffix","","mat-icon-button","",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"mat-form-field",1)(2,"mat-label"),t._uU(3,"T\xecm ki\u1ebfm n\xe2ng cao"),t.qZA(),t._UZ(4,"input",2),t.YNc(5,ip,3,0,"button",3),t.qZA()()),2&e&&(t.Q6J("formGroup",i.searchForm),t.xp6(5),t.Q6J("ngIf",i.searchForm.dirty))},dependencies:[A.O5,c.Fj,c.JJ,c.JL,c.sg,c.u,Y.lW,Y.RK,X.Hw,ht.Nt,D.KE,D.hX,D.R9],styles:[".search[_ngcontent-%COMP%]{width:300px;transition:width .4s ease-in-out}"]}),o})();var Qn=_(46936);function ap(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",8),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.reload())}),t.TgZ(1,"mat-icon"),t._uU(2,"undo"),t.qZA()()}2&o&&t.Q6J("@slideIn",void 0)}function sp(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"app-search-api",9),t.NdJ("data",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.find(a))}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("api",e.api)}}function rp(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"mat-icon",16),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit,s=t.oxw(2);return t.KtG(s.onDelete(a))}),t._uU(1,"delete"),t.qZA()}}function lp(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td",14),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw(2);return t.KtG(r.onEdit(s))}),t._uU(2),t.qZA(),t.TgZ(3,"td",14),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw(2);return t.KtG(r.onEdit(s))}),t._uU(4),t.qZA(),t.TgZ(5,"td",14),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw(2);return t.KtG(r.onEdit(s))}),t._uU(6),t.ALo(7,"date"),t.qZA(),t.TgZ(8,"td",14),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw(2);return t.KtG(r.onEdit(s))}),t._uU(9),t.qZA(),t.TgZ(10,"td"),t.YNc(11,rp,2,0,"mat-icon",15),t.qZA()()}if(2&o){const e=n.$implicit,i=t.oxw(2);t.xp6(2),t.Oqu(e.TaiKhoan),t.xp6(2),t.Oqu(e.NoiDung),t.xp6(2),t.Oqu(t.xi3(7,5,e.ThoiGian,"dd/MM/YYYY HH:mm")),t.xp6(3),t.Oqu(e.MaKhachHang),t.xp6(2),t.Q6J("ngIf",i.checkPer(4))}}function cp(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"table",10)(1,"thead",11)(2,"tr")(3,"th"),t._uU(4,"T\xe0i kho\u1ea3n"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"N\u1ed9i dung thay \u0111\u1ed5i"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Th\u1eddi gian"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"M\xe3 kh\xe1ch h\xe0ng"),t.qZA(),t.TgZ(11,"th")(12,"mat-icon",12),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.reload())}),t._uU(13,"cached"),t.qZA()()()(),t.TgZ(14,"tbody"),t.YNc(15,lp,12,8,"tr",13),t.qZA()()}if(2&o){const e=t.oxw();t.Q6J("@slideIn",void 0),t.xp6(15),t.Q6J("ngForOf",e.filter.length>0?e.filter:e.items.slice(0,10))("ngForTrackBy",e.trackByFn)}}const up=function(){return[5,10,25,100]};let hp=(()=>{class o{constructor(e,i,a,s,r,l){this.plus=e,this.fb=i,this.authSV=a,this.loadSV=s,this.httpSV=r,this.idbSV=l,this.title="L\u1ecbch s\u1eed c\u1eadp nh\u1eadt",this.dbName="dien-luc",this.api="dmt-history",this.db=null,this.items=[],this.selectedItem=null,this.filter=[],this.global=!0,this.chart=[],this.user=this.authSV.userDir,this.main=this.fb.group({keyWord:["",[]],_id:["",[]],TaiKhoan:["",[c.kI.required]],NoiDung:["",[c.kI.required]],ThoiGian:["",[c.kI.required]],MaKhachHang:["",[c.kI.required]]})}ngOnInit(){this.plus.setTiTle(this.title),this.idbSV.IDB_InitDB(this.dbName).subscribe(e=>{this.db=e,this.user=this.authSV.userDir,this.fileName=this.user.unit+"-"+this.api,this.authSV.updateLocalDB(`dmt/${this.user.unit}/history`,this.api,this.dbName,"").subscribe(i=>{this.getIDB()})})}getIDB(){this.filter=[],this.idbSV.IDB_DB_GetAll(this.db,this.api).subscribe(e=>{this.items=e})}ngOnDestroy(){console.log("Destroy",this.api),this.plus.subs.unsubscribe()}save(){if(this.main.invalid)return;const e=this.main.value,i=this.plus.datetoNumObj(this.main.value,["ThoiGian"]);console.log(i),null==e._id?(delete e._id,this.httpSV.post(this.api,i,this.fileName).subscribe(a=>{})):this.httpSV.put(this.api,i,this.fileName).subscribe(a=>{})}onEdit(e){this.selectedItem=e;const i=this.plus.dateToHtmlObj(e,["ThoiGian"]);this.main.patchValue(i),this.plus.clickBtn("openModal")}onDelete(e){confirm("B\u1ea1n mu\u1ed1n x\xf3a?")&&this.httpSV.disable(this.api,e,this.fileName).then(a=>{console.log(a)})}chooseOpt(e,i,a,s=!1){this.main.controls[i].setValue(e[a]),s&&this.main.controls[i+"ID"].setValue(e._id)}closeModal(){this.main.reset()}search(e){this.filter=e}find(e){this.items=e}checkPer(e){return this.authSV.checkPer(this.api,e)}patchForm(){this.main.reset({_id:" "})}reload(){return this.plus.reload(this.dbName+"/"+this.api)}reset(){this.filter=[],this.getIDB(),this.main.reset({})}changePage(e){this.filter=this.items.slice(e.pageIndex*e.pageSize,(e.pageIndex+1)*e.pageSize)}trackByFn(e,i){return i}resetDB(){}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(z.T),t.Y36(c.qu),t.Y36(B.c1),t.Y36(j.b),t.Y36(ct.O),t.Y36(ut.Y))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-nlmt-history"]],decls:10,vars:9,consts:[[1,"container"],["id","add-btn","color","accent","mat-raised-button","","data-toggle","modal","data-target","#modelId",3,"click"],["id","back-btn","mat-raised-button","","color","primary",3,"click",4,"ngIf"],[3,"api","data",4,"ngIf"],[3,"db","api","filter"],[1,"row"],["class","table table-hover",4,"ngIf"],[3,"length","pageSize","pageSizeOptions","page"],["id","back-btn","mat-raised-button","","color","primary",3,"click"],[3,"api","data"],[1,"table","table-hover"],[1,"thead-inverse"],["color","primary",3,"click"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"click"],["color","warn",3,"click",4,"ngIf"],["color","warn",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"button",1),t.NdJ("click",function(){return i.reset()}),t.TgZ(2,"mat-icon"),t._uU(3,"control_point"),t.qZA()(),t.YNc(4,ap,3,1,"button",2),t.YNc(5,sp,1,1,"app-search-api",3),t.TgZ(6,"app-search-table",4),t.NdJ("filter",function(s){return i.search(s)}),t.qZA(),t.TgZ(7,"div",5),t.YNc(8,cp,16,3,"table",6),t.TgZ(9,"mat-paginator",7),t.NdJ("page",function(s){return i.changePage(s)}),t.qZA()()()),2&e&&(t.xp6(4),t.Q6J("ngIf",i.filter.length>0),t.xp6(1),t.Q6J("ngIf",i.checkPer(10)),t.xp6(1),t.Q6J("db",i.db)("api",i.api),t.xp6(2),t.Q6J("ngIf",i.items.length+i.filter.length>0),t.xp6(1),t.Q6J("length",i.items.length)("pageSize",10)("pageSizeOptions",t.DdM(8,up)))},dependencies:[A.sg,A.O5,Y.lW,X.Hw,rn.NW,op,Qn.D,A.uU],data:{animation:[ot.Ym]}}),o})();var pp=_(58441);function mp(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",56),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.reload())}),t.TgZ(1,"mat-icon"),t._uU(2,"undo"),t.qZA()()}2&o&&t.Q6J("@slideIn",void 0)}function _p(o,n){if(1&o&&(t.TgZ(0,"mat-option",57),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e.GiaTri),t.xp6(1),t.hij("",e.NoiDung," ")}}function dp(o,n){if(1&o&&(t.TgZ(0,"mat-option",57),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e.GiaTri),t.xp6(1),t.hij("",e.NoiDung," ")}}function fp(o,n){if(1&o&&(t.TgZ(0,"mat-option",57),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e.GiaTri),t.xp6(1),t.hij("",e.NoiDung," ")}}function gp(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",58),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.save())}),t.TgZ(1,"mat-icon"),t._uU(2,"save"),t.qZA()()}2&o&&t.Q6J("@slideIn",void 0)}function Tp(o,n){1&o&&(t.TgZ(0,"button",59)(1,"mat-icon"),t._uU(2,"import_export"),t.qZA()()),2&o&&t.Q6J("@slideIn",void 0)}function bp(o,n){1&o&&(t.TgZ(0,"th"),t._uU(1,"\u0110\u1ecba ch\u1ec9"),t.qZA())}function Ep(o,n){1&o&&(t.TgZ(0,"th"),t._uU(1,"M\xe3 G C S"),t.qZA())}function Ap(o,n){1&o&&(t.TgZ(0,"th"),t._uU(1,"Ch\u1ee7 t\xe0i kho\u1ea3n"),t.qZA())}function Np(o,n){1&o&&(t.TgZ(0,"th"),t._uU(1,"S\u1ed1 t\xe0i kho\u1ea3n"),t.qZA())}function Cp(o,n){1&o&&(t.TgZ(0,"th"),t._uU(1,"Ng\xe2n h\xe0ng"),t.qZA())}function vp(o,n){1&o&&(t.TgZ(0,"th"),t._uU(1,"Email"),t.qZA())}function xp(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"td",65),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit,s=t.oxw(2),r=t.MAs(155);return t.KtG(s.onEdit(a,r))}),t._uU(1),t.qZA()}if(2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.DiaChi)}}function Zp(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"td",65),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit,s=t.oxw(2),r=t.MAs(155);return t.KtG(s.onEdit(a,r))}),t._uU(1),t.qZA()}if(2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.MaGCS)}}function yp(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"td",65),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit,s=t.oxw(2),r=t.MAs(155);return t.KtG(s.onEdit(a,r))}),t._uU(1),t.qZA()}if(2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.ChuTaiKhoan)}}function Ip(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"td",65),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit,s=t.oxw(2),r=t.MAs(155);return t.KtG(s.onEdit(a,r))}),t._uU(1),t.qZA()}if(2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.SoTaiKhoan)}}function Dp(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"td",65),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit,s=t.oxw(2),r=t.MAs(155);return t.KtG(s.onEdit(a,r))}),t._uU(1),t.qZA()}if(2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.NganHang)}}function Sp(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"td",65),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit,s=t.oxw(2),r=t.MAs(155);return t.KtG(s.onEdit(a,r))}),t._uU(1),t.qZA()}if(2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.Email)}}function kp(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"mat-icon",68),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit,s=t.oxw(2);return t.KtG(s.onDelete(a))}),t._uU(1,"delete"),t.qZA()}if(2&o){const e=t.oxw().$implicit;t.s9C("matTooltip",e._id)}}function qp(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td",65),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw(2),l=t.MAs(155);return t.KtG(r.onEdit(s,l))}),t._uU(2),t.qZA(),t.TgZ(3,"td",65),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw(2),l=t.MAs(155);return t.KtG(r.onEdit(s,l))}),t._uU(4),t.qZA(),t.YNc(5,xp,2,1,"td",66),t.YNc(6,Zp,2,1,"td",66),t.YNc(7,yp,2,1,"td",66),t.YNc(8,Ip,2,1,"td",66),t.YNc(9,Dp,2,1,"td",66),t.YNc(10,Sp,2,1,"td",66),t.TgZ(11,"td"),t.YNc(12,kp,2,1,"mat-icon",67),t.qZA()()}if(2&o){const e=n.$implicit,i=t.oxw(2);t.xp6(2),t.Oqu(e.MaKhachHang),t.xp6(2),t.Oqu(e.KhachHang),t.xp6(1),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",2),t.xp6(2),t.Q6J("ngIf",i.checkPer(4))}}function Mp(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"table",60)(1,"thead",61)(2,"tr")(3,"th"),t._uU(4,"M\xe3 kh\xe1ch h\xe0ng"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Kh\xe1ch h\xe0ng"),t.qZA(),t.YNc(7,bp,2,0,"th",62),t.YNc(8,Ep,2,0,"th",62),t.YNc(9,Ap,2,0,"th",62),t.YNc(10,Np,2,0,"th",62),t.YNc(11,Cp,2,0,"th",62),t.YNc(12,vp,2,0,"th",62),t.TgZ(13,"th")(14,"mat-icon",63),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.reload())}),t._uU(15,"cached"),t.qZA()()()(),t.TgZ(16,"tbody"),t.YNc(17,qp,13,9,"tr",64),t.qZA()()}if(2&o){const e=t.oxw();t.Q6J("@slideIn",void 0),t.xp6(7),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(5),t.Q6J("ngForOf",e.filter)}}function wp(o,n){if(1&o&&(t.TgZ(0,"mat-option",57),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e.GiaTri),t.xp6(1),t.hij("",e.NoiDung," ")}}function Op(o,n){if(1&o&&(t.TgZ(0,"mat-option",57),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e.GiaTri),t.xp6(1),t.hij("",e.NoiDung," ")}}function Kp(o,n){if(1&o&&(t.TgZ(0,"mat-option",57),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e.GiaTri),t.xp6(1),t.hij("",e.NoiDung," ")}}function Up(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",58),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.save())}),t.TgZ(1,"mat-icon"),t._uU(2,"save"),t.qZA()()}2&o&&t.Q6J("@slideIn",void 0)}function Lp(o,n){1&o&&(t.TgZ(0,"th"),t._uU(1,"\u0110\u1ecba ch\u1ec9"),t.qZA())}function Hp(o,n){1&o&&(t.TgZ(0,"th"),t._uU(1,"M\xe3 GCS"),t.qZA())}function Bp(o,n){1&o&&(t.TgZ(0,"th"),t._uU(1,"Ch\u1ee7 t\xe0i kho\u1ea3n"),t.qZA())}function Yp(o,n){1&o&&(t.TgZ(0,"th"),t._uU(1,"S\u1ed1 t\xe0i kho\u1ea3n"),t.qZA())}function Fp(o,n){1&o&&(t.TgZ(0,"th"),t._uU(1,"Ng\xe2n h\xe0ng"),t.qZA())}function Jp(o,n){1&o&&(t.TgZ(0,"th"),t._uU(1,"Email"),t.qZA())}function Vp(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"td",65),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit,s=t.oxw(2),r=t.MAs(155);return t.KtG(s.onEdit(a,r))}),t._uU(1),t.qZA()}if(2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.DiaChi)}}function $p(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"td",65),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit,s=t.oxw(2),r=t.MAs(155);return t.KtG(s.onEdit(a,r))}),t._uU(1),t.qZA()}if(2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.MaGCS)}}function Gp(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"td",65),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit,s=t.oxw(2),r=t.MAs(155);return t.KtG(s.onEdit(a,r))}),t._uU(1),t.qZA()}if(2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.ChuTaiKhoan)}}function Pp(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"td",65),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit,s=t.oxw(2),r=t.MAs(155);return t.KtG(s.onEdit(a,r))}),t._uU(1),t.qZA()}if(2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.SoTaiKhoan)}}function Qp(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"td",65),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit,s=t.oxw(2),r=t.MAs(155);return t.KtG(s.onEdit(a,r))}),t._uU(1),t.qZA()}if(2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.NganHang)}}function Rp(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"td",65),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit,s=t.oxw(2),r=t.MAs(155);return t.KtG(s.onEdit(a,r))}),t._uU(1),t.qZA()}if(2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.Email)}}function Wp(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"mat-icon",71),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit,s=t.oxw(2);return t.KtG(s.onDelete(a))}),t._uU(1,"delete"),t.qZA()}}function jp(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td",65),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw(2),l=t.MAs(155);return t.KtG(r.onEdit(s,l))}),t._uU(2),t.qZA(),t.TgZ(3,"td",65),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw(2),l=t.MAs(155);return t.KtG(r.onEdit(s,l))}),t._uU(4),t.qZA(),t.YNc(5,Vp,2,1,"td",66),t.YNc(6,$p,2,1,"td",66),t.YNc(7,Gp,2,1,"td",66),t.YNc(8,Pp,2,1,"td",66),t.YNc(9,Qp,2,1,"td",66),t.YNc(10,Rp,2,1,"td",66),t.TgZ(11,"td"),t.YNc(12,Wp,2,0,"mat-icon",70),t.qZA()()}if(2&o){const e=n.$implicit,i=t.oxw(2);t.xp6(2),t.Oqu(e.MaKhachHang),t.xp6(2),t.Oqu(e.KhachHang),t.xp6(1),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",2),t.xp6(2),t.Q6J("ngIf",i.level>3)}}function zp(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"table",60)(1,"thead",61)(2,"tr")(3,"th"),t._uU(4,"M\xe3 kh\xe1ch h\xe0ng"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Kh\xe1ch h\xe0ng"),t.qZA(),t.YNc(7,Lp,2,0,"th",62),t.YNc(8,Hp,2,0,"th",62),t.YNc(9,Bp,2,0,"th",62),t.YNc(10,Yp,2,0,"th",62),t.YNc(11,Fp,2,0,"th",62),t.YNc(12,Jp,2,0,"th",62),t.TgZ(13,"th")(14,"mat-icon",63),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.reload())}),t._uU(15,"cached"),t.qZA()()()(),t.TgZ(16,"tbody"),t.YNc(17,jp,13,9,"tr",69),t.qZA()()}if(2&o){const e=t.oxw();t.Q6J("@slideIn",void 0),t.xp6(7),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(1),t.Q6J("Device",3),t.xp6(5),t.Q6J("ngForOf",e.dataInXls)("ngForTrackBy",e.trackByFn)}}function Xp(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div",4)(1,"mat-expansion-panel")(2,"mat-expansion-panel-header"),t._uU(3," Export "),t.qZA(),t.TgZ(4,"button",52),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.export())}),t.TgZ(5,"mat-icon"),t._uU(6,"save"),t.qZA()()()()}}const tm=function(){return[5,10,25,100]};let em=(()=>{class o{constructor(e,i,a,s,r,l,u,h,p){this.plus=e,this.fb=i,this.authSV=a,this.loadSV=s,this.excelSV=r,this.httpSV=l,this.idbSV=u,this.nlmtSV=h,this.sheetdbSV=p,this.main=this.fb.group({_id:[],MaKhachHang:["",[c.kI.required,c.kI.minLength(5)]],KhachHang:["",[c.kI.required,c.kI.minLength(5)]],DiaChi:["",[c.kI.required,c.kI.minLength(5)]],MaGCS:[""],ChuTaiKhoan:[""],SoTaiKhoan:[""],NganHang:[""],Email:["",[c.kI.email]],CoHoaDon:[0,[c.kI.required]],CCCD:[""],MST:[""],SoHopDong:["",[]],NgayHopDong:["",[]],DaiDien:["",[]],ChucVu:["",[]],DieuKienThanhToan:[1,[]],GhiChuThanhToan:["",[]],MaKV:["",[]],TreoThanhToan:[1,[]],DiaChiLapDat:["",[]],CSPin:[0,[]],SoHoSo:["",[]],GPKDFull:["",[]],CCCDFull:["",[]],DanhXung:["",[]],DienThoai:["",[]]}),this.title="Kh\xe1ch h\xe0ng",this.dbName="dien-luc",this.global=!0,this.api="dmt-khach-hang",this.db=null,this.items=[],this.selectedItem=null,this.filter=[],this.chart=[],this.level=0,this.dataInXls=[],this.allowLoadmore=!0,this.isexpanded=!1}ngOnInit(){this.plus.setTiTle(this.title),this.plus.checkTab(),this.authSV.user.subscribe(e=>{if(e){this.user=e,this.nlmtSV.user=e;let i=e.unit+"-"+this.api;this.idbSV.IDB_InitDB(this.dbName).subscribe(a=>{this.db=a,this.httpSV.updateLocalDB(a,this.api,i).subscribe(s=>{this.loadSV.loaded("updateLocalDB"+i),console.log("getDmtInputs",s),this.getIDB()})})}})}getSetup(e){this.nlmtSV.setup=e}getIDB(){this.filter=[],this.items=[],this.idbSV.IDB_DB_GetAll(this.db,this.api).subscribe(e=>{console.log(e),this.items=e,this.filter=e.slice(0,100)})}ngOnDestroy(){console.log("Destroy",this.api),this.nlmtSV.detroy()}save(){if(this.main.invalid)return;const e=this.main.value;if(e._id){const i=this.plus.objVs(this.selectedItem,e);if(0===Object.keys(i).length)return this.plus.alertMatSnackBar("Kh\xf4ng c\xf3 n\u1ed9i dung n\xe0o thay \u0111\u1ed5i");this.sheetdbSV.addLog(this.api,e),this.httpSV.put(this.api,e,this.fileName).subscribe(a=>{this.closeModal()}),this.addHistory(i)}else delete e._id,this.httpSV.post(this.api,e,this.fileName).subscribe(i=>{this.closeModal()})}import(){this.httpSV.post(this.api+"/import",this.dataInXls,this.user.unit+"-dmt-khach-hang").subscribe(i=>{this.reload()})}addHistory(e){const i=[];for(const s in e)i.push(this.selectedItem[s]+" => "+e[s]);i.join(", "),Date.now()}onEdit(e,i){this.selectedItem=e,this.main.patchValue(e),this.plus.scrollTop(),this.isexpanded=!0}showModal(e){new vt(e).show()}onDropFile(e){console.log("onDropFile()"),this.reset();for(let i=0;i<e.length;i++)"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"==e[i].type?this.excelSV.fileToJsonArray(e[i]).then(a=>{this.dataInXls=a,console.log(a)}):this.plus.alertError("File kh\xf4ng h\u1ee3p l\u1ec7")}ondragover(){document.getElementById("dropZone").setAttribute("drop-active","true")}onDelete(e){confirm("B\u1ea1n mu\u1ed1n x\xf3a?")&&this.httpSV.disable(this.api,e,this.fileName).then(a=>{console.log(a)})}export(){this.excelSV.export(this.items)}pushData(e){if(console.log(e),e&&this.allowLoadmore){this.loadSV.load("pushData");let i=this.filter.length,a=this.items.slice(i,i+100);this.filter=this.filter.concat(a),this.loadSV.loaded("pushData")}}checkPer(e,i=this.api){return this.authSV.checkPer(i,e)}chooseOpt(e,i,a,s=!1){this.main.controls[i].setValue(e[a]),s&&this.main.controls[i+"ID"].setValue(e._id)}fbsData(e){this.items=e}closeModal(){this.main.reset(),this.plus.clickBtn("closeModal")}search(e){this.allowLoadmore=!1,this.filter=e}find(e){this.items=e}reload(){return this.plus.reload(this.dbName+"/"+this.api)}reset(){this.filter=[],this.getIDB(),this.main.reset({})}changePage(e){this.filter=this.items.slice(e.pageIndex*e.pageSize,(e.pageIndex+1)*e.pageSize)}trackByFn(e,i){return i}resetDB(){}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(z.T),t.Y36(c.qu),t.Y36(B.c1),t.Y36(j.b),t.Y36(me.x),t.Y36(ct.O),t.Y36(ut.Y),t.Y36(lt.j),t.Y36(pp.F))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-nlmt-kh"]],decls:313,vars:39,consts:[[3,"percentLoad","emit"],[1,"container"],["id","add-btn","color","accent","mat-raised-button","","data-bs-toggle","modal","data-bs-target","#modelId"],["id","back-btn","mat-raised-button","","color","primary",3,"click",4,"ngIf"],[1,"row"],[3,"expanded"],[1,"container-fluid"],[3,"formGroup"],["hidden","","formControlName","_id"],["appearance","outline"],["required","","type","text","autocomplete","off","matInput","","formControlName","MaKhachHang"],["matSuffix",""],["required","","type","text","autocomplete","off","matInput","","formControlName","KhachHang"],["type","text","autocomplete","off","matInput","","formControlName","DaiDien"],["type","text","autocomplete","off","matInput","","formControlName","ChucVu"],["required","","type","text","autocomplete","off","matInput","","formControlName","DiaChi"],["type","text","autocomplete","off","matInput","","formControlName","MaGCS"],["type","text","autocomplete","off","matInput","","formControlName","ChuTaiKhoan"],["type","text","autocomplete","off","matInput","","formControlName","SoTaiKhoan"],["type","text","autocomplete","off","matInput","","formControlName","NganHang"],["type","text","autocomplete","off","matInput","","formControlName","Email"],["formControlName","CoHoaDon"],[3,"value",4,"ngFor","ngForOf"],["type","text","autocomplete","off","matInput","","formControlName","CCCD"],["type","text","autocomplete","off","matInput","","formControlName","MST"],["type","text","autocomplete","off","matInput","","formControlName","SoHopDong"],["type","text","autocomplete","off","matInput","","formControlName","NgayHopDong"],["formControlName","DieuKienThanhToan"],["type","text","autocomplete","off","matInput","","formControlName","GhiChuThanhToan"],[1,"col"],["type","text","autocomplete","off","matInput","","formControlName","DiaChiLapDat"],["type","number","autocomplete","off","matInput","","formControlName","CSPin"],["type","text","autocomplete","off","matInput","","formControlName","SoHoSo"],["type","text","autocomplete","off","matInput","","formControlName","GPKDFull"],["type","text","autocomplete","off","matInput","","formControlName","CCCDFull"],["type","text","autocomplete","off","matInput","","formControlName","DanhXung"],["type","text","autocomplete","off","matInput","","formControlName","DienThoai"],["type","text","autocomplete","off","matInput","","formControlName","MaKV"],["formControlName","TreoThanhToan"],["mat-raised-button","","color","warn",3,"click",4,"ngIf"],[3,"db","api","filter"],["mat-raised-button","","color","primary",4,"ngIf"],["class","table table-hover",4,"ngIf"],[3,"length","pageSize","pageSizeOptions","page"],["id","modelId","data-bs-backdrop","static","tabindex","-1","role","dialog","aria-labelledby","modelTitleId","aria-hidden","true",1,"modal","fade"],["modalDMTKhachHang",""],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-body"],[1,"modal-footer"],["id","closeModal","mat-raised-button","","color","primary","data-bs-dismiss","modal",3,"click"],[3,"label","files","ondragover"],["mat-raised-button","",3,"click"],["color","warn"],[3,"nlmtSetup"],["class","row",4,"ngIf"],["id","back-btn","mat-raised-button","","color","primary",3,"click"],[3,"value"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","primary"],[1,"table","table-hover"],[1,"thead-inverse"],[4,"Device"],["color","primary",3,"click"],[4,"ngFor","ngForOf"],[3,"click"],[3,"click",4,"Device"],["color","warn",3,"matTooltip","click",4,"ngIf"],["color","warn",3,"matTooltip","click"],[4,"ngFor","ngForOf","ngForTrackBy"],["color","warn",3,"click",4,"ngIf"],["color","warn",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"app-loadmore",0),t.NdJ("emit",function(s){return i.pushData(s)}),t.qZA(),t.TgZ(1,"div",1)(2,"button",2)(3,"mat-icon"),t._uU(4,"control_point"),t.qZA()(),t.YNc(5,mp,3,1,"button",3),t.TgZ(6,"div",4)(7,"mat-expansion-panel",5)(8,"mat-expansion-panel-header"),t._uU(9),t.qZA(),t.TgZ(10,"div",6)(11,"form",7),t._UZ(12,"input",8),t.TgZ(13,"mat-form-field",9)(14,"mat-label"),t._uU(15,"M\xe3 kh\xe1ch h\xe0ng"),t.qZA(),t._UZ(16,"input",10)(17,"span",11),t.qZA(),t.TgZ(18,"mat-form-field",9)(19,"mat-label"),t._uU(20,"Kh\xe1ch h\xe0ng"),t.qZA(),t._UZ(21,"input",12)(22,"span",11),t.qZA(),t.TgZ(23,"mat-form-field",9)(24,"mat-label"),t._uU(25,"\u0110\u1ea1i di\u1ec7n"),t.qZA(),t._UZ(26,"input",13)(27,"span",11),t.qZA(),t.TgZ(28,"mat-form-field",9)(29,"mat-label"),t._uU(30,"Ch\u1ee9c v\u1ee5"),t.qZA(),t._UZ(31,"input",14)(32,"span",11),t.qZA(),t.TgZ(33,"mat-form-field",9)(34,"mat-label"),t._uU(35,"\u0110\u1ecba ch\u1ec9"),t.qZA(),t._UZ(36,"input",15)(37,"span",11),t.qZA(),t.TgZ(38,"mat-form-field",9)(39,"mat-label"),t._uU(40,"M\xe3 Ghi ch\u1ec9 s\u1ed1"),t.qZA(),t._UZ(41,"input",16)(42,"span",11),t.qZA(),t.TgZ(43,"mat-form-field",9)(44,"mat-label"),t._uU(45,"Ch\u1ee7 t\xe0i kho\u1ea3n"),t.qZA(),t._UZ(46,"input",17)(47,"span",11),t.qZA(),t.TgZ(48,"mat-form-field",9)(49,"mat-label"),t._uU(50,"S\u1ed1 t\xe0i kho\u1ea3n"),t.qZA(),t._UZ(51,"input",18)(52,"span",11),t.qZA(),t.TgZ(53,"mat-form-field",9)(54,"mat-label"),t._uU(55,"Ng\xe2n h\xe0ng"),t.qZA(),t._UZ(56,"input",19)(57,"span",11),t.qZA(),t.TgZ(58,"mat-form-field",9)(59,"mat-label"),t._uU(60,"Email"),t.qZA(),t._UZ(61,"input",20)(62,"span",11),t.qZA(),t.TgZ(63,"mat-form-field",9)(64,"mat-label"),t._uU(65,"C\xf3 h\xf3a \u0111\u01a1n"),t.qZA(),t.TgZ(66,"mat-select",21),t.YNc(67,_p,2,2,"mat-option",22),t.ALo(68,"catalog"),t.qZA()(),t.TgZ(69,"mat-form-field",9)(70,"mat-label"),t._uU(71,"CCCD"),t.qZA(),t._UZ(72,"input",23)(73,"span",11),t.qZA(),t.TgZ(74,"mat-form-field",9)(75,"mat-label"),t._uU(76,"MST"),t.qZA(),t._UZ(77,"input",24)(78,"span",11),t.qZA(),t.TgZ(79,"mat-form-field",9)(80,"mat-label"),t._uU(81,"S\u1ed1 H\u1ee3p \u0110\u1ed3ng "),t.qZA(),t._UZ(82,"input",25)(83,"span",11),t.qZA(),t.TgZ(84,"mat-form-field",9)(85,"mat-label"),t._uU(86,"Ng\xe0y H\u1ee3p \u0110\u1ed3ng "),t.qZA(),t._UZ(87,"input",26)(88,"span",11),t.qZA(),t.TgZ(89,"mat-form-field",9)(90,"mat-label"),t._uU(91,"\u0110i\u1ec1u ki\u1ec7n thanh to\xe1n"),t.qZA(),t.TgZ(92,"mat-select",27),t.YNc(93,dp,2,2,"mat-option",22),t.ALo(94,"catalog"),t.qZA()(),t.TgZ(95,"mat-form-field",9)(96,"mat-label"),t._uU(97,"Ghi ch\xfa"),t.qZA(),t._UZ(98,"input",28)(99,"span",11),t.qZA(),t.TgZ(100,"div",29)(101,"mat-form-field")(102,"mat-label"),t._uU(103,"\u0110\u1ecba ch\u1ec9 l\u1eafp \u0111\u1eb7t"),t.qZA(),t._UZ(104,"input",30),t.qZA()(),t.TgZ(105,"div",29)(106,"mat-form-field")(107,"mat-label"),t._uU(108,"C\xf4ng su\u1ea5t pin"),t.qZA(),t._UZ(109,"input",31),t.qZA()(),t.TgZ(110,"div",29)(111,"mat-form-field")(112,"mat-label"),t._uU(113,"S\u1ed1 h\u1ed3 s\u01a1"),t.qZA(),t._UZ(114,"input",32),t.qZA()(),t.TgZ(115,"div",29)(116,"mat-form-field")(117,"mat-label"),t._uU(118,"GPKD"),t.qZA(),t._UZ(119,"input",33),t.qZA()(),t.TgZ(120,"div",29)(121,"mat-form-field")(122,"mat-label"),t._uU(123,"CCCD"),t.qZA(),t._UZ(124,"input",34),t.qZA()(),t.TgZ(125,"div",29)(126,"mat-form-field")(127,"mat-label"),t._uU(128,"Danh x\u01b0ng"),t.qZA(),t._UZ(129,"input",35),t.qZA()(),t.TgZ(130,"div",29)(131,"mat-form-field")(132,"mat-label"),t._uU(133,"\u0110i\u1ec7n tho\u1ea1i"),t.qZA(),t._UZ(134,"input",36),t.qZA()(),t.TgZ(135,"div",29)(136,"mat-form-field",9)(137,"mat-label"),t._uU(138,"MaKV"),t.qZA(),t._UZ(139,"input",37)(140,"span",11),t.qZA()(),t.TgZ(141,"div",29)(142,"mat-form-field",9)(143,"mat-label"),t._uU(144,"Treo thanh to\xe1n"),t.qZA(),t.TgZ(145,"mat-select",38),t.YNc(146,fp,2,2,"mat-option",22),t.ALo(147,"catalog"),t.qZA()()()()()()(),t.YNc(148,gp,3,1,"button",39),t.TgZ(149,"app-search-table",40),t.NdJ("filter",function(s){return i.search(s)}),t.qZA(),t.YNc(150,Tp,3,1,"button",41),t.TgZ(151,"div",4),t.YNc(152,Mp,18,8,"table",42),t.TgZ(153,"mat-paginator",43),t.NdJ("page",function(s){return i.changePage(s)}),t.qZA()()(),t.TgZ(154,"div",44,45)(156,"div",46)(157,"div",47)(158,"div",48)(159,"div",6)(160,"form",7),t._UZ(161,"input",8),t.TgZ(162,"mat-form-field",9)(163,"mat-label"),t._uU(164,"M\xe3 kh\xe1ch h\xe0ng"),t.qZA(),t._UZ(165,"input",10)(166,"span",11),t.qZA(),t.TgZ(167,"mat-form-field",9)(168,"mat-label"),t._uU(169,"Kh\xe1ch h\xe0ng"),t.qZA(),t._UZ(170,"input",12)(171,"span",11),t.qZA(),t.TgZ(172,"mat-form-field",9)(173,"mat-label"),t._uU(174,"\u0110\u1ea1i di\u1ec7n"),t.qZA(),t._UZ(175,"input",13)(176,"span",11),t.qZA(),t.TgZ(177,"mat-form-field",9)(178,"mat-label"),t._uU(179,"Ch\u1ee9c v\u1ee5"),t.qZA(),t._UZ(180,"input",14)(181,"span",11),t.qZA(),t.TgZ(182,"mat-form-field",9)(183,"mat-label"),t._uU(184,"\u0110\u1ecba ch\u1ec9"),t.qZA(),t._UZ(185,"input",15)(186,"span",11),t.qZA(),t.TgZ(187,"mat-form-field",9)(188,"mat-label"),t._uU(189,"M\xe3 Ghi ch\u1ec9 s\u1ed1"),t.qZA(),t._UZ(190,"input",16)(191,"span",11),t.qZA(),t.TgZ(192,"mat-form-field",9)(193,"mat-label"),t._uU(194,"Ch\u1ee7 t\xe0i kho\u1ea3n"),t.qZA(),t._UZ(195,"input",17)(196,"span",11),t.qZA(),t.TgZ(197,"mat-form-field",9)(198,"mat-label"),t._uU(199,"S\u1ed1 t\xe0i kho\u1ea3n"),t.qZA(),t._UZ(200,"input",18)(201,"span",11),t.qZA(),t.TgZ(202,"mat-form-field",9)(203,"mat-label"),t._uU(204,"Ng\xe2n h\xe0ng"),t.qZA(),t._UZ(205,"input",19)(206,"span",11),t.qZA(),t.TgZ(207,"mat-form-field",9)(208,"mat-label"),t._uU(209,"Email"),t.qZA(),t._UZ(210,"input",20)(211,"span",11),t.qZA(),t.TgZ(212,"mat-form-field",9)(213,"mat-label"),t._uU(214,"C\xf3 h\xf3a \u0111\u01a1n"),t.qZA(),t.TgZ(215,"mat-select",21),t.YNc(216,wp,2,2,"mat-option",22),t.ALo(217,"catalog"),t.qZA()(),t.TgZ(218,"mat-form-field",9)(219,"mat-label"),t._uU(220,"CCCD"),t.qZA(),t._UZ(221,"input",23)(222,"span",11),t.qZA(),t.TgZ(223,"mat-form-field",9)(224,"mat-label"),t._uU(225,"MST"),t.qZA(),t._UZ(226,"input",24)(227,"span",11),t.qZA(),t.TgZ(228,"mat-form-field",9)(229,"mat-label"),t._uU(230,"S\u1ed1 H\u1ee3p \u0110\u1ed3ng "),t.qZA(),t._UZ(231,"input",25)(232,"span",11),t.qZA(),t.TgZ(233,"mat-form-field",9)(234,"mat-label"),t._uU(235,"Ng\xe0y H\u1ee3p \u0110\u1ed3ng "),t.qZA(),t._UZ(236,"input",26)(237,"span",11),t.qZA(),t.TgZ(238,"mat-form-field",9)(239,"mat-label"),t._uU(240,"\u0110i\u1ec1u ki\u1ec7n thanh to\xe1n"),t.qZA(),t.TgZ(241,"mat-select",27),t.YNc(242,Op,2,2,"mat-option",22),t.ALo(243,"catalog"),t.qZA()(),t.TgZ(244,"mat-form-field",9)(245,"mat-label"),t._uU(246,"Ghi ch\xfa thanh to\xe1n"),t.qZA(),t._UZ(247,"input",28)(248,"span",11),t.qZA(),t.TgZ(249,"div",29)(250,"mat-form-field")(251,"mat-label"),t._uU(252,"\u0110\u1ecba ch\u1ec9 l\u1eafp \u0111\u1eb7t"),t.qZA(),t._UZ(253,"input",30),t.qZA()(),t.TgZ(254,"div",29)(255,"mat-form-field")(256,"mat-label"),t._uU(257,"C\xf4ng su\u1ea5t pin"),t.qZA(),t._UZ(258,"input",31),t.qZA()(),t.TgZ(259,"div",29)(260,"mat-form-field")(261,"mat-label"),t._uU(262,"S\u1ed1 h\u1ed3 s\u01a1"),t.qZA(),t._UZ(263,"input",32),t.qZA()(),t.TgZ(264,"div",29)(265,"mat-form-field")(266,"mat-label"),t._uU(267,"GPKD"),t.qZA(),t._UZ(268,"input",33),t.qZA()(),t.TgZ(269,"div",29)(270,"mat-form-field")(271,"mat-label"),t._uU(272,"CCCD"),t.qZA(),t._UZ(273,"input",34),t.qZA()(),t.TgZ(274,"div",29)(275,"mat-form-field")(276,"mat-label"),t._uU(277,"Danh x\u01b0ng"),t.qZA(),t._UZ(278,"input",35),t.qZA()(),t.TgZ(279,"div",29)(280,"mat-form-field")(281,"mat-label"),t._uU(282,"\u0110i\u1ec7n tho\u1ea1i"),t.qZA(),t._UZ(283,"input",36),t.qZA()(),t.TgZ(284,"div",29)(285,"mat-form-field",9)(286,"mat-label"),t._uU(287,"MaKV"),t.qZA(),t._UZ(288,"input",37)(289,"span",11),t.qZA()(),t.TgZ(290,"div",29)(291,"mat-form-field",9)(292,"mat-label"),t._uU(293,"Treo thanh to\xe1n"),t.qZA(),t.TgZ(294,"mat-select",38),t.YNc(295,Kp,2,2,"mat-option",22),t.ALo(296,"catalog"),t.qZA()()()()()(),t.TgZ(297,"div",49)(298,"button",50),t.NdJ("click",function(){return i.closeModal()}),t.TgZ(299,"mat-icon"),t._uU(300,"close"),t.qZA()(),t.YNc(301,Up,3,1,"button",39),t.qZA()()()(),t.TgZ(302,"div",4)(303,"mat-expansion-panel")(304,"mat-expansion-panel-header"),t._uU(305," Import "),t.qZA(),t.TgZ(306,"app-drop-files",51),t.NdJ("files",function(s){return i.onDropFile(s)})("ondragover",function(){return i.ondragover()}),t.qZA(),t.TgZ(307,"button",52),t.NdJ("click",function(){return i.import()}),t.TgZ(308,"mat-icon",53),t._uU(309,"save"),t.qZA()(),t.YNc(310,zp,18,9,"table",42),t.qZA()(),t.TgZ(311,"app-nlmt-share",54),t.NdJ("nlmtSetup",function(s){return i.getSetup(s)}),t.qZA(),t.YNc(312,Xp,7,0,"div",55)),2&e&&(t.Q6J("percentLoad",60),t.xp6(5),t.Q6J("ngIf",i.filter.length>0),t.xp6(2),t.Q6J("expanded",i.isexpanded),t.xp6(2),t.AsE(" ",i.main.value.MaKhachHang," - ",i.main.value.KhachHang," "),t.xp6(2),t.Q6J("formGroup",i.main),t.xp6(56),t.Q6J("ngForOf",t.lcZ(68,26,"CoHoaDon")),t.xp6(26),t.Q6J("ngForOf",t.lcZ(94,28,"DieuKienThanhToan")),t.xp6(53),t.Q6J("ngForOf",t.lcZ(147,30,"TreoThanhToan")),t.xp6(2),t.Q6J("ngIf",i.checkPer(2)&&i.main.valid),t.xp6(1),t.Q6J("db",i.db)("api",i.api),t.xp6(1),t.Q6J("ngIf",i.filter.length>0),t.xp6(2),t.Q6J("ngIf",i.items.length+i.filter.length>0),t.xp6(1),t.Q6J("length",i.items.length)("pageSize",10)("pageSizeOptions",t.DdM(38,tm)),t.xp6(7),t.Q6J("formGroup",i.main),t.xp6(56),t.Q6J("ngForOf",t.lcZ(217,32,"CoHoaDon")),t.xp6(26),t.Q6J("ngForOf",t.lcZ(243,34,"DieuKienThanhToan")),t.xp6(53),t.Q6J("ngForOf",t.lcZ(296,36,"TreoThanhToan")),t.xp6(3),t.Q6J("@slideIn",void 0),t.xp6(3),t.Q6J("ngIf",i.checkPer(2)&&i.main.valid),t.xp6(5),t.Q6J("label",""),t.xp6(4),t.Q6J("ngIf",i.dataInXls.length>0),t.xp6(2),t.Q6J("ngIf",i.checkPer(4)))},dependencies:[A.sg,A.O5,c._Y,c.Fj,c.wV,c.JJ,c.JL,c.Q7,c.sg,c.u,Y.lW,X.Hw,ht.Nt,D.KE,D.hX,D.R9,Ft.ey,ai.gD,he.gM,$.ib,$.yz,rn.NW,ue.w,ye.HP,Qn.D,Ie.k,It,G.pW],data:{animation:[ot.Ym]}}),o})(),nm=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-dlxl"]],decls:2,vars:0,template:function(e,i){1&e&&(t.TgZ(0,"p"),t._uU(1,"dlxl works!"),t.qZA())}}),o})();var im=_(58687);function om(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"tr",21)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td",22),t._uU(10),t.ALo(11,"numberPipe"),t.qZA(),t.TgZ(12,"td")(13,"button",23),t.NdJ("click",function(){const a=t.CHM(e),s=a.$implicit,r=a.index,l=t.oxw(2);return t.KtG(l.removeList(s,r))}),t.TgZ(14,"mat-icon"),t._uU(15,"delete"),t.qZA()()()()}if(2&o){const e=n.$implicit;t.xp6(2),t.Oqu(e.MA_KHANG),t.xp6(2),t.Oqu(e.TEN_KHANG),t.xp6(2),t.Oqu(e.BCS),t.xp6(2),t.AsE("",e.THANG,"/",e.NAM,""),t.xp6(2),t.Oqu(t.lcZ(11,6,e.SAN_LUONG))}}function am(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"mat-expansion-panel")(1,"mat-expansion-panel-header")(2,"tr")(3,"td",16)(4,"b",2),t._uU(5),t.qZA()(),t.TgZ(6,"td")(7,"button",17),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.export())}),t._uU(8,"Xu\u1ea5t b\u1ea3ng k\xea"),t.qZA()(),t.TgZ(9,"td")(10,"button",7),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.clearLocal())}),t._uU(11,"X\xf3a"),t.qZA()()()(),t.TgZ(12,"table",11)(13,"thead",12)(14,"tr")(15,"th"),t._uU(16,"M\xe3 KH"),t.qZA(),t.TgZ(17,"th"),t._uU(18,"T\xean KH"),t.qZA(),t.TgZ(19,"th"),t._uU(20,"Bi\u1ec3u gi\xe1"),t.qZA(),t.TgZ(21,"th"),t._uU(22,"K\u1ef3"),t.qZA(),t.TgZ(23,"th"),t._uU(24,"S\u1ea3n l\u01b0\u1ee3ng"),t.qZA(),t._UZ(25,"th"),t.qZA()(),t.TgZ(26,"tbody",18),t.NdJ("cdkDropListDropped",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.dropCdk(a))}),t.YNc(27,om,16,8,"tr",19),t.qZA()(),t.TgZ(28,"button",17),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.export())}),t._uU(29,"Xu\u1ea5t b\u1ea3ng k\xea"),t.qZA(),t.TgZ(30,"button",7),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.selectedItems=[])}),t._uU(31,"X\xf3a b\u1ea3ng k\xea"),t.qZA(),t.TgZ(32,"button",20),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.clearData())}),t._uU(33,"X\xf3a d\u1eef li\u1ec7u"),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(5),t.hij("Danh s\xe1ch ch\u1ecdn: ",e.selectedItems.length," kh\xe1ch h\xe0ng."),t.xp6(22),t.Q6J("ngForOf",e.selectedItems)}}function sm(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td",22),t._uU(10),t.ALo(11,"numberPipe"),t.qZA(),t.TgZ(12,"td")(13,"button",24),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.addlist(s))}),t.TgZ(14,"mat-icon"),t._uU(15,"add"),t.qZA()()()()}if(2&o){const e=n.$implicit;t.xp6(2),t.Oqu(e.MA_KHANG),t.xp6(2),t.Oqu(e.TEN_KHANG),t.xp6(2),t.Oqu(e.BCS),t.xp6(2),t.AsE("",e.THANG,"/",e.NAM,""),t.xp6(2),t.Oqu(t.lcZ(11,6,e.SAN_LUONG))}}let rm=(()=>{class o{constructor(e,i,a,s,r,l,u,h){this.excelSV=e,this.plus=i,this.idbSV=a,this.formSV=s,this.loadSV=r,this.nlmtSv=l,this.authSV=u,this.cmis4DmtSV=h,this.searchForm=this.formSV.fb.group({input:["",[c.kI.required,c.kI.minLength(4)]]}),this.main=this.formSV.fb.group({}),this.title="",this.dbName="dien-luc",this.api="dmt-chi-so",this.db=null,this.items=[],this.selectedItems=[],this.filter=[],this.allItems=[],this.perPageItems=100,this.allowLoadmore=!0,this.startDay=new Date}ngOnInit(){this.authSV.user.subscribe(e=>{this.user=e,this.nlmtSv.user=e,this.idbSV.IDB_InitDB("dien-luc").subscribe(i=>{this.db=i,this.getData(),this.search();let a=localStorage.getItem("ChotChiSo");this.selectedItems=null==a?[]:JSON.parse(a)})})}getMonth(e){this.startDay=b()(e,"MM/YYYY").startOf("month").toDate()}getBCCMiS(){var e=this;return(0,M.Z)(function*(){let i={LUY_KE:0,TU_NGAY_GCS:b()(e.startDay).startOf("month").format("DD/MM/YYYY"),DEN_NGAY_GCS:b()(e.startDay).endOf("month").format("DD/MM/YYYY"),QUYET_TOAN:1,MA_DVIQLY:"PK0500",THANG:b()(e.startDay).format("M"),NAM:b()(e.startDay).format("YYYY"),BIEU:"BIEU24",NGAY_COD:-1,TCHAT_MTAM:-1};e.dataInXls=yield e.cmis4DmtSV.getBaoCaoDMT(i),e.convertToList()})()}getData(){this.idbSV.IDB_DB_GetAll(this.db,this.api).subscribe(e=>{this.allItems=e,this.items=e.slice(0,100)})}export(){1==this.selectedItems[0].BCS?this.nlmtSv.export_ChiSo1Bieu(this.selectedItems):this.nlmtSv.export_ChiSo3Bieu(this.selectedItems)}getSetup(e){this.nlmtSv.setup=e,console.log(this.nlmtSv.setup,e)}addlist(e){if(0==this.selectedItems.length||this.selectedItems[0].BCS==e.BCS){console.log(e),this.selectedItems.push(e);let i=this.items.findIndex(a=>e._id==a._id);this.items.splice(i,1),localStorage.ChotChiSo=JSON.stringify(this.selectedItems)}else this.plus.alertWarning("Ch\u1ecdn chung 1 lo\u1ea1i bi\u1ec3u gi\xe1 \u0111\u1ec3 ti\u1ebfp t\u1ee5c!")}removeList(e,i){this.selectedItems.splice(i,1),this.items.push(e)}clearData(){confirm("X\xf3a d\u1eef li\u1ec7u ch\u1ed1t ch\u1ec9 s\u1ed1 t\u1ea1m l\u01b0u tr\xean m\xe1y?")&&this.idbSV.IDB_DB_ClearCollection(this.db,"dmt-chi-so")}clearLocal(){localStorage.removeItem("ChotChiSo"),this.selectedItems=[]}search2(e){this.items=e}search(){this.searchForm.valueChanges.pipe((0,le.b)(1e3)).subscribe(e=>{if(this.searchForm.valid){console.log(e);const i=[];this.allowLoadmore=!1;const a=this.plus.removeAccents(e.input);for(let s=0;s<this.allItems.length;s++){const r=this.allItems[s];this.plus.removeAccents(JSON.stringify(r)).includes(a)&&i.push(r)}this.items=i,0==i.length&&this.plus.alertMatSnackBar("Kh\xf4ng c\xf2n k\u1ebft qu\u1ea3 ph\xf9 h\u1ee3p")}})}convertToList(){let e=[],i=[];for(let a=0;a<this.dataInXls.length;a++){const s=this.dataInXls[a];if(0==+s.SAN_LUONG&&"KN"==s.BCS)continue;"TN"==s.BCS&&+s.SAN_LUONG>0&&i.push(s);let r={_id:`${s.NGAY_CKY}-${s.MA_KHANG}`,KyThanhToan:`${s.THANG}${s.NAM}${s.MA_KHANG}`,status:1,MA_KHANG:s.MA_KHANG,KY:s.KY,HS_NHAN:s.HS_NHAN,TEN_KHANG:s.TEN_KHANG,SO_CTO:+s.SO_CTO,THANG:s.THANG,NAM:s.NAM,BCS:"KN"==s.BCS?1:3};switch(s.BCS){case"KN":r.CHISO_CU=+s.CHISO_CU,r.CHISO_MOI=+s.CHISO_MOI;break;case"TN":r.TN_CU=+s.CHISO_CU,r.TN_MOI=+s.CHISO_MOI;break;case"CN":r.CN_CU=+s.CHISO_CU,r.CN_MOI=+s.CHISO_MOI;break;case"BN":r.BN_CU=+s.CHISO_CU,r.BN_MOI=+s.CHISO_MOI}let l=e.findIndex(u=>`${s.NGAY_CKY}-${s.MA_KHANG}`==u._id);if(l<0)r.SAN_LUONG=+s.SAN_LUONG,e.push(r);else{let u=Object.assign(e[l],r);u.SAN_LUONG+=+s.SAN_LUONG,this.dataInXls[l]=u}}return i.length>0&&this.excelSV.export(i,"warning"),this.idbSV.IDB_DB_Add(this.db,"dmt-chi-so",e).then(()=>{this.reload()})}onDropFile(e){var i=this;console.log("onDropFile()");for(let a=0;a<e.length;a++)"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"==e[a].type?this.excelSV.fileToJsonArray(e[a],!1).then(function(){var s=(0,M.Z)(function*(r){i.dataInXls=r,console.log(r),yield i.convertToList()});return function(r){return s.apply(this,arguments)}}()):this.plus.alertError("File kh\xf4ng h\u1ee3p l\u1ec7");this.reload()}ondragover(){document.getElementById("dropZone").setAttribute("drop-active","true")}pushData(e){if(e&&this.allowLoadmore){this.loadSV.load("pushData");let i=this.items.length,a=this.allItems.slice(i,i+this.perPageItems);this.items=this.items.concat(a),this.loadSV.loaded("pushData")}}dropCdk(e){(0,ae.bA)(this.selectedItems,e.previousIndex,e.currentIndex)}reset(){}reload(){this.plus.reload()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(me.x),t.Y36(z.T),t.Y36(ut.Y),t.Y36(sn.o),t.Y36(j.b),t.Y36(lt.j),t.Y36(B.c1),t.Y36(im.X))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-nlmt-chi-so"]],decls:40,vars:7,consts:[[1,"container"],[1,"row"],[1,"text-primary"],[3,"label","files","ondragover"],[3,"startDay","month"],[1,"text-danger"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","",3,"click"],[4,"ngIf"],[1,"col-12"],[3,"db","api","filter"],[1,"table","table-hover","table-responsive"],[1,"thead-inverse"],[4,"ngFor","ngForOf"],[3,"nlmtSetup"],[3,"percentLoad","emit"],[1,"px-5"],["color","primary","mat-raised-button","",3,"click"],["cdkDropList","",3,"cdkDropListDropped"],["cdkDrag","",4,"ngFor","ngForOf"],["mat-raised-button","","color","warn",3,"click"],["cdkDrag",""],[1,"text-end"],["mat-mini-fab","","color","warn",3,"click"],["mat-mini-fab","","color","accent",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"mat-expansion-panel")(3,"mat-expansion-panel-header")(4,"b",2),t._uU(5,"Import bi\u1ec3u 2.4"),t.qZA()(),t.TgZ(6,"app-drop-files",3),t.NdJ("files",function(s){return i.onDropFile(s)})("ondragover",function(){return i.ondragover()}),t.qZA(),t.TgZ(7,"app-month-year",4),t.NdJ("month",function(s){return i.getMonth(s)}),t.qZA(),t.TgZ(8,"h6",5),t._uU(9," * L\u01b0u \xfd: D\u1eef li\u1ec7u ch\u1ec9 s\u1ed1 ch\u1ec9 \u0111\u01b0\u1ee3c l\u01b0u tr\xean thi\u1ebft b\u1ecb \u0111ang thao t\xe1c. Vui l\xf2ng import l\u1ea1i sau khi \u0111\u0103ng xu\u1ea5t ho\u1eb7c \u0111\u1ed5i thi\u1ebft b\u1ecb. "),t.qZA(),t.TgZ(10,"h6",5),t._uU(11," \u0110\xe2y ch\u1ec9 l\xe0 c\xf4ng c\u1ee5 h\u1ed7 tr\u1ee3 c\u01a1 b\u1ea3n. B\u1ea1n c\u1ea7n ki\u1ec3m so\xe1t l\u1ea1i s\u1ed1 li\u1ec7u v\u1edbi c\xe1c b\u1ea3ng k\xea thanh to\xe1n. "),t.qZA(),t.TgZ(12,"td")(13,"button",6),t.NdJ("click",function(){return i.getBCCMiS()}),t._uU(14,"L\u1ea5y d\u1eef li\u1ec7u"),t.qZA()(),t.TgZ(15,"button",7),t.NdJ("click",function(){return i.clearData()}),t._uU(16,"Reset"),t.qZA()()(),t._UZ(17,"hr"),t.TgZ(18,"div",1),t.YNc(19,am,34,2,"mat-expansion-panel",8),t.qZA(),t.TgZ(20,"div",1)(21,"div",9)(22,"app-search-table",10),t.NdJ("filter",function(s){return i.search2(s)}),t.qZA(),t.TgZ(23,"table",11)(24,"thead",12)(25,"tr")(26,"th"),t._uU(27,"M\xe3 KH"),t.qZA(),t.TgZ(28,"th"),t._uU(29,"T\xean KH"),t.qZA(),t.TgZ(30,"th"),t._uU(31,"Bi\u1ec3u gi\xe1"),t.qZA(),t.TgZ(32,"th"),t._uU(33,"K\u1ef3"),t.qZA(),t.TgZ(34,"th"),t._uU(35,"S\u1ea3n l\u01b0\u1ee3ng"),t.qZA()()(),t.TgZ(36,"tbody"),t.YNc(37,sm,16,8,"tr",13),t.qZA()()()(),t.TgZ(38,"app-nlmt-share",14),t.NdJ("nlmtSetup",function(s){return i.getSetup(s)}),t.qZA()(),t.TgZ(39,"app-loadmore",15),t.NdJ("emit",function(s){return i.pushData(s)}),t.qZA()),2&e&&(t.xp6(6),t.Q6J("label",""),t.xp6(1),t.Q6J("startDay",i.startDay),t.xp6(12),t.Q6J("ngIf",i.selectedItems.length>0),t.xp6(3),t.Q6J("db",i.db)("api",i.api),t.xp6(15),t.Q6J("ngForOf",i.items),t.xp6(2),t.Q6J("percentLoad",70))},dependencies:[A.sg,A.O5,Y.lW,Y.nh,X.Hw,$.ib,$.yz,pe.k,ae.Wj,ae.Zt,ue.w,Qn.D,Ie.k,It,G._2]}),o})();var Vo=_(94222);const lm=[{path:"",component:nm},{path:"dmt-khach-hang",component:em},{path:"dmt-history",component:hp},{path:"dmt-input",component:Xh},{path:"dmt-input/:id",component:ka},{path:"dmt-pay",component:As},{path:"dmt-pay/:id",component:is},{path:"dmt-tax",component:Za},{path:"dmt-setup",component:ba},{path:"dmt-thue-ban-hang",component:Vo.I},{path:"doc-thu",component:ra},{path:"dmt-chi-so",component:rm},{path:"unc-khach-hang",component:Vo.I}];let cm=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[Tt.Bz.forChild(lm),Tt.Bz]}),o})();var um=_(83886);let hm=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[A.ez,c.u5,Xn.ShareModule]}),o})(),pm=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[lt.j],imports:[A.ez,cm,Xn.ShareModule,na.m,ea.D,re.X,um.N,an.k,on,hm]}),o})()},24561:(ta,Ze,_)=>{_.d(Ze,{k:()=>A});var Yt=_(36895),nn=_(5923),re=_(94650);let A=(()=>{class t{}return t.\u0275fac=function(an){return new(an||t)},t.\u0275mod=re.oAB({type:t}),t.\u0275inj=re.cJS({imports:[Yt.ez,nn.X]}),t})()}}]);