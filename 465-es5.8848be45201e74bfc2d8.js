!function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}(self.webpackChunk_4la=self.webpackChunk_4la||[]).push([[465,511],{63465:function(e,i,a){a.r(i),a.d(i,{EmailModule:function(){return se}});var o=a(85913),r=a(5923),l=a(24561),u=a(13397),c=a(88817),s=a(24751),h=a(12057),d=a(74788),p=a(57922),g=a(2895),f=a(49356),m=a(46936),v=a(23487),Z=a(46833),b=a(46113),T=a(61260),y=a(68042),k=a(25862),x=a(17935),q=a(73888);function A(t,e){if(1&t){var n=d.EpF();d.TgZ(0,"button",40),d.NdJ("click",function(){return d.CHM(n),d.oxw().reload()}),d.TgZ(1,"mat-icon"),d._uU(2,"undo"),d.qZA(),d.qZA()}2&t&&d.Q6J("@slideIn",void 0)}function I(t,e){if(1&t){var n=d.EpF();d.TgZ(0,"app-search-api",41),d.NdJ("data",function(t){return d.CHM(n),d.oxw().find(t)}),d.qZA()}if(2&t){var i=d.oxw();d.Q6J("api",i.api)}}function _(t,e){1&t&&(d.TgZ(0,"th"),d._uU(1,"Email"),d.qZA())}function J(t,e){1&t&&(d.TgZ(0,"th"),d._uU(1,"M\xe3 kh\xe1ch h\xe0ng"),d.qZA())}function N(t,e){1&t&&(d.TgZ(0,"th"),d._uU(1,"Kh\xe1ch h\xe0ng"),d.qZA())}function U(t,e){1&t&&(d.TgZ(0,"th"),d._uU(1,"\u0110\u1ecba ch\u1ec9"),d.qZA())}function w(t,e){1&t&&(d.TgZ(0,"th"),d._uU(1,"M\xe3 G C S"),d.qZA())}function D(t,e){1&t&&(d.TgZ(0,"th"),d._uU(1,"Ch\u1ee7 t\xe0i kho\u1ea3n"),d.qZA())}function C(t,e){1&t&&(d.TgZ(0,"th"),d._uU(1,"S\u1ed1 t\xe0i kho\u1ea3n"),d.qZA())}function M(t,e){1&t&&(d.TgZ(0,"th"),d._uU(1,"Ng\xe2n h\xe0ng"),d.qZA())}function S(t,e){1&t&&(d.TgZ(0,"th"),d._uU(1,"Tr\u01b0\u1edbc thu\u1ebf"),d.qZA())}function H(t,e){1&t&&(d.TgZ(0,"th"),d._uU(1,"Thu\u1ebf"),d.qZA())}function E(t,e){1&t&&(d.TgZ(0,"th"),d._uU(1,"Ng\xe0y h\xf3a \u0111\u01a1n"),d.qZA())}function B(t,e){if(1&t){var n=d.EpF();d.TgZ(0,"td",47),d.NdJ("click",function(){d.CHM(n);var t=d.oxw().$implicit;return d.oxw(2).onEdit(t)}),d._uU(1),d.qZA()}if(2&t){var i=d.oxw().$implicit;d.xp6(1),d.Oqu(i.Email)}}function F(t,e){if(1&t){var n=d.EpF();d.TgZ(0,"td",47),d.NdJ("click",function(){d.CHM(n);var t=d.oxw().$implicit;return d.oxw(2).onEdit(t)}),d._uU(1),d.qZA()}if(2&t){var i=d.oxw().$implicit;d.xp6(1),d.Oqu(i.MaKhachHang)}}function Y(t,e){if(1&t){var n=d.EpF();d.TgZ(0,"td",47),d.NdJ("click",function(){d.CHM(n);var t=d.oxw().$implicit;return d.oxw(2).onEdit(t)}),d._uU(1),d.qZA()}if(2&t){var i=d.oxw().$implicit;d.xp6(1),d.Oqu(i.KhachHang)}}function L(t,e){if(1&t){var n=d.EpF();d.TgZ(0,"td",47),d.NdJ("click",function(){d.CHM(n);var t=d.oxw().$implicit;return d.oxw(2).onEdit(t)}),d._uU(1),d.qZA()}if(2&t){var i=d.oxw().$implicit;d.xp6(1),d.Oqu(i.DiaChi)}}function O(t,e){if(1&t){var n=d.EpF();d.TgZ(0,"td",47),d.NdJ("click",function(){d.CHM(n);var t=d.oxw().$implicit;return d.oxw(2).onEdit(t)}),d._uU(1),d.qZA()}if(2&t){var i=d.oxw().$implicit;d.xp6(1),d.Oqu(i.MaGCS)}}function Q(t,e){if(1&t){var n=d.EpF();d.TgZ(0,"td",47),d.NdJ("click",function(){d.CHM(n);var t=d.oxw().$implicit;return d.oxw(2).onEdit(t)}),d._uU(1),d.qZA()}if(2&t){var i=d.oxw().$implicit;d.xp6(1),d.Oqu(i.ChuTaiKhoan)}}function G(t,e){if(1&t){var n=d.EpF();d.TgZ(0,"td",47),d.NdJ("click",function(){d.CHM(n);var t=d.oxw().$implicit;return d.oxw(2).onEdit(t)}),d._uU(1),d.qZA()}if(2&t){var i=d.oxw().$implicit;d.xp6(1),d.Oqu(i.SoTaiKhoan)}}function P(t,e){if(1&t){var n=d.EpF();d.TgZ(0,"td",47),d.NdJ("click",function(){d.CHM(n);var t=d.oxw().$implicit;return d.oxw(2).onEdit(t)}),d._uU(1),d.qZA()}if(2&t){var i=d.oxw().$implicit;d.xp6(1),d.Oqu(i.NganHang)}}function K(t,e){if(1&t&&(d.TgZ(0,"td"),d._uU(1),d.ALo(2,"number"),d.qZA()),2&t){var n=d.oxw().$implicit;d.xp6(1),d.Oqu(d.lcZ(2,1,n.TruocThue))}}function R(t,e){if(1&t&&(d.TgZ(0,"td"),d._uU(1),d.ALo(2,"number"),d.qZA()),2&t){var n=d.oxw().$implicit;d.xp6(1),d.Oqu(d.lcZ(2,1,n.Thue))}}function $(t,e){if(1&t&&(d.TgZ(0,"td"),d._uU(1),d.ALo(2,"number"),d.qZA()),2&t){var n=d.oxw().$implicit;d.xp6(1),d.Oqu(d.lcZ(2,1,n.NgayHoaDon))}}function j(t,e){if(1&t){var n=d.EpF();d.TgZ(0,"mat-icon",50),d.NdJ("click",function(){d.CHM(n);var t=d.oxw().$implicit;return d.oxw(2).onDelete(t)}),d._uU(1,"delete"),d.qZA()}}function V(t,e){if(1&t){var n=d.EpF();d.TgZ(0,"tr"),d.TgZ(1,"td",47),d.NdJ("click",function(){var t=d.CHM(n).$implicit;return d.oxw(2).onEdit(t)}),d._uU(2),d.qZA(),d.YNc(3,B,2,1,"td",48),d.YNc(4,F,2,1,"td",48),d.YNc(5,Y,2,1,"td",48),d.YNc(6,L,2,1,"td",48),d.YNc(7,O,2,1,"td",48),d.YNc(8,Q,2,1,"td",48),d.YNc(9,G,2,1,"td",48),d.YNc(10,P,2,1,"td",48),d.TgZ(11,"td",47),d.NdJ("click",function(){var t=d.CHM(n).$implicit;return d.oxw(2).onEdit(t)}),d._uU(12),d.ALo(13,"number"),d.qZA(),d.TgZ(14,"td",47),d.NdJ("click",function(){var t=d.CHM(n).$implicit;return d.oxw(2).onEdit(t)}),d._uU(15),d.ALo(16,"number"),d.qZA(),d.TgZ(17,"td",47),d.NdJ("click",function(){var t=d.CHM(n).$implicit;return d.oxw(2).onEdit(t)}),d._uU(18),d.ALo(19,"number"),d.qZA(),d.TgZ(20,"td"),d._uU(21),d.ALo(22,"number"),d.qZA(),d.YNc(23,K,3,3,"td",44),d.YNc(24,R,3,3,"td",44),d.TgZ(25,"td"),d._uU(26),d.ALo(27,"number"),d.qZA(),d.TgZ(28,"td"),d._uU(29),d.qZA(),d.TgZ(30,"td"),d._uU(31),d.qZA(),d.YNc(32,$,3,3,"td",44),d.TgZ(33,"td"),d._uU(34),d.qZA(),d.TgZ(35,"td"),d.YNc(36,j,2,0,"mat-icon",49),d.qZA(),d.qZA()}if(2&t){var i=e.$implicit,a=d.oxw(2);d.xp6(2),d.Oqu(i._id),d.xp6(1),d.Q6J("Device",3),d.xp6(1),d.Q6J("Device",2),d.xp6(1),d.Q6J("Device",2),d.xp6(1),d.Q6J("Device",3),d.xp6(1),d.Q6J("Device",3),d.xp6(1),d.Q6J("Device",3),d.xp6(1),d.Q6J("Device",3),d.xp6(1),d.Q6J("Device",3),d.xp6(2),d.Oqu(d.lcZ(13,21,i.Nam)),d.xp6(3),d.Oqu(d.lcZ(16,23,i.Thang)),d.xp6(3),d.Oqu(d.lcZ(19,25,i.SanLuong)),d.xp6(3),d.Oqu(d.lcZ(22,27,i.DonGia)),d.xp6(2),d.Q6J("Device",3),d.xp6(1),d.Q6J("Device",3),d.xp6(2),d.Oqu(d.lcZ(27,29,i.TongTien)),d.xp6(3),d.Oqu(i.KyHieuHoaDon),d.xp6(2),d.Oqu(i.SoHoaDon),d.xp6(1),d.Q6J("Device",3),d.xp6(2),d.Oqu(i.TrangThai),d.xp6(2),d.Q6J("ngIf",a.checkPer(4))}}function X(t,e){if(1&t){var n=d.EpF();d.TgZ(0,"table",42),d.TgZ(1,"thead",43),d.TgZ(2,"tr"),d.TgZ(3,"th"),d._uU(4,"_id"),d.qZA(),d.YNc(5,_,2,0,"th",44),d.YNc(6,J,2,0,"th",44),d.YNc(7,N,2,0,"th",44),d.YNc(8,U,2,0,"th",44),d.YNc(9,w,2,0,"th",44),d.YNc(10,D,2,0,"th",44),d.YNc(11,C,2,0,"th",44),d.YNc(12,M,2,0,"th",44),d.TgZ(13,"th"),d._uU(14,"N\u0103m"),d.qZA(),d.TgZ(15,"th"),d._uU(16,"Th\xe1ng"),d.qZA(),d.TgZ(17,"th"),d._uU(18,"S\u1ea3n l\u01b0\u1ee3ng"),d.qZA(),d.TgZ(19,"th"),d._uU(20,"\u0110\u01a1n gi\xe1"),d.qZA(),d.YNc(21,S,2,0,"th",44),d.YNc(22,H,2,0,"th",44),d.TgZ(23,"th"),d._uU(24,"T\u1ed5ng ti\u1ec1n"),d.qZA(),d.TgZ(25,"th"),d._uU(26,"K\xfd hi\u1ec7u h\xf3a \u0111\u01a1n"),d.qZA(),d.TgZ(27,"th"),d._uU(28,"S\u1ed1 h\xf3a \u0111\u01a1n"),d.qZA(),d.YNc(29,E,2,0,"th",44),d.TgZ(30,"th"),d._uU(31,"Tr\u1ea1ng th\xe1i"),d.qZA(),d.TgZ(32,"th"),d.TgZ(33,"mat-icon",45),d.NdJ("click",function(){return d.CHM(n),d.oxw().reload()}),d._uU(34,"cached"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(35,"tbody"),d.YNc(36,V,37,31,"tr",46),d.qZA(),d.qZA()}if(2&t){var i=d.oxw();d.Q6J("@slideIn",void 0),d.xp6(5),d.Q6J("Device",3),d.xp6(1),d.Q6J("Device",2),d.xp6(1),d.Q6J("Device",2),d.xp6(1),d.Q6J("Device",3),d.xp6(1),d.Q6J("Device",3),d.xp6(1),d.Q6J("Device",3),d.xp6(1),d.Q6J("Device",3),d.xp6(1),d.Q6J("Device",3),d.xp6(9),d.Q6J("Device",3),d.xp6(1),d.Q6J("Device",3),d.xp6(7),d.Q6J("Device",3),d.xp6(7),d.Q6J("ngForOf",i.filter.length>0?i.filter:i.items.slice(0,10))("ngForTrackBy",i.trackByFn)}}function z(t,e){if(1&t&&(d.TgZ(0,"mat-option",51),d._uU(1),d.qZA()),2&t){var n=e.$implicit;d.s9C("value",n.NoiDung),d.xp6(1),d.hij("",n.NoiDung," ")}}function W(t,e){if(1&t){var n=d.EpF();d.TgZ(0,"button",52),d.NdJ("click",function(){return d.CHM(n),d.oxw().save()}),d.TgZ(1,"mat-icon"),d._uU(2,"save"),d.qZA(),d.qZA()}2&t&&d.Q6J("@slideIn",void 0)}var tt,et=function(){return[5,10,25,100]},nt=((tt=function(){function e(n,i){t(this,e),this.plus=n,this.fb=i,this.main=this.fb.group({keyWord:[,[]],_id:[,[]],Email:[,[s.kI.required]],MaKhachHang:[,[s.kI.required]],KhachHang:[,[s.kI.required]],DiaChi:[,[s.kI.required]],MaGCS:[,[s.kI.required]],ChuTaiKhoan:[,[s.kI.required]],SoTaiKhoan:[,[s.kI.required]],NganHang:[,[s.kI.required]],Nam:[,[s.kI.required,s.kI.pattern("^[0-9]*$")]],Thang:[,[s.kI.required,s.kI.pattern("^[0-9]*$")]],SanLuong:[,[s.kI.required,s.kI.pattern("^[0-9]*$")]],DonGia:[,[s.kI.required,s.kI.pattern("^[0-9]*$")]],TruocThue:[,[s.kI.required,s.kI.pattern("^[0-9]*$")]],Thue:[,[s.kI.required,s.kI.pattern("^[0-9]*$")]],TongTien:[,[s.kI.required,s.kI.pattern("^[0-9]*$")]],KyHieuHoaDon:[,[]],SoHoaDon:[,[]],NgayHoaDon:[,[s.kI.pattern("^[0-9]*$")]],TrangThai:[,[s.kI.pattern("^[0-9]*$")]]}),this.chart=[],this.title="Thanh to\xe1n \u0110MT",this.dbName="email",this.api="dmt",this.db=null,this.items=[],this.selectedItem=null,this.filter=[]}return n(e,[{key:"ngOnInit",value:function(){var t=this;this.plus.setTiTle(this.title),this.plus.IDB_InitDB(this.dbName).subscribe(function(e){return function(t,e,n,i){return new(n||(n=Promise))(function(e,a){function o(t){try{l(i.next(t))}catch(e){a(e)}}function r(t){try{l(i.throw(t))}catch(e){a(e)}}function l(t){t.done?e(t.value):function(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(o,r)}l((i=i.apply(t,[])).next())})}(t,0,void 0,regeneratorRuntime.mark(function t(){var n=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.db=e,this.getIDB(),this.plus.updateUserLocal(e,this.api),this.plus.updateAPi.subscribe(function(t){t&&n.getIDB()});case 1:case"end":return t.stop()}},t,this)}))})}},{key:"getIDB",value:function(){var t=this;console.log("getIDB"),this.filter=[],this.plus.IDB_DB_GetAll(this.db,this.api).subscribe(function(e){t.items=e,t.plus.updateAPi.next(!1)})}},{key:"ngOnDestroy",value:function(){console.log("Destroy",this.api),this.plus.subs.unsubscribe()}},{key:"save",value:function(){var t=this;if(!this.main.invalid){var e=this.main.value,n=this.plus.datetoNumObj(this.main.value,[""]);console.log(n),null==e._id?(delete e._id,this.plus.httpPost(this.api,n).subscribe(function(e){e.status&&t.plus.clickBtn("closeModal")})):this.plus.httpPut(this.api,n).subscribe(function(e){e.status&&t.plus.clickBtn("closeModal")})}}},{key:"onEdit",value:function(t){this.selectedItem=t;var e=this.plus.dateToHtmlObj(t,[""]);this.main.patchValue(e),this.plus.clickBtn("openModal")}},{key:"onDelete",value:function(t){!confirm("B\u1ea1n mu\u1ed1n x\xf3a?")||(this.plus.load(),this.plus.httpDisable(this.api,t).then(function(t){console.log(t)}))}},{key:"chooseOpt",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.main.controls[e].setValue(t[n]),i&&this.main.controls[e+"ID"].setValue(t._id)}},{key:"closeModal",value:function(){this.main.reset()}},{key:"search",value:function(t){this.filter=t}},{key:"find",value:function(t){this.items=t}},{key:"checkPer",value:function(t){return this.plus.checkPer(this.api,t)}},{key:"patchForm",value:function(){this.main.reset({_id:" "})}},{key:"reload",value:function(){return this.plus.reload(this.dbName+"/"+this.api)}},{key:"reset",value:function(){this.plus.loaded(),this.filter=[],this.getIDB(),this.main.reset({})}},{key:"changePage",value:function(t){this.filter=this.items.slice(t.pageIndex*t.pageSize,(t.pageIndex+1)*t.pageSize)}},{key:"trackByFn",value:function(t,e){return e}}]),e}()).\u0275fac=function(t){return new(t||tt)(d.Y36(p.T),d.Y36(s.qu))},tt.\u0275cmp=d.Xpm({type:tt,selectors:[["app-tien-do-dmt"]],decls:119,vars:15,consts:[[1,"container"],["id","add-btn","color","accent","mat-raised-button","","data-toggle","modal","data-target","#modelId",3,"click"],["id","back-btn","mat-raised-button","","color","primary",3,"click",4,"ngIf"],[3,"api","data",4,"ngIf"],[3,"db","api","filter"],[1,"row"],["class","table table-hover",4,"ngIf"],[3,"length","pageSize","pageSizeOptions","page"],["id","openModal","type","button","data-toggle","modal","data-target","#modelId",1,"d-none"],["id","modelId","data-backdrop","static","tabindex","-1","role","dialog","aria-labelledby","modelTitleId","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-body"],[1,"container-fluid"],[3,"formGroup"],["hidden","","formControlName","_id"],["required","","type","text","autocomplete","off","matInput","","formControlName","Email"],["matSuffix",""],["type","text","autocomplete","off","matInput","","formControlName","MaKhachHang"],["type","text","autocomplete","off","matInput","","formControlName","KhachHang"],["type","text","autocomplete","off","matInput","","formControlName","DiaChi"],["type","text","autocomplete","off","matInput","","formControlName","MaGCS"],["type","text","autocomplete","off","matInput","","formControlName","ChuTaiKhoan"],["type","text","autocomplete","off","matInput","","formControlName","SoTaiKhoan"],["type","text","autocomplete","off","matInput","","formControlName","NganHang"],["type","text","autocomplete","off","matInput","","formControlName","Nam"],["type","text","autocomplete","off","matInput","","formControlName","Thang"],["type","text","autocomplete","off","matInput","","formControlName","SanLuong"],["type","text","autocomplete","off","matInput","","formControlName","DonGia"],["type","text","autocomplete","off","matInput","","formControlName","TruocThue"],["type","text","autocomplete","off","matInput","","formControlName","Thue"],["type","text","autocomplete","off","matInput","","formControlName","TongTien"],["type","text","autocomplete","off","matInput","","formControlName","KyHieuHoaDon"],["type","text","autocomplete","off","matInput","","formControlName","SoHoaDon"],["type","text","autocomplete","off","matInput","","formControlName","NgayHoaDon"],["formControlName","TrangThai"],[3,"value",4,"ngFor","ngForOf"],[1,"modal-footer"],["id","closeModal","mat-raised-button","","color","primary","data-dismiss","modal",3,"click"],["mat-raised-button","","color","warn",3,"click",4,"ngIf"],["id","back-btn","mat-raised-button","","color","primary",3,"click"],[3,"api","data"],[1,"table","table-hover"],[1,"thead-inverse"],[4,"Device"],["color","primary",3,"click"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"click"],[3,"click",4,"Device"],["color","warn",3,"click",4,"ngIf"],["color","warn",3,"click"],[3,"value"],["mat-raised-button","","color","warn",3,"click"]],template:function(t,e){1&t&&(d.TgZ(0,"div",0),d.TgZ(1,"button",1),d.NdJ("click",function(){return e.reset()}),d.TgZ(2,"mat-icon"),d._uU(3,"control_point"),d.qZA(),d.qZA(),d.YNc(4,A,3,1,"button",2),d.YNc(5,I,1,1,"app-search-api",3),d.TgZ(6,"app-search-table",4),d.NdJ("filter",function(t){return e.search(t)}),d.qZA(),d.TgZ(7,"div",5),d.YNc(8,X,37,14,"table",6),d.TgZ(9,"mat-paginator",7),d.NdJ("page",function(t){return e.changePage(t)}),d.qZA(),d.qZA(),d.qZA(),d._UZ(10,"button",8),d.TgZ(11,"div",9),d.TgZ(12,"div",10),d.TgZ(13,"div",11),d.TgZ(14,"div",12),d.TgZ(15,"div",13),d.TgZ(16,"form",14),d._UZ(17,"input",15),d.TgZ(18,"mat-form-field"),d.TgZ(19,"mat-label"),d._uU(20,"Email"),d.qZA(),d._UZ(21,"input",16),d._UZ(22,"span",17),d.qZA(),d.TgZ(23,"mat-form-field"),d.TgZ(24,"mat-label"),d._uU(25,"M\xe3 kh\xe1ch h\xe0ng"),d.qZA(),d._UZ(26,"input",18),d._UZ(27,"span",17),d.qZA(),d.TgZ(28,"mat-form-field"),d.TgZ(29,"mat-label"),d._uU(30,"Kh\xe1ch h\xe0ng"),d.qZA(),d._UZ(31,"input",19),d._UZ(32,"span",17),d.qZA(),d.TgZ(33,"mat-form-field"),d.TgZ(34,"mat-label"),d._uU(35,"\u0110\u1ecba ch\u1ec9"),d.qZA(),d._UZ(36,"input",20),d._UZ(37,"span",17),d.qZA(),d.TgZ(38,"mat-form-field"),d.TgZ(39,"mat-label"),d._uU(40,"M\xe3 G C S"),d.qZA(),d._UZ(41,"input",21),d._UZ(42,"span",17),d.qZA(),d.TgZ(43,"mat-form-field"),d.TgZ(44,"mat-label"),d._uU(45,"Ch\u1ee7 t\xe0i kho\u1ea3n"),d.qZA(),d._UZ(46,"input",22),d._UZ(47,"span",17),d.qZA(),d.TgZ(48,"mat-form-field"),d.TgZ(49,"mat-label"),d._uU(50,"S\u1ed1 t\xe0i kho\u1ea3n"),d.qZA(),d._UZ(51,"input",23),d._UZ(52,"span",17),d.qZA(),d.TgZ(53,"mat-form-field"),d.TgZ(54,"mat-label"),d._uU(55,"Ng\xe2n h\xe0ng"),d.qZA(),d._UZ(56,"input",24),d._UZ(57,"span",17),d.qZA(),d.TgZ(58,"mat-form-field"),d.TgZ(59,"mat-label"),d._uU(60,"N\u0103m"),d.qZA(),d._UZ(61,"input",25),d._UZ(62,"span",17),d.qZA(),d.TgZ(63,"mat-form-field"),d.TgZ(64,"mat-label"),d._uU(65,"Th\xe1ng"),d.qZA(),d._UZ(66,"input",26),d._UZ(67,"span",17),d.qZA(),d.TgZ(68,"mat-form-field"),d.TgZ(69,"mat-label"),d._uU(70,"S\u1ea3n l\u01b0\u1ee3ng"),d.qZA(),d._UZ(71,"input",27),d._UZ(72,"span",17),d.qZA(),d.TgZ(73,"mat-form-field"),d.TgZ(74,"mat-label"),d._uU(75,"\u0110\u01a1n gi\xe1"),d.qZA(),d._UZ(76,"input",28),d._UZ(77,"span",17),d.qZA(),d.TgZ(78,"mat-form-field"),d.TgZ(79,"mat-label"),d._uU(80,"Tr\u01b0\u1edbc thu\u1ebf"),d.qZA(),d._UZ(81,"input",29),d._UZ(82,"span",17),d.qZA(),d.TgZ(83,"mat-form-field"),d.TgZ(84,"mat-label"),d._uU(85,"Thu\u1ebf"),d.qZA(),d._UZ(86,"input",30),d._UZ(87,"span",17),d.qZA(),d.TgZ(88,"mat-form-field"),d.TgZ(89,"mat-label"),d._uU(90,"T\u1ed5ng ti\u1ec1n"),d.qZA(),d._UZ(91,"input",31),d._UZ(92,"span",17),d.qZA(),d.TgZ(93,"mat-form-field"),d.TgZ(94,"mat-label"),d._uU(95,"K\xfd hi\u1ec7u h\xf3a \u0111\u01a1n"),d.qZA(),d._UZ(96,"input",32),d._UZ(97,"span",17),d.qZA(),d.TgZ(98,"mat-form-field"),d.TgZ(99,"mat-label"),d._uU(100,"S\u1ed1 h\xf3a \u0111\u01a1n"),d.qZA(),d._UZ(101,"input",33),d._UZ(102,"span",17),d.qZA(),d.TgZ(103,"mat-form-field"),d.TgZ(104,"mat-label"),d._uU(105,"Ng\xe0y h\xf3a \u0111\u01a1n"),d.qZA(),d._UZ(106,"input",34),d._UZ(107,"span",17),d.qZA(),d.TgZ(108,"mat-form-field"),d.TgZ(109,"mat-label"),d._uU(110,"Tr\u1ea1ng th\xe1i"),d.qZA(),d.TgZ(111,"mat-select",35),d.YNc(112,z,2,2,"mat-option",36),d.ALo(113,"catalog"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(114,"div",37),d.TgZ(115,"button",38),d.NdJ("click",function(){return e.closeModal()}),d.TgZ(116,"mat-icon"),d._uU(117,"close"),d.qZA(),d.qZA(),d.YNc(118,W,3,1,"button",39),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&t&&(d.xp6(4),d.Q6J("ngIf",e.filter.length>0),d.xp6(1),d.Q6J("ngIf",e.checkPer(10)),d.xp6(1),d.Q6J("db",e.db)("api",e.api),d.xp6(2),d.Q6J("ngIf",e.items.length+e.filter.length>0),d.xp6(1),d.Q6J("length",e.items.length)("pageSize",10)("pageSizeOptions",d.DdM(14,et)),d.xp6(7),d.Q6J("formGroup",e.main),d.xp6(96),d.Q6J("ngForOf",d.lcZ(113,12,"Trangthai")),d.xp6(3),d.Q6J("@slideIn",void 0),d.xp6(3),d.Q6J("ngIf",e.checkPer(2)&&e.main.valid))},directives:[g.lW,f.Hw,h.O5,m.D,v.NW,s._Y,s.JL,s.sg,s.Fj,s.JJ,s.u,Z.KE,Z.hX,b.Nt,s.Q7,Z.R9,T.gD,h.sg,y.W,k.HP,x.ey],pipes:[q.pW,h.JJ],styles:[""]}),tt),it=a(58497),at=function(){function e(n,i,a,o){t(this,e),this.loader=n,this.url=i,this.http=a,this.plus=o}return n(e,[{key:"uploadFile",value:function(t,e,n){var i=new FormData,a=new it.WM({"ngsw-bypass":""});return i.append("file",t),console.log("formData",i),new it.LE,this.http.post("https://up-log.herokuapp.com/upload",i,{headers:a})}},{key:"upload",value:function(){var t=this;return new Promise(function(e,n){t.loader.file.then(function(i){t.uploadFile(i,t.url,"test").subscribe(function(t){console.log(t),e({default:t.url})},function(t){n("Ch\u1ee9c n\u0103ng b\u1ecb l\u1ed7i.\nVui l\xf2ng th\u1eed l\u1ea1i sau \xedt ph\xfat!"),console.log(i)})})})}},{key:"abort",value:function(){console.log("abort")}}]),e}(),ot=a(29726),rt=a(84487),lt=a(15228),ut=a(33982),ct=a(50166),st=function(t,e,n,i){return new(n||(n=Promise))(function(a,o){function r(t){try{u(i.next(t))}catch(e){o(e)}}function l(t){try{u(i.throw(t))}catch(e){o(e)}}function u(t){t.done?a(t.value):function(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(r,l)}u((i=i.apply(t,e||[])).next())})},ht=["myEditor"];function dt(t,e){if(1&t){var n=d.EpF();d.TgZ(0,"button",18),d.NdJ("click",function(){return d.CHM(n),d.oxw().checkImportData()}),d._uU(1,"Xem tr\u01b0\u1edbc"),d.qZA()}}function pt(t,e){if(1&t){var n=d.EpF();d.TgZ(0,"button",19),d.NdJ("click",function(){return d.CHM(n),d.oxw().reload()}),d._uU(1,"L\xe0m l\u1ea1i "),d.qZA()}}function gt(t,e){if(1&t){var n=d.EpF();d.TgZ(0,"div",20),d.TgZ(1,"div",21),d.TgZ(2,"button",22),d.NdJ("click",function(){return d.CHM(n),d.oxw().pre()}),d._UZ(3,"i",23),d.qZA(),d.TgZ(4,"button",24),d.NdJ("click",function(){return d.CHM(n),d.oxw().next()}),d._UZ(5,"i",25),d.qZA(),d.qZA(),d.TgZ(6,"div",26),d.TgZ(7,"h5",27),d._uU(8),d.qZA(),d._UZ(9,"div",28),d.qZA(),d._UZ(10,"hr"),d.qZA()}if(2&t){var i=d.oxw();d.Q6J("@slideIn",void 0),d.xp6(8),d.AsE("N\u1ed8I DUNG EMAIL S\u1ed0 ",i.i+1,": ",i.dataJson[i.i].email,""),d.xp6(1),d.Q6J("innerHTML",i.dataJson[i.i].message,d.oJD)}}function ft(t,e){if(1&t&&(d.TgZ(0,"tr"),d.TgZ(1,"td"),d._uU(2),d.qZA(),d.TgZ(3,"td"),d._uU(4),d.qZA(),d.qZA()),2&t){var n=e.$implicit;d.xp6(2),d.hij(" ",n.email," "),d.xp6(2),d.hij(" ",n.err," ")}}function mt(t,e){if(1&t&&(d.TgZ(0,"div",29),d.TgZ(1,"h6"),d._uU(2,"DANH S\xc1CH D\u1eee LI\u1ec6U KH\xd4NG H\u1ee2P L\u1ec6"),d.qZA(),d.TgZ(3,"table",30),d.YNc(4,ft,5,2,"tr",31),d.qZA(),d.qZA()),2&t){var n=d.oxw();d.Q6J("@slideIn",void 0),d.xp6(4),d.Q6J("ngForOf",n.errData)}}var vt=function(t,e){return{"bg-success":t,"bg-danger":e}};function Zt(t,e){if(1&t&&(d.TgZ(0,"tr"),d.TgZ(1,"td"),d._uU(2),d.qZA(),d.TgZ(3,"td",35),d._uU(4),d.qZA(),d.TgZ(5,"td",35),d._uU(6),d.qZA(),d.TgZ(7,"td",36),d._uU(8),d.qZA(),d.qZA()),2&t){var n=e.$implicit,i=e.index;d.xp6(2),d.Oqu(i+1),d.xp6(2),d.Oqu(n.fullName),d.xp6(2),d.Oqu(n.email),d.xp6(1),d.Q6J("ngClass",d.WLB(5,vt,n.status,3===n.status)),d.xp6(1),d.hij(" ",1===n.status?"\u0110\xe3 g\u1eedi":"Ch\u01b0a g\u1eedi"," ")}}function bt(t,e){if(1&t&&(d.TgZ(0,"div",32),d.TgZ(1,"h5"),d._uU(2,"DANH S\xc1CH EMAIL \u0110\u01af\u1ee2C TH\xd4NG B\xc1O"),d.qZA(),d.TgZ(3,"table",33),d.TgZ(4,"thead"),d.TgZ(5,"tr"),d.TgZ(6,"th"),d._uU(7,"STT"),d.qZA(),d.TgZ(8,"th"),d._uU(9,"H\u1ecd v\xe0 t\xean"),d.qZA(),d.TgZ(10,"th"),d._uU(11,"Email"),d.qZA(),d.TgZ(12,"th",34),d._uU(13,"Tr\u1ea1ng th\xe1i"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(14,"tbody"),d.YNc(15,Zt,9,8,"tr",31),d.qZA(),d.qZA(),d.qZA()),2&t){var n=d.oxw();d.Q6J("@slideIn",void 0),d.xp6(15),d.Q6J("ngForOf",n.dataJson)}}function Tt(t,e){if(1&t){var n=d.EpF();d.TgZ(0,"button",37),d.NdJ("click",function(){return d.CHM(n),d.oxw().sendMail()}),d._uU(1,"G\u1eedi mail"),d.qZA()}}var yt=function(){var e=function(){function e(n,i,a,o){t(this,e),this.plus=n,this.fb=i,this.router=a,this.httpClient=o,this.Editor=ot,this.user=this.plus.user.getValue(),this.from=this.plus.user.getValue().unit,this.localName="moneyMail",this.dataImport=[],this.dataJson=[],this.errData=[],this.resent=[],this.tienLuong=[],this.send="",this.i=0,this.doc="",this.htmlContent=sessionStorage.getItem("htmlContentMain")||"",this.main=this.fb.group({email:[,s.kI.email],title:["Th\xf4ng b\xe1o ti\u1ec1n l\u01b0\u01a1ng chuy\u1ec3n kho\u1ea3n ng\xe0y ".concat(this.plus.dateFormat(Date.now())),[s.kI.required,s.kI.minLength(3)]]}),this.checkBody=this.fb.group({email:["",[s.kI.required,s.kI.email]],from:["\u0110i\u1ec7n l\u1ef1c Xu\xe2n L\u1ed9c",[s.kI.required,s.kI.minLength(10)]],title:["",[s.kI.required,s.kI.minLength(3)]],message:["",[s.kI.required,s.kI.minLength(200)]],reciver:["",[s.kI.required,s.kI.minLength(3)]],index:[,s.kI.max(1e3)]}),this.tienluong=this.fb.group({keyWord:[,[]],_id:[,[]],HoTen:[,[s.kI.required]],ThucLanh:[,[s.kI.required]],NgayNhanLuong:[,[s.kI.required]],MucHtnv:[,],SoNguoiGiamTru:[,],ThueTamDong:[,]})}return n(e,[{key:"ngOnInit",value:function(){this.init()}},{key:"init",value:function(){var t=this;if((JSON.parse(localStorage.getItem(this.localName))||[]).filter(function(e){0===e.status&&t.resent.push(e)}),0==this.from.length){var e=this.plus.user.getValue().unit;e?this.from=e:this.plus.alertToasrt({err:"B\u1ea1n ch\u01b0a khai b\xe1o \u0111\u01a1n v\u1ecb t\u1ea1i m\u1ee5c T\xe0i Kho\u1ea3n"}),console.log(e)}this.resent.length>0?(console.log(this.resent),confirm("B\u1ea5m OK \u0111\u1ec3 g\u1eedi mail tr\u01b0\u1edbc ch\u01b0a ho\xe0n th\xe0nh.\nB\u1ea5m Cancel \u0111\u1ec3 x\xf3a phi\xean l\xe0m vi\u1ec7c tr\u01b0\u1edbc?")?this.dataJson=this.resent:(localStorage.removeItem(this.localName),this.reset())):(this.reset(),localStorage.removeItem(this.localName))}},{key:"onReady",value:function(t){var e=this;t.ui.getEditableElement().parentElement.insertBefore(t.ui.view.toolbar.element,t.ui.getEditableElement()),t.plugins.get("FileRepository").createUploadAdapter=function(t){return console.log(btoa(t.file)),new at(t,"/upload",e.httpClient,e.plus)}}},{key:"saveArticle",value:function(){this.dataJson.length>0&&(this.plus.alertToasrt({war:"B\u1ea1n c\u1ea7n ch\u1ecdn l\u1ea1i danh s\xe1ch nh\u1eadn email sau khi hi\u1ec7u ch\u1ec9nh n\u1ed9i dung!"}),this.reset()),this.htmlContent=this.getArticleContent(),sessionStorage.setItem("htmlContentMain",this.htmlContent)}},{key:"getArticleContent",value:function(){return this.myEditor&&this.myEditor.editorInstance?this.myEditor.editorInstance.getData():""}},{key:"readXlsx",value:function(t){var e=this;this.dataJson=[],this.dataImport=[];var n=t.target,i=new FileReader;i.onload=function(t){var n=rt.read(t.target.result,{type:"binary"});e.dataImport=rt.utils.sheet_to_json(n.Sheets[n.SheetNames[0]],{header:1})},i.readAsBinaryString(n.files[0]),n=null}},{key:"checkImportData",value:function(){var t=this;this.dataImport.length>400&&this.plus.alertError("Vui l\xf2ng ch\u1ecdn danh s\xe1ch d\u01b0\u1edbi 400 email!");var e=this.dataImport[0],n=e.length;this.dataImport.splice(0,1);var i=this.plus.dateHtmlToXls(Date.now()),a=e.indexOf("M\u1ee9c HTNV"),o=e.indexOf("Thu\u1ebf TNCN"),r=e.indexOf("Th\u1ef1c l\xe3nh");console.log(a,o),this.dataImport.forEach(function(l,u){if("x"==l[1]){for(var c="<ul>",s=6;s<n;s++)c+=l[s]?"<li>".concat(e[s],": ").concat(t.plus.numberWithCommas(l[s]),".</li>"):"";var h={_id:+l[0],HoTen:l[3],ThucLanh:l[r],NgayNhanLuong:i,MucHtnv:l[a],SoNguoiGiamTru:0,ThueTamDong:l[o],dateModify:Date.now()+u};t.tienLuong.push(h);var d={from:t.from,status:0,reciver:l[3],err:"",index:u,email:l[4],fullName:l[2]+": "+l[3],title:"".concat(t.main.get("title").value),message:"<p>K\xednh g\u1eedi ".concat(l[2],": ").concat(l[3],".</p>\n          <p>\u0110i\u1ec7n l\u1ef1c Xu\xe2n L\u1ed9c th\xf4ng b\xe1o ti\u1ec1n l\u01b0\u01a1ng chuy\u1ec3n kho\u1ea3n chi ti\u1ebft nh\u01b0 sau:</p>\n          ").concat(c,"\n          </ul><p>S\u1ed1 ti\u1ec1n th\u1ef1c l\xe3nh tr\xean \u0111\u01b0\u1ee3c chuy\u1ec3n kho\u1ea3n qua t\xe0i kho\u1ea3n s\u1ed1 ").concat(l[5]," c\u1ee7a ").concat(l[2]," ").concat(l[3],".\n\n          M\u1ecdi \xfd ki\u1ebfn th\u1eafc m\u1eafc, vui l\xf2ng li\xean h\u1ec7 ph\xf2ng Ph\xf2ng T\u1ed5ng H\u1ee3p \u0111\u1ec3 \u0111\u01b0\u1ee3c gi\u1ea3i \u0111\xe1p.</p>\n          ").concat(t.htmlContent,"\n        Tr\xe2n tr\u1ecdng.\n           ")};if(console.log(d),t.checkBody.patchValue(d),t.checkBody.valid)t.dataJson.push(d),t.plus.pushLocalStorage(t.localName,d);else{var p=t.plus.getErrValidateForm(t.checkBody);d.err=p,console.log(p),t.errData.push(d)}}})}},{key:"sendDefault",value:function(){this.plus.sendMail({from:this.from,status:0,err:"",email:"thucspc@gmail.com",title:"B\xe1o c\xe1o th\u1ef1c hi\u1ec7n g\u1eedi ".concat(this.checkBody.value.title),index:0,message:"\n      <p> B\xe1o c\xe1o th\u1ef1c hi\u1ec7n g\u1eedi email: ".concat(this.dataJson.length,"</p>\n      <p>Tr\xe2n tr\u1ecdng.</p>\n      ")},"mail/bao-cao").subscribe(function(t){console.log("bodydefault")})}},{key:"sendMail",value:function(){return st(this,void 0,void 0,regeneratorRuntime.mark(function t(){var e,n,i=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.plus.httpPost("tien-luong/importmail",this.tienLuong,!0).subscribe(function(t){console.log(t)}),e=this.dataJson.length,n=confirm("Th\u1ef1c hi\u1ec7n th\xf4ng b\xe1o cho "+e+" CBCNV?"),!(e>400)){t.next=6;break}this.plus.alertToasrt({war:"Vui l\xf2ng l\u1eadp danh s\xe1ch d\u01b0\u1edbi 400 email"}),t.next=11;break;case 6:if(!(0===this.errData.length&&e>0&&n)){t.next=10;break}return t.delegateYield(regeneratorRuntime.mark(function t(){var e,n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i.sendDefault(),e=0,n=i.dataJson.length,a=regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.plus.sleep(5e3);case 2:i.i=e,n=i.dataJson[e],i.plus.sendMail(n,"mail/money").subscribe(function(t){t.email&&(i.dataJson.filter(function(e,n){e.index===t.index&&(i.dataJson[n].status=1)}),console.log(e,t.email,n.reciver),localStorage.setItem(i.localName,JSON.stringify(i.dataJson)))},function(t){i.dataJson[e].status=0,localStorage.setItem(i.localName,JSON.stringify(i.dataJson)),i.plus.alertToasrt({err:" Ch\u01b0a g\u1eedi email \u0111\u1ebfn ".concat(n.reciver)})}),e++;case 5:case"end":return t.stop()}},t)});case 4:if(!(e<n)){t.next=8;break}return t.delegateYield(a(),"t0",6);case 6:t.next=4;break;case 8:case"end":return t.stop()}},t)})(),"t0",8);case 8:t.next=11;break;case 10:this.plus.alertToasrt({war:"\u0110\xe3 h\u1ee7y thao t\xe1c!"}),window.location.reload();case 11:case"end":return t.stop()}},t,this)}))}},{key:"pre",value:function(){this.i>0?this.i--:this.i=0}},{key:"next",value:function(){this.i<this.dataJson.length-1?this.i++:this.i=1}},{key:"view",value:function(t){console.log(t),this.mailModal=t,document.getElementById("email").click()}},{key:"reset",value:function(){this.dataJson=[],this.errData=[],sessionStorage.removeItem("htmlContentMain")}},{key:"reload",value:function(){return st(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.router.navigate([""]);case 2:return t.abrupt("return",this.router.navigate(["email/tienluong"]));case 3:case"end":return t.stop()}},t,this)}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(d.Y36(p.T),d.Y36(s.qu),d.Y36(ut.F0),d.Y36(it.eN))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-money"]],viewQuery:function(t,e){var n;(1&t&&d.Gf(ht,5),2&t)&&(d.iGM(n=d.CRH())&&(e.myEditor=n.first))},decls:26,vars:10,consts:[[1,"container"],[1,"text-center","my-3","text-primary"],[1,"modal-body"],[1,"form-group",3,"formGroup"],["for",""],["type","text","required","","placeholder","Nh\u1eadp n\u1ed9i dung ti\xeau \u0111\u1ec1","formControlName","title",1,"form-control"],[3,"editor","data","ready","change"],["myEditor",""],["target","_blank","href","https://github.com/thuctd/FileStore/raw/master/templates/MauTienLuong.xlsx",1,"badge","badge-warning"],["for","file-upload",1,"custom-file-upload","mx-5"],[1,"fa","fa-cloud-upload"],["hidden","","id","file-upload","type","file","multiple","false",3,"change"],["type","button","class","btn btn-outline-primary mx-3",3,"click",4,"ngIf"],["type","button","class","btn btn-outline-danger mx-3",3,"click",4,"ngIf"],["class","card border-primary my-3",4,"ngIf"],["class","alert-danger my-4 justify-content-center",4,"ngIf"],["class","dataOk",4,"ngIf"],["mat-raised-button","","color","accent",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-primary","mx-3",3,"click"],["type","button",1,"btn","btn-outline-danger","mx-3",3,"click"],[1,"card","border-primary","my-3"],[1,"button"],["type","button",1,"btn","btn-danger","float-left",3,"click"],["aria-hidden","true",1,"fa","fa-arrow-left"],["type","button",1,"btn","btn-danger","float-right",3,"click"],["aria-hidden","true",1,"fa","fa-arrow-right"],[1,"card-body"],[1,"text-center","rounded","font-weigth-bold","bg-warning","py-2"],[3,"innerHTML"],[1,"alert-danger","my-4","justify-content-center"],[1,"table","table-hover","table-invert","table-bordered"],[4,"ngFor","ngForOf"],[1,"dataOk"],[1,"table","table-hover"],[1,"text-center"],["scope","row"],[1,"text-center",3,"ngClass"],["mat-raised-button","","color","accent",3,"click"]],template:function(t,e){1&t&&(d.TgZ(0,"div",0),d.TgZ(1,"h5",1),d._uU(2,"TH\xd4NG B\xc1O TI\u1ec0N L\u01af\u01a0NG B\u1eb0NG EMAIL"),d.qZA(),d.TgZ(3,"div"),d.TgZ(4,"div",2),d.TgZ(5,"form",3),d.TgZ(6,"label",4),d._uU(7,"Ti\xeau \u0111\u1ec1"),d.qZA(),d._UZ(8,"input",5),d.qZA(),d.qZA(),d.TgZ(9,"h5",4),d._uU(10,"N\u1ed9i dung th\xf4ng b\xe1o kh\xe1c"),d.qZA(),d.TgZ(11,"ckeditor",6,7),d.NdJ("ready",function(t){return e.onReady(t)})("change",function(){return e.saveArticle()}),d.qZA(),d.TgZ(13,"a",8),d._uU(14,"File m\u1eabu"),d.qZA(),d.TgZ(15,"label",9),d._UZ(16,"i",10),d._uU(17," Ch\u1ecdn file "),d.qZA(),d.TgZ(18,"input",11),d.NdJ("change",function(t){return e.readXlsx(t)}),d.qZA(),d.YNc(19,dt,2,0,"button",12),d.YNc(20,pt,2,0,"button",13),d.YNc(21,gt,11,4,"div",14),d.YNc(22,mt,5,2,"div",15),d.YNc(23,bt,16,2,"div",16),d.YNc(24,Tt,2,0,"button",17),d._UZ(25,"hr"),d.qZA(),d.qZA()),2&t&&(d.Q6J("@slideIn",void 0),d.xp6(5),d.Q6J("formGroup",e.main),d.xp6(6),d.s9C("data",e.htmlContent),d.Q6J("editor",e.Editor),d.xp6(8),d.Q6J("ngIf",e.dataImport.length>0&&0===e.dataJson.length),d.xp6(1),d.Q6J("ngIf",e.dataJson.length>0),d.xp6(1),d.Q6J("ngIf",e.dataJson.length>0&&0==e.errData.length),d.xp6(1),d.Q6J("ngIf",e.errData.length>0),d.xp6(1),d.Q6J("ngIf",e.dataJson.length>0&&0===e.errData.length),d.xp6(1),d.Q6J("ngIf",0===e.errData.length&&e.dataJson.length>0))},directives:[s._Y,s.JL,s.sg,s.Fj,s.Q7,s.JJ,s.u,ct.u,h.O5,h.sg,h.mk,g.lW],styles:[""],data:{animation:[lt.Ym]}}),e}(),kt=["Email","MaKhachHang","KhachHang","DiaChi","MaGCS","ChuTaiKhoan","SoTaiKhoan","NganHang","Nam","Thang","SanLuong","DonGia","TruocThue","Thue","TongTien"],xt=a(31409),qt=a(51511),At=function(t,e,n,i){return new(n||(n=Promise))(function(a,o){function r(t){try{u(i.next(t))}catch(e){o(e)}}function l(t){try{u(i.throw(t))}catch(e){o(e)}}function u(t){t.done?a(t.value):function(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(r,l)}u((i=i.apply(t,e||[])).next())})};function It(t,e){if(1&t){var n=d.EpF();d.TgZ(0,"div",8),d.TgZ(1,"form",9),d.TgZ(2,"mat-form-field"),d.TgZ(3,"mat-label"),d._uU(4,"Ti\xeau \u0111\u1ec1"),d.qZA(),d._UZ(5,"textarea",10),d.qZA(),d.qZA(),d.TgZ(6,"app-drop-files",11),d.NdJ("files",function(t){return d.CHM(n),d.oxw().selectedFile(t)}),d.qZA(),d.TgZ(7,"a",12),d.TgZ(8,"mat-icon"),d._uU(9,"description"),d.qZA(),d._uU(10," File m\u1eabu"),d.qZA(),d.qZA()}if(2&t){var i=d.oxw();d.xp6(1),d.Q6J("formGroup",i.checkBody),d.xp6(6),d.MGl("href","https://github.com/thuctd/FileStore/raw/master/templates/",i.api,".xlsx",d.LSH)}}function _t(t,e){if(1&t){var n=d.EpF();d.TgZ(0,"button",13),d.NdJ("click",function(){return d.CHM(n),d.oxw().reload()}),d._uU(1,"L\xe0m l\u1ea1i "),d.qZA()}}function Jt(t,e){if(1&t){var n=d.EpF();d.TgZ(0,"div",14),d.TgZ(1,"div",15),d.TgZ(2,"button",16),d.NdJ("click",function(){return d.CHM(n),d.oxw().pre()}),d._UZ(3,"i",17),d.qZA(),d.TgZ(4,"button",18),d.NdJ("click",function(){return d.CHM(n),d.oxw().next()}),d._UZ(5,"i",19),d.qZA(),d.qZA(),d.TgZ(6,"div",20),d.TgZ(7,"h5",21),d._uU(8),d.qZA(),d._UZ(9,"div",22),d.qZA(),d._UZ(10,"hr"),d.qZA()}if(2&t){var i=d.oxw();d.xp6(6),d.Q6J("@slideIn",void 0),d.xp6(2),d.AsE("N\u1ed8I DUNG EMAIL S\u1ed0 ",i.i+1,": ",i.dataJson[i.i].email,""),d.xp6(1),d.Q6J("innerHTML",i.dataJson[i.i].message,d.oJD)}}function Nt(t,e){if(1&t&&(d.TgZ(0,"tr"),d.TgZ(1,"td"),d._uU(2),d.qZA(),d.TgZ(3,"td"),d._uU(4),d.qZA(),d.TgZ(5,"td"),d._uU(6),d.qZA(),d.qZA()),2&t){var n=e.$implicit;d.xp6(2),d.hij(" D\xf2ng ",n.index," "),d.xp6(2),d.hij(" ",n.email," "),d.xp6(2),d.hij(" ",n.err," ")}}function Ut(t,e){if(1&t&&(d.TgZ(0,"div",23),d.TgZ(1,"h6"),d._uU(2,"DANH S\xc1CH D\u1eee LI\u1ec6U KH\xd4NG H\u1ee2P L\u1ec6"),d.qZA(),d.TgZ(3,"table",24),d.YNc(4,Nt,7,3,"tr",25),d.qZA(),d.qZA()),2&t){var n=d.oxw();d.Q6J("@slideIn",void 0),d.xp6(4),d.Q6J("ngForOf",n.errData)}}var wt=function(t,e){return{"bg-success":t,"bg-danger":e}};function Dt(t,e){if(1&t&&(d.TgZ(0,"tr"),d.TgZ(1,"td"),d._uU(2),d.qZA(),d.TgZ(3,"td",29),d._uU(4),d.qZA(),d.TgZ(5,"td",29),d._uU(6),d.qZA(),d.TgZ(7,"td",30),d._uU(8),d.qZA(),d.qZA()),2&t){var n=e.$implicit,i=e.index;d.xp6(2),d.Oqu(i+1),d.xp6(2),d.Oqu(n.company),d.xp6(2),d.Oqu(n.email),d.xp6(1),d.Q6J("ngClass",d.WLB(5,wt,n.status,3===n.status)),d.xp6(1),d.hij(" ",1===n.status?"\u0110\xe3 g\u1eedi":"Ch\u01b0a g\u1eedi"," ")}}function Ct(t,e){if(1&t&&(d.TgZ(0,"div",26),d.TgZ(1,"h5"),d._uU(2,"DANH S\xc1CH EMAIL \u0110\u01af\u1ee2C TH\xd4NG B\xc1O"),d.qZA(),d.TgZ(3,"table",27),d.TgZ(4,"thead"),d.TgZ(5,"tr"),d.TgZ(6,"th"),d._uU(7,"STT"),d.qZA(),d.TgZ(8,"th"),d._uU(9,"H\u1ecd v\xe0 t\xean"),d.qZA(),d.TgZ(10,"th"),d._uU(11,"Email"),d.qZA(),d.TgZ(12,"th",28),d._uU(13,"Tr\u1ea1ng th\xe1i"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(14,"tbody"),d.YNc(15,Dt,9,8,"tr",25),d.qZA(),d.qZA(),d.qZA()),2&t){var n=d.oxw();d.Q6J("@slideIn",void 0),d.xp6(15),d.Q6J("ngForOf",n.dataJson)}}function Mt(t,e){if(1&t){var n=d.EpF();d.TgZ(0,"button",31),d.NdJ("click",function(){return d.CHM(n),d.oxw().sendMail()}),d._uU(1,"G\u1eedi mail"),d.qZA()}}var St=function(){var e=function(){function e(n,i,a,o){t(this,e),this.plus=n,this.fb=i,this.router=a,this.excelSV=o,this.user=this.plus.user.getValue(),this.from=this.plus.user.getValue().unit,this.api="dien-mat-troi",this.title="\u0110i\u1ec7n m\u1eb7t tr\u1eddi",this.header=kt,this.errData=[],this.dataJson=[],this.dataApi=[],this.resent=[],this.i=0,this.checkBody=this.fb.group({email:["",[s.kI.required,s.kI.email]],from:["\u0110i\u1ec7n l\u1ef1c Xu\xe2n L\u1ed9c",[s.kI.required,s.kI.minLength(10)]],title:["Th\xf4ng b\xe1o chi ti\u1ebft ti\u1ec1n \u0111i\u1ec7n m\u1eb7t tr\u1eddi tr\xean m\xe1i nh\xe0",[s.kI.required,s.kI.minLength(3)]],message:["",[s.kI.required,s.kI.minLength(1010)]],company:["",[s.kI.required,s.kI.minLength(10)]],index:[,s.kI.max(1e3)]}),this.excelBody=this.fb.group({Email:[,[s.kI.required,s.kI.email]],MaKhachHang:[,[s.kI.required]],KhachHang:[,[s.kI.required]],DiaChi:[,[s.kI.required]],MaGCS:[,[s.kI.required]],ChuTaiKhoan:[,[s.kI.required]],SoTaiKhoan:[,[s.kI.required]],NganHang:[,[s.kI.required]],Nam:[,[s.kI.required]],Thang:[,[s.kI.required]],SanLuong:[,[s.kI.required,s.kI.pattern("^[0-9]*$")]],DonGia:[,[s.kI.required,s.kI.pattern("^[0-9]*$")]],TruocThue:[,[s.kI.required,s.kI.pattern("^[0-9]*$")]],Thue:[,[s.kI.required,s.kI.pattern("^[0-9]*$")]],TongTien:[,[s.kI.required,s.kI.pattern("^[0-9]*$")]],KyHieuHoaDon:[,[]],SoHoaDon:[,[]],NgayHoaDon:[,[]]})}return n(e,[{key:"ngOnInit",value:function(){this.init(),this.plus.setTiTle(this.title)}},{key:"init",value:function(){var t=this;if((JSON.parse(localStorage.getItem(this.api))||[]).filter(function(e){0===e.status&&t.resent.push(e)}),0==this.from.length){var e=this.plus.user.getValue().unit;e?this.from=e:this.plus.alertToasrt({err:"B\u1ea1n ch\u01b0a khai b\xe1o \u0111\u01a1n v\u1ecb t\u1ea1i m\u1ee5c T\xe0i Kho\u1ea3n"}),console.log(e)}if(this.resent.length>0){console.log(this.resent);var n=confirm("G\u1eedi l\u1ea1i c\xe1c email ch\u01b0a ho\xe0n th\xe0nh?");n?this.dataJson=this.resent:localStorage.removeItem(this.api),n?this.dataJson=this.resent:(localStorage.removeItem(this.api),this.reset())}else this.reset(),localStorage.removeItem(this.api)}},{key:"selectedFile",value:function(t){var e=this;this.reset(),this.excelSV.read(t[0]).then(function(t){var n=t[0];console.log(n);var i=n[0];n.forEach(function(t,n){if("x"==t[1]||"X"==t[1]){var a={Email:t[2],MaKhachHang:t[3],KhachHang:t[4],DiaChi:t[5],MaGCS:t[6],ChuTaiKhoan:t[7],SoTaiKhoan:t[8],NganHang:t[9],Nam:t[10],Thang:t[11],SanLuong:t[12],DonGia:t[13],TruocThue:t[14],Thue:t[15],TongTien:t[16]};if(e.excelBody.patchValue(a),e.excelBody.invalid){var o=e.plus.getErrValidateForm(e.excelBody);e.errData.push({index:n-1,err:o,email:a.Email})}else e.dataApi.push(a);for(var r="<ul>",l=3;l<=16;l++)r+=l<12?"<li>".concat(i[l],": ").concat(t[l],".</li>"):l>11?"<li>".concat(i[l],": ").concat(e.plus.numberWithCommas(t[l]),".</li>"):"";var u={from:e.from,status:0,err:"",email:t[2],title:"".concat(e.checkBody.get("title").value),company:t[4],index:n,message:"<p>K\xednh g\u1eedi kh\xe1ch h\xe0ng: ".concat(t[4],".</p>\n          <p>\u0110i\u1ec7n l\u1ef1c Xu\xe2n L\u1ed9c k\xednh g\u1eedi \u0111\u1ebfn qu\xfd kh\xe1ch h\xe0ng n\u1ed9i dung thanh to\xe1n ti\u1ec1n \u0111i\u1ec7n m\u1eb7t tr\u1eddi tr\xean m\xe1i nh\xe0 v\u1edbi n\u1ed9i dung nh\u01b0 sau:</p>\n          ").concat(r,'</ul>\n          <p>M\u1ecdi \xfd ki\u1ebfn th\u1eafc m\u1eafc, vui l\xf2ng li\xean h\u1ec7 \u0110i\u1ec7n l\u1ef1c Xu\xe2n L\u1ed9c qua s\u1ed1 \u0111i\u1ec7n tho\u1ea1i Mr. \u0110\u1ea1t - <a href="tel:0937232239">0937232239 </a> ho\u1eb7c Mrs. Ph\u01b0\u1edbc Anh - <a href="tel:0583223344" >0583223344 </a> \u0111\u1ec3 \u0111\u01b0\u1ee3c gi\u1ea3i \u0111\xe1p.</p>\n          <p>Ph\u1ea3n h\u1ed3i h\xf3a \u0111\u01a1n qu\xfd kh\xe1ch vui l\xf2ng g\u1eedi email v\u1ec1 c\u1ea3 02 \u0111\u1ecba ch\u1ec9: <a href="mailto:dienlucxuanloc.nlmt@gmail.com;tckt.dlxl.pcdn@gmail.com">dienlucxuanloc.nlmt@gmail.com</a> v\xe0 <a href="mailto:dienlucxuanloc.nlmt@gmail.com;tckt.dlxl.pcdn@gmail.com">tckt.dlxl.pcdn@gmail.com</a> </p>\n          Tr\xe2n tr\u1ecdng.')};if(e.checkBody.patchValue(u),e.checkBody.invalid){var c=e.plus.getErrValidateForm(e.checkBody);u.err=c,console.log(c),e.errData.push(u)}else console.log(u),e.dataJson.push(u),e.plus.pushLocalStorage(e.api,u)}e.errData.length>0&&localStorage.setItem(e.api,JSON.stringify([]))}),0==e.dataJson.length&&e.plus.alertWarning("B\u1ea1n ch\u01b0a ch\u1ecdn g\u1eedi trong file excel")})}},{key:"sendDefault",value:function(){var t=this.dataJson.map(function(t){return t.company}),e={from:this.from,status:0,err:"",email:"thucspc@gmail.com",title:"B\xe1o c\xe1o th\u1ef1c hi\u1ec7n g\u1eedi ".concat(this.checkBody.value.title),index:0,message:" <p> K\xednh g\u1eedi \xf4ng: Tr\u1ea7n \u0110\u1ea1i Th\u1ee9c.</p>\n      <p>  ".concat(this.plus.user.getValue().fullName," (").concat(this.plus.user.getValue()._id,") th\u1ef1c hi\u1ec7n g\u1eedi th\xf4ng b\xe1o ti\u1ec1n \u0111i\u1ec7n m\u1eb7t tr\u1eddi cho ").concat(this.dataJson.length," kh\xe1ch h\xe0ng:</p>\n      <ul>\n      <li> ").concat(t.join(".</li><li>"),".</li>\n      </ul>\n      <p>Tr\xe2n tr\u1ecdng.</p>")};this.plus.sendMail(e,"mail/bao-cao").subscribe(function(t){console.log("bodydefault")})}},{key:"sendMail",value:function(){return At(this,void 0,void 0,regeneratorRuntime.mark(function t(){var e,n,i=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.dataJson.length,n=confirm("Th\u1ef1c hi\u1ec7n g\u1eedi "+e+" email?"),!(e>200)){t.next=5;break}this.plus.alertToasrt({war:"Vui l\xf2ng l\u1eadp danh s\xe1ch d\u01b0\u1edbi 200 email"}),t.next=10;break;case 5:if(!(0===this.errData.length&&e>0&&n)){t.next=9;break}return t.delegateYield(regeneratorRuntime.mark(function t(){var n,a,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i.sendDefault(),i.plus.logger(i.api,i.plus.user.getValue()._id+" send mail"+e,"POTS",!0),n=0,a=i.dataJson.length,o=regeneratorRuntime.mark(function t(){var e,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.plus.sleep(5e3);case 2:i.i=n,e=i.dataJson[n],a=i.dataApi[n],i.plus.httpPost("mail/dien-mat-troi",e).subscribe(function(t){i.plus.logger(i.api,i.plus.user.getValue()._id+JSON.stringify(t),"Send Mail",!0);var e=t.index;console.log("Mail sent: ",e,t.email),e>=0&&t.email?(i.dataJson.filter(function(e,n){e.index===t.index&&(i.dataJson[n].status=1)}),console.log(n,t.email),localStorage.setItem(i.api,JSON.stringify(i.dataJson)),i.plus.httpPost("dmt",a,!0).subscribe(function(t){console.log(t)})):i.plus.alertToasrt(t)},function(t){i.dataJson[n].status=0,localStorage.setItem(i.api,JSON.stringify(i.dataJson)),i.plus.alertToasrt({err:" Ch\u01b0a g\u1eedi email \u0111\u1ebfn ".concat(e.reciver)}),i.plus.logger(i.api,i.plus.user.getValue()._id+" Ch\u01b0a g\u1eedi email \u0111\u1ebfn ".concat(e.reciver),"Post",!1)}),n++;case 5:case"end":return t.stop()}},t)});case 4:if(!(n<a)){t.next=8;break}return t.delegateYield(o(),"t0",6);case 6:t.next=4;break;case 8:case"end":return t.stop()}},t)})(),"t0",7);case 7:t.next=10;break;case 9:this.plus.alertToasrt({war:"\u0110\xe3 h\u1ee7y thao t\xe1c!"}),this.reload();case 10:case"end":return t.stop()}},t,this)}))}},{key:"pre",value:function(){this.i>0?this.i--:this.i=0}},{key:"next",value:function(){this.i<this.dataJson.length-1?this.i++:this.i=1}},{key:"reset",value:function(){this.dataJson=[],this.errData=[],sessionStorage.removeItem("htmlContentMain")}},{key:"reload",value:function(){return At(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.router.navigate([""]);case 2:return t.abrupt("return",this.router.navigate(["email/dien-mat-troi"]));case 3:case"end":return t.stop()}},t,this)}))}},{key:"test",value:function(t){console.log(t)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(d.Y36(p.T),d.Y36(s.qu),d.Y36(ut.F0),d.Y36(xt.x))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-dienmattroi"]],decls:10,vars:7,consts:[[1,"container"],[1,"text-center","my-3","text-primary"],["class","modal-body",4,"ngIf"],["type","button","class","btn btn-outline-danger mx-3",3,"click",4,"ngIf"],["class","card border-primary my-3",4,"ngIf"],["class","alert-danger my-4 justify-content-center",4,"ngIf"],["class","dataOk",4,"ngIf"],["type","button","class","btn btn-primary mx-3","data-toggle","modal","data-target","#modelId",3,"click",4,"ngIf"],[1,"modal-body"],[1,"form-group",3,"formGroup"],["matInput","","required","","placeholder","Nh\u1eadp n\u1ed9i dung ti\xeau \u0111\u1ec1","formControlName","title"],[3,"files"],["target","_blank",1,"badge","badge-warning",3,"href"],["type","button",1,"btn","btn-outline-danger","mx-3",3,"click"],[1,"card","border-primary","my-3"],[1,"button"],["type","button",1,"btn","btn-danger","float-left",3,"click"],["aria-hidden","true",1,"fa","fa-arrow-left"],["type","button",1,"btn","btn-danger","float-right",3,"click"],["aria-hidden","true",1,"fa","fa-arrow-right"],[1,"card-body"],[1,"text-center","rounded","font-weigth-bold","bg-warning","py-2"],[3,"innerHTML"],[1,"alert-danger","my-4","justify-content-center"],[1,"table","table-hover","table-invert","table-bordered"],[4,"ngFor","ngForOf"],[1,"dataOk"],[1,"table","table-hover"],[1,"text-center"],["scope","row"],[1,"text-center",3,"ngClass"],["type","button","data-toggle","modal","data-target","#modelId",1,"btn","btn-primary","mx-3",3,"click"]],template:function(t,e){1&t&&(d.TgZ(0,"div",0),d.TgZ(1,"h5",1),d._uU(2,"TH\xd4NG B\xc1O TI\u1ec0N \u0110I\u1ec6N M\u1eb6T TR\u1edcI"),d.qZA(),d.YNc(3,It,11,2,"div",2),d.YNc(4,_t,2,0,"button",3),d.YNc(5,Jt,11,4,"div",4),d.YNc(6,Ut,5,2,"div",5),d.YNc(7,Ct,16,2,"div",6),d.YNc(8,Mt,2,0,"button",7),d._UZ(9,"hr"),d.qZA()),2&t&&(d.Q6J("@slideIn",void 0),d.xp6(3),d.Q6J("ngIf",0==e.dataJson.length),d.xp6(1),d.Q6J("ngIf",e.dataJson.length>0),d.xp6(1),d.Q6J("ngIf",e.dataJson.length>0&&0==e.errData.length),d.xp6(1),d.Q6J("ngIf",e.errData.length>0),d.xp6(1),d.Q6J("ngIf",e.dataJson.length>0&&0===e.errData.length),d.xp6(1),d.Q6J("ngIf",0===e.errData.length&&e.dataJson.length>0))},directives:[h.O5,s._Y,s.JL,s.sg,Z.KE,Z.hX,b.Nt,s.Fj,s.Q7,s.JJ,s.u,qt.k,f.Hw,h.sg,h.mk],styles:[""],data:{animation:[lt.Ym]}}),e}(),Ht=function(){function e(n,i,a,o){t(this,e),this.loader=n,this.url=i,this.http=a,this.plus=o}return n(e,[{key:"uploadFile",value:function(t,e,n){var i=new FormData,a=new it.WM({"ngsw-bypass":""});return i.append("file",t),console.log("formData",i),new it.LE,this.http.post("https://up-log.herokuapp.com/upload",i,{headers:a})}},{key:"upload",value:function(){var t=this;return new Promise(function(e,n){t.loader.file.then(function(i){t.uploadFile(i,t.url,"test").subscribe(function(t){console.log(t),e({default:t.url})},function(t){n("L\u1ed7i k\u1ebft n\u1ed1i kho l\u01b0u tr\u1eef.\nVui l\xf2ng th\u1eed l\u1ea1i sau \xedt ph\xfat!"),console.log(i)})})})}},{key:"abort",value:function(){console.log("abort")}}]),e}();function Et(t,e){if(1&t&&(d.TgZ(0,"div",8),d.TgZ(1,"div",9),d._uU(2),d.qZA(),d.qZA()),2&t){var n=d.oxw();d.xp6(1),d.Udp("width",n.uploadProgress+"%"),d.xp6(1),d.hij("",n.uploadProgress,"%")}}function Bt(t,e){if(1&t){var n=d.EpF();d.TgZ(0,"div",0),d.TgZ(1,"div",1),d.TgZ(2,"span",2),d._uU(3,"\u0110\u01b0\u1eddng d\u1eabn file t\u1ea3i l\xean:"),d.qZA(),d.qZA(),d._UZ(4,"input",10),d.TgZ(5,"div",11),d.TgZ(6,"button",12),d.NdJ("click",function(){return d.CHM(n),d.oxw().copyInputMessage("linkcopy")}),d._UZ(7,"i",13),d.qZA(),d.qZA(),d.qZA()}if(2&t){var i=d.oxw();d.xp6(4),d.s9C("value",i.linkUpload)}}var Ft=function(){var e=function(){function e(n,i){t(this,e),this.plus=n,this.httpClient=i,this.apiUpload="https://api.cloudinary.com/v1_1/dienluc/image/upload",this.uploadProgress=0,this.place="Ch\u1ecdn file",this.linkUpload=""}return n(e,[{key:"ngOnInit",value:function(){}},{key:"uploadDrive",value:function(t){var e=this,n=t.target.files[0].size||0;if(console.log(n),n>0?this.plus.load():this.plus.loaded(),n>10485760)return this.plus.alertToasrt({war:"Dung l\u01b0\u1ee3ng file qu\xe1 10Mb"}),void this.plus.loaded();var i=new FormData;i.append("file",t.target.files[0]);for(var a=0;a<t.target.files.length;a++)i.append("file",t.target.files[a]),i.append("api_key","942981119615178"),i.append("cloud_name","dienluc"),i.append("upload_preset","lgnigzh2"),new it.WM({"ngsw-bypass":""}),this.httpClient.post(this.apiUpload,i,{reportProgress:!0,observe:"events"}).subscribe(function(t){console.log(t),t.type===it.dt.UploadProgress?e.uploadProgress=Math.round(t.loaded/t.total*100):t.type===it.dt.Response&&(e.place="\u0110\xe3 upload xong!",e.linkUpload=t.body.url,e.plus.copyToClipboard(t.body.url),e.plus.loaded())},function(t){e.plus.loaded(),e.plus.alertToasrt({err:"L\u1ed7i upload file! \nVui l\xf2ng th\u1eed l\u1ea1i!"})})}},{key:"get",value:function(){this.httpClient.get("https://942981119615178:fvO34914PdLgXjdv1Az5jg2mVno@api.cloudinary.com/v1_1/dienluc/resources/image").subscribe(function(t){})}},{key:"copyInputMessage",value:function(t){this.plus.copyInputMessage(t)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(d.Y36(p.T),d.Y36(it.eN))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-cloudinary"]],decls:10,vars:2,consts:[[1,"input-group","mb-3"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"custom-file"],["type","file","id","inputGroupFile01",1,"custom-file-input",3,"change"],["for","inputGroupFile01",1,"custom-file-label"],["class","progress",4,"ngIf"],["class","input-group mb-3",4,"ngIf"],[1,"progress"],["role","progressbar","aria-valuenow","0","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-primary"],["type","text","id","linkcopy",1,"form-control",3,"value"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-primary","btn-sm",3,"click"],[1,"fa","fa-copy"]],template:function(t,e){1&t&&(d.TgZ(0,"div",0),d.TgZ(1,"div",1),d.TgZ(2,"span",2),d._uU(3,"PDF/IMG"),d.qZA(),d.qZA(),d.TgZ(4,"div",3),d.TgZ(5,"input",4),d.NdJ("change",function(t){return e.uploadDrive(t)}),d.qZA(),d.TgZ(6,"label",5),d._uU(7,"Ch\u1ecdn file upload"),d.qZA(),d.qZA(),d.qZA(),d.YNc(8,Et,3,3,"div",6),d.YNc(9,Bt,8,1,"div",7)),2&t&&(d.xp6(8),d.Q6J("ngIf",e.uploadProgress>0&&e.uploadProgress<100),d.xp6(1),d.Q6J("ngIf",e.linkUpload))},directives:[h.O5],styles:[""]}),e}(),Yt=function(t,e,n,i){return new(n||(n=Promise))(function(a,o){function r(t){try{u(i.next(t))}catch(e){o(e)}}function l(t){try{u(i.throw(t))}catch(e){o(e)}}function u(t){t.done?a(t.value):function(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(r,l)}u((i=i.apply(t,e||[])).next())})},Lt=["myEditor"];function Ot(t,e){if(1&t&&(d.TgZ(0,"tr"),d.TgZ(1,"td"),d._uU(2),d.qZA(),d.TgZ(3,"td"),d._uU(4),d.qZA(),d.TgZ(5,"td"),d._uU(6),d.qZA(),d.qZA()),2&t){var n=e.$implicit;d.xp6(2),d.hij(" ",n.receiver," "),d.xp6(2),d.hij(" ",n.email," "),d.xp6(2),d.hij(" ",n.err," ")}}function Qt(t,e){if(1&t&&(d.TgZ(0,"div"),d.TgZ(1,"h4",17),d._uU(2,"DANH S\xc1CH D\u1eee LI\u1ec6U KH\xd4NG H\u1ee2P L\u1ec6"),d.qZA(),d.TgZ(3,"table",18),d.TgZ(4,"tr",19),d.TgZ(5,"th"),d._uU(6,"Kh\xe1ch h\xe0ng "),d.qZA(),d.TgZ(7,"th"),d._uU(8," Email "),d.qZA(),d.TgZ(9,"th"),d._uU(10," N\u1ed9i dung l\u1ed7i "),d.qZA(),d.qZA(),d.YNc(11,Ot,7,3,"tr",20),d.qZA(),d.qZA()),2&t){var n=d.oxw();d.xp6(11),d.Q6J("ngForOf",n.errData)}}function Gt(t,e){1&t&&(d.TgZ(0,"label",21),d._UZ(1,"i",22),d._uU(2,"Danh s\xe1ch g\u1eedi email "),d.qZA())}function Pt(t,e){if(1&t){var n=d.EpF();d.TgZ(0,"button",23),d.NdJ("click",function(){return d.CHM(n),d.oxw().checkImportData()}),d._uU(1,"Ki\u1ec3m tra "),d.qZA()}}function Kt(t,e){if(1&t){var n=d.EpF();d.TgZ(0,"button",23),d.NdJ("click",function(){return d.CHM(n),d.oxw().reload()}),d._uU(1,"L\xe0m l\u1ea1i "),d.qZA()}}var Rt=function(t,e){return{"bg-success":t,"bg-danger":e}};function $t(t,e){if(1&t&&(d.TgZ(0,"tr"),d.TgZ(1,"td"),d._uU(2),d.qZA(),d.TgZ(3,"td",28),d._uU(4),d.qZA(),d.TgZ(5,"td",28),d._uU(6),d.qZA(),d.TgZ(7,"td",29),d._uU(8),d.qZA(),d.qZA()),2&t){var n=e.$implicit,i=e.index;d.Q6J("@slideIn",void 0),d.xp6(2),d.Oqu(i+1),d.xp6(2),d.Oqu(n.receiver),d.xp6(2),d.Oqu(n.email),d.xp6(1),d.Q6J("ngClass",d.WLB(6,Rt,n.status,3===n.status)),d.xp6(1),d.hij(" ",1===n.status?"\u0110\xe3 g\u1eedi":"Ch\u01b0a g\u1eedi","")}}function jt(t,e){if(1&t){var n=d.EpF();d.TgZ(0,"button",30),d.NdJ("click",function(){return d.CHM(n),d.oxw(2).sendMail()}),d._uU(1,"G\u1eedi mail"),d.qZA()}}function Vt(t,e){if(1&t&&(d.TgZ(0,"div",24),d.TgZ(1,"h5"),d._uU(2,"DANH S\xc1CH EMAIL \u0110\u01af\u1ee2C TH\xd4NG B\xc1O"),d.qZA(),d.TgZ(3,"table",25),d.TgZ(4,"thead"),d.TgZ(5,"tr"),d.TgZ(6,"th"),d._uU(7,"STT"),d.qZA(),d.TgZ(8,"th"),d._uU(9,"Ng\u01b0\u1eddi nh\u1eadn"),d.qZA(),d.TgZ(10,"th"),d._uU(11,"Email"),d.qZA(),d.TgZ(12,"th",26),d._uU(13,"Tr\u1ea1ng th\xe1i"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(14,"tbody"),d.YNc(15,$t,9,9,"tr",20),d.qZA(),d.qZA(),d.YNc(16,jt,2,0,"button",27),d.qZA()),2&t){var n=d.oxw();d.xp6(15),d.Q6J("ngForOf",n.dataJson),d.xp6(1),d.Q6J("ngIf",0===n.errData.length&&n.dataJson.length>0)}}function Xt(t,e){if(1&t){var n=d.EpF();d.TgZ(0,"button",38),d.NdJ("click",function(){return d.CHM(n),d.oxw(2).pre()}),d._UZ(1,"i",39),d.qZA()}}function zt(t,e){if(1&t){var n=d.EpF();d.TgZ(0,"button",40),d.NdJ("click",function(){return d.CHM(n),d.oxw(2).next()}),d._UZ(1,"i",41),d.qZA()}}function Wt(t,e){if(1&t&&d._UZ(0,"div",42),2&t){var n=d.oxw(2);d.Q6J("innerHTML",n.dataJson[n.i].message,d.oJD)}}function te(t,e){if(1&t&&(d.TgZ(0,"div",31),d.TgZ(1,"div",32),d.YNc(2,Xt,2,0,"button",33),d.YNc(3,zt,2,0,"button",34),d.qZA(),d.TgZ(4,"div",35),d.TgZ(5,"h5",36),d._uU(6),d.qZA(),d.YNc(7,Wt,1,1,"div",37),d.qZA(),d._UZ(8,"hr"),d.qZA()),2&t){var n=d.oxw();d.xp6(2),d.Q6J("ngIf",n.i>0&&n.dataJson.length>n.i),d.xp6(1),d.Q6J("ngIf",n.dataJson.length-1>n.i),d.xp6(3),d.hij("N\u1ed9i dung \u0111\u01b0\u1ee3c g\u1eedi \u0111\u1ebfn email ",n.dataJson[n.i].email," "),d.xp6(1),d.Q6J("ngIf",n.dataJson[n.i].message)}}var ee=function(){var e=function(){function e(n,i,a,o){t(this,e),this.plus=n,this.fb=i,this.httpClient=a,this.router=o,this.Editor=ot,this.apiUpload="https://up-log.herokuapp.com/upload",this.collection="thong-bao",this.db=null,this.dbName="email",this.dbVer=1,this.selectedFile=null,this.dataImport=[],this.dataJson=[],this.errData=[],this.sent=[],this.resent=[],this.send="",this.htmlContent=sessionStorage.getItem("htmlContent")||"",this.uploadProgress=0,this.i=0,this.main=this.fb.group({email:[,s.kI.email],title:["Th\xf4ng b\xe1o ",[s.kI.minLength(3)]],message:["\u0110i\u1ec7n l\u1ef1c xin th\xf4ng b\xe1o nh\u01b0 sau:",s.kI.minLength(10)]}),this.account=this.fb.group({user:["",s.kI.minLength(3)],pass:["",s.kI.minLength(6)]}),this.checkBody=this.fb.group({from:["",[s.kI.required,s.kI.minLength(10)]],status:0,err:"",email:[,s.kI.email],receiver:["",[s.kI.required,s.kI.minLength(3)]],title:["",[s.kI.required,s.kI.minLength(3)]],message:["",[s.kI.required,s.kI.minLength(1020)]]}),this.uploadForm=this.fb.group({profile:[""]})}return n(e,[{key:"ngOnInit",value:function(){var t=this;this.reset(),this.plus.IDB_InitDB(this.dbName).subscribe(function(e){t.db=e,t.init()}),this.plus.httpGetFull(this.apiUpload).subscribe(function(t){console.log(t)})}},{key:"onReady",value:function(t){var e=this;t.ui.getEditableElement().parentElement.insertBefore(t.ui.view.toolbar.element,t.ui.getEditableElement()),t.plugins.get("FileRepository").createUploadAdapter=function(t){return console.log(btoa(t.file)),new Ht(t,"/upload",e.httpClient,e.plus)}}},{key:"saveArticle",value:function(){this.dataJson.length>0&&(this.plus.alertToasrt({war:"B\u1ea1n c\u1ea7n ch\u1ecdn l\u1ea1i danh s\xe1ch nh\u1eadn email sau khi hi\u1ec7u ch\u1ec9nh n\u1ed9i dung!"}),this.reset()),this.htmlContent=this.getArticleContent(),sessionStorage.setItem("htmlContent",this.htmlContent)}},{key:"getArticleContent",value:function(){return this.myEditor&&this.myEditor.editorInstance?this.myEditor.editorInstance.getData():""}},{key:"init",value:function(){var t=this;this.from=this.plus.user.getValue().unit,this.plus.IDB_DB_GetAll(this.db,this.collection).subscribe(function(e){console.log(e),e.filter(function(e){0==e.status&&(console.log(e),t.resent.push(e))}),t.resent.length>0?(console.log(t.resent),confirm("B\u1ea5m OK \u0111\u1ec3 g\u1eedi mail tr\u01b0\u1edbc ch\u01b0a ho\xe0n th\xe0nh.\nB\u1ea5m Cancel \u0111\u1ec3 x\xf3a phi\xean l\xe0m vi\u1ec7c tr\u01b0\u1edbc?")?t.dataJson=t.resent:t.plus.IDB_DB_ClearCollection(t.db,t.collection).subscribe(function(t){t&&console.log("clear")})):t.plus.IDB_DB_ClearCollection(t.db,t.collection).subscribe(function(e){e&&(console.log("clear"),t.htmlContent="",t.reset())})}),0===this.from.length&&(this.plus.alertToasrt({err:"B\u1ea1n ch\u01b0a khai b\xe1o \u0111\u01a1n v\u1ecb t\u1ea1i m\u1ee5c T\xe0i Kho\u1ea3n"}),this.router.navigateByUrl("/taikhoan"))}},{key:"getFails",value:function(){}},{key:"readXlsx",value:function(t){var e=this;console.log(t),this.dataJson=[],this.dataImport=[];var n=t.target,i=new FileReader;i.onload=function(t){var n=rt.read(t.target.result,{type:"binary"});e.dataImport=rt.utils.sheet_to_json(n.Sheets[n.SheetNames[0]],{header:1}),0==e.dataImport.length&&e.plus.alertWarning("Danh s\xe1ch g\u1eedi tr\u1ed1ng")},i.readAsBinaryString(n.files[0]),n=null}},{key:"reload",value:function(){return Yt(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.router.navigate([""]);case 2:return t.abrupt("return",this.router.navigate(["email/thongbao"]));case 3:case"end":return t.stop()}},t,this)}))}},{key:"checkImportData",value:function(){var t=this;this.dataImport.length>200&&(this.reset(),this.plus.alertToasrt({err:"S\u1ed1 l\u01b0\u1ee3ng email v\u01b0\u1ee3t qu\xe1 gi\u1edbi h\u1ea1n\nVui l\xf2ng ch\u1ecdn d\u01b0\u1edbi 200 email cho m\u1ed7i l\u1ea7n g\u1eedi!"})),this.dataJson=[],this.dataImport.splice(0,1),this.dataImport.forEach(function(e){var n="";if("x"==e[1]||"X"==e[1]){void 0!==e[5]&&(n="\n"+e[5]+"\n");var i={from:t.from,status:0,err:"",receiver:e[3],email:e[4],title:"".concat(t.main.get("title").value),message:"<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; K\xednh g\u1eedi ".concat(e[2],": ").concat(e[3],".</p>\n                       ").concat(n," <br>\n                       ").concat(t.htmlContent,' <br>\n                      &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Tr\xe2n tr\u1ecdng.\n                      </hr>\n                      <table class="table">\n                      <td><img src="https://github.com/thuctd/FileStore/raw/master/NhanHieuDLuc-Doc-150x150.jpg"> </td>\n                      <td>\n                        <b>\u0110i\u1ec7n l\u1ef1c Xu\xe2n L\u1ed9c - C\xf4ng ty TNHH m\u1ed9t th\xe0nh vi\xean \u0110i\u1ec7n l\u1ef1c \u0110\u1ed3ng Nai.</b><br>\n                        <b>\u0110\u1ecba ch\u1ec9: S\u1ed1 94 H\xf9ng V\u01b0\u01a1ng - Th\u1ecb tr\u1ea5n Gia Ray - Huy\u1ec7n Xu\xe2n L\u1ed9c - T\u1ec9nh \u0110\u1ed3ng Nai.</b><br>\n                        <b>MST: 3600432744 - 004</b><br>\n                        <b>Li\xean h\u1ec7: <a href="tel:02512218242" title="02512218242">0251.2218.242 </a></b><br>\n                        <b>T\u1ed5ng \u0111\xe0i ch\u0103m s\xf3c kh\xe1ch h\xe0ng: <a href="tel:19001006">19001006</a> - <a href="tel:19009000">19009000</a></b><br>\n                      </td>\n                      </table>\n                      ')};if(console.log(i.message.length),t.checkBody.patchValue(i),t.checkBody.valid)t.dataJson.push(i),i._id=i.email,console.log(i),t.plus.IDB_DB_Add(t.db,t.collection,i);else{if(t.checkBody.valid)return;console.log("else if");var a=t.plus.getErrValidateForm(t.checkBody);console.log(a),i.err=a,t.errData.push(i)}if(t.errData.length>0)return console.log(t.errData),t.plus.IDB_DB_ClearCollection(t.db,t.collection).subscribe(function(e){e&&t.plus.alertWarning("D\u1eef li\u1ec7u c\xf3 l\u1ed7i!")});t.plus.loaded()}})}},{key:"sendDefault",value:function(){var t=this.dataJson.map(function(t){return t.receiver}),e={from:this.from,status:0,err:"",email:"thucspc@gmail.com",title:"B\xe1o c\xe1o th\u1ef1c hi\u1ec7n g\u1eedi ".concat(this.checkBody.value.title),index:0,message:" <p> K\xednh g\u1eedi \xf4ng: Tr\u1ea7n \u0110\u1ea1i Th\u1ee9c.</p>\n      <p>  ".concat(this.plus.user.getValue().fullName," (").concat(this.plus.user.getValue()._id,") th\u1ef1c hi\u1ec7n g\u1eedi th\xf4ng b\xe1o ti\u1ec1n \u0111i\u1ec7n m\u1eb7t tr\u1eddi cho ").concat(this.dataJson.length," kh\xe1ch h\xe0ng:</p>\n      <ul>\n      <li> ").concat(t.join(".</li><li>"),".</li>\n      </ul>\n      <p>Tr\xe2n tr\u1ecdng.</p>")};this.plus.sendMail(e,"mail/bao-cao").subscribe(function(t){console.log("bodydefault")})}},{key:"sendMail",value:function(){return Yt(this,void 0,void 0,regeneratorRuntime.mark(function t(){var e,n=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=confirm("Th\u1ef1c hi\u1ec7n th\xf4ng b\xe1o cho "+this.dataJson.length+" CBCNV?"),!(0===this.errData.length&&this.dataJson.length>0&&e)){t.next=5;break}return t.delegateYield(regeneratorRuntime.mark(function t(){var e,i,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n.sendDefault(),e=0,i=n.dataJson.length,a=regeneratorRuntime.mark(function t(){var i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.plus.sleep(5e3);case 2:n.i=e,i=n.dataJson[e],n.plus.sendMail(i,"mail/thong-bao").subscribe(function(t){console.log(),t.email&&(n.dataJson.filter(function(e,i){e.email===t.email&&(n.dataJson[i].status=1,n.plus.IDB_DB_DeleteOne(n.db,n.collection,e.email))}),console.log(e,t.email,i.reciver),localStorage.setItem("notify",JSON.stringify(n.dataJson)))},function(t){n.dataJson[e].status=0,localStorage.setItem("notify",JSON.stringify(n.dataJson)),n.plus.alertToasrt({err:" Ch\u01b0a g\u1eedi email \u0111\u1ebfn ".concat(i.reciver)})}),e++;case 5:case"end":return t.stop()}},t)});case 4:if(!(e<i)){t.next=8;break}return t.delegateYield(a(),"t0",6);case 6:t.next=4;break;case 8:case"end":return t.stop()}},t)})(),"t0",3);case 3:t.next=6;break;case 5:this.plus.alertToasrt({war:"\u0110\xe3 h\u1ee7y thao t\xe1c!"}),window.location.reload();case 6:case"end":return t.stop()}},t,this)}))}},{key:"uploadDrive",value:function(t){var e=this;this.plus.load(),console.log(t.target.files[0]);var n=t.target.files[0].size;if(console.log(n),n>52428800)return this.plus.alertToasrt({war:"Dung l\u01b0\u1ee3ng file qu\xe1 50Mb"}),void this.plus.loaded();var i=new FormData;i.append("file",t.target.files[0]);var a=new it.WM({"ngsw-bypass":""});this.httpClient.post(this.apiUpload,i,{reportProgress:!0,observe:"events",headers:a}).subscribe(function(t){t.type===it.dt.UploadProgress?e.uploadProgress=Math.round(t.loaded/t.total*100):t.type===it.dt.Response&&(e.linkUpload=t.body.url,e.plus.pushLocalStorage("link",t.body.url),e.plus.loaded())},function(t){e.plus.loaded(),e.plus.alertToasrt({err:"L\u1ed7i upload file! \nVui l\xf2ng th\u1eed l\u1ea1i!"})})}},{key:"copyInputMessage",value:function(t){this.plus.copyInputMessage(t)}},{key:"getBase64",value:function(t){var e=new FileReader;return e.readAsDataURL(t),e.onload=function(){},e.onerror=function(t){console.log("Error: ",t)},e.result}},{key:"pre",value:function(){this.i>0?this.i--:this.i=0}},{key:"next",value:function(){this.i<this.dataJson.length-1?this.i++:this.i=0}},{key:"reset",value:function(){this.dataJson=[],this.errData=[],this.linkUpload="",this.uploadProgress=0}},{key:"logList",value:function(t){this.dataJson.splice(0,1),localStorage.setItem("sendmail",this.dataJson.toString())}},{key:"sliceList",value:function(t){}},{key:"export",value:function(t){this.plus.exportHTML(t)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(d.Y36(p.T),d.Y36(s.qu),d.Y36(it.eN),d.Y36(ut.F0))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-notify"]],viewQuery:function(t,e){var n;(1&t&&d.Gf(Lt,5),2&t)&&(d.iGM(n=d.CRH())&&(e.myEditor=n.first))},decls:26,vars:10,consts:[[1,"container","my-3"],[1,"text-center","text-primary"],[1,"import"],[1,"modal-body"],[1,"form-group",3,"formGroup"],["for",""],["type","text","required","","placeholder","Nh\u1eadp n\u1ed9i dung ti\xeau \u0111\u1ec1","formControlName","title",1,"form-control"],[3,"editor","data","ready","change"],["myEditor",""],[4,"ngIf"],[1,"list"],["target","_blank","href","https://github.com/thuctd/FileStore/raw/master/templates/MauThongBao.xlsx",1,"badge","badge-warning"],["for","file-import","class","custom-file-upload mx-5",4,"ngIf"],["hidden","","id","file-import","type","file","multiple","false",3,"change"],["type","button","class","btn btn-outline-primary mx-3",3,"click",4,"ngIf"],["class","dataOk",4,"ngIf"],["class","card border-primary rounded",4,"ngIf"],[1,"text-center","bg-warning","rounded-pill"],[1,"table","table-hover","table-invert","table-bordered","rounded-pill"],[1,"text-center","bg-danger"],[4,"ngFor","ngForOf"],["for","file-import",1,"custom-file-upload","mx-5"],[1,"fa","fa-address-book"],["type","button",1,"btn","btn-outline-primary","mx-3",3,"click"],[1,"dataOk"],[1,"table","table-hover"],[1,"text-center"],["type","button","class","btn btn-primary mx-3 text-center","data-toggle","modal","data-target","#modelId",3,"click",4,"ngIf"],["scope","row"],[1,"text-center",3,"ngClass"],["type","button","data-toggle","modal","data-target","#modelId",1,"btn","btn-primary","mx-3","text-center",3,"click"],[1,"card","border-primary","rounded"],[1,"button"],["type","button","class","btn btn-danger float-left",3,"click",4,"ngIf"],["type","button","class","btn btn-danger float-right",3,"click",4,"ngIf"],[1,"card-body"],[1,"text-center","rounded","font-weigth-bold","bg-warning","my-4"],[3,"innerHTML",4,"ngIf"],["type","button",1,"btn","btn-danger","float-left",3,"click"],["aria-hidden","true",1,"fa","fa-arrow-left"],["type","button",1,"btn","btn-danger","float-right",3,"click"],["aria-hidden","true",1,"fa","fa-arrow-right"],[3,"innerHTML"]],template:function(t,e){1&t&&(d.TgZ(0,"div",0),d.TgZ(1,"h5",1),d._uU(2,"G\u1eecI TH\xd4NG B\xc1O B\u1eb0NG EMAIL"),d.qZA(),d.TgZ(3,"div",2),d.TgZ(4,"div",3),d.TgZ(5,"form",4),d.TgZ(6,"label",5),d._uU(7,"Ti\xeau \u0111\u1ec1"),d.qZA(),d._UZ(8,"input",6),d.qZA(),d.qZA(),d._UZ(9,"app-cloudinary"),d.TgZ(10,"h4",1),d._uU(11,"So\u1ea1n th\u1ea3o"),d.qZA(),d.TgZ(12,"ckeditor",7,8),d.NdJ("ready",function(t){return e.onReady(t)})("change",function(){return e.saveArticle()}),d.qZA(),d.YNc(14,Qt,12,1,"div",9),d.TgZ(15,"div",10),d._UZ(16,"hr"),d.TgZ(17,"a",11),d._uU(18,"File m\u1eabu"),d.qZA(),d.YNc(19,Gt,3,0,"label",12),d.TgZ(20,"input",13),d.NdJ("change",function(t){return e.readXlsx(t)}),d.qZA(),d.YNc(21,Pt,2,0,"button",14),d.YNc(22,Kt,2,0,"button",14),d.qZA(),d.YNc(23,Vt,17,2,"div",15),d._UZ(24,"hr"),d.qZA(),d.YNc(25,te,9,4,"div",16),d.qZA()),2&t&&(d.Q6J("@slideIn",void 0),d.xp6(5),d.Q6J("formGroup",e.main),d.xp6(7),d.s9C("data",e.htmlContent),d.Q6J("editor",e.Editor),d.xp6(2),d.Q6J("ngIf",e.errData.length>0),d.xp6(5),d.Q6J("ngIf",0===e.dataJson.length),d.xp6(2),d.Q6J("ngIf",e.dataImport.length>0&&0===e.dataJson.length&&0===e.errData.length),d.xp6(1),d.Q6J("ngIf",e.errData.length>0),d.xp6(1),d.Q6J("ngIf",e.dataJson.length>0&&0==e.errData.length),d.xp6(2),d.Q6J("ngIf",e.dataJson.length>0&&0===e.errData.length))},directives:[s._Y,s.JL,s.sg,s.Fj,s.Q7,s.JJ,s.u,Ft,ct.u,h.O5,h.sg,h.mk],styles:[""],data:{animation:[lt.Ym,lt.Mq]}}),e}(),ne=function(){var e=function(){function e(n){t(this,e),this.plus=n,this.db=null,this.verDB=1,this.dbName="email",this.api="email"}return n(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)(d.Y36(p.T))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-email"]],decls:0,vars:0,template:function(t,e){},styles:[""]}),e}(),ie=function(){var e=function(){function e(n){t(this,e),this.plus=n}return n(e,[{key:"canActivate",value:function(){return this.plus.checkPer("thong-bao")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(d.LFG(p.T))},e.\u0275prov=d.Yz7({token:e,factory:e.\u0275fac}),e}(),ae=function(){var e=function(){function e(n){t(this,e),this.plus=n}return n(e,[{key:"canActivate",value:function(){return this.plus.checkPer("tien-luong")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(d.LFG(p.T))},e.\u0275prov=d.Yz7({token:e,factory:e.\u0275fac}),e}(),oe=function(){var e=function(){function e(n){t(this,e),this.plus=n}return n(e,[{key:"canActivate",value:function(){return this.plus.checkPer("dien-mat-troi")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(d.LFG(p.T))},e.\u0275prov=d.Yz7({token:e,factory:e.\u0275fac}),e}(),re=function(){var e=function(){function e(n){t(this,e),this.plus=n}return n(e,[{key:"canActivate",value:function(){return this.plus.checkPer("dmt")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(d.LFG(p.T))},e.\u0275prov=d.Yz7({token:e,factory:e.\u0275fac}),e}(),le=[{path:"",component:ne},{path:"thong-bao",component:ee,canActivate:[ie]},{path:"tien-luong",component:yt,canActivate:[ae]},{path:"dien-mat-troi",component:St,canActivate:[oe]},{path:"thanh-toan",component:nt,canActivate:[re]}],ue=function(){var e=function e(){t(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({providers:[ie,ae,oe,re],imports:[[ut.Bz.forChild(le)],ut.Bz]}),e}(),ce=a(48387),se=function(){var e=function e(){t(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({imports:[[h.ez,ue,s.u5,s.UX,ct.d,ce.D,c.ShareModule,u.qX,r.X,l.k,o.m]]}),e}()},51511:function(e,i,a){a.d(i,{k:function(){return u}});var o,r=a(74788),l=a(15194),u=((o=function(){function e(){t(this,e),this.files=new r.vpe}return n(e,[{key:"ngOnInit",value:function(){}},{key:"ngOnDestroy",value:function(){this.files.unsubscribe(),console.log("ngOnDestroy app-drop-files")}},{key:"onDrop",value:function(t){this.files.emit(t),document.getElementById("dropZone").setAttribute("drop-active","false")}},{key:"selectedFile",value:function(t){this.files.emit(t.target.files)}},{key:"ondragover",value:function(){document.getElementById("dropZone").setAttribute("drop-active","true")}}]),e}()).\u0275fac=function(t){return new(t||o)},o.\u0275cmp=r.Xpm({type:o,selectors:[["app-drop-files"]],inputs:{label:"label"},outputs:{files:"files"},decls:10,vars:1,consts:[[1,"row","justify-content-center","d-none-print"],["id","dropZone",3,"appDropZone","dragover"],["for","file-import"],["for","file-import",1,"custom-file-upload","text-primary","mx-5"],["hidden","","id","file-import","type","file","multiple","false",3,"change"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.NdJ("appDropZone",function(t){return e.onDrop(t)})("dragover",function(){return e.ondragover()}),r.TgZ(2,"label",2),r._uU(3),r.TgZ(4,"span"),r._uU(5,"\u2794"),r.qZA(),r.TgZ(6,"a"),r._uU(7," Ch\u1ecdn file "),r.qZA(),r.qZA(),r._UZ(8,"label",3),r.TgZ(9,"input",4),r.NdJ("change",function(t){return e.selectedFile(t)}),r.qZA(),r.qZA(),r.qZA()),2&t&&(r.xp6(3),r.hij(" K\xe9o th\u1ea3 file ",e.label," v\xe0o \u0111\xe2y ho\u1eb7c "))},directives:[l.i],styles:["label[_ngcontent-%COMP%]{width:100%;height:100%;text-align:center;line-height:170px;color:#00f;font-weight:bolder}#dropZone[_ngcontent-%COMP%]{top:20%;left:10%;width:80%;height:200px;border-radius:3%;border:2px dashed rgb(38,16,165)}#dropZone[drop-active=true][_ngcontent-%COMP%]{box-shadow:inset 0 0 0 2px #00c;border:2px dashed rgb(38,16,165);background-color:#c9eccb}"],changeDetection:0}),o)},15194:function(e,i,a){a.d(i,{i:function(){return l}});var o,r=a(74788),l=((o=function(){function e(){t(this,e),this.fileDrop=new r.vpe,this.preventBodyDrop=!0,this.active=!1}return n(e,[{key:"onDrop",value:function(t){t.preventDefault(),this.active=!1;var e=t.dataTransfer;if(e.items){for(var n=[],i=0;i<e.items.length;i++)"file"===e.items[i].kind&&n.push(e.items[i].getAsFile());e.items.clear(),this.fileDrop.emit(n)}else{var a=e.files;e.clearData(),this.fileDrop.emit(Array.from(a))}}},{key:"onDragOver",value:function(t){t.stopPropagation(),t.preventDefault(),this.active=!0}},{key:"onDragLeave",value:function(t){this.active=!1}},{key:"onBodyDragOver",value:function(t){this.preventBodyDrop&&(t.preventDefault(),t.stopPropagation())}},{key:"onBodyDrop",value:function(t){this.preventBodyDrop&&t.preventDefault()}}]),e}()).\u0275fac=function(t){return new(t||o)},o.\u0275dir=r.lG2({type:o,selectors:[["","appDropZone",""]],hostVars:2,hostBindings:function(t,e){1&t&&r.NdJ("drop",function(t){return e.onDrop(t)})("dragover",function(t){return e.onDragOver(t)})("dragleave",function(t){return e.onDragLeave(t)})("dragover",function(t){return e.onBodyDragOver(t)},!1,r.pYS)("drop",function(t){return e.onBodyDrop(t)},!1,r.pYS),2&t&&r.ekj("drop-zone-active",e.active)},inputs:{preventBodyDrop:"preventBodyDrop"},outputs:{fileDrop:"appDropZone"}}),o)},31409:function(e,i,a){a.d(i,{x:function(){return c}});var o,r=a(84487),l=a(74788),u=a(57922),c=((o=function(){function e(n){t(this,e),this.plus=n}return n(e,[{key:"toJsonArray",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new Promise(function(i){var a={};if(e.plus.load(),null!=t&&"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"!=t.type&&"application/vnd.ms-excel"!=t.type)return e.plus.alertError("Kh\xf4ng ph\u1ea3i file excel");var o=new FileReader;o.readAsBinaryString(t),o.onloadend=function(t){for(var o=r.read(t.target.result,{type:"binary",cellDates:!0,dateNF:"DD/MM/YYYY"}),l=o.SheetNames,u=0;u<l.length;u++){var c=l[u],s=r.utils.sheet_to_json(o.Sheets[c],{header:1,raw:n});a["".concat(c)]=e.convertJSon(s)}e.plus.loaded(),i(a)}})}},{key:"read",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return new Promise(function(i){var a=[];if(e.plus.load(),null!=t&&"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"!=t.type&&"application/vnd.ms-excel"!=t.type)return e.plus.alertError("Kh\xf4ng ph\u1ea3i file excel");var o=new FileReader;o.readAsBinaryString(t),o.onloadend=function(t){for(var o=r.read(t.target.result,{type:"binary",cellDates:!0,dateNF:"DD/MM/YYYY"}),l=o.SheetNames,u=0;u<n;u++){var c=r.utils.sheet_to_json(o.Sheets[l[u]],{header:1});a.push(c)}e.plus.loaded(),i(a)}})}},{key:"convertJSon",value:function(t){for(var e=[],n=function(n){var i={};t[0].forEach(function(e,a){i["".concat(e)]=t[n][a]}),e.push(i)},i=1;i<t.length;i++)n(i);return e}},{key:"convertJSonByX",value:function(t){for(var e=[],n=function(n){if("x"==t[n][0]){var i={};t[0].forEach(function(e,a){i["".concat(e)]=t[n][a]}),e.push(i)}},i=1;i<t.length;i++)n(i);return e}},{key:"readXlsxToMerge",value:function(t){var e=this;return console.log(t),new Promise(function(n,i){e.plus.load();var a={};if(null!=t&&"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"!=t.type&&"application/vnd.ms-excel"!=t.type)return e.plus.alertError("Kh\xf4ng ph\u1ea3i file excel");var o=new FileReader;o.readAsBinaryString(t),o.onloadend=function(t){for(var i=r.read(t.target.result,{type:"binary",cellDates:!0,dateNF:"DD/MM/YYYY"}),o=i.SheetNames,l=0;l<o.length;l++){var u=o[l];if("_Merge"==u)return e.plus.alertError("Vui l\xf2ng \u0111\u1ed5i t\xean sheet _Merge th\xe0nh t\xean kh\xe1c");var c=r.utils.sheet_to_json(i.Sheets[u],{header:1,raw:!0});a["".concat(0==l?"_Merge":u)]=e.convertJSonByX(c)}n(a),e.plus.loaded()}})}},{key:"export",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=r.utils.json_to_sheet(t,{skipHeader:!0,dateNF:"mm/dd/yyyy;@",cellDates:!0}),i=r.utils.book_new();r.utils.book_append_sheet(i,n,"ChuaImport"),r.writeFile(i,"4la-"+e+"-ChuaImport.xlsx")}},{key:"exportTar",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=0;n<t.length;n++)delete t[n].dateModify,delete t[n].canEdit,delete t[n].keyWord,delete t[n].__v,delete t[n]._id;var i=JSON.stringify(t),a="data:application/json;charset=utf-8,"+encodeURIComponent(i);console.log(a);var o="4la-".concat(e||"")+Date.now()+".tar",r=document.createElement("a");r.setAttribute("href",a),r.setAttribute("download",o),r.click()}}]),e}()).\u0275fac=function(t){return new(t||o)(l.LFG(u.T))},o.\u0275prov=l.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o)},48387:function(e,n,i){i.d(n,{D:function(){return s}});var a,o=i(13397),r=i(12057),l=i(24751),u=i(5923),c=i(74788),s=((a=function e(){t(this,e)}).\u0275fac=function(t){return new(t||a)},a.\u0275mod=c.oAB({type:a}),a.\u0275inj=c.cJS({imports:[[r.ez,l.u5,o.qX,u.X]]}),a)},85913:function(e,n,i){i.d(n,{m:function(){return c}});var a,o=i(13397),r=i(24751),l=i(12057),u=i(74788),c=((a=function e(){t(this,e)}).\u0275fac=function(t){return new(t||a)},a.\u0275mod=u.oAB({type:a}),a.\u0275inj=u.cJS({imports:[[l.ez,r.UX,o.qX]]}),a)}}])}();