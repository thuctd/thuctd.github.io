(self.webpackChunk_4la=self.webpackChunk_4la||[]).push([[797],{45796:function(t,e,i){"use strict";var s=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),r=i(81847),n=i(53101),o=function(t){function e(e){var i=t.call(this)||this;return i._value=e,i}return s(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var i=t.prototype._subscribe.call(this,e);return i&&!i.closed&&e.next(this._value),i},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new n.ObjectUnsubscribedError;return this._value},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(r.Subject);e.BehaviorSubject=o},81847:function(t,e,i){"use strict";var s=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),r=i(33594),n=i(77900),o=i(11147),c=i(53101),u=i(73868),a=i(44775),l=function(t){function e(e){var i=t.call(this,e)||this;return i.destination=e,i}return s(e,t),e}(n.Subscriber);e.SubjectSubscriber=l;var p=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return s(e,t),e.prototype[a.rxSubscriber]=function(){return new l(this)},e.prototype.lift=function(t){var e=new h(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new c.ObjectUnsubscribedError;if(!this.isStopped)for(var e=this.observers,i=e.length,s=e.slice(),r=0;r<i;r++)s[r].next(t)},e.prototype.error=function(t){if(this.closed)throw new c.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,i=e.length,s=e.slice(),r=0;r<i;r++)s[r].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new c.ObjectUnsubscribedError;this.isStopped=!0;for(var t=this.observers,e=t.length,i=t.slice(),s=0;s<e;s++)i[s].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new c.ObjectUnsubscribedError;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new c.ObjectUnsubscribedError;return this.hasError?(t.error(this.thrownError),o.Subscription.EMPTY):this.isStopped?(t.complete(),o.Subscription.EMPTY):(this.observers.push(t),new u.SubjectSubscription(this,t))},e.prototype.asObservable=function(){var t=new r.Observable;return t.source=this,t},e.create=function(t,e){return new h(t,e)},e}(r.Observable);e.Subject=p;var h=function(t){function e(e,i){var s=t.call(this)||this;return s.destination=e,s.source=i,s}return s(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):o.Subscription.EMPTY},e}(p);e.AnonymousSubject=h},73868:function(t,e,i){"use strict";var s=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),r=function(t){function e(e,i){var s=t.call(this)||this;return s.subject=e,s.subscriber=i,s.closed=!1,s}return s(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var i=e.indexOf(this.subscriber);-1!==i&&e.splice(i,1)}}},e}(i(11147).Subscription);e.SubjectSubscription=r},53101:function(t,e){"use strict";e.ObjectUnsubscribedError=function(){function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t}()},67797:function(t,e,i){"use strict";i.r(e),i.d(e,{AdminModule:function(){return W}});var s=i(97534),r=i(48251),n=i(41007),o=i(35845),c=i(61511),u=i(82393),a=i(31572);let l=(()=>{class t{constructor(t){this.plus=t,this.binding=""}ngOnInit(){}decrypt(t){console.log(this.plus.Crypt_Decrypt(t))}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(u.T))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-crypt"]],decls:2,vars:0,consts:[["type","text",3,"input"],["data",""]],template:function(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"input",0,1),a.NdJ("input",function(){a.CHM(t);const i=a.MAs(1);return e.decrypt(i.value)}),a.qZA()}},styles:[""]}),t})();var p=i(7171),h=i(16073),d=i(89274),Z=i(60635),g=i(73538),f=i(78477),b=i(69121);function m(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"i",22),a.NdJ("click",function(){return a.CHM(t),a.oxw().onSave()}),a.qZA()}}function A(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"i",23),a.NdJ("click",function(){return a.CHM(t),a.oxw().onCreate()}),a.qZA()}}function q(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"i",28),a.NdJ("click",function(){a.CHM(t);const e=a.oxw().$implicit;return a.oxw().onEdit(e)}),a.qZA()}}function T(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"i",29),a.NdJ("click",function(){a.CHM(t);const e=a.oxw().$implicit;return a.oxw().onDelete(e)}),a.qZA()}}function _(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"tr",24),a.NdJ("click",function(){const e=a.CHM(t).$implicit;return a.oxw().onEdit(e)}),a.TgZ(1,"td"),a._uU(2),a.qZA(),a.TgZ(3,"td"),a._uU(4),a.qZA(),a.TgZ(5,"td"),a._uU(6),a.qZA(),a.TgZ(7,"td",25),a.YNc(8,q,1,0,"i",26),a.YNc(9,T,1,0,"i",27),a.qZA(),a.qZA()}if(2&t){const t=e.$implicit,i=a.oxw();a.Q6J("@slideIn",i.items.length>0&&!i.show),a.xp6(2),a.Oqu(t.Nhom),a.xp6(2),a.Oqu(t.NoiDung),a.xp6(2),a.Oqu(t.GiaTri),a.xp6(2),a.Q6J("ngIf",i.checkPer(2)),a.xp6(1),a.Q6J("ngIf",i.checkPer(4))}}const x=function(t){return{"fa-spin":t}};let y=(()=>{class t{constructor(t,e){this.plus=t,this.fb=e,this.main=this.fb.group({_id:[,[]],Nhom:[,[h.kI.required,h.kI.minLength(1)]],NoiDung:[,[h.kI.required,h.kI.minLength(1)]],GiaTri:[,[h.kI.required,h.kI.minLength(1)]]}),this.searchForm=this.fb.group({input:[,[h.kI.minLength(3),h.kI.maxLength(50)]]}),this.headerImport=["Nhom","NoiDung","GiaTri"],this.title="Danh m\u1ee5c",this.dbName="4la",this.api="catalog",this.db=null,this.items=[],this.readonly=!1,this.filter=[],this.show=!1}ngOnInit(){this.plus.setTiTle(this.title),this.plus.IDB_InitDB(this.dbName,!0).subscribe(t=>{return e=this,void 0,s=function*(){this.db=t,this.plus.updateGlobalLocal(t,this.api),this.plus.updateAPi.subscribe(e=>{this.plus.IDB_DB_GetAll(t,this.api).subscribe(t=>this.items=t)})},new((i=void 0)||(i=Promise))(function(t,r){function n(t){try{c(s.next(t))}catch(e){r(e)}}function o(t){try{c(s.throw(t))}catch(e){r(e)}}function c(e){var s;e.done?t(e.value):(s=e.value,s instanceof i?s:new i(function(t){t(s)})).then(n,o)}c((s=s.apply(e,[])).next())});var e,i,s}),this.search()}ngOnDestroy(){this.plus.subs.unsubscribe(),console.log("Destroy",this.api)}onEdit(t){this.reset(),this.main.patchValue(t),this.filter[0]=t}onSave(){this.plus.load();let t=this.main.value;t.status=!0,this.plus.httpPut(this.api,t,!0).subscribe(t=>{this.reload()})}onCreate(){const t=this.main.value;delete t._id,this.main.valid&&this.plus.httpPost(this.api,t,!0).subscribe(t=>{console.log(t),this.reload()})}onDelete(t){confirm("B\u1ea1n mu\u1ed1n x\xf3a?")&&(this.plus.load(),this.plus.httpDisable(this.api,t,!0).then(t=>{this.reset()}))}searchIDB(t){this.filter=t}search(){this.main.valueChanges.subscribe(t=>{console.log(t),this.plus.IDB_DB_Search(this.db,this.api,t.input).subscribe(t=>{this.filter=t})})}find(t){this.items=t}checkPer(t){return this.plus.checkPer(this.api,t)}loadMore(t){console.log(t)}reset(){this.plus.loaded(),this.main.reset(),this.filter=[]}reload(){return this.plus.reload("admin/"+this.api)}resetDb(){confirm("X\xf3a?")&&this.plus.DB_ResetDb(this.dbName,this.api)}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(u.T),a.Y36(h.qu))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-catalogs"]],decls:36,vars:21,consts:[[1,"container"],[1,"text-center","text-white","py-2","my-3","bg-primary","rounded-pill","justify-content-center"],[1,"row"],[3,"api","data"],[1,"col"],[3,"db","api","keySearch","filter"],[1,"table","table-hover","table-inverse","bordered"],[1,"thead-inverse"],[3,"formGroup"],["hidden",""],["type","text","formControlName","_id",1,"form-control"],["type","text","formControlName","Nhom",1,"form-control"],["type","text","formControlName","NoiDung",1,"form-control"],["type","text","formControlName","GiaTri",1,"form-control"],[1,"text-center","h4"],["class","fa fa-save text-warning mx-2",3,"click",4,"ngIf"],["class","fa fa-plus text-success mx-2",3,"click",4,"ngIf"],[1,"fa","fa-refresh","mx-2","text-info",3,"ngClass","click"],[3,"click",4,"ngFor","ngForOf"],[3,"api","dataLength","data"],[3,"dbName","api","form"],[3,"dataJson"],[1,"fa","fa-save","text-warning","mx-2",3,"click"],[1,"fa","fa-plus","text-success","mx-2",3,"click"],[3,"click"],[1,"text-center"],["class","fa fa-pencil text-success mx-3 fa-lg","aria-hidden","true",3,"click",4,"ngIf"],["class","fa fa-trash text-danger mx-3 fa-lg","aria-hidden","true",3,"click",4,"ngIf"],["aria-hidden","true",1,"fa","fa-pencil","text-success","mx-3","fa-lg",3,"click"],["aria-hidden","true",1,"fa","fa-trash","text-danger","mx-3","fa-lg",3,"click"]],template:function(t,e){1&t&&(a.TgZ(0,"div",0),a.TgZ(1,"h4",1),a._uU(2),a.ALo(3,"uppercase"),a.qZA(),a.TgZ(4,"div",2),a.TgZ(5,"app-search-api",3),a.NdJ("data",function(t){return e.find(t)}),a.qZA(),a.TgZ(6,"div",4),a.TgZ(7,"app-search-idb",5),a.NdJ("filter",function(t){return e.searchIDB(t)}),a.qZA(),a.qZA(),a.qZA(),a.TgZ(8,"div",2),a.TgZ(9,"table",6),a.TgZ(10,"thead",7),a.TgZ(11,"tr"),a.TgZ(12,"th"),a._uU(13,"Nh\xf3m"),a.qZA(),a.TgZ(14,"th"),a._uU(15,"N\u1ed9i dung"),a.qZA(),a.TgZ(16,"th"),a._uU(17,"Gi\xe1 tr\u1ecb"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(18,"tbody"),a.TgZ(19,"tr",8),a.TgZ(20,"td",9),a._UZ(21,"input",10),a.qZA(),a.TgZ(22,"td"),a._UZ(23,"input",11),a.qZA(),a.TgZ(24,"td"),a._UZ(25,"input",12),a.qZA(),a.TgZ(26,"td"),a._UZ(27,"input",13),a.qZA(),a.TgZ(28,"td",14),a.YNc(29,m,1,0,"i",15),a.YNc(30,A,1,0,"i",16),a.TgZ(31,"i",17),a.NdJ("click",function(){return e.reload()}),a.qZA(),a.qZA(),a.qZA(),a.YNc(32,_,10,6,"tr",18),a.qZA(),a.qZA(),a.qZA(),a.TgZ(33,"app-loadmore",19),a.NdJ("data",function(t){return e.loadMore(t)}),a.qZA(),a.qZA(),a._UZ(34,"app-import-database",20),a._UZ(35,"app-export-ecxel",21)),2&t&&(a.Q6J("@slideIn",void 0),a.xp6(2),a.Oqu(a.lcZ(3,17,e.title)),a.xp6(3),a.Q6J("api",e.api),a.xp6(2),a.Q6J("db",e.db)("api",e.api)("keySearch","NoiDung"),a.xp6(12),a.Q6J("formGroup",e.main),a.xp6(10),a.Q6J("ngIf",e.main.valid&&null!==e.main.controls._id.value),a.xp6(1),a.Q6J("ngIf",e.main.valid),a.xp6(1),a.Q6J("ngClass",a.VKq(19,x,e.show)),a.xp6(1),a.Q6J("ngForOf",e.filter.length>0?e.filter.slice(0,30):e.items.slice(0,30)),a.xp6(1),a.Q6J("api",e.api)("dataLength",e.items.length||20),a.xp6(1),a.Q6J("dbName",e.dbName)("api",e.api)("form",e.main),a.xp6(1),a.Q6J("dataJson",e.items))},directives:[d.W,Z.$,h.JL,h.sg,h.Fj,h.JJ,h.u,c.O5,c.mk,c.sg,g.w,f.y,b.t],pipes:[c.gd],styles:[""],data:{animation:[p.Y]}}),t})();var v=i(529),U=i(45796),k=i(15980),N=i(68591);function w(t,e){if(1&t&&(a.TgZ(0,"tr"),a.TgZ(1,"td",15),a._uU(2),a.qZA(),a.TgZ(3,"td"),a.TgZ(4,"a",16),a._uU(5),a.qZA(),a.qZA(),a.TgZ(6,"td"),a._uU(7),a.qZA(),a.qZA()),2&t){const t=e.$implicit;a.xp6(2),a.Oqu(t._id.ip),a.xp6(2),a.MGl("routerLink","/admin/user/",t._id.userId,""),a.xp6(1),a.hij(" ",t._id.userId,""),a.xp6(2),a.Oqu(t.count)}}function O(t,e){if(1&t&&(a.TgZ(0,"tr"),a.TgZ(1,"td",15),a._uU(2),a.qZA(),a.TgZ(3,"td"),a.TgZ(4,"a",16),a._uU(5),a.qZA(),a.qZA(),a.TgZ(6,"td"),a._uU(7),a.qZA(),a.qZA()),2&t){const t=e.$implicit,i=a.oxw();a.Q6J("@slideIn",i.errors.length>0),a.xp6(2),a.Oqu(t._id.api),a.xp6(2),a.MGl("routerLink","/admin/user/",t._id.userId,""),a.xp6(1),a.hij(" ",t._id.userId,""),a.xp6(2),a.Oqu(t.count)}}function I(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"tr"),a.TgZ(1,"td"),a.TgZ(2,"i",17),a.NdJ("click",function(){const e=a.CHM(t).$implicit;return a.oxw().del(e._id)}),a.qZA(),a.qZA(),a.TgZ(3,"td"),a._uU(4),a.qZA(),a.TgZ(5,"td"),a._uU(6),a.qZA(),a.TgZ(7,"td"),a._uU(8),a.ALo(9,"date"),a.qZA(),a.TgZ(10,"td",14),a._uU(11),a.qZA(),a.qZA()}if(2&t){const t=e.$implicit;a.xp6(4),a.Oqu(t.api),a.xp6(2),a.Oqu(t.ip),a.xp6(2),a.Oqu(a.xi3(9,4,t.date,"dd/MM/yyyy HH:MM")),a.xp6(3),a.Oqu(t.data)}}let J=(()=>{class t{constructor(t){this.plus=t,this.dbName="admin",this.api="log",this.url=v.N.logUrl+"log",this.data=new U.BehaviorSubject([]),this.errors=[],this.db=null,this.dashboard=[]}ngOnInit(){this.init()}init(){this.plus.load(),this.plus.httpGetFull(this.url+"/online").subscribe(t=>{console.log(t),this.dashboard=t,this.plus.httpGetFull(this.url+"/err").subscribe(t=>{console.log(t),this.errors=t,this.plus.loaded()})})}del(t){this.plus.httpDelete(this.api,t).subscribe(t=>{console.log(t),this.plus.alertSuccess()})}clearErr(){this.plus.httpDeleteFull(this.url+"/false",`${Date.now()}`).subscribe(t=>{this.plus.alertToasrt(t)})}clear30Days(){this.plus.httpDeleteFull(this.url+"/30days",`${Date.now()}`).subscribe(t=>{this.plus.alertToasrt(t)})}getAll(){this.plus.httpGetFull(this.url).subscribe(t=>{this.data.next(t),this.plus.loaded()})}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(u.T))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-log"]],decls:58,vars:6,consts:[[1,"container"],[1,"text-center","text-danger","my-5"],[1,"row"],[1,"col"],[1,"text-center","text-primary"],[1,"table","table-striped","table-inverse","table-responsive"],[1,"thead-inverse"],[4,"ngFor","ngForOf"],[1,"bt-row"],["mat-raised-button","","color","accent",3,"click"],["mat-raised-button","","color","warn",3,"click"],[1,"text-center","text-primary","bg-warning"],[1,"table","table-hover"],[1,"w-10"],[1,"w-70"],["scope","row"],[3,"routerLink"],[1,"fa","fa-trash",3,"click"]],template:function(t,e){1&t&&(a.TgZ(0,"div",0),a.TgZ(1,"h5",1),a._uU(2," LOG "),a.qZA(),a.TgZ(3,"div",2),a.TgZ(4,"div",3),a.TgZ(5,"h5",4),a._uU(6,"Th\u1ed1ng k\xea truy c\u1eadp 24h"),a.qZA(),a.TgZ(7,"table",5),a.TgZ(8,"thead",6),a.TgZ(9,"tr"),a.TgZ(10,"th"),a._uU(11,"IP"),a.qZA(),a.TgZ(12,"th"),a._uU(13,"userId"),a.qZA(),a.TgZ(14,"th"),a._uU(15,"Count"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(16,"tbody"),a.YNc(17,w,8,4,"tr",7),a.qZA(),a.qZA(),a._UZ(18,"hr"),a.qZA(),a.TgZ(19,"div",3),a.TgZ(20,"h5",4),a._uU(21,"Th\u1ed1ng k\xea L\u1ed7i"),a.qZA(),a.TgZ(22,"table",5),a.TgZ(23,"thead",6),a.TgZ(24,"tr"),a.TgZ(25,"th"),a._uU(26,"API"),a.qZA(),a.TgZ(27,"th"),a._uU(28,"User"),a.qZA(),a.TgZ(29,"th"),a._uU(30,"Count"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(31,"tbody"),a.YNc(32,O,8,5,"tr",7),a.qZA(),a.qZA(),a.qZA(),a.TgZ(33,"div",8),a.TgZ(34,"button",9),a.NdJ("click",function(){return e.clearErr()}),a._uU(35,"X\xf3a l\u1ed7i"),a.qZA(),a.TgZ(36,"button",10),a.NdJ("click",function(){return e.clear30Days()}),a._uU(37,"X\xf3a 30 ng\xe0y"),a.qZA(),a.TgZ(38,"button",10),a.NdJ("click",function(){return e.getAll()}),a._uU(39,"Get"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(40,"h5",11),a._uU(41,"Chi ti\u1ebft"),a.qZA(),a.TgZ(42,"table",12),a.TgZ(43,"thead",6),a.TgZ(44,"tr"),a.TgZ(45,"th",13),a._uU(46,"Del"),a.qZA(),a.TgZ(47,"th",13),a._uU(48,"Ip"),a.qZA(),a.TgZ(49,"th",13),a._uU(50,"Api"),a.qZA(),a.TgZ(51,"th",13),a._uU(52,"Time"),a.qZA(),a.TgZ(53,"th",14),a._uU(54,"Data"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(55,"tbody"),a.YNc(56,I,12,7,"tr",7),a.ALo(57,"async"),a.qZA(),a.qZA(),a.qZA()),2&t&&(a.Q6J("@slideIn",void 0),a.xp6(17),a.Q6J("ngForOf",e.dashboard),a.xp6(15),a.Q6J("ngForOf",e.errors),a.xp6(24),a.Q6J("ngForOf",a.lcZ(57,4,e.data)))},directives:[c.sg,k.lW,N.yS],pipes:[c.Ov,c.uU],styles:[""],data:{animation:[p.Y]}}),t})(),D=(()=>{class t{constructor(t){this.plus=t,this.db=null,this.api="admin"}ngOnInit(){this.plus.IDB_InitDB(this.api).subscribe(t=>{this.db=t})}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(u.T))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-admin"]],decls:4,vars:0,consts:[[1,"container"],[1,"row","justify-content-center"],["mat-raised-button","","color","primary","routerLink","catalog"]],template:function(t,e){1&t&&(a.TgZ(0,"div",0),a.TgZ(1,"div",1),a.TgZ(2,"button",2),a._uU(3,"Danh m\u1ee5c"),a.qZA(),a.qZA(),a.qZA())},directives:[k.lW,N.rH],styles:[""]}),t})();var S=i(78512),E=function(t){return t[t.ADMIN=1]="ADMIN",t[t.PERSON=2]="PERSON",t[t.EMAIL=3]="EMAIL",t[t.DAOTAO=4]="DAOTAO",t[t.VERHICLE=5]="VERHICLE",t}({}),C=i(43691),M=i(66283),j=i(26756);function F(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"tr"),a.TgZ(1,"th"),a._uU(2),a.qZA(),a.TgZ(3,"td"),a._uU(4),a.qZA(),a.TgZ(5,"td"),a._uU(6),a.qZA(),a.TgZ(7,"td"),a.TgZ(8,"input",18),a.NdJ("click",function(e){const i=a.CHM(t).$implicit;return a.oxw(2).onSelect(i.api,1,e)}),a.qZA(),a.TgZ(9,"input",18),a.NdJ("click",function(e){const i=a.CHM(t).$implicit;return a.oxw(2).onSelect(i.api,2,e)}),a.qZA(),a.TgZ(10,"input",18),a.NdJ("click",function(e){const i=a.CHM(t).$implicit;return a.oxw(2).onSelect(i.api,4,e)}),a.qZA(),a.TgZ(11,"input",18),a.NdJ("click",function(e){const i=a.CHM(t).$implicit;return a.oxw(2).onSelect(i.api,7,e)}),a.qZA(),a.qZA(),a.qZA()}if(2&t){const t=e.$implicit,i=a.oxw().$implicit,s=a.oxw();a.xp6(2),a.hij(" ",i.label," "),a.xp6(2),a.hij(" ",t.label," "),a.xp6(2),a.hij(" ",t.api," "),a.xp6(2),a.Q6J("checked",s.checked(t.api,1)),a.xp6(1),a.Q6J("checked",s.checked(t.api,2)),a.xp6(1),a.Q6J("checked",s.checked(t.api,4)),a.xp6(1),a.Q6J("checked",s.checked(t.api,7))}}function Q(t,e){if(1&t&&(a.TgZ(0,"tbody"),a.YNc(1,F,12,7,"tr",8),a.qZA()),2&t){const t=e.$implicit,i=a.oxw();a.Q6J("@slideIn",i.permissions.length>0),a.xp6(1),a.Q6J("ngForOf",t.sub)}}function L(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"tr"),a.TgZ(1,"td",19),a._uU(2),a.qZA(),a.TgZ(3,"td"),a._uU(4),a.qZA(),a.TgZ(5,"td"),a._uU(6),a.qZA(),a.TgZ(7,"td"),a.TgZ(8,"a",20),a.NdJ("click",function(){const e=a.CHM(t).$implicit;return a.oxw().getLogApi(e._id.api)}),a._uU(9,"Xem"),a.qZA(),a.qZA(),a.qZA()}if(2&t){const t=e.$implicit;a.Q6J("@slideIn",void 0),a.xp6(2),a.Oqu(t._id.api),a.xp6(2),a.hij(" ",t._id.status,""),a.xp6(2),a.Oqu(t.count)}}function P(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"tr"),a.TgZ(1,"td",19),a._uU(2),a.qZA(),a.TgZ(3,"td",19),a._uU(4),a.qZA(),a.TgZ(5,"td",19),a._uU(6),a.ALo(7,"date"),a.qZA(),a.TgZ(8,"td",19),a._uU(9),a.qZA(),a.TgZ(10,"td",19),a._uU(11),a.qZA(),a.TgZ(12,"td",19),a.TgZ(13,"a",20),a.NdJ("click",function(){const e=a.CHM(t).$implicit;return a.oxw(2).delLog(e._id)}),a._UZ(14,"i",21),a.qZA(),a.qZA(),a.qZA()}if(2&t){const t=e.$implicit;a.Q6J("@slideIn",void 0),a.xp6(2),a.Oqu(t.api),a.xp6(2),a.Oqu(t.data),a.xp6(2),a.Oqu(a.xi3(7,6,t.date,"dd/MM/yyyy : HH:mm")),a.xp6(3),a.Oqu(t.ip),a.xp6(2),a.Oqu(t.status)}}function Y(t,e){if(1&t&&(a.TgZ(0,"div",12),a.TgZ(1,"div",13),a.TgZ(2,"h5",14),a._uU(3,"Chi ti\u1ebft truy c\u1eadp"),a.qZA(),a.TgZ(4,"table",15),a.TgZ(5,"thead",16),a.TgZ(6,"tr"),a.TgZ(7,"th"),a._uU(8,"API"),a.qZA(),a.TgZ(9,"th"),a._uU(10,"Data"),a.qZA(),a.TgZ(11,"th"),a._uU(12,"Date Create"),a.qZA(),a.TgZ(13,"th"),a._uU(14,"Detail"),a.qZA(),a.TgZ(15,"th"),a._uU(16,"Status"),a.qZA(),a.TgZ(17,"th"),a._uU(18,"X\xf3a"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(19,"tbody"),a.YNc(20,P,15,9,"tr",8),a.ALo(21,"async"),a.qZA(),a.qZA(),a._UZ(22,"hr"),a.qZA(),a.qZA()),2&t){const t=a.oxw();a.xp6(20),a.Q6J("ngForOf",a.lcZ(21,1,t.logDetail))}}const B=function(t,e){return{"btn-success":t,"btn-danger":e}};let H=(()=>{class t{constructor(t,e,i,s){this.fb=t,this.plus=e,this.route=i,this.location=s,this.PERMISSION=E,this.permissions=v.N.nav,this.api="user",this.perUser={},this.log=[],this.logDetail=new S.X([]),this.x={}}ngOnInit(){this.getById()}getById(){this.plus.load();const t=this.route.snapshot.paramMap.get("id");this.userId=t,this.plus.httpGet("user/"+t).subscribe(t=>{const e=this.plus.Crypt_DecryptRest(t);console.log(e.opt),this.user=e,this.perUser=e.opt,this.lock=e.lock,this.fullName=e.fullName,this.phoneNumber=e.phoneNumber,this.unit=e.unit,this.plus.loaded()},t=>this.plus.alertError()),this.getLog(t)}onSelect(t,e,i){const s={};if(s[t]=e,i.target.checked)this.perUser=Object.assign(Object.assign({},this.perUser),s);else switch(e){case 1:delete this.perUser[t];break;case 2:this.perUser[t]=1;break;case 4:this.perUser[t]=2;break;case 7:this.perUser[t]=4}}checked(t,e){return this.perUser[t]>=e}deletePer(){this.perUser={}}lockUser(){let t=this.user;t.lock=this.lock,this.plus.httpPut(this.api,t).subscribe(t=>{this.plus.alertToasrt(t)})}goBack(){this.location.back()}getLog(t){this.plus.load(),this.plus.httpGetFull(v.N.logUrl+"log/user/"+t).subscribe(t=>{console.log(t),this.plus.loaded(),this.log=this.plus.sortArr(t,"date")})}getLogApi(t){this.plus.load(),this.plus.httpGetFull(v.N.logUrl+"log/detail/"+this.userId+"/api/"+t).subscribe(t=>{this.plus.loaded(),this.logDetail.next(this.plus.sortArr(t,"date"))})}getbyAPI(t){this.plus.httpGetFull(v.N.logUrl+"log/api/"+t).subscribe(t=>{this.plus.loaded(),this.logDetail.next(this.plus.sortArr(t,"date"))})}delLog(t){confirm("X\xf3a?")&&(this.plus.load(),this.plus.httpDeleteFull(v.N.logUrl+"log",t).subscribe(t=>{this.plus.alertToasrt(t),this.plus.loaded()}))}update(){const t={_id:this.user._id,opt:this.perUser,lock:this.lock,fullName:this.fullName,email:this.user.email,unit:this.unit,phoneNumber:this.phoneNumber,dateModify:Date.now()};this.plus.httpPut(this.api,t).subscribe(e=>{this.plus.FBS_SetData("login",this.user._id,{dateModify:t.dateModify}),this.plus.alertToasrt(e)})}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(h.qu),a.Y36(u.T),a.Y36(N.gz),a.Y36(c.Ye))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-permission"]],decls:61,vars:15,consts:[[1,"container"],["id","save-btn","mat-raised-button","","color","warn",3,"click"],["id","back-btn","mat-raised-button","","color","primary",3,"click"],[1,"text-center","text-primary","my-5"],[1,"per2"],[1,"in"],["type","0","autocomplete","off","matInput","",3,"ngModel","ngModelChange"],[1,"table","table-hover","table-responsive"],[4,"ngFor","ngForOf"],[1,"text-center"],["type","button",1,"btn",3,"ngClass","click"],["type","button",1,"btn","btn-outline-primary","mx-3",3,"click"],[1,"row","my-3"],[1,"col"],[1,"text-center","text-primary"],[1,"table","table-striped","table-inverse","table-responsive"],[1,"thead-inverse"],["class","row my-3",4,"ngIf"],["type","checkbox",1,"mx-3",3,"checked","click"],["scope","row"],[3,"click"],["aria-hidden","true",1,"fa","fa-trash","text-danger"]],template:function(t,e){1&t&&(a.TgZ(0,"div",0),a.TgZ(1,"button",1),a.NdJ("click",function(){return e.update()}),a.TgZ(2,"mat-icon"),a._uU(3,"save"),a.qZA(),a.qZA(),a.TgZ(4,"button",2),a.NdJ("click",function(){return e.goBack()}),a.TgZ(5,"mat-icon"),a._uU(6,"undo"),a.qZA(),a.qZA(),a.TgZ(7,"h4",3),a._uU(8),a.qZA(),a.TgZ(9,"div",4),a.TgZ(10,"div",5),a.TgZ(11,"mat-form-field"),a.TgZ(12,"mat-label"),a._uU(13,"H\u1ecd v\xe0 t\xean"),a.qZA(),a.TgZ(14,"input",6),a.NdJ("ngModelChange",function(t){return e.fullName=t}),a.qZA(),a.qZA(),a.TgZ(15,"mat-form-field"),a.TgZ(16,"mat-label"),a._uU(17,"\u0110\u01a1n v\u1ecb"),a.qZA(),a.TgZ(18,"input",6),a.NdJ("ngModelChange",function(t){return e.unit=t}),a.qZA(),a.qZA(),a.TgZ(19,"mat-form-field"),a.TgZ(20,"mat-label"),a._uU(21,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"),a.qZA(),a.TgZ(22,"input",6),a.NdJ("ngModelChange",function(t){return e.phoneNumber=t}),a.qZA(),a.qZA(),a.qZA(),a.TgZ(23,"table",7),a.TgZ(24,"thead"),a.TgZ(25,"tr"),a.TgZ(26,"th"),a._uU(27,"Module"),a.qZA(),a.TgZ(28,"th"),a._uU(29,"App"),a.qZA(),a.TgZ(30,"th"),a._uU(31,"api"),a.qZA(),a.TgZ(32,"th"),a._uU(33,"Option"),a.qZA(),a.qZA(),a.qZA(),a.YNc(34,Q,2,2,"tbody",8),a.qZA(),a.TgZ(35,"div",9),a.TgZ(36,"button",10),a.NdJ("click",function(){return e.lock=!e.lock}),a._uU(37),a.qZA(),a.TgZ(38,"button",11),a.NdJ("click",function(){return e.deletePer()}),a._uU(39,"Clear"),a.qZA(),a.qZA(),a.qZA(),a._UZ(40,"hr"),a.TgZ(41,"div",12),a.TgZ(42,"div",13),a.TgZ(43,"h5",14),a._uU(44,"Th\u1ed1ng k\xea truy c\u1eadp"),a.qZA(),a.TgZ(45,"table",15),a.TgZ(46,"thead",16),a.TgZ(47,"tr"),a.TgZ(48,"th"),a._uU(49,"API"),a.qZA(),a.TgZ(50,"th"),a._uU(51,"Status"),a.qZA(),a.TgZ(52,"th"),a._uU(53,"Count"),a.qZA(),a.TgZ(54,"th"),a._uU(55,"Detail"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(56,"tbody"),a.YNc(57,L,10,4,"tr",8),a.qZA(),a.qZA(),a._UZ(58,"hr"),a.qZA(),a.qZA(),a._UZ(59,"hr"),a.YNc(60,Y,23,3,"div",17),a.qZA()),2&t&&(a.Q6J("@slideIn",void 0),a.xp6(1),a.Q6J("@slideIn",void 0),a.xp6(3),a.Q6J("@slideIn",void 0),a.xp6(4),a.hij("User: ",e.fullName,""),a.xp6(6),a.Q6J("ngModel",e.fullName),a.xp6(4),a.Q6J("ngModel",e.unit),a.xp6(4),a.Q6J("ngModel",e.phoneNumber),a.xp6(12),a.Q6J("ngForOf",e.permissions),a.xp6(2),a.Q6J("ngClass",a.WLB(12,B,0==e.lock,1==e.lock)),a.xp6(1),a.hij(" ",0==e.lock?"On":"Off"," "),a.xp6(20),a.Q6J("ngForOf",e.log),a.xp6(3),a.Q6J("ngIf",e.logDetail.value.length>0))},directives:[k.lW,C.Hw,M.KE,M.hX,j.Nt,h.Fj,h.JJ,h.On,c.sg,c.mk,c.O5],pipes:[c.Ov,c.uU],styles:[""],data:{animation:[p.Y]}}),t})();const $=function(t,e){return{"btn-success":t,"btn-danger":e}};function G(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"tr"),a.TgZ(1,"td"),a._uU(2),a.qZA(),a.TgZ(3,"td"),a.TgZ(4,"a",9),a._uU(5),a.qZA(),a.qZA(),a.TgZ(6,"td"),a.TgZ(7,"button",10),a._uU(8),a.qZA(),a.qZA(),a.TgZ(9,"td"),a._uU(10),a.qZA(),a.TgZ(11,"td"),a.TgZ(12,"a",9),a._UZ(13,"i",11),a.qZA(),a.TgZ(14,"i",12),a.NdJ("click",function(){const e=a.CHM(t).$implicit;return a.oxw().deleteUsr(e._id)}),a.qZA(),a.qZA(),a.qZA()}if(2&t){const t=e.$implicit;a.Q6J("@slideIn",void 0),a.xp6(2),a.Oqu(t.usr),a.xp6(2),a.s9C("routerLink",t._id),a.xp6(1),a.Oqu(t.fullName),a.xp6(2),a.Q6J("ngClass",a.WLB(8,$,0==t.lock,1==t.lock)),a.xp6(1),a.hij(" ",t.lock?"Off":"On"," "),a.xp6(2),a.Oqu(t.email),a.xp6(2),a.s9C("routerLink",t._id)}}const X=[{path:"",component:D},{path:"user",component:(()=>{class t{constructor(t,e){this.plus=t,this.fb=e,this.api="user",this.permissions=[],this.userPermiss=[],this.searchForm=this.fb.group({what:["",h.kI.minLength(3)]}),this.main=this.fb.group({usr:[,[h.kI.required,h.kI.min(3),h.kI.max(100)]],pwd:[,[h.kI.required,h.kI.min(8),h.kI.max(100)]],level:[,[h.kI.min(3),h.kI.max(6)]],displayName:[,[h.kI.min(3),h.kI.max(100)]],email:[,[]],phoneNumber:[,[]],title:[,[]],depart:[,[]],unit:[,[]],note:[,[]],fullName:[,[h.kI.min(3),h.kI.max(100)]],SoHieuNhanSu:[,[]],BiDanh:[,[]],ChucDanh:[,[]],BoPhanLamViec:[,[]]})}ngOnInit(){this.getUsrs()}find(t){this.items=t}getUsrs(){this.plus.load(),this.plus.httpGet(this.api).subscribe(t=>{this.items=this.plus.Crypt_DecryptRest(t),this.plus.loaded()})}onEdit(t){this.userPermiss=[];const e=t;e.level.forEach(t=>(delete t._id,this.userPermiss.push(t.label))),this.editUsr=e}deleteUsr(t){this.plus.httpDelete(this.api,t).subscribe(t=>{this.plus.alertToasrt(t)})}update(){const t=this.editUsr;delete t.__v,this.plus.httpPut(this.api,t).subscribe(t=>{this.plus.alertToasrt(t)})}checkAll(t){this.editUsr.level=t.target.checked?this.permissions:[]}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(u.T),a.Y36(h.qu))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-user-list"]],decls:18,vars:3,consts:[[1,"container"],[1,"row"],[3,"api","data"],[1,"table","table-hover","table-inverse"],[1,"thead-inverse"],[1,"text-center"],[1,"text-primary"],[1,"fa","fa-refresh",3,"click"],[4,"ngFor","ngForOf"],[3,"routerLink"],["type","button",1,"btn",3,"ngClass"],[1,"fa","fa-pencil","text-success"],[1,"fa","fa-trash","text-danger",3,"click"]],template:function(t,e){1&t&&(a.TgZ(0,"div",0),a.TgZ(1,"div",1),a.TgZ(2,"app-search-api",2),a.NdJ("data",function(t){return e.find(t)}),a.qZA(),a.TgZ(3,"table",3),a.TgZ(4,"thead",4),a.TgZ(5,"tr"),a.TgZ(6,"th",5),a._uU(7,"T\xe0i kho\u1ea3n"),a.qZA(),a.TgZ(8,"th",5),a._uU(9,"T\xean"),a.qZA(),a.TgZ(10,"th",5),a._uU(11,"Tr\u1ea1ng th\xe1i"),a.qZA(),a.TgZ(12,"th",5),a._uU(13,"Email"),a.qZA(),a.TgZ(14,"th",6),a.TgZ(15,"i",7),a.NdJ("click",function(){return e.ngOnInit()}),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(16,"tbody"),a.YNc(17,G,15,11,"tr",8),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&t&&(a.Q6J("@slideIn",void 0),a.xp6(2),a.Q6J("api",e.api),a.xp6(15),a.Q6J("ngForOf",e.items))},directives:[d.W,c.sg,N.yS,c.mk],styles:[""],data:{animation:[p.Y]}}),t})()},{path:"user/:id",component:H},{path:"per",component:H},{path:"log",component:J},{path:"catalog",component:y},{path:"crypt",component:l}];let R=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[N.Bz.forChild(X)],N.Bz]}),t})();var V=i(43552);let W=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[c.ez,R,h.u5,h.UX,o.q,h.u5,n.m,r.a,V.D,s.F]]}),t})()},41007:function(t,e,i){"use strict";i.d(e,{m:function(){return c}});var s=i(35845),r=i(16073),n=i(61511),o=i(31572);let c=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[n.ez,r.UX,s.q]]}),t})()}}]);